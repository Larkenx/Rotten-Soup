{"version":3,"sources":["webpack:///./src/assets/js/game/entities/Entity.js","webpack:///./src/assets/js/game/entities/items/Item.js","webpack:///./src/assets/js/game/entities/items/potions/Potion.js","webpack:///./src/assets/js/game/entities/items/potions/HealthPotion.js","webpack:///./src/assets/js/game/modifiers/Effect.js","webpack:///./src/assets/js/game/modifiers/Buff.js","webpack:///./src/assets/js/game/entities/items/potions/StrengthPotion.js","webpack:///./src/assets/js/game/entities/items/potions/ManaPotion.js","webpack:///./src/assets/js/game/entities/items/weapons/Weapon.js","webpack:///./src/assets/js/game/modifiers/Enchantment.js","webpack:///./src/assets/js/game/entities/items/weapons/Sword.js","webpack:///./src/assets/js/game/entities/items/weapons/ranged/ammo/Ammo.js","webpack:///./src/assets/js/game/entities/items/weapons/ranged/ammo/Arrow.js","webpack:///./src/assets/js/game/utils/HelperFunctions.js","webpack:///./src/assets/js/game/entities/misc/Door.js","webpack:///./src/assets/js/game/entities/items/misc/Corpse.js","webpack:///./src/assets/js/game/entities/actors/Actor.js","webpack:///./src/assets/js/game/entities/items/weapons/ranged/RangedWeapon.js","webpack:///./src/assets/js/game/entities/items/weapons/ranged/Bow.js","webpack:///./src/assets/js/game/entities/actors/enemies/StatelessAI.js","webpack:///./src/assets/js/game/entities/actors/enemies/SimpleEnemy.js","webpack:///./src/assets/js/game/entities/actors/enemies/Skeleton.js","webpack:///./src/assets/js/game/entities/actors/enemies/Zombie.js","webpack:///./src/assets/js/game/magic/Spell.js","webpack:///./src/assets/js/game/entities/misc/Ladder.js","webpack:///./src/assets/js/game/entities/actors/Player.js","webpack:///./src/assets/js/game/map/Tile.js","webpack:///./src/assets/js/game/entities/actors/NPC.js","webpack:///./src/assets/js/game/entities/actors/enemies/Goblin.js","webpack:///./src/assets/js/game/entities/actors/enemies/Kobold.js","webpack:///./src/assets/js/game/entities/actors/enemies/Orc.js","webpack:///./src/assets/js/game/entities/actors/enemies/Rat.js","webpack:///./src/assets/js/game/entities/actors/enemies/Bat.js","webpack:///./src/assets/js/game/entities/actors/enemies/WildGoat.js","webpack:///./src/assets/js/game/entities/misc/Chest.js","webpack:///./src/assets/js/game/entities/items/misc/Key.js","webpack:///./src/assets/js/game/entities/items/misc/Spellbook.js","webpack:///./src/assets/js/game/entities/misc/LevelTransition.js","webpack:///./src/assets/js/game/map/GameMap.js","webpack:///./src/assets/js/game/entities/misc/LockedDoor.js","webpack:///./src/assets/js/game/entities/actors/enemies/boss/Lich.js","webpack:///./src/assets/js/game/map/generation/RandomCave.js","webpack:///./src/assets/js/game/map/generation/RandomDungeon.js","webpack:///./src/assets/js/game/map/generation/RandomSimplex.js","webpack:///./src/assets/js/game/map/generation/index.js","webpack:///./src/assets/js/game/Game.js","webpack:///./src/assets/js/game/GameDisplay.js","webpack:///src/components/StartMenu.vue","webpack:///./src/components/StartMenu.vue?ae3b","webpack:///./src/components/StartMenu.vue","webpack:///src/components/MessageLog.vue","webpack:///./src/components/MessageLog.vue?c1a4","webpack:///./src/components/MessageLog.vue","webpack:///src/components/GameDisplay.vue","webpack:///./src/components/GameDisplay.vue?4ee0","webpack:///./src/components/GameDisplay.vue","webpack:///src/components/Inventory.vue","webpack:///./src/components/Inventory.vue?6e28","webpack:///./src/components/Inventory.vue","webpack:///src/components/ItemTransferModal.vue","webpack:///./src/components/ItemTransferModal.vue?2fd8","webpack:///./src/components/ItemTransferModal.vue","webpack:///src/components/EnemyOverview.vue","webpack:///./src/components/EnemyOverview.vue?ade5","webpack:///./src/components/EnemyOverview.vue","webpack:///src/components/Minimap.vue","webpack:///./src/components/Minimap.vue?5922","webpack:///./src/components/Minimap.vue","webpack:///src/components/HUD/Stats.vue","webpack:///./src/components/HUD/Stats.vue?0328","webpack:///./src/components/HUD/Stats.vue","webpack:///src/components/HUD/Spellbook.vue","webpack:///./src/components/HUD/Spellbook.vue?f76f","webpack:///./src/components/HUD/Spellbook.vue","webpack:///src/components/HUD/ItemSlot.vue","webpack:///./src/components/HUD/ItemSlot.vue?2a66","webpack:///./src/components/HUD/ItemSlot.vue","webpack:///src/components/HUD/Equipment.vue","webpack:///./src/components/HUD/Equipment.vue?1196","webpack:///./src/components/HUD/Equipment.vue","webpack:///src/components/HelpDialog.vue","webpack:///./src/components/HelpDialog.vue?1328","webpack:///./src/components/HelpDialog.vue","webpack:///src/components/ToolDialog.vue","webpack:///./src/components/ToolDialog.vue?73f4","webpack:///src/components/HUD.vue","webpack:///./src/components/ToolDialog.vue","webpack:///./src/components/HUD.vue?f4fb","webpack:///./src/components/HUD.vue","webpack:///src/components/DeathModal.vue","webpack:///./src/components/DeathModal.vue?8509","webpack:///./src/components/DeathModal.vue","webpack:///src/App.vue","webpack:///./src/App.vue?21b1","webpack:///./src/App.vue","webpack:///./src/main.js"],"names":["xp_levels","i","push","Entity_Entity","constructor","x","y","options","this","Object","assign","undefined","id","setSprite","sprite","setSpriteHPBar","spriteHPBar","move","nx","ny","ntile","Game_Game","map","data","removeActor","actors","display","moveSprite","scale","anchor","set","placeAt","getTile","Item_Item","visible","super","hoverInfo","type","name","clipLocation","getTilesetCoords","use","getAction","action","drop","player","dropItem","Potion","HealthPotion_HealthPotion","log","heal","removeFromInventory","Effect","description","duration","applyEffect","entity","Effect_BleedEffect","dmg","cb","maxhp","damage","capitalize","Effect_RegenerationEffect","Buff_Buff","undoAction","initialDuration","StrengthBuff","amt","str","amount","StrengthPotion_StrengthPotion","buff","addNewBuff","ManaPotion_ManaPotion","restore","Weapon_Weapon","combat","blocked","equippable","equipped","enchantments","equipment","weapon","unequipWeapon","equipWeapon","roll","rolls","getRandomInt","sides","addNewEnchantment","enchantment","Enchantment","getEffect","Enchantment_BleedEnchantment","Sword","fg","attackVerbs","swordNames","createSword","sword","length","AMMO_TYPES","ARROW","Ammo_Ammo","ammo","unequipAmmo","equipAmmo","quantity","Arrow_Arrow","ammoType","SteelArrow","min","max","Math","ceil","floor","random","getNormalRandomInt","rand","gaussianRand","between","a","n","b","addPrefix","word","vowels","someWords","console","includes","HelperFunctions_itemTypes","STRENGTH_POTION","MANA_POTION","HEALTH_POTION","SWORD","STEEL_ARROW","getDiceRoll","getItemsFromDropTable","dropTable","minItems","maxItems","items","chosenItem","rot_default","RNG","getWeightedValue","getVisibleTiles","actor","visibleTiles","FOV","PreciseShadowcasting","inbounds","compute","range","r","visibility","Door_Door","bg","closed","react","openDoor","tileset","tileproperties","activated_id","texture","tilesetMapping","closeDoor","corpseTypes","SKELETON","HUMANOID","Corpse_Corpse","toLowerCase","rotten","turns","act","engine","lock","tint","idx","_scheduler","remove","indexOf","splice","removeChild","unlock","Actor_Actor","routine","corpseType","effects","head","torso","legs","inventory","item","menu","filter","e","effect","addNewEffect","memberOfInventory","findIndex","cell","is","addToInventory","newItem","nextFreeIndex","placeEntityBelow","assignSprite","removeItem","distanceTo","sqrt","pow","interact","setTimeout","tryMove","width","height","isDead","attack","ranged","verb","message","some","hp","invulnerable","gain_xp","death","mana","maxmana","fireRangedWeapon","dir","diff","DIRS","tx","ty","tile","enemies","hostile","enemy","evtdamage","ctile","background","children","corpse","unshift","scheduler","add","blood","bloodSprite","lib","position","tileSize","addChildAt","getHoverInfo","getMinDmg","wep","minWeaponDmg","getMaxDmg","maxWeaponDmg","RangedWeapon","createBow","StatelessAI_StatelessAI","config","ai","endTurn","dx","abs","dy","recalculatePath","playerInView","reduce","concat","wanders","morale","minPlayerDist","maxPlayerDist","melee","magic","chasing","pathToPlayer","path","findNearbyTiles","nearbyTiles","playerDistToTile","maxDist","farthestTile","currentDist","getFarthestAwayTile","fleeing","newPos","len","SimpleEnemy","Skeleton_Skeleton","randomHP","randomStr","def","Zombie_Skeleton","spellTypes","CONJURATION","CHARMS","ICE","AIR","EARTH","FIRE","POISON","NECROMANCY","TRANSLOCATION","TRANSMUTATION","HEXES","targetTypes","SELF","TARGET","Spell","manaCost","targetType","cast","Spell_MagicDart","hit","splashArt","target","caster","Spell_Pain","adjective","Spell_Regeneration","Spell_VampiricDraining","reanimate","undeadActor","getNearbyCorpses","cartOfCorpses","corpses","Spell_AnimateDead","forEach","Ladder_Ladder","direction","portal","levelName","currentLevel","replace","levelNumber","parseInt","changeLevels","pathfinding","Player_Player","targeting","casting","examining","leveled_up","mouseEnabled","xp","level","hpRecovery","manaRecovery","validTarget","currentSpell","spells","keyTimer","Path","AStar","nearbyEnemies","selectSpell","spell","level_up","remainingXP","getNearbyEnemies","window","addEventListener","handleEvent","evt","seen_tiles","visible_tiles","waitUntilPlayerReleases","removeEventListener","clearTempLog","confirmRangedFire","selectedTile","clearSelectedTile","confirmSpellcasting","eventToTile","changeSelectedTile","mouseMoved","code","keyCode","shift_pressed","getModifierState","movementKeys","cycleKeys","confirmKeys","exitKeys","preventDefault","keyMap","39","37","38","40","104","105","102","99","98","97","100","103","101","75","85","76","78","74","66","72","89","70","90","188","71","190","88","Date","start","getTime","msg","inViewport","cycleThroughSelectableEnemies","climb","selectNearestEnemyTile","pickup","tileItems","el","clearSprite","itemTypes","prettyItemTypes","slice","buffer","buf","ladder","clear","getTileInfo","Tile_Tile","obstacles","updateTileInfo","obstacle","blocks_vision","obs","NPC","Goblin_Goblin","Kobold_Kobold","Orc_Orc","empowered","amtHealed","Rat","symbol","Bat_Bat","WildGoat_WildGoat","Chest_Chest","open","Key","Spellbook_Spellbook","_extends","s","LevelTransition_LevelTransition","entityShop","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","keys","17","18","19","20","21","regeneration","cd","maxCD","pain","vampiricDraining","animateDead","intro","lostHP","nearbyCorpses","cooldown","22","23","24","25","26","27","28","createEntity","entity_id","frame_id","createMapFromJSON","json","layers","gameMap","GameMap_GameMap","createFromJSON","loadedIDS","playerLocation","Array","j","itemLayers","portalLayers","layer","properties","processObstacleLayer","processActorLayer","processItemLayer","processPortalLayer","playerID","newActor","findActor","ladders","print","row","index","substr","chests","possibleActors","adjTiles","adjacentTiles","dist","ROT","actorTextures","ORC","EMPOWERED_ORC","GOBLIN","RAT","BAT","KOBOLD","flatten","arr","acc","val","isArray","randomTile","validTiles","split","Number","RandomDungeon_actorTextures","RandomDungeon_randomTile","textures","OLD_BEACH","upperLeft","top","upperRight","left","center","right","lowerLeft","bottom","lowerRight","endLeft","middleCorridorHorizontal","endRight","endTop","middleCorridorVertical","endBottom","single","BEACH","OCEAN_WATER","COASTAL_WATER","altUpperRight","FOREST","hasCorridors","MOUNTAIN","middleT","middleIntersection","SNOW","RandomSimplex_actorTextures","WILD_GOAT","wildGrass1","wildGrass2","wildGrass3","wildGrass4","shrub1","shrub3","mushroom1","tree","flower1","flower2","flower3","flower4","generation","randomCave","freeCells","cellularMap","Map","Cellular","randomize","create","connect","l","walls","floors","computeBitmask","sum","above","below","ur","ll","ul","lr","free","coords","wallSums","floorSums","sym","ladderGoingDown","chosenMob","mobDistribution","mobArray","randomMob","createActor","randomDungeon","corridorFloor","middle","island","leftT","rightT","topT","bottomT","doors","actorString","createdLadders","rogueMap","Digger","roomWidth","corrdiorLength","roomDugPercentage","computeBitmaskFloors","coord","computeBitmaskWalls","room","getRooms","getLeft","getRight","getTop","getBottom","wleft","wright","wtop","wbottom","getDoors","door","floor_ids","values","chosenActor","possibleActorTextures","chest","object","randomProperty","randomSimplexMap","zoom","w","h","rng1","pm_prng_default","rng2","gen1","simplex_noise_default","nextDouble","bind","noise1","noise2D","getElevation","frequency","biome","elevation","textureType","sumToTexture","warn","tileOptions","getTexture","floraFaunaProbability","[object Object]","t","skipHello","Game_randomSimplexMap","Game_randomDungeon","Game_randomCave","untargetableBorders","app","overview","dev","HUD","turn","loaded","levels","messageHistory","tempMessages","minimap","pathToTarget","targetReticle","enemyCycle","enemyCycleIndex","userSettings","hpBars","init","playerSpriteID","displayOptions","forceSquareRatio","layout","tileWidth","tileHeight","staticBackground","animatedBackground","FOVBackground","HUDBackground","movingSprites","viewPort","spriteBox","loadAssets","renderer","stage","view","resources","url","on","handleAssetLoad","load","tilecount","frame","renderLoop","delta","obj","o","distX","distY","movementSpeed","ticker","tilewidth","tileheight","cols","columns","renderMap","removeChildren","animated","animated_id","frames","AnimatedSprite","animationSpeed","interval","play","addChild","generateTexture","camera","startingPos","revealed","alpha","drawMiniMap","updateMap","lighter1","c","g","gx","gy","beginFill","drawRect","endFill","animate","belowPlayer","props","randomInterval","getContainer","loader","resource","graphics","cx","cy","barLength","text","progress","fill","fontSize","fontFamily","lineStyle","drawRoundedRect","maxInteriorBarLength","currentBarLength","px","py","scheduleAllActors","initializeMinimap","document","getElementById","appendChild","Scheduler","Simple","Engine","Display","setOptions","spacing","newLevel","otherActors","draw","brightenColor","color","hsl_color","Color","rgb2hsl","fromString","toRGB","hsl2rgb","endingPos","sort","a1","a2","getClosestEnemyToPlayer","blockedTile","x0","x1","y0","y1","sx","sy","err","e2","describeSelectedTile","newTarget","names","obstacleDescriptions","prettyNames","inView","printPlayerTile","plugins","interaction","mouse","global","tmp","message_color","defend","information","player_move","alert","StartMenu","components_StartMenu","render","_vm","_h","$createElement","_c","_self","attrs","dark","grid-list-xl","xs12","_v","wrap","_l","key","staticStyle","padding","xs4","_s","margin-right","col","xs1","align-center","class","spriteIsSelected","selectedSprite","src","getPlayerSpriteImage","click","$event","selectSprite","staticRenderFns","src_components_StartMenu","__webpack_require__","normalizeComponent","ssrContext","MessageLog","offset","components_MessageLog","column","align-start","staticClass","getMessages","style","getTempMessages","max-width","small","up","down","resetOffset","src_components_MessageLog","MessageLog_normalizeComponent","components_GameDisplay","selectortype_template_index_0_src_components_GameDisplay","margin","src_components_GameDisplay","GameDisplay_normalizeComponent","Inventory","draggable","clientX","clientY","components_Inventory","fluid","element","model","value","callback","$$v","expression","getInventory","selectedItem","colorSlot","inventory_cell","open-delay","_e","slot","ripple","useItem","contextmenu","show","offset-x","nudge-width","close-on-click","absolute","position-x","position-y","$set","avatar","getInventorySprite","flat","overlay","overlap","src_components_Inventory","Inventory_normalizeComponent","ItemTransferModal","components_ItemTransferModal","xs5","xs2","src_components_ItemTransferModal","ItemTransferModal_normalizeComponent","EnemyOverview","components_EnemyOverview","min-height","md4","font-size","src_components_EnemyOverview","EnemyOverview_normalizeComponent","Minimap","components_Minimap","xs10","src_components_Minimap","Minimap_normalizeComponent","Stats","costOfLevel","HUD_Stats","min-width","md1","padding-left","md2","getLevel","md5","getRemainingXP","md3","getStrength","getDamageRange","getCurrentWeapon","getCurrentWeaponEnchantments","md6","components_HUD_Stats","Stats_normalizeComponent","HUD_Spellbook","components_HUD_Spellbook","getSpells","selectedSpell","highlightSpell","getSpellSplashArt","src_components_HUD_Spellbook","Spellbook_normalizeComponent","ItemSlot","HUD_ItemSlot","Equipment","ItemSlot_normalizeComponent","HUD_Equipment","margin-top","altSprite","components_HUD_Equipment","Equipment_normalizeComponent","HelpDialog","helpDialog","components_HelpDialog","icon","stopPropagation","xs6","cheat","src_components_HelpDialog","HelpDialog_normalizeComponent","ToolDialog","newState","components_ToolDialog","toolDialog","offset-xs2","toggleHPBars","ToolDialog_normalizeComponent","components_HUD","margin-bottom","md8","getHP","getMaxHP","getMana","getMaxMana","info","getCurrentLevel","getCurrentLevelDepth","src_components_HUD","HUD_normalizeComponent","DeathModal","reload","components_DeathModal","playerIsDead","raised","nativeOn","startNewGame","src_components_DeathModal","DeathModal_normalizeComponent","Game","App","selectortype_template_index_0_src_App","directives","rawName","dismissible","unstableBuildMessage","playerSelected","spriteSelected","loadGame","href","src_App","App_normalizeComponent","vue_esm","vuetify_default","productionTip","components","template"],"mappings":"gPAEO,IAAIA,GAAa,IACxB,IAAK,IAAIC,EAAI,EAAGA,EAAI,IAAKA,IAAKD,EAAUE,KAAK,IAAMF,EAAUC,EAAI,UAIpDE,EACZC,YAAYC,EAAGC,EAAGC,GAIjB,GAHAC,KAAKH,EAAIA,EACTG,KAAKF,EAAIA,EACTG,OAAOC,OAAOF,KAAMD,QACDI,IAAfJ,EAAQK,GAAkB,KAAM,0CAGrCC,UAAUC,GACTN,KAAKM,OAASA,EAGfC,eAAeD,GACdN,KAAKQ,YAAcF,EAGpBG,KAAKC,EAAIC,GACR,IAAIC,EAAQC,GAAKC,IAAIC,KAAKJ,GAAID,GAClBG,GAAKC,IAAIC,KAAKf,KAAKF,GAAGE,KAAKH,GACjCmB,YAAYhB,MAClBY,EAAMK,OAAOvB,KAAKM,MAClBa,GAAKK,QAAQC,WAAWnB,KAAKM,OAAQI,EAAIC,GACrCX,KAAKH,EAAIa,GACZV,KAAKM,OAAOc,MAAMvB,GAAK,EACvBG,KAAKM,OAAOe,OAAOC,IAAI,EAAG,IAChBtB,KAAKH,EAAIa,IACnBV,KAAKM,OAAOc,MAAMvB,EAAI,EACtBG,KAAKM,OAAOe,OAAOC,IAAI,EAAG,IAE3BtB,KAAKH,EAAIa,EACTV,KAAKF,EAAIa,OACgBR,IAArBH,KAAKQ,aACRK,GAAKK,QAAQC,WAAWnB,KAAKQ,YAAaE,EAAIC,EAAK,IAQrDY,QAAQb,EAAIC,GACCE,GAAKW,QAAQd,EAAIC,GACvBM,OAAOvB,KAAKM,MAClBA,KAAKH,EAAIa,EACTV,KAAKF,EAAIa,OAEWR,IAAhBH,KAAKM,QAAsBO,GAAKK,QAAQC,WAAWnB,KAAKM,OAAQI,EAAIC,GAAI,UC9CzDc,UAAa9B,EACjCC,YAAYC,EAAGC,EAAGC,GACjBA,EAAQ2B,SAAU,EAClBC,MAAM9B,EAAGC,EAAGC,GAIb6B,YACC,SAAU5B,KAAK6B,OAAO7B,KAAK8B,SAG5BC,eACSC,iBAAiBhC,KAAKI,IAG9B,MADU,kBAIX6B,OAIAC,YACC,OAAOlC,KAAKmC,OAKbC,OACCvB,GAAKwB,OAAOC,SAAStC,aClCFuC,UAAed,EACnC7B,YAAYC,EAAGC,EAAGC,GACjBA,EAAQoC,OAAS,QACjBR,MAAM9B,EAAGC,EAAGC,UCFOyC,UAAqBD,EAEzC3C,YAAYC,EAAGC,EAAGM,GACjBuB,MAAM9B,EAAGC,GACRM,GAAIA,EACJyB,KAAM,kBAIRI,MACCpB,GAAK4B,IAAI,sDAAuD,UAChE5B,GAAKwB,OAAOK,KAAK,IACjB7B,GAAKwB,OAAOM,oBAAoB3C,MAGjC4B,YACC,MAAO,iCCTIgB,EACZhD,YAAYG,GAEX,GADAE,OAAOC,OAAOF,KAAMD,QAELI,IAAdH,KAAK8B,WACgB3B,IAArBH,KAAK6C,kBACW1C,IAAhBH,KAAKmC,aACahC,IAAlBH,KAAK8C,SAEL,KAAM,iCAGRC,YAAYC,GACU,GAAjBhD,KAAK8C,WAGT9C,KAAKmC,OAAOa,GACZhD,KAAK8C,mBAIMG,UAAoBL,EAChChD,cACC+B,OACCG,KAAM,QACNK,OAAQa,IACP,IAAIE,KAA2B,GAAlBF,EAAOG,GAAGC,OACX,IAARF,IAAWA,EAAM,GACrBF,EAAOK,OAAOH,IAEfL,YAAaG,IACZ,IAAIE,KAA2B,GAAlBF,EAAOG,GAAGC,OAEvB,OADY,IAARF,IAAWA,EAAM,GACjBF,IAAWnC,GAAKwB,wBAAgCa,eACrCF,EAAOlB,KAAKwB,qBAAqBJ,mBAEjDJ,SAAU,WAKAS,UAA2BX,EACvChD,cACC+B,OACCG,KAAM,eACNK,OAAQa,IACPA,EAAON,KAAK,KAEbG,YAAaG,GACRA,IAAWnC,GAAKwB,OAAe,+BACpBW,EAAOlB,KAAKwB,sCAE5BR,SAAU,WCzDAU,UAAaZ,EACzBhD,YAAYG,GAEX,QAA2BI,IAAvBJ,EAAQ0D,WACX,KAAM,qDAEP9B,MAAM5B,GACNC,KAAK0D,gBAAkB1D,KAAK8C,SAI7BC,YAAYC,GACPhD,KAAK8C,WAAa9C,KAAK0D,iBAC1B1D,KAAKmC,OAAOa,GACZhD,KAAK8C,YACuB,IAAlB9C,KAAK8C,UACfjC,GAAK4B,YAAYzC,KAAK8B,oBAAqB,SAC3C9B,KAAKyD,WAAWT,GAChBhD,KAAK8C,YAEL9C,KAAK8C,kBAKKa,UAAqBH,EACjC5D,YAAYgE,GACXjC,OACCG,KAAM,gBACNK,OAASa,IACRA,EAAOG,GAAGU,KAAOD,GAElBH,WAAaT,IACZA,EAAOG,GAAGU,KAAOD,GAElBf,YAAcG,MACHA,EAAOlB,aAAa8B,kBAAoB5D,KAAK8C,iBAExDA,SAAU,EACVgB,OAAQF,WCxCUG,UAAuBxB,EAE3C3C,YAAYC,EAAGC,EAAGM,GACjBuB,MAAM9B,EAAGC,GACRM,GAAIA,EACJyB,KAAM,oBAEP7B,KAAKgE,KAAO,IAAIL,EAAa,GAG9B1B,MACCpB,GAAKwB,OAAO4B,WAAWjE,KAAKgE,MAC5BnD,GAAK4B,yEAAyEzC,KAAKgE,KAAKlB,SAAW,WAAY,UAC/GjC,GAAKwB,OAAOM,oBAAoB3C,MAGjC4B,YACC,kBAAmB5B,KAAKgE,KAAKF,kBAAkB9D,KAAKgE,KAAKlB,wBCjBtCoB,UAAmB3B,EAEvC3C,YAAYC,EAAGC,EAAGM,GACjBuB,MAAM9B,EAAGC,GACRM,GAAIA,EACJyB,KAAM,gBAIRI,MACCpB,GAAK4B,IAAI,sDAAuD,UAChE5B,GAAKwB,OAAO8B,QAAQ,IACpBtD,GAAKwB,OAAOM,oBAAoB3C,MAGjC4B,YACC,MAAO,kCCbYwC,UAAe3C,EACnC7B,YAAYC,EAAGC,EAAGC,GACjB,GAAuB,OAAnBA,EAAQsE,OACX,4EAA6EtE,EAAQ+B,OACtF/B,EAAQ2B,SAAU,EAClB3B,EAAQuE,SAAU,EAClBvE,EAAQsE,OAAOE,YAAa,EAC5BxE,EAAQsE,OAAOG,UAAW,EAC1B7C,MAAM9B,EAAGC,EAAGC,GACZC,KAAKmD,GAAKnD,KAAKqE,OACfrE,KAAKmD,GAAGsB,gBACRzE,KAAKmC,OAAS,QAGfF,MACKpB,GAAKwB,OAAOc,GAAGuB,UAAUC,SAAW3E,KACvCa,GAAKwB,OAAOuC,gBAEZ/D,GAAKwB,OAAOwC,YAAY7E,MAI1B8E,OACC,IAAI5B,EAAM,EACV,IAAK,IAAIzD,EAAI,EAAGA,EAAIO,KAAKmD,GAAG4B,MAAOtF,IAClCyD,GAAO8B,EAAa,EAAGhF,KAAKmD,GAAG8B,OAEhC,OAAO/B,EAGRhB,YACC,OAAIlC,KAAKmD,GAAGqB,SAAiB,UACtBxE,KAAKmC,OAMb+C,kBAAkBC,GACjBnF,KAAKmD,GAAGsB,aAAa/E,KAAKyF,GAG3BvD,YACC,iBAAkB5B,KAAKmD,GAAG4B,SAAS/E,KAAKmD,GAAG8B,MAAQjF,KAAKmD,GAAG4B,eChDhDK,EAEZxF,YAAYG,GAEX,GADAE,OAAOC,OAAOF,KAAMD,QACFI,IAAdH,KAAK8B,WAA2C3B,IAArBH,KAAK6C,kBAAgD1C,IAAnBH,KAAKqF,UACrE,KAAM,6CAKIC,UAAyBF,EACrCxF,cACC+B,OACCG,KAAM,QACNe,YAAa,8DACbwC,UAAW,IACH,IAAIpC,WCVFsC,UAAcnB,EACvBxE,YAAYC,EAAGC,EAAGmF,EAAOF,EAAOjD,EAAM1B,GAClCuB,MAAM9B,EAAGC,GACLM,GAAIA,EACJ0B,KAAMA,EACND,KAAM,QACN2D,GAAI,SACJnB,QACIU,MAAOA,EACPE,MAAOA,GAEXQ,aAAc,UAAW,UAAW,SAAU,aAK1D,IAAIC,GACA,aACA,YACA,eACA,YACA,SACA,UACA,mBACA,oBACA,wBACA,mBACA,eACA,WACA,UACA,cACA,cACA,cACA,kBACA,uBACA,UACA,YACA,SACA,YACA,QACA,8BACA,+BACA,QACA,qBACA,mBACA,kBACA,aACA,oBACA,YACA,mBACA,WACA,UACA,UACA,YACA,aACA,aACA,OACA,aACA,aACA,eACA,MACA,eACA,WACA,WACA,SACA,SACA,kBACA,aACA,aACA,WACA,UACA,aACA,UACA,eACA,YACA,WACA,YACA,gBACA,cACA,SACA,eACA,aACA,eACA,YACA,UACA,cACA,YACA,0BACA,YACA,YACA,eACA,WACA,YACA,UACA,WACA,eACA,cACA,QACA,UACA,YACA,YACA,SACA,gBACA,iBACA,WACA,aACA,WACA,eACA,SACA,aACA,WACA,YACA,QACA,gBACA,UACA,WACA,aACA,WACA,WACA,wBACA,eACA,aACA,uBACA,UACA,WACA,OACA,WACA,SACA,gBACA,iBACA,gBACA,iBACA,cACA,cACA,SACA,WACA,WACA,YACA,SAGG,SAASC,EAAY9F,EAAGC,EAAGM,GAC9B,IAAIwF,EAAQ,IAAIL,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","file":"static/js/app.f68b956983b035d010d5.js","sourcesContent":["import { Game } from '#/Game.js'\r\n\r\nexport let xp_levels = [50]\r\nfor (let i = 1; i < 100; i++) xp_levels.push(1.5 * xp_levels[i - 1])\r\n\r\n/* Entities are in-game objects that exist in the map. They have symbols,\r\n * foregrounds, backgrounds, descriptions, names, visibility, and blocked properties. */\r\nexport class Entity {\r\n\tconstructor(x, y, options) {\r\n\t\tthis.x = x\r\n\t\tthis.y = y\r\n\t\tObject.assign(this, options)\r\n\t\tif (options.id === undefined) throw 'Error - entity created without valid id'\r\n\t}\r\n\r\n\tsetSprite(sprite) {\r\n\t\tthis.sprite = sprite\r\n\t}\r\n\r\n\tsetSpriteHPBar(sprite) {\r\n\t\tthis.spriteHPBar = sprite\r\n\t}\r\n\r\n\tmove(nx, ny) {\r\n\t\tlet ntile = Game.map.data[ny][nx] // new tile to move to\r\n\t\tlet ctile = Game.map.data[this.y][this.x] // current tile\r\n\t\tctile.removeActor(this) // remove this actor from this tile\r\n\t\tntile.actors.push(this) // add this actor to the new tile\r\n\t\tGame.display.moveSprite(this.sprite, nx, ny)\r\n\t\tif (this.x < nx) {\r\n\t\t\tthis.sprite.scale.x = -1\r\n\t\t\tthis.sprite.anchor.set(1, 0)\r\n\t\t} else if (this.x > nx) {\r\n\t\t\tthis.sprite.scale.x = 1\r\n\t\t\tthis.sprite.anchor.set(0, 0)\r\n\t\t}\r\n\t\tthis.x = nx // update x,y coords to new coords\r\n\t\tthis.y = ny\r\n\t\tif (this.spriteHPBar !== undefined) {\r\n\t\t\tGame.display.moveSprite(this.spriteHPBar, nx, ny - 0.5)\r\n\t\t}\r\n\t\t// this.sprite.position.set(this.x * 32, this.y * 32)\r\n\t\t// Game.drawActor(this); // draw the actor at the new spot\r\n\t\t// Game.drawViewPort();\r\n\t\t// Game.drawMiniMap();\r\n\t}\r\n\r\n\tplaceAt(nx, ny) {\r\n\t\tlet ntile = Game.getTile(nx, ny) // new tile to move to\r\n\t\tntile.actors.push(this) // add this actor to the new tile\r\n\t\tthis.x = nx // update x,y coords to new coords\r\n\t\tthis.y = ny\r\n\t\t// Place the sprite directly at the new location\r\n\t\tif (this.sprite !== undefined) Game.display.moveSprite(this.sprite, nx, ny, false)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/Entity.js","/**\n * Created by larken on 7/12/17.\n */\n\nimport { Game } from '#/Game.js'\nimport { Entity } from '#/entities/Entity.js'\n\nexport default class Item extends Entity {\n\tconstructor(x, y, options) {\n\t\toptions.visible = true\n\t\tsuper(x, y, options)\n\t}\n\n\t/* UI / Front End functions */\n\thoverInfo() {\n\t\treturn `${this.type}${this.name}\\n`\n\t}\n\n\tclipLocation() {\n\t\tlet c = getTilesetCoords(this.id)\n\t\t// let css = `rect(${c[1]}px 32px 32px ${c[0]}px)`;\n\t\tlet css = 'rect(0,32,32,0)'\n\t\treturn css\n\t}\n\n\tuse() {\n\t\t// to be overwritten\n\t}\n\n\tgetAction() {\n\t\treturn this.action\n\t}\n\n\t// making a major assumption that the player is the only thing that drops things.\n\t// might change if some enemy type needs to do so\n\tdrop() {\n\t\tGame.player.dropItem(this)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/Item.js","import Item from '#/entities/items/Item.js'\r\n\r\nexport default class Potion extends Item {\r\n\tconstructor(x, y, options) {\r\n\t\toptions.action = 'Drink'\r\n\t\tsuper(x, y, options)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/potions/Potion.js","import Potion from '#/entities/items/potions/Potion.js'\r\nimport {Game} from '#/Game.js'\r\n\r\nexport default class HealthPotion extends Potion {\r\n\r\n\tconstructor(x, y, id) {\r\n\t\tsuper(x, y, {\r\n\t\t\tid: id,\r\n\t\t\ttype: 'Health Potion'\r\n\t\t})\r\n\t}\r\n\r\n\tuse() {\r\n\t\tGame.log('You drink a health potion. It restores a little HP.', 'defend')\r\n\t\tGame.player.heal(25)\r\n\t\tGame.player.removeFromInventory(this)\r\n\t}\r\n\r\n\thoverInfo() {\r\n\t\treturn 'Effect: Heals for 25 HP'\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/potions/HealthPotion.js","/*\r\n An effect is exclusively carried out to manipulate an Entity in some way (typically an actor, but we might carry\r\n it out against other entities like weapons (e.g. imbue a sword with fire damage for 5 turns)). We can divide up effects\r\n in different types of effects:\r\n - Effects that are immediate versus Effects that exist over multiple turns/ticks in the game.\r\n ~ examples include a health potion that restores HP immediately vs a strength potion which might increase str for 5 turns\r\n */\r\n\r\nimport { Game } from '#/Game.js'\r\n\r\nexport class Effect {\r\n\tconstructor(options) {\r\n\t\tObject.assign(this, options)\r\n\t\tif (\r\n\t\t\tthis.name === undefined ||\r\n\t\t\tthis.description === undefined ||\r\n\t\t\tthis.action === undefined ||\r\n\t\t\tthis.duration === undefined\r\n\t\t)\r\n\t\t\tthrow 'Effect missing critical fields'\r\n\t}\r\n\r\n\tapplyEffect(entity) {\r\n\t\tif (this.duration == 0) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.action(entity)\r\n\t\tthis.duration--\r\n\t}\r\n}\r\n\r\nexport class BleedEffect extends Effect {\r\n\tconstructor() {\r\n\t\tsuper({\r\n\t\t\tname: 'Bleed',\r\n\t\t\taction: entity => {\r\n\t\t\t\tlet dmg = ~~(entity.cb.maxhp * 0.1)\r\n\t\t\t\tif (dmg === 0) dmg = 1\r\n\t\t\t\tentity.damage(dmg)\r\n\t\t\t},\r\n\t\t\tdescription: entity => {\r\n\t\t\t\tlet dmg = ~~(entity.cb.maxhp * 0.1)\r\n\t\t\t\tif (dmg === 0) dmg = 1\r\n\t\t\t\tif (entity === Game.player) return `You bleed for ${dmg} damage.`\r\n\t\t\t\telse return `${entity.name.capitalize()} took ${dmg} bleed damage.`\r\n\t\t\t},\r\n\t\t\tduration: 3\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport class RegenerationEffect extends Effect {\r\n\tconstructor() {\r\n\t\tsuper({\r\n\t\t\tname: 'Regeneration',\r\n\t\t\taction: entity => {\r\n\t\t\t\tentity.heal(10)\r\n\t\t\t},\r\n\t\t\tdescription: entity => {\r\n\t\t\t\tif (entity === Game.player) return 'You regenerate 10 health.'\r\n\t\t\t\telse return `${entity.name.capitalize()} regenerated 10 health.`\r\n\t\t\t},\r\n\t\t\tduration: 5\r\n\t\t})\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/modifiers/Effect.js","import {Game} from '#/Game.js'\r\nimport {Effect} from '#/modifiers/Effect.js'\r\n/* Very similar class to Effect; however, instead of performing an action each turn, this will perform\r\n it once during the initial proc of the effect, then it will remove the effect after the buff wears off. It will\r\n still be added as an effect under the Actor effects array */\r\nexport class Buff extends Effect {\r\n\tconstructor(options) {\r\n\t\t// buffs must specify a way to 'undo' the temporary effect it has on the entity\r\n\t\tif (options.undoAction === undefined)\r\n\t\t\tthrow 'Buffs must declare a way to undo temporary effects'\r\n\r\n\t\tsuper(options)\r\n\t\tthis.initialDuration = this.duration // 'remember' the initial duration\r\n\t}\r\n\r\n\t// overriding super method\r\n\tapplyEffect(entity) {\r\n\t\tif (this.duration === this.initialDuration) {\r\n\t\t\tthis.action(entity)\r\n\t\t\tthis.duration--\r\n\t\t} else if (this.duration === 1) {\r\n\t\t\tGame.log(`Your ${this.name} has expired.`, 'alert')\r\n\t\t\tthis.undoAction(entity)\r\n\t\t\tthis.duration--\r\n\t\t} else {\r\n\t\t\tthis.duration--\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class StrengthBuff extends Buff {\r\n\tconstructor(amt) {\r\n\t\tsuper({\r\n\t\t\tname: 'Strength Buff',\r\n\t\t\taction: (entity) => {\r\n\t\t\t\tentity.cb.str += amt\r\n\t\t\t},\r\n\t\t\tundoAction: (entity) => {\r\n\t\t\t\tentity.cb.str -= amt\r\n\t\t\t},\r\n\t\t\tdescription: (entity) => {\r\n\t\t\t\treturn `${entity.name} has +${amt} Strength for ${this.duration} turns`\r\n\t\t\t},\r\n\t\t\tduration: 5,\r\n\t\t\tamount: amt\r\n\t\t})\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/modifiers/Buff.js","import Potion from '#/entities/items/potions/Potion.js'\r\nimport {Game} from '#/Game.js'\r\nimport {StrengthBuff} from '#/modifiers/Buff.js'\r\n\r\nexport default class StrengthPotion extends Potion {\r\n\r\n\tconstructor(x, y, id) {\r\n\t\tsuper(x, y, {\r\n\t\t\tid: id,\r\n\t\t\ttype: 'Strength Potion',\r\n\t\t})\r\n\t\tthis.buff = new StrengthBuff(3)\r\n\t}\r\n\r\n\tuse() {\r\n\t\tGame.player.addNewBuff(this.buff)\r\n\t\tGame.log(`You drink a strength potion. It boosts your strength for the next ${this.buff.duration + 1} moves.`, 'defend')\r\n\t\tGame.player.removeFromInventory(this)\r\n\t}\r\n\r\n\thoverInfo() {\r\n\t\treturn `Effect: +${this.buff.amount} STR for ${this.buff.duration} moves`\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/potions/StrengthPotion.js","import Potion from '#/entities/items/potions/Potion.js'\r\n\r\nimport {Game} from '#/Game.js'\r\n\r\nexport default class ManaPotion extends Potion {\r\n\r\n\tconstructor(x, y, id) {\r\n\t\tsuper(x, y, {\r\n\t\t\tid: id,\r\n\t\t\ttype: 'Mana Potion',\r\n\t\t})\r\n\t}\r\n\r\n\tuse() {\r\n\t\tGame.log('You drink a mana potion. It restores a little mana.', 'defend')\r\n\t\tGame.player.restore(10)\r\n\t\tGame.player.removeFromInventory(this)\r\n\t}\r\n\r\n\thoverInfo() {\r\n\t\treturn 'Effect: Restores 10 mana'\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/potions/ManaPotion.js","/**\n * Created by Larken on 6/22/2017.\n */\nimport { Game } from '#/Game.js'\nimport Item from '#/entities/items/Item.js'\nimport { getRandomInt } from '#/utils/HelperFunctions.js'\n\nexport default class Weapon extends Item {\n\tconstructor(x, y, options) {\n\t\tif (options.combat === null)\n\t\t\tthrow `Error - no options.combat property defined. Bad weapon creation for ${options.name}`\n\t\toptions.visible = true\n\t\toptions.blocked = false\n\t\toptions.combat.equippable = true\n\t\toptions.combat.equipped = false\n\t\tsuper(x, y, options)\n\t\tthis.cb = this.combat\n\t\tthis.cb.enchantments = []\n\t\tthis.action = 'Equip'\n\t}\n\n\tuse() {\n\t\tif (Game.player.cb.equipment.weapon === this) {\n\t\t\tGame.player.unequipWeapon()\n\t\t} else {\n\t\t\tGame.player.equipWeapon(this)\n\t\t}\n\t}\n\n\troll() {\n\t\tlet dmg = 0\n\t\tfor (let i = 0; i < this.cb.rolls; i++) {\n\t\t\tdmg += getRandomInt(1, this.cb.sides)\n\t\t}\n\t\treturn dmg\n\t}\n\n\tgetAction() {\n\t\tif (this.cb.equipped) return 'Unequip'\n\t\treturn this.action\n\t}\n\n\t/* Effects are equivalent to enchantments, in a way...\n     * Might need to do some work on editing how these are displayed in the UI\n     */\n\taddNewEnchantment(enchantment) {\n\t\tthis.cb.enchantments.push(enchantment)\n\t}\n\n\thoverInfo() {\n\t\treturn `Damage: ${this.cb.rolls}-${this.cb.sides * this.cb.rolls}`\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/weapons/Weapon.js","import {BleedEffect} from '#/modifiers/Effect.js'\r\n\r\nexport class Enchantment {\r\n\r\n\tconstructor(options) {\r\n\t\tObject.assign(this, options)\r\n\t\tif (this.name === undefined || this.description === undefined || this.getEffect === undefined)\r\n\t\t\tthrow 'Enchantment missing critical fields'\r\n\t}\r\n\r\n}\r\n\r\nexport class BleedEnchantment extends Enchantment {\r\n\tconstructor() {\r\n\t\tsuper({\r\n\t\t\tname: 'Bleed',\r\n\t\t\tdescription: 'Applies a bleed effect on-hit, dealing % max health damage.',\r\n\t\t\tgetEffect: () => {\r\n\t\t\t\treturn new BleedEffect()\r\n\t\t\t},\r\n\t\t})\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/modifiers/Enchantment.js","/**\r\n * Created by Larken on 6/22/2017.\r\n */\r\n\r\nimport Weapon from '#/entities/items/weapons/Weapon.js'\r\nimport { getRandomInt } from '#/utils/HelperFunctions.js'\r\nimport { BleedEnchantment } from '#/modifiers/Enchantment.js'\r\n\r\nexport class Sword extends Weapon {\r\n    constructor(x, y, sides, rolls, name, id) {\r\n        super(x, y, {\r\n            id: id,\r\n            name: name,\r\n            type: 'Sword',\r\n            fg: 'orange',\r\n            combat: {\r\n                rolls: rolls,\r\n                sides: sides\r\n            },\r\n            attackVerbs: ['slashed', 'stabbed', 'gutted', 'sliced']\r\n        })\r\n    }\r\n}\r\n\r\nlet swordNames = [\r\n    'Caledfwlch',\r\n    'Hywelbane',\r\n    'Brightkiller',\r\n    'Excalibur',\r\n    'Joyeux',\r\n    'Dyrnwyn',\r\n    'Johnny Corkscrew',\r\n    'The Sword of Leah',\r\n    'The Sword of Shannara',\r\n    'The Vorpal Sword',\r\n    'Seraph Blade',\r\n    'Glorious',\r\n    'Cortana',\r\n    'Heosphorous',\r\n    'Phaesphoros',\r\n    'Maellartach',\r\n    'The Rivan Sword',\r\n    'The Sword of Shadows',\r\n    'Sikanda',\r\n    'Dragnipur',\r\n    'Chance',\r\n    'Vengeance',\r\n    'Grief',\r\n    'The Swords of Night and Day',\r\n    'The Swords of Blood and Fire',\r\n    'Snaga',\r\n    'The Sword of Truth',\r\n    'The Lady Vivamus',\r\n    'Sword of Martin',\r\n    'Verminfate',\r\n    'Rapscallion sword',\r\n    'Callandor',\r\n    'Heron Mark Sword',\r\n    'Graywand',\r\n    'Scalpel',\r\n    'Rhindon',\r\n    'Blackfyre',\r\n    'Brightroar',\r\n    'Dark Siste',\r\n    'Dawn',\r\n    'Hearteater',\r\n    'Heartsbane',\r\n    \"Widow's Wail\",\r\n    'Ice',\r\n    'Lady Forlorn',\r\n    'Longclaw',\r\n    'Red Rain',\r\n    'Albitr',\r\n    'Needle',\r\n    'The Black Blade',\r\n    'Mournblade',\r\n    'Oathkeeper',\r\n    'Naegling',\r\n    'Arvindr',\r\n    'Ravenbrand',\r\n    \"Zar'roc\",\r\n    \"Lion's Tooth\",\r\n    'Doomgiver',\r\n    'Kanajana',\r\n    'Támerlein',\r\n    'Shieldbreaker',\r\n    'Woundhealer',\r\n    'Narsil',\r\n    'Lightbringer',\r\n    'Soulcutter',\r\n    'Sightblinder',\r\n    'Wayfinder',\r\n    'Orcrist',\r\n    'Stonecutter',\r\n    'Townsaver',\r\n    'The Sword of Gryffindor',\r\n    'Farslayer',\r\n    'Mindsword',\r\n    'Dragonslicer',\r\n    'Katopris',\r\n    'Backbiter',\r\n    'Undbitr',\r\n    'Brisingr',\r\n    'Barrow-blade',\r\n    'Coinspinner',\r\n    'Lhang',\r\n    'Traitor',\r\n    'Anglachel',\r\n    'Hadhafang',\r\n    'Vrangr',\r\n    'The Darksword',\r\n    'The Lightsword',\r\n    'Herugrim',\r\n    'Anaklusmos',\r\n    'Gúthwinë',\r\n    'Terminus Est',\r\n    'Memory',\r\n    \"Khazid'hea\",\r\n    'Clamorer',\r\n    'Backbiter',\r\n    'Thorn',\r\n    \"Charon's Claw\",\r\n    'Twinkle',\r\n    'Godsbane',\r\n    'Icingdeath',\r\n    'Hrunting',\r\n    'Naegling',\r\n    'The Sword of the Dawn',\r\n    'Hill Cleaver',\r\n    'Werewindle',\r\n    'Kijin-marukuni-shige',\r\n    'Balaraw',\r\n    'Keyblade',\r\n    'Hina',\r\n    'Tessaiga',\r\n    'Sorrow',\r\n    'Singing Sword',\r\n    'Sword of Chaos',\r\n    'The Starsword',\r\n    'Biggoron Sword',\r\n    'Grayswandir',\r\n    'Rain Dragon',\r\n    'Shisui',\r\n    'Gurthang',\r\n    'Aranrúth',\r\n    'Nightfall',\r\n    'Sting'\r\n]\r\n\r\nexport function createSword(x, y, id) {\r\n    let sword = new Sword(x, y, getRandomInt(2, 5), getRandomInt(2, 3), swordNames[getRandomInt(0, swordNames.length - 1)], id)\r\n    sword.addNewEnchantment(new BleedEnchantment())\r\n    return sword\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/weapons/Sword.js","/**\n * Created by Larken on 6/22/2017.\n */\nimport Item from '#/entities/items/Item.js'\nimport { Game } from '#/Game.js'\n\nexport const AMMO_TYPES = {\n\tARROW: 'Arrow'\n}\n\nexport class Ammo extends Item {\n\tconstructor(x, y, options) {\n\t\toptions.visible = true\n\t\toptions.blocked = false\n\t\toptions.combat.equippable = true\n\t\toptions.combat.equipped = false\n\t\toptions.action = 'Equip'\n\t\tsuper(x, y, options)\n\t\tObject.assign(this, options)\n\t\tthis.cb = this.combat\n\t}\n\n\tuse() {\n\t\tif (Game.player.cb.equipment.ammo === this) {\n\t\t\tGame.player.unequipAmmo()\n\t\t} else {\n\t\t\tGame.player.equipAmmo(this)\n\t\t}\n\t}\n\n\tgetAction() {\n\t\tif (this.cb.equipped) return 'Unequip'\n\t\treturn this.action\n\t}\n\n\thoverInfo() {\n\t\treturn `Quantity: ${this.quantity}`\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/weapons/ranged/ammo/Ammo.js","import { Ammo, AMMO_TYPES } from '#/entities/items/weapons/ranged/ammo/Ammo.js'\n\nexport class Arrow extends Ammo {\n\tconstructor(x, y, options) {\n\t\toptions.combat.ammoType = AMMO_TYPES.ARROW\n\t\tsuper(x, y, options)\n\t}\n}\n\nexport class SteelArrow extends Arrow {\n\tconstructor(x, y, id, quantity) {\n\t\tsuper(x, y, {\n\t\t\tid: id,\n\t\t\ttype: 'Steel Arrows',\n\t\t\tcombat: {\n\t\t\t\tdamage: 0\n\t\t\t},\n\t\t\tquantity: quantity\n\t\t})\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/weapons/ranged/ammo/Arrow.js","import ROT from 'rot-js'\r\n\r\nimport { Game } from '#/Game.js'\r\nimport HealthPotion from '#/entities/items/potions/HealthPotion.js'\r\nimport StrengthPotion from '#/entities/items/potions/StrengthPotion.js'\r\nimport ManaPotion from '#/entities/items/potions/ManaPotion.js'\r\nimport { createSword } from '#/entities/items/weapons/Sword.js'\r\nimport { SteelArrow } from '#/entities/items/weapons/ranged/ammo/Arrow.js'\r\n\r\nexport function getRandomInt(min, max) {\r\n\tmin = Math.ceil(min)\r\n\tmax = Math.floor(max)\r\n\treturn Math.floor(Math.random() * (max - min + 1)) + min //The maximum is exclusive and the minimum is inclusive\r\n}\r\n\r\nexport function getNormalRandomInt(min, max) {\r\n\tlet gaussianRand = () => {\r\n\t\tlet rand = 0\r\n\t\tfor (let i = 0; i < 6; i++) rand += Math.random()\r\n\r\n\t\treturn rand / 6\r\n\t}\r\n\treturn Math.floor(min + gaussianRand() * (max - min + 1))\r\n}\r\n\r\nexport function randomProperty(object) {\r\n\tlet keys = Object.keys(object)\r\n\treturn keys[Math.floor(keys.length * Math.random())]\r\n}\r\n\r\nexport function between(a, n, b) {\r\n\t// console.log(a, n, b)\r\n\t// console.log(a <= n && n <= b)\r\n\treturn a <= n && n <= b\r\n}\r\n\r\nexport function addPrefix(word) {\r\n\tconst vowels = ['a', 'e', 'i', 'o', 'u']\r\n\tif (word !== 'you') {\r\n\t\tconst someWords = ['trees', 'flowers', 'grass', 'wild grass', 'water', 'steel arrows']\r\n\t\tconsole.log(word)\r\n\t\tif (someWords.includes(word)) {\r\n\t\t\treturn 'some ' + word\r\n\t\t}\r\n\t\tif (word[0] in vowels) return 'an ' + word\r\n\t\telse return 'a ' + word\r\n\t} else {\r\n\t\treturn word\r\n\t}\r\n}\r\n\r\nexport let itemTypes = {\r\n\tSTRENGTH_POTION: 'STRENGTH_POTION',\r\n\tMANA_POTION: 'MANA_POTION',\r\n\tHEALTH_POTION: 'HEALTH_POTION',\r\n\tSWORD: 'SWORD',\r\n\tSTEEL_ARROW: 'STEEL_ARROW'\r\n}\r\n\r\nexport function getDiceRoll(rolls, sides) {\r\n\tlet n = 0\r\n\tfor (let i = 0; i < rolls; i++) {\r\n\t\tn += getRandomInt(1, sides)\r\n\t}\r\n\treturn n\r\n}\r\n\r\nexport function getItemsFromDropTable(options) {\r\n\tif (\r\n\t\toptions.dropTable == undefined ||\r\n\t\toptions.minItems == undefined ||\r\n\t\toptions.maxItems == undefined ||\r\n\t\toptions.x == undefined ||\r\n\t\toptions.y == undefined\r\n\t)\r\n\t\tthrow 'Not enough arguments given. Expected drop table object, min and max number of items to produce, and x,y location'\r\n\r\n\tlet { dropTable, minItems, maxItems, x, y } = options\r\n\tlet items = []\r\n\tlet roll = getRandomInt(minItems, maxItems)\r\n\tfor (let i = 0; i < roll; i++) {\r\n\t\tlet chosenItem = ROT.RNG.getWeightedValue(dropTable)\r\n\t\tswitch (chosenItem) {\r\n\t\t\tcase itemTypes.STRENGTH_POTION:\r\n\t\t\t\titems.push(new StrengthPotion(x, y, 969))\r\n\t\t\t\tbreak\r\n\t\t\tcase itemTypes.HEALTH_POTION:\r\n\t\t\t\titems.push(new HealthPotion(x, y, 488))\r\n\t\t\t\tbreak\r\n\t\t\tcase itemTypes.MANA_POTION:\r\n\t\t\t\titems.push(new ManaPotion(x, y, 608))\r\n\t\t\t\tbreak\r\n\t\t\tcase itemTypes.SWORD:\r\n\t\t\t\titems.push(createSword(x, y, 35))\r\n\t\t\t\tbreak\r\n\t\t\tcase itemTypes.STEEL_ARROW:\r\n\t\t\t\titems.push(new SteelArrow(x, y, 784, 5))\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\tconsole.log(\"tried to add some item that doesn't exist to an inventroy from drop table\")\r\n\t\t\t\tconsole.log(chosenItem)\r\n\t\t}\r\n\t}\r\n\t// console.log(\"Generated drop table\", items)\r\n\treturn items\r\n}\r\n\r\nexport function getVisibleTiles(actor) {\r\n\tlet fov = new ROT.FOV.PreciseShadowcasting(function(x, y) {\r\n\t\treturn Game.inbounds(x, y) && Game.map.data[y][x].visible()\r\n\t})\r\n\r\n\tlet visibleTiles = []\r\n\tfov.compute(actor.x, actor.y, actor.cb.range, (x, y, r, visibility) => {\r\n\t\tif (Game.inbounds(x, y)) visibleTiles.push(Game.map.data[y][x])\r\n\t})\r\n\treturn visibleTiles\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/utils/HelperFunctions.js","/**\r\n * Created by Larken on 7/8/2017.\r\n */\r\nimport { Game } from '#/Game.js'\r\nimport { Entity } from '#/entities/Entity.js'\r\n\r\nexport default class Door extends Entity {\r\n\tconstructor(x, y, id) {\r\n\t\tsuper(x, y, {\r\n\t\t\tname: 'door',\r\n\t\t\tid: id,\r\n\t\t\tbg: 'rgb(140, 80, 0)',\r\n\t\t\tfg: 'red',\r\n\t\t\tvisible: false,\r\n\t\t\tblocked: true\r\n\t\t})\r\n\t\tthis.closed = true\r\n\t}\r\n\r\n\treact() {\r\n\t\tif (this.closed) {\r\n\t\t\tthis.openDoor()\r\n\t\t}\r\n\t}\r\n\r\n\topenDoor() {\r\n\t\tthis.closed = false\r\n\t\tthis.blocked = false\r\n\t\tthis.visible = true\r\n\t\tthis.id = Game.display.tileset.tileproperties[this.id].activated_id\r\n\t\tthis.sprite.texture = Game.display.tilesetMapping[this.id]\r\n\t}\r\n\r\n\tcloseDoor() {\r\n\t\tthis.closed = false\r\n\t\tthis.blocked = false\r\n\t\tthis.visible = true\r\n\t\tthis.id = this.id\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/misc/Door.js","import { Entity } from '#/entities/Entity.js'\r\nimport { Game } from '#/Game.js'\r\n// import Skeleton from \"#/entities/actors/enemies/Skeleton.js\";\r\n// import Zombie from \"#/entities/actors/enemies/Zombie.js\";\r\n\r\nexport const corpseTypes = {\r\n    SKELETON: 5489,\r\n    HUMANOID: 2647\r\n}\r\n\r\nexport class Corpse extends Entity {\r\n    constructor(x, y, name, id) {\r\n        super(x, y, {\r\n            id,\r\n            name: name.toLowerCase() === 'skeleton' ? 'pile of bones' : `${name.capitalize()} Corpse`,\r\n            blocked: false,\r\n            visible: true\r\n        })\r\n        this.rotten = false\r\n        this.turns = 0\r\n    }\r\n\r\n    act() {\r\n        Game.engine.lock()\r\n        this.turns++\r\n        // corpse has rotted after 40 turns\r\n        if (this.turns === 30) this.sprite.tint = 0x31af48\r\n        if (this.turns === 35) this.sprite.tint = 0x267735\r\n\r\n        if (this.turns >= 40) {\r\n            let idx = Game.engine._scheduler.remove(this)\r\n            let ctile = Game.map.data[this.y][this.x]\r\n            // remove this actor from the global actors list and the occupied tile\r\n            ctile.removeActor(this)\r\n            idx = Game.map.actors.indexOf(this)\r\n            Game.map.actors.splice(idx, 1)\r\n            Game.display.removeChild(this.sprite)\r\n        }\r\n        Game.engine.unlock()\r\n    }\r\n\r\n    hoverInfo() {\r\n        return ''\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/misc/Corpse.js","/**\r\n * Created by larken on 7/12/17.\r\n */\r\nimport ROT from 'rot-js'\r\nimport * as PIXI from 'pixi.js'\r\n\r\nimport { Game } from '#/Game.js'\r\nimport { Entity } from '#/entities/Entity.js'\r\nimport { getRandomInt, addPrefix } from '#/utils/HelperFunctions.js'\r\nimport Door from '#/entities/misc/Door.js'\r\nimport Weapon from '#/entities/items/weapons/Weapon.js'\r\nimport { Ammo } from '#/entities/items/weapons/ranged/ammo/Ammo.js'\r\nimport { Buff } from '#/modifiers/Buff.js'\r\nimport { Corpse, corpseTypes } from '#/entities/items/misc/Corpse.js'\r\nimport Item from '#/entities/items/Item.js'\r\n\r\nexport class Actor extends Entity {\r\n\tconstructor(x, y, options, routine = null) {\r\n\t\tsuper(x, y, options)\r\n\t\tthis.cb = this.combat\r\n\t\tif (this.corpseType === undefined) this.corpseType = corpseTypes.HUMANOID\r\n\r\n\t\tthis.cb.effects = []\r\n\t\tthis.cb.equipment = {\r\n\t\t\thead: null,\r\n\t\t\ttorso: null,\r\n\t\t\tlegs: null,\r\n\t\t\tweapon: null,\r\n\t\t\tammo: null\r\n\t\t}\r\n\t\tthis.inventory = []\r\n\t\tfor (let i = 0; i < 27; i++) {\r\n\t\t\tthis.inventory.push({\r\n\t\t\t\titem: null,\r\n\t\t\t\tmenu: false\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t/* Called by the ROT.js game scheduler to indicate a turn */\r\n\tact() {\r\n\t\tthis.cb.effects = this.cb.effects.filter(e => {\r\n\t\t\treturn e.duration > 0\r\n\t\t})\r\n\t\t// apply all of the effects on this Actor at the beginning of their turn\r\n\t\tfor (let effect of this.cb.effects) {\r\n\t\t\tif (!(effect instanceof Buff)) Game.log(effect.description(this), 'alert')\r\n\r\n\t\t\teffect.applyEffect(this)\r\n\t\t}\r\n\t\t// if any effects have expired, we remove them\r\n\t}\r\n\r\n\taddNewEffect(effect) {\r\n\t\tthis.cb.effects.push(effect)\r\n\t}\r\n\r\n\taddNewBuff(buff) {\r\n\t\tbuff.applyEffect(this)\r\n\t\tthis.cb.effects.push(buff)\r\n\t}\r\n\r\n\tmemberOfInventory(item) {\r\n\t\treturn (\r\n\t\t\t-1 <\r\n\t\t\tthis.inventory.findIndex(cell => {\r\n\t\t\t\treturn Object.is(item, cell.item)\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n\r\n\taddToInventory(newItem) {\r\n\t\tif ('quantity' in newItem) {\r\n\t\t\tfor (let i = 0; i < this.inventory.length; i++) {\r\n\t\t\t\tlet item = this.inventory[i].item\r\n\t\t\t\tif (item !== null && item.type === newItem.type) {\r\n\t\t\t\t\titem.quantity += newItem.quantity\r\n\t\t\t\t\treturn item\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet nextFreeIndex = null\r\n\t\tfor (let i = 0; i < this.inventory.length; i++) {\r\n\t\t\tif (this.inventory[i].item == null) {\r\n\t\t\t\tnextFreeIndex = i\r\n\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (nextFreeIndex === null) {\r\n\t\t\tGame.log('Your inventory is full! Drop something in order to pick this up.')\r\n\t\t\t// if your item is in a chest and you try to pick it up, but your inventory is full,\r\n\t\t\t// it will drop the item below you.\r\n\t\t\tthis.placeEntityBelow(newItem)\r\n\t\t\treturn newItem\r\n\t\t}\r\n\r\n\t\tthis.inventory[nextFreeIndex].item = newItem\r\n\t\t// this.inventory[nextFreeIndex].action = newItem.use;\r\n\t\treturn this.inventory[nextFreeIndex].item\r\n\t}\r\n\r\n\tplaceEntityBelow(entity) {\r\n\t\tif (entity instanceof Item) {\r\n\t\t\tentity.placeAt(this.x, this.y)\r\n\t\t\tGame.display.assignSprite(item)\r\n\t\t} else {\r\n\t\t\tGame.map.data[this.y][this.x].actors.push(entity)\r\n\t\t}\r\n\t}\r\n\r\n\t// expressly want to just remove the item from the inventory.\r\n\t// no actions are taken to mutate the item (like unequipping it from the player - this is done in those classes)\r\n\tremoveFromInventory(removeItem) {\r\n\t\tlet idx = this.inventory.findIndex(cell => {\r\n\t\t\treturn Object.is(removeItem, cell.item)\r\n\t\t})\r\n\t\tif (idx != -1) {\r\n\t\t\tthis.inventory[idx].item = null\r\n\t\t} else {\r\n\t\t\tthrow 'invalid item removal - trying to remove an item that cannot be found in inventory!'\r\n\t\t}\r\n\t}\r\n\r\n\tdropItem(item) {\r\n\t\tif (!this.memberOfInventory(item)) throw \"Error - trying to drop an item you don't have in your inventory\"\r\n\t\tif (item !== null && 'cb' in item) {\r\n\t\t\titem.cb.equipped = false\r\n\t\t\tif (this.cb.equipment.weapon == item) this.cb.equipment.weapon = null\r\n\t\t}\r\n\t\titem.placeAt(this.x, this.y)\r\n\t\tGame.display.assignSprite(item, true, 2)\r\n\t\tthis.removeFromInventory(item)\r\n\t}\r\n\r\n\t/* The inventory property of actors is an array of object 'slots'. This function\r\n     * returns the actual items that are held at any given time */\r\n\titems() {\r\n\t\treturn this.inventory.filter(e => e.item !== null).map(e => e.item)\r\n\t}\r\n\r\n\tdistanceTo(actor) {\r\n\t\t// linear distance, no obstacles factored in\r\n\t\treturn Math.sqrt(Math.pow(this.x - actor.x, 2) + Math.pow(this.y - actor.y, 2))\r\n\t}\r\n\r\n\t/* Used to perform an action against another actor. This always involves \"bumper car interaction\", so\r\n\tit makes sense to have an animation following that concept */\r\n\tinteract(actor) {\r\n\t\tlet nx = actor.x - this.x\r\n\t\tlet ny = actor.y - this.y\r\n\t\tif (this === Game.player || actor === Game.player) {\r\n\t\t\tGame.display.moveSprite(this.sprite, this.x + nx / 2, this.y + ny / 2)\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tGame.display.moveSprite(this.sprite, this.x, this.y)\r\n\t\t\t}, 100)\r\n\t\t}\r\n\t\treturn null\r\n\t}\r\n\r\n\t/* Used to react to the interaction of another actor */\r\n\treact(actor) {\r\n\t\treturn null\r\n\t}\r\n\r\n\ttryMove(nx, ny) {\r\n\t\t// returns true if the turn should end here\r\n\t\tif (nx < 0 || nx === Game.map.width || ny < 0 || ny === Game.map.height) return false\r\n\t\tlet ntile = Game.map.data[ny][nx] // new tile to move to\r\n\t\tif (ntile.actors.length === 0 && !ntile.blocked()) {\r\n\t\t\tthis.move(nx, ny)\r\n\t\t\treturn true\r\n\t\t} else if (ntile.actors.length > 0) {\r\n\t\t\tfor (let i = 0; i < ntile.actors.length; i++) {\r\n\t\t\t\tlet actor = ntile.actors[i]\r\n\t\t\t\t// this actor has stumbled upon another actor\r\n\t\t\t\tif (actor instanceof Actor && actor.blocked && actor.visible) {\r\n\t\t\t\t\tif (!actor.isDead()) this.interact(actor)\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t\t// actor has stumbled upon a non-Actor entity (an item or miscellaneous entity like a door)\r\n\t\t\t\tif (actor instanceof Door) {\r\n\t\t\t\t\tthis.interact(actor)\r\n\t\t\t\t\t// return actor.blocked;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!ntile.blocked()) {\r\n\t\t\tthis.move(nx, ny)\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\treturn false\r\n\t}\r\n\r\n\t/* attacks another actor with a melee attack */\r\n\tattack(actor) {\r\n\t\tlet { weapon } = this.cb.equipment\r\n\t\tlet dmg = weapon !== null ? this.cb.str + weapon.roll() : this.cb.str\r\n\t\tif (weapon && weapon.cb.ranged) dmg = this.cb.str\r\n\t\tlet verb,\r\n\t\t\tmessage = ''\r\n\t\tif (weapon !== null) {\r\n\t\t\tlet { attackVerbs, type } = weapon\r\n\t\t\tverb = attackVerbs[~~(Math.random() * attackVerbs.length)]\r\n\t\t\tmessage = `${addPrefix(this.name).capitalize()} ${verb} ${addPrefix(actor.name)} with ${addPrefix(\r\n\t\t\t\ttype.toLowerCase()\r\n\t\t\t)} and dealt ${dmg} damage.`\r\n\t\t} else {\r\n\t\t\tmessage = `${addPrefix(this.name).capitalize()} attacked ${addPrefix(actor.name)} and dealt ${dmg} damage.`\r\n\t\t}\r\n\r\n\t\tif (Game.player === this) Game.log(message, 'player_move')\r\n\t\telse Game.log(message, 'attack')\r\n\r\n\t\tif (dmg > 0) actor.damage(dmg)\r\n\r\n\t\tif (weapon && weapon.cb.enchantments.length > 0) {\r\n\t\t\tfor (let enchantment of weapon.cb.enchantments) {\r\n\t\t\t\tlet effect = enchantment.getEffect()\r\n\t\t\t\tif (\r\n\t\t\t\t\t!actor.cb.effects.some(e => {\r\n\t\t\t\t\t\te.name === effect.name\r\n\t\t\t\t\t})\r\n\t\t\t\t) {\r\n\t\t\t\t\tactor.addNewEffect(effect)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn dmg\r\n\t}\r\n\r\n\tequipWeapon(item) {\r\n\t\tif (!(item instanceof Weapon) || !('cb' in item)) throw 'Error - equipped invalid item - ' + this.item.type\r\n\r\n\t\t// already wielding a weapon\r\n\t\tif (this.cb.equipment.weapon !== null) {\r\n\t\t\tthis.cb.equipment.weapon.cb.equipped = false\r\n\t\t}\r\n\t\tthis.cb.equipment.weapon = item\r\n\t\titem.cb.equipped = true\r\n\t}\r\n\r\n\tequipAmmo(item) {\r\n\t\tif (!(item instanceof Ammo) || !('cb' in item)) throw 'Error - equipped invalid item - ' + this.item.type\r\n\r\n\t\t// already wielding a weapon\r\n\t\tif (this.cb.equipment.ammo !== null) {\r\n\t\t\tthis.cb.equipment.ammo.cb.equipped = false\r\n\t\t}\r\n\t\tthis.cb.equipment.ammo = item\r\n\t\tthis.cb.equipment.ammo.cb.equipped = true\r\n\t}\r\n\r\n\t/* Reduce hp. If less than 0, causes death */\r\n\tdamage(hp) {\r\n\t\tif (this.cb.invulnerable) return\r\n\t\tthis.cb.hp -= hp\r\n\t\tif (this.isDead()) {\r\n\t\t\tif (this !== Game.player) Game.player.gain_xp(Math.floor(this.cb.maxhp * 0.5))\r\n\r\n\t\t\tthis.death()\r\n\t\t}\r\n\t\tif (this.sprite !== null) {\r\n\t\t\tthis.sprite.tint = '0xba1b21'\r\n\t\t\tsetTimeout(() => (this.sprite.tint = '0xFFFFFF'), 200)\r\n\t\t}\r\n\t}\r\n\r\n\t/* Restore HP up to maxhp */\r\n\theal(hp) {\r\n\t\tif (this.cb.hp + hp > this.cb.maxhp) this.cb.hp = this.cb.maxhp\r\n\t\telse this.cb.hp += hp\r\n\t}\r\n\r\n\t/* Restores mana up to max */\r\n\trestore(mana) {\r\n\t\tif (this.cb.mana + mana > this.cb.maxmana) this.cb.mana = this.cb.maxmana\r\n\t\telse this.cb.mana += mana\r\n\t}\r\n\r\n\t/* Starting out with basic 8 dir firing */\r\n\tfireRangedWeapon(ammo, dir) {\r\n\t\t// assuming we have a ranged weapon and ammunition to fire\r\n\t\tlet weapon = this.cb.equipment.weapon\r\n\t\tlet range = weapon.cb.range\r\n\t\tlet dmg = weapon.roll() + ammo.cb.damage + this.cb.str\r\n\t\tlet diff = ROT.DIRS[8][dir]\r\n\t\t// iterate from the first to last tile in the given direction\r\n\t\tfor (let i = 1; i < range; i++) {\r\n\t\t\tlet tx = this.x + diff[0] * i\r\n\t\t\tlet ty = this.y + diff[1] * i\r\n\t\t\tlet tile = Game.map.data[ty][tx]\r\n\t\t\t// if the tile is a blocked obstacle, then we want to cancel the projectile's motion\r\n\t\t\t// since water and some other special obstacles are \"blocked\", need to use the \"blocks vision\"\r\n\t\t\t// attribute to determine if a projectile can pass through\r\n\t\t\t// (e.g if light can pass through, so can an arrow or crossbow bolt)\r\n\t\t\tif (!tile.visible()) {\r\n\t\t\t\tif (Game.player === this) Game.log(`Your ${ammo.type.toLowerCase()} hit an obstacle!`, 'alert')\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t// if we find an enemy on the tile, we damage it and the projectile stops moving\r\n\t\t\tlet enemies = tile.actors.filter(function(e) {\r\n\t\t\t\treturn e.combat && e.cb.hostile\r\n\t\t\t})\r\n\t\t\tif (enemies.length > 0) {\r\n\t\t\t\tlet enemy = enemies[0]\r\n\t\t\t\tlet evtdamage = `${addPrefix(this.name).capitalize()} hit ${addPrefix(enemy.name)} with ${addPrefix(\r\n\t\t\t\t\tammo.type.toLowerCase()\r\n\t\t\t\t)} and dealt ${dmg} damage.`\r\n\t\t\t\tif (Game.player === this) Game.log(evtdamage, 'player_move')\r\n\t\t\t\telse Game.log(evtdamage, 'attack')\r\n\t\t\t\tenemy.damage(dmg)\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t}\r\n\t\tGame.log(`Your ${ammo.type.toLowerCase()} didn't hit anything!`, 'alert')\r\n\t\t// place the ammo down at\r\n\t\t/*\r\n         let tx = this.x + diff[0]*range;\r\n         let ty = this.y + diff[1]*range;\r\n         let tile = Game.map.data[ty][tx];\r\n         */\r\n\t}\r\n\r\n\tdeath() {\r\n\t\tlet idx = Game.engine._scheduler.remove(this)\r\n\t\tlet ctile = Game.map.data[this.y][this.x]\r\n\t\t// remove this actor from the global actors list and the occupied tile\r\n\t\tctile.removeActor(this)\r\n\t\tidx = Game.map.actors.indexOf(this)\r\n\t\tGame.map.actors.splice(idx, 1)\r\n\t\t// dump the contents of the actor's inventory (items) onto the ground.\r\n\t\tconst numberOfEntities = Game.display.background.children.length\r\n\r\n\t\t// redraw the tile, either with an appropriate actor or the tile symbol\r\n\t\t/* On death, we want to spray some blood on the tile.\r\n         * We also want to place a corpse corresponding to the actor as well\r\n        */\r\n\r\n\t\tif (this.inventory.length > 0) {\r\n\t\t\tlet items = this.items()\r\n\t\t\tfor (let item of items) {\r\n\t\t\t\t// if the item was previously equipped, it needs to be 'unequipped'\r\n\t\t\t\tthis.dropItem(item)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (getRandomInt(0, 1) === 0) {\r\n\t\t\tif (this.corpseType !== undefined) {\r\n\t\t\t\tlet corpse = new Corpse(this.x, this.y, this.name, this.corpseType)\r\n\t\t\t\tctile.actors.unshift(corpse)\r\n\t\t\t\tGame.scheduler.add(corpse, true)\r\n\t\t\t\tGame.display.assignSprite(corpse, true)\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet blood = 2644 - getRandomInt(0, 1)\r\n\t\t// specifically don't want to add blood if it's a skeleton...\r\n\t\tif (this.corpseType !== corpseTypes.SKELETON) {\r\n\t\t\tlet bloodSprite = new PIXI.Sprite(Game.display.tilesetMapping[blood])\r\n\t\t\tbloodSprite.position.set(this.x * Game.display.tileSize, this.y * Game.display.tileSize)\r\n\t\t\tGame.display.background.addChildAt(bloodSprite, 1)\r\n\t\t}\r\n\r\n\t\tGame.display.background.removeChild(this.sprite)\r\n\t\tif (this.spriteHPBar !== undefined) Game.display.background.removeChild(this.spriteHPBar)\r\n\r\n\t\tif (this === Game.player) {\r\n\t\t\tGame.log('You died!', 'death')\r\n\t\t} else {\r\n\t\t\tGame.log(`You killed the ${this.name}.`, 'death')\r\n\t\t}\r\n\t}\r\n\r\n\tisDead() {\r\n\t\treturn this.cb.hp <= 0\r\n\t}\r\n\r\n\tgetHoverInfo() {\r\n\t\treturn `HP: ${this.cb.hp} / ${this.cb.maxhp}<br />\\\"${this.description}\\\"`\r\n\t}\r\n\r\n\tgetMinDmg() {\r\n\t\tlet wep = this.cb.equipment.weapon\r\n\t\tlet minWeaponDmg = wep !== null ? wep.cb.rolls : 0\r\n\t\treturn this.cb.str + minWeaponDmg\r\n\t}\r\n\r\n\tgetMaxDmg() {\r\n\t\tlet wep = this.cb.equipment.weapon\r\n\t\tlet maxWeaponDmg = wep !== null ? wep.cb.rolls * wep.cb.sides : 0\r\n\t\treturn this.cb.str + maxWeaponDmg\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/Actor.js","/**\r\n * Created by Larken on 6/22/2017.\r\n */\r\nimport Weapon from '#/entities/items/weapons/Weapon.js'\r\n// import {AMMO_TYPES} from '#/entities/items/weapons/ranged/ammo/Ammo.js'\r\n\r\nexport default class RangedWeapon extends Weapon {\r\n\r\n\tconstructor(x, y, options) {\r\n\t\tsuper(x, y, options)\r\n\t\tthis.cb.ranged = true\r\n\t}\r\n\r\n\r\n\thoverInfo() {\r\n\t\treturn `Damage: ${this.cb.rolls}-${this.cb.sides * this.cb.rolls} Range: ${this.cb.range}`\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/weapons/ranged/RangedWeapon.js","import RangedWeapon from '#/entities/items/weapons/ranged/RangedWeapon.js'\r\nimport { AMMO_TYPES } from '#/entities/items/weapons/ranged/ammo/Ammo.js'\r\n\r\nexport class Bow extends RangedWeapon {\r\n    constructor(x, y, id, name, rolls, sides, range) {\r\n        super(x, y, {\r\n            id: id,\r\n            name: name,\r\n            type: 'Bow',\r\n            combat: {\r\n                rolls: rolls,\r\n                sides: sides,\r\n                range: range,\r\n                ammoType: AMMO_TYPES.ARROW\r\n            },\r\n            attackVerbs: ['slapped', 'smacked', 'whacked']\r\n        })\r\n    }\r\n}\r\n\r\nexport const createBow = (x, y, id) => {\r\n    return new Bow(x, y, id, 'Bow of the Sunwalker', 3, 2, 8)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/weapons/ranged/Bow.js","import { Actor } from '#/entities/actors/Actor.js'\r\nimport { Game } from '#/Game.js'\r\nimport { getVisibleTiles, getDiceRoll, addPrefix, getRandomInt } from '#/utils/HelperFunctions'\r\n\r\nimport ROT from 'rot-js'\r\n\r\n/* StatelessAI class to encapsulate all enemies with simple AI that will move towards the player,\r\n   run away from the player, attempt to stay within maximum range (if ranged) by using a limited set\r\n   of parameters:\r\n   - morale, distance to the player (how far, how close it should be), ranged?, magic caster?\r\n   * based on http://www.roguebasin.com/index.php?title=Roguelike_Intelligence_-_Stateless_AIs\r\n*/\r\nexport class StatelessAI extends Actor {\r\n\tconstructor(x, y, options, config) {\r\n\t\tsuper(x, y, options)\r\n\t\tthis.ai = config\r\n\t}\r\n\r\n\tact() {\r\n\t\tGame.engine.lock()\r\n\t\tconst endTurn = () => {\r\n\t\t\tsuper.act()\r\n\t\t\tGame.engine.unlock()\r\n\t\t}\r\n\t\tlet dx = Math.abs(this.x - Game.player.x)\r\n\t\tlet dy = Math.abs(this.y - Game.player.y)\r\n\t\tif (dx > Game.width / 2 || dy > Game.height / 2) {\r\n\t\t\tendTurn()\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tGame.player.recalculatePath()\r\n\t\tlet visibleTiles = getVisibleTiles(this)\r\n\t\tlet allVisibleActors = visibleTiles.reduce((actors, tile) => {\r\n\t\t\treturn actors.concat(tile.actors)\r\n\t\t}, [])\r\n\r\n\t\tlet playerInView = allVisibleActors.some(a => {\r\n\t\t\treturn a === Game.player\r\n\t\t})\r\n\r\n\t\tlet { wanders, morale, minPlayerDist, maxPlayerDist, ranged, melee, magic } = this.ai\r\n\t\tif (playerInView) {\r\n\t\t\tif (!this.chasing) {\r\n\t\t\t\tGame.log(`A ${this.name} sees you.`, 'alert')\r\n\t\t\t}\r\n\r\n\t\t\tthis.chasing = true\r\n\t\t\tlet pathToPlayer = []\r\n\t\t\tGame.player.path.compute(this.x, this.y, (x, y) => {\r\n\t\t\t\tpathToPlayer.push([x, y])\r\n\t\t\t})\r\n\r\n\t\t\tlet healthRemainingPercentage = this.cb.hp / this.cb.maxhp\r\n\r\n\t\t\tconst findNearbyTiles = () => {\r\n\t\t\t\tlet nearbyTiles = []\r\n\t\t\t\tfor (let i = 0; i < 7; i++) {\r\n\t\t\t\t\tlet diff = ROT.DIRS[8][i]\r\n\t\t\t\t\tlet x = this.x + diff[0]\r\n\t\t\t\t\tlet y = this.y + diff[1]\r\n\t\t\t\t\tif (Game.inbounds(x, y)) {\r\n\t\t\t\t\t\tlet ctile = Game.getTile(x, y)\r\n\t\t\t\t\t\tif (!ctile.blocked() && ctile.actors.length === 0) nearbyTiles.push(ctile)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tnearbyTiles.push(Game.getTile(this.x, this.y))\r\n\t\t\t\treturn nearbyTiles\r\n\t\t\t}\r\n\r\n\t\t\tconst playerDistToTile = tile => {\r\n\t\t\t\treturn Math.sqrt(Math.pow(Game.player.x - tile.x, 2) + Math.pow(Game.player.y - tile.y, 2))\r\n\t\t\t}\r\n\r\n\t\t\tconst getFarthestAwayTile = () => {\r\n\t\t\t\tlet nearbyTiles = findNearbyTiles()\r\n\t\t\t\tlet maxDist = playerDistToTile(nearbyTiles[0])\r\n\t\t\t\tlet farthestTile = nearbyTiles[0]\r\n\t\t\t\tfor (let tile of nearbyTiles) {\r\n\t\t\t\t\tlet currentDist = playerDistToTile(tile)\r\n\t\t\t\t\tif (currentDist >= maxDist) {\r\n\t\t\t\t\t\tmaxDist = currentDist\r\n\t\t\t\t\t\tfarthestTile = tile\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn farthestTile\r\n\t\t\t}\r\n\r\n\t\t\t// if morale is greater than the health remaining, we need to flee!\r\n\t\t\tif (morale >= healthRemainingPercentage) {\r\n\t\t\t\tlet tile = getFarthestAwayTile()\r\n\t\t\t\tif (tile.x !== this.x || tile.y !== this.y) {\r\n\t\t\t\t\tif (!this.fleeing)\r\n\t\t\t\t\t\tGame.log(`The ${this.name.toLowerCase()} trembles at your might and attempts to escape death.`, 'purple')\r\n\t\t\t\t\tthis.fleeing = true\r\n\t\t\t\t\t// if we can run away\r\n\t\t\t\t\tthis.tryMove(tile.x, tile.y)\r\n\t\t\t\t\tendTurn()\r\n\t\t\t\t\treturn\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// we can't flee, so we might as well fight\r\n\t\t\t\t\tif (pathToPlayer.length <= 2) {\r\n\t\t\t\t\t\tlet newPos = pathToPlayer[1]\r\n\t\t\t\t\t\tthis.tryMove(newPos[0], newPos[1])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (pathToPlayer.length >= 2) {\r\n\t\t\t\t\tlet newPos = pathToPlayer[1] // 1 past the current position\r\n\t\t\t\t\tthis.tryMove(newPos[0], newPos[1])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n                              TYPICAL AI\r\n                     If damage > morale\r\n                        if can-run-away-from-player\r\n                           run-away-from-player\r\n                        else if can-attack-player\r\n                           attack-player\r\n                     else if too-far-from-player\r\n                        AND can-attack-player\r\n                        AND can-move-toward-player\r\n                            if  random < charge-probability\r\n                                move-toward-player\r\n                            else attack-player\r\n                     else if too-close-to-character\r\n                        AND can-attack-player\r\n                        AND can-move-away-from-player\r\n                            if random < retreat-probability\r\n                               move-away-from-player\r\n                            else attack-player\r\n                     else if can-attack-player\r\n                        attack-player\r\n                     else if too-far-from-player\r\n                        AND can-move-toward-player\r\n                  move-toward-player\r\n                     else if too-close-to-player\r\n                        AND can-move-away-from-player\r\n                            move-away-from-player\r\n                     else stand-still\r\n                  */\r\n\t\t} else {\r\n\t\t\tif (wanders) {\r\n\t\t\t\tlet dx = this.x + getRandomInt(-1, 1)\r\n\t\t\t\tlet dy = this.y + getRandomInt(-1, 1)\r\n\t\t\t\tthis.tryMove(dx, dy)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tendTurn()\r\n\t}\r\n\r\n\tinteract(actor) {\r\n\t\tsuper.interact(actor)\r\n\t\tif (actor === Game.player) {\r\n\t\t\tthis.attack(actor)\r\n\t\t} else {\r\n\t\t\tactor.react(this)\r\n\t\t}\r\n\t}\r\n\r\n\tattack(actor) {\r\n\t\tlet dmg = getDiceRoll(2, this.cb.str)\r\n\r\n\t\tlet len = this.cb.description.length\r\n\t\tlet evtdamage = `${addPrefix(this.name).capitalize()}${this.cb.description[Math.floor(Math.random() * len)]}${addPrefix(\r\n\t\t\tactor.name\r\n\t\t)} and dealt ${dmg} damage.`\r\n\r\n\t\tif (Game.player === this) Game.log(evtdamage, 'player_move')\r\n\t\telse Game.log(evtdamage, 'attack')\r\n\r\n\t\tif (dmg > 0) actor.damage(dmg)\r\n\t\treturn dmg\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/StatelessAI.js","import { StatelessAI } from '#/entities/actors/enemies/StatelessAI.js'\r\nimport { Game } from '#/Game.js'\r\nimport ROT from 'rot-js'\r\n\r\n/* Simple enemy class to encapsulate all enemies with very simple AI.\r\n Essentially, these enemies have a range that they can see the player from, and if the player\r\n enters within the distance between the enemy and player */\r\nexport default class SimpleEnemy extends StatelessAI {\r\n\tconstructor(x, y, options, wanders = true) {\r\n\t\tsuper(x, y, options, {\r\n\t\t\t/* AI parameters */\r\n\t\t\tmorale: 0,\r\n\t\t\tminPlayerDist: 0,\r\n\t\t\tmaxPlayerDist: 0,\r\n\t\t\tranged: false,\r\n\t\t\tmelee: true,\r\n\t\t\tmagic: false,\r\n\t\t\twanders\r\n\t\t})\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/SimpleEnemy.js","/**\n * Created by Larken on 6/22/2017.\n */\nimport { Game } from '#/Game.js'\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\nimport { corpseTypes } from '#/entities/items/misc/Corpse.js'\n\nexport default class Skeleton extends SimpleEnemy {\n\tconstructor(x, y, id) {\n\t\tlet randomHP = getRandomInt(10, 17)\n\t\tlet randomStr = getRandomInt(3, 6)\n\t\tsuper(x, y, {\n\t\t\tid: id,\n\t\t\tname: 'skeleton',\n\t\t\tdescription: 'A skeleton raised from the dead!',\n\t\t\tcorpseType: corpseTypes.SKELETON,\n\t\t\tvisible: true,\n\t\t\tblocked: true,\n\t\t\tchasing: false,\n\t\t\tcombat: {\n\t\t\t\t/* options.combat, dedicated to all things related to combat */\n\t\t\t\tdescription: [' attacked '],\n\t\t\t\t/* max stats */\n\t\t\t\tmaxhp: randomHP,\n\t\t\t\tmaxmana: 5,\n\t\t\t\t/* current stats */\n\t\t\t\thp: randomHP,\n\t\t\t\tmana: 5,\n\t\t\t\tstr: randomStr,\n\t\t\t\tdef: 1,\n\t\t\t\t/* misc */\n\t\t\t\thostile: true,\n\t\t\t\trange: 7,\n\t\t\t\tinvulnerable: false\n\t\t\t}\n\t\t})\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Skeleton.js","/**\r\n * Created by Larken on 6/22/2017.\r\n */\r\nimport { Game } from '#/Game.js'\r\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\r\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\r\n\r\nexport default class Skeleton extends SimpleEnemy {\r\n\tconstructor(x, y, id) {\r\n\t\tlet randomHP = getRandomInt(10, 15)\r\n\t\tlet randomStr = getRandomInt(1, 3)\r\n\t\tsuper(x, y, {\r\n\t\t\tid: id,\r\n\t\t\tname: 'zombie',\r\n\t\t\tdescription: 'A zombie raised from the dead!',\r\n\t\t\tvisible: true,\r\n\t\t\tblocked: true,\r\n\t\t\tchasing: false,\r\n\t\t\tcombat: {\r\n\t\t\t\t/* options.combat, dedicated to all things related to combat */\r\n\t\t\t\tdescription: [' attacked '],\r\n\t\t\t\t/* max stats */\r\n\t\t\t\tmaxhp: randomHP,\r\n\t\t\t\tmaxmana: 5,\r\n\t\t\t\t/* current stats */\r\n\t\t\t\thp: randomHP,\r\n\t\t\t\tmana: 5,\r\n\t\t\t\tstr: randomStr,\r\n\t\t\t\tdef: 1,\r\n\t\t\t\t/* misc */\r\n\t\t\t\thostile: true,\r\n\t\t\t\trange: 7,\r\n\t\t\t\tinvulnerable: false\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Zombie.js","/* Class to hold spells. Spells can be self-casted or targeted. Some special cases can be considered,\r\n such as 'reanimate the nearest dead character'. */\r\nimport ROT from 'rot-js'\r\nimport { getRandomInt, getDiceRoll } from '#/utils/HelperFunctions.js'\r\nimport { RegenerationEffect } from '#/modifiers/Effect.js'\r\nimport { Game } from '#/Game.js'\r\nimport { Corpse, corpseTypes } from '#/entities/items/misc/Corpse.js'\r\nimport Skeleton from '#/entities/actors/enemies/Skeleton.js'\r\nimport Zombie from '#/entities/actors/enemies/Zombie.js'\r\n\r\nexport const spellTypes = {\r\n    CONJURATION: 'CONJURATION',\r\n    CHARMS: 'CHARMS',\r\n    ICE: 'ICE',\r\n    AIR: 'AIR',\r\n    EARTH: 'EARTH',\r\n    FIRE: 'FIRE',\r\n    POISON: 'POISON',\r\n    NECROMANCY: 'NECROMANCY',\r\n    TRANSLOCATION: 'TRANSLOCATION',\r\n    TRANSMUTATION: 'TRANSMUTATION',\r\n    HEXES: 'HEXES'\r\n}\r\n\r\nexport const targetTypes = {\r\n    SELF: 'SELF', // applies spell to self\r\n    TARGET: 'TARGET' // applies to a target\r\n}\r\n\r\nexport class Spell {\r\n    constructor(options) {\r\n        // any characteristics of the spell we get from extensions can just be properties on the class\r\n        if (\r\n            options.name === undefined ||\r\n            options.hoverInfo === undefined ||\r\n            options.action === undefined ||\r\n            options.type === undefined ||\r\n            options.manaCost === undefined ||\r\n            options.targetType === undefined\r\n        )\r\n            throw 'Spell creation failed - insufficient information provided'\r\n\r\n        Object.assign(this, options)\r\n    }\r\n\r\n    cast() {} // to be overwritten\r\n}\r\n\r\n/* Conjuration Spellls */\r\n\r\nexport class MagicDart extends Spell {\r\n    constructor(options) {\r\n        super({\r\n            name: 'Magic Dart',\r\n            hoverInfo: 'Deals 1-8 damage to a target',\r\n            action: (entity, hit) => {\r\n                entity.damage(hit)\r\n            },\r\n            splashArt: 'magic_dart',\r\n            type: spellTypes.CONJURATION,\r\n            targetType: targetTypes.TARGET,\r\n            manaCost: 3\r\n        })\r\n        Object.assign(this, options)\r\n    }\r\n\r\n    cast(target, caster) {\r\n        let dmg = getRandomInt(1, 8) // remember to update hover info if this changes!\r\n        if (target === Game.player) Game.log(`You took ${dmg} damage from a Magic Dart spell!`, 'attack')\r\n        else Game.log(`Magic Dart blasts the ${target.name} for ${dmg} magical damage.`, 'player_move')\r\n\r\n        this.action(target, dmg)\r\n    }\r\n}\r\n\r\n/* Necromancy Spells */\r\n\r\nexport class Pain extends Spell {\r\n    constructor(options) {\r\n        super({\r\n            name: 'Pain',\r\n            hoverInfo: 'Deals 3-9 negative energy to a target',\r\n            action: (entity, hit) => {\r\n                entity.damage(hit)\r\n            },\r\n            splashArt: 'pain',\r\n            type: spellTypes.NECROMANCY,\r\n            targetType: targetTypes.TARGET,\r\n            manaCost: 3\r\n        })\r\n        Object.assign(this, options)\r\n    }\r\n\r\n    cast(target, caster) {\r\n        let dmg = getDiceRoll(3, 3) // remember to update hover info if this changes!\r\n        let adjective = dmg >= 7 ? 'extreme' : 'some'\r\n        if (target === Game.player) {\r\n            Game.log(`The ${caster.name.capitalize()} casts ${this.name} on ${target.name.toLowerCase()}.`, 'plum')\r\n            Game.log(`You feel ${adjective} pain and take ${dmg} damage.`, 'attack')\r\n        } else {\r\n            Game.log(`Pain causes ${adjective} trauma the ${target.name} for ${dmg} magical damage.`, 'player_move')\r\n        }\r\n\r\n        this.action(target, dmg)\r\n    }\r\n}\r\n\r\nexport class Regeneration extends Spell {\r\n    constructor(options) {\r\n        super({\r\n            name: 'Regeneration',\r\n            hoverInfo: 'Regenerates 10 health per turn by reanimating wounds with necromancy.',\r\n            action: entity => {\r\n                entity.addNewEffect(new RegenerationEffect())\r\n            },\r\n            splashArt: 'regeneration',\r\n            type: spellTypes.NECROMANCY,\r\n            targetType: targetTypes.SELF,\r\n            manaCost: 3\r\n        })\r\n        Object.assign(this, options)\r\n    }\r\n\r\n    cast(target, caster) {\r\n        if (caster === Game.player) Game.log('You begin regenerating your wounds with dark magic.', 'player_move')\r\n        else Game.log(`${caster.name.capitalize()} begins regenerating its wounds.`, 'plum')\r\n\r\n        this.action(target)\r\n    }\r\n}\r\n\r\nexport class VampiricDraining extends Spell {\r\n    constructor(options) {\r\n        super({\r\n            name: 'Vampiric Draining',\r\n            hoverInfo: 'Drains the health of an enemy for 10-20 damage, healing the caster half of the damage dealt',\r\n            action: (entity, dmg) => {\r\n                entity.damage(dmg)\r\n            },\r\n            splashArt: 'vampiric_draining',\r\n            type: spellTypes.NECROMANCY,\r\n            targetType: targetTypes.TARGET,\r\n            manaCost: 3\r\n        })\r\n        Object.assign(this, options)\r\n    }\r\n\r\n    cast(target, caster) {\r\n        let dmg = getDiceRoll(10, 2) // remember to update hover info if this changes!\r\n        if (caster === Game.player) {\r\n            Game.log(\r\n                `You suck the life energy out of the ${target.name.toLowerCase()}, damaging it for ${dmg} hp.`,\r\n                'player_move'\r\n            )\r\n            Game.log(`You siphon ${~~(dmg / 2)} hp from the enemy and gain it as health.`, 'lightgreen')\r\n        } else {\r\n            Game.log(`The ${caster.name.capitalize()} casts ${this.name} on ${target.name.toLowerCase()}.`, 'plum')\r\n            Game.log(`You feel your life energy slipping away and take ${dmg} damage.`, 'alert')\r\n            Game.log(`The ${caster.name.capitalize()} gains ${~~(dmg / 2)} health.`, 'plum')\r\n        }\r\n        this.action(target, dmg)\r\n        caster.heal(~~(dmg / 2))\r\n    }\r\n}\r\n\r\nexport const reanimate = corpse => {\r\n    let ctile = Game.map.data[corpse.y][corpse.x]\r\n    // remove the corpse from the ground\r\n    ctile.removeActor(corpse)\r\n    let idx = Game.map.actors.indexOf(corpse)\r\n    Game.map.actors.splice(idx, 1)\r\n    Game.display.removeChild(corpse)\r\n    let undeadActor =\r\n        corpse.id === corpseTypes.HUMANOID ? new Zombie(corpse.x, corpse.y, 2317) : new Skeleton(corpse.x, corpse.y, 2552)\r\n\r\n    undeadActor.chasing = true\r\n    ctile.actors.push(undeadActor)\r\n    Game.display.assignSprite(undeadActor)\r\n    Game.map.actors.push(undeadActor)\r\n    Game.scheduler.add(undeadActor, true)\r\n}\r\n\r\n/* returns an array of corpses :) */\r\nexport const getNearbyCorpses = actor => {\r\n    let fov = new ROT.FOV.PreciseShadowcasting(function(x, y) {\r\n        return Game.inbounds(x, y) && Game.map.data[y][x].visible()\r\n    })\r\n\r\n    let visibleTiles = []\r\n    fov.compute(actor.x, actor.y, actor.cb.range, function(x, y, r, visibility) {\r\n        if (Game.inbounds(x, y)) visibleTiles.push(Game.map.data[y][x])\r\n    })\r\n\r\n    let cartOfCorpses = []\r\n    for (let tile of visibleTiles) {\r\n        let corpses = tile.actors.filter(e => {\r\n            return e instanceof Corpse\r\n        })\r\n        if (corpses.length > 0) cartOfCorpses.push(corpses[0])\r\n    }\r\n    return cartOfCorpses\r\n}\r\n\r\nexport class AnimateDead extends Spell {\r\n    constructor(options) {\r\n        super({\r\n            name: 'Animate Dead',\r\n            hoverInfo: \"Raises all skeletons and corpses within caster's line of sight as undead.\",\r\n            action: caster => {\r\n                getNearbyCorpses(caster).forEach(corpse => {\r\n                    reanimate(corpse)\r\n                })\r\n            },\r\n            splashArt: 'animate_dead',\r\n            type: spellTypes.NECROMANCY,\r\n            targetType: targetTypes.SELF,\r\n            manaCost: 7\r\n        })\r\n        Object.assign(this, options)\r\n    }\r\n\r\n    cast(target, caster) {\r\n        this.action(caster)\r\n        if (caster === Game.player) {\r\n            Game.log('You raise nearby dead corpses around you into undead zombies and skeletons.', 'lightgreen')\r\n        } else {\r\n            Game.log(`The ${caster.name.capitalize()} raises nearby corpses as undead minions.`, 'plum')\r\n            Game.log('The undead begin marching towards you.', 'plum')\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/magic/Spell.js","/**\r\n * Created by Larken on 6/22/2017.\r\n */\r\nimport { Game } from '#/Game.js'\r\nimport { Entity } from '#/entities/Entity.js'\r\n\r\nexport default class Ladder extends Entity {\r\n    constructor(x, y, id, dir) {\r\n        super(x, y, {\r\n            id: id,\r\n            name: 'ladder',\r\n            direction: dir,\r\n            description: 'A ladder leading ' + dir,\r\n            fg: 'brown',\r\n            bg: 'orange',\r\n            blocked: false,\r\n            visible: true\r\n        })\r\n        this.portal = null\r\n    }\r\n\r\n    act() {}\r\n\r\n    react(actor) {\r\n        let levelName = Game.currentLevel.name.replace(/[0-9]/g, '')\r\n        let levelNumber = parseInt(Game.currentLevel.name.replace(/[^0-9]/g, ''))\r\n        if (this.direction === 'down') {\r\n            Game.log('You climb down the ladder...', 'player_move')\r\n            if (this.portal !== null) {\r\n                Game.changeLevels(this.portal, this.direction == 'down' ? 'up' : 'down')\r\n                return\r\n            } else {\r\n                Game.changeLevels(levelName + (levelNumber + 1), this.direction == 'down' ? 'up' : 'down', levelNumber)\r\n                return\r\n            }\r\n        } else {\r\n            Game.log('You climb up the ladder...', 'player_move')\r\n            if (this.portal !== null) {\r\n                Game.changeLevels(this.portal, this.direction == 'down' ? 'up' : 'down')\r\n                return\r\n            }\r\n            if (levelNumber === 1) {\r\n                Game.changeLevels('overworld')\r\n                return\r\n            }\r\n            Game.changeLevels(levelName + (levelNumber - 1), this.direction == 'down' ? 'up' : 'down', levelNumber)\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/misc/Ladder.js","/**\r\n * Created by Larken on 6/22/2017.\r\n */\r\nimport ROT from 'rot-js'\r\nimport { Game } from '#/Game.js'\r\nimport { Actor } from '#/entities/actors/Actor.js'\r\nimport { addPrefix } from '#/utils/HelperFunctions.js'\r\nimport Item from '#/entities/items/Item.js'\r\n// Weapons\r\nimport { Sword } from '#/entities/items/weapons/Sword.js'\r\n\r\nimport { createBow } from '#/entities/items/weapons/ranged/Bow.js'\r\nimport { SteelArrow } from '#/entities/items/weapons/ranged/ammo/Arrow.js'\r\n// Potions\r\nimport HealthPotion from '#/entities/items/potions/HealthPotion.js'\r\nimport StrengthPotion from '#/entities/items/potions/StrengthPotion.js'\r\nimport ManaPotion from '#/entities/items/potions/ManaPotion.js'\r\n// Spells\r\nimport { targetTypes, MagicDart, Regeneration, Pain, VampiricDraining, AnimateDead } from '#/magic/Spell.js'\r\n// effects\r\nimport { BleedEnchantment } from '#/modifiers/Enchantment.js'\r\n// Misc\r\nimport Ladder from '#/entities/misc/Ladder.js'\r\nimport { xp_levels } from '#/entities/Entity.js'\r\n\r\nfunction pathfinding(x, y) {\r\n    if (x <= 0 || x >= Game.map.width || y <= 0 || y >= Game.map.height) return false\r\n    return !Game.getTile(x, y).blocked()\r\n}\r\n\r\nexport default class Player extends Actor {\r\n    constructor(x, y, id) {\r\n        super(x, y, {\r\n            id: id,\r\n            name: 'you',\r\n            description: \"It's you!\",\r\n            fg: 'yellow',\r\n            bg: 'black',\r\n            visible: true,\r\n            targeting: false,\r\n            casting: false,\r\n            examining: false,\r\n            blocked: true,\r\n            leveled_up: true,\r\n            mouseEnabled: false,\r\n            combat: {\r\n                /* options.combat, dedicated to all things related to combat */\r\n                description: [' attacked ', ' stabbed ', ' jabbed ', ' smashed '],\r\n                /* stat caps */\r\n                maxhp: 50,\r\n                maxmana: 15,\r\n                /* current stats */\r\n                xp: 50,\r\n                level: 1,\r\n                hp: 50,\r\n                mana: 15,\r\n                str: 1,\r\n                def: 1,\r\n                /* Per-turn effects */\r\n                hpRecovery: 5,\r\n                manaRecovery: 2.5,\r\n                invulnerable: false,\r\n                /* Magic & Ranged */\r\n                validTarget: null,\r\n                currentSpell: null,\r\n                spells: [],\r\n                range: 7 // how far we can see\r\n            },\r\n            keyTimer: null\r\n        })\r\n        this.path = new ROT.Path.AStar(this.x, this.y, pathfinding)\r\n        this.nearbyEnemies = []\r\n        this.currentLevel = Game.currentLevel\r\n        // Inventory is an array of objects that contain items and an action that can be done with that item.\r\n        // You can think of the objects as individual 'slots' to store the item with actions like 'use' or 'equip'.\r\n        // Give the player a few starting items:\r\n        // - a health potion\r\n        // - a random sword (equip the sword)\r\n        let sword = new Sword(this.x, this.y, 2, 2, 'Training Sword', 35)\r\n        sword.addNewEnchantment(new BleedEnchantment())\r\n        this.addToInventory(sword)\r\n        super.equipWeapon(this.inventory[0].item)\r\n        this.addToInventory(createBow(this.x, this.y, 664))\r\n        this.addToInventory(new SteelArrow(this.x, this.y, 784, 30))\r\n        this.addToInventory(new HealthPotion(this.x, this.y, 488))\r\n        this.addToInventory(new ManaPotion(this.x, this.y, 608))\r\n\r\n        // this.addToInventory(new ManaPotion(this.x,this.y, 495));\r\n        this.cb.spells.push(new MagicDart())\r\n        // this.cb.spells.push(new Pain())\r\n        // this.cb.spells.push(new Regeneration())\r\n        // this.cb.spells.push(new VampiricDraining())\r\n        // this.cb.spells.push(new AnimateDead())\r\n\r\n        this.selectSpell(this.cb.spells[0])\r\n        this.mouseEnabled = false\r\n    }\r\n\r\n    selectSpell(spell) {\r\n        if (this.cb.spells.includes(spell)) {\r\n            this.cb.currentSpell = spell\r\n        }\r\n    }\r\n\r\n    recalculatePath() {\r\n        this.path = new ROT.Path.AStar(this.x, this.y, pathfinding)\r\n    }\r\n\r\n    interact(actor) {\r\n        super.interact(actor)\r\n        // returns true if we can continue to move to the tile\r\n        if ('cb' in actor && actor.cb.hostile) {\r\n            this.attack(actor)\r\n            if (!actor.isDead()) actor.react(this)\r\n            else return true // we can move\r\n        } else {\r\n            // non-combat interaction which leties from each actor to another,\r\n            // so we will design non-combat based actors to simply perform actions\r\n            // in a reactionary manner so that it offloads player code blocks.\r\n            actor.react(this)\r\n            return false\r\n        }\r\n    }\r\n\r\n    gain_xp(xp) {\r\n        this.cb.xp += xp\r\n        if (xp_levels[this.cb.level] <= this.cb.xp) {\r\n            this.level_up()\r\n        }\r\n    }\r\n\r\n    remainingXP() {\r\n        return xp_levels[this.cb.level] - this.cb.xp\r\n    }\r\n\r\n    level_up() {\r\n        this.cb.level += 1\r\n        this.cb.maxhp += 5\r\n        this.cb.str += 1\r\n        this.cb.hp = this.cb.maxhp\r\n        this.cb.mana = this.cb.maxmana\r\n        Game.log(`You leveled up! You are now Level ${this.cb.level}.`, 'level_up')\r\n        Game.log('Your strength and health have improved.', 'level_up')\r\n    }\r\n\r\n    act() {\r\n        super.act()\r\n        this.path = new ROT.Path.AStar(this.x, this.y, pathfinding)\r\n        this.nearbyEnemies = Game.getNearbyEnemies()\r\n        this.currentLevel = Game.currentLevel\r\n\r\n        Game.engine.lock()\r\n        window.addEventListener('keydown', this)\r\n        if (this.mouseEnabled) {\r\n            window.addEventListener('mousemove', this)\r\n            window.addEventListener('click', this)\r\n        }\r\n    }\r\n\r\n    handleEvent(evt) {\r\n        // updating our vision with the most up to date information\r\n        Object.assign(Game.map.seen_tiles, Game.map.visible_tiles)\r\n        Game.map.visible_tiles = {}\r\n\r\n        // FOV calculations\r\n        let fov = new ROT.FOV.PreciseShadowcasting((x, y) => {\r\n            return Game.inbounds(x, y) && Game.getTile(x, y).visible()\r\n        })\r\n\r\n        fov.compute(Game.player.x, Game.player.y, Game.player.cb.range, (x, y, r, visibility) => {\r\n            Game.map.visible_tiles[x + ',' + y] = true\r\n        })\r\n\r\n        let endTurn = () => {\r\n            let waitUntilPlayerReleases = evt => {\r\n                this.keyTimer = null\r\n            }\r\n            // setTimeout(() => Game.engine.unlock(), 18)\r\n            window.removeEventListener('keyup', waitUntilPlayerReleases)\r\n\r\n            window.removeEventListener('keydown', this)\r\n            window.removeEventListener('mousemove', this)\r\n            window.removeEventListener('click', this)\r\n            window.addEventListener('keyup', waitUntilPlayerReleases)\r\n            Game.clearTempLog()\r\n            Game.engine.unlock()\r\n        }\r\n\r\n        const confirmRangedFire = () => {\r\n            let tile = Game.selectedTile\r\n            let ammo = this.cb.equipment.ammo\r\n            let weapon = this.cb.equipment.weapon\r\n            let dmg = weapon.roll() + ammo.cb.damage + this.cb.str\r\n            ammo.quantity--\r\n            if (ammo.quantity === 0) {\r\n                Game.log(`You fire your last ${ammo.type.toLowerCase()}!`, 'alert')\r\n            }\r\n            // find actors on this tile\r\n            let enemies = tile.actors.filter(e => {\r\n                return e.cb !== undefined && e.cb.hostile\r\n            })\r\n            if (enemies.length > 0) {\r\n                let enemy = enemies[0]\r\n                let evtdamage = `${addPrefix(this.name).capitalize()} hit ${addPrefix(enemy.name)} with ${addPrefix(\r\n                    ammo.type.toLowerCase()\r\n                )} and dealt ${dmg} damage.`\r\n                Game.log(evtdamage, 'player_move')\r\n                enemy.damage(dmg)\r\n            } else {\r\n                Game.log(`Your ${ammo.type.toLowerCase()} didn't hit anything!`, 'alert')\r\n            }\r\n            if (ammo.quantity == 0) {\r\n                this.unequipAmmo()\r\n                this.removeFromInventory(ammo)\r\n            }\r\n            this.targeting = false\r\n            this.validTarget = null\r\n            // create an arrow sprite and move it to the fired location\r\n            // let ammoSprite = new PIXI.Sprite(Game.display.getTexture(ammo.id))\r\n            // Game.display.background.addChild(ammoSprite)\r\n            // ammoSprite.position.set(this.x * Game.display.tileSize, this.y * Game.display.tileSize)\r\n            // // ammoSprite.scale.y = -1\r\n            // ammoSprite.anchor.set(0.5)\r\n            // // Math.atan2(tile.x - this.x, tile.y - this.y)\r\n            // ammoSprite.rotation = 2.356\r\n            // let x = 0\r\n            // let y = 0\r\n            // if (tile.x < this.x) x = tile.x - this.x\r\n            // if (this.x < tile.x) x = this.x - tile.x\r\n            // if (tile.y > this.y) y = tile.y - this.y\r\n            // if (this.y < tile.y) y = this.y - tile.y\r\n            // ammoSprite.rotation += Math.atan2(x, y)\r\n            // Game.display.moveSprite(ammoSprite, tile.x, tile.y)\r\n            Game.clearSelectedTile()\r\n            endTurn()\r\n        }\r\n\r\n        const confirmSpellcasting = () => {\r\n            let tile = Game.selectedTile\r\n            // find actors on this tile\r\n            let enemies = tile.actors.filter(e => {\r\n                return e.cb !== undefined && e.cb.hostile\r\n            })\r\n            if (enemies.length > 0) {\r\n                let enemy = enemies[0]\r\n                Game.log(`You cast ${this.cb.currentSpell.name} at the ${enemies[0].name}.`, 'magic')\r\n                this.cb.currentSpell.cast(enemies[0], this)\r\n            } else {\r\n                Game.log(`You cast ${this.cb.currentSpell.name} but it hits nothing!`, 'magic')\r\n            }\r\n            this.cb.mana -= this.cb.currentSpell.manaCost\r\n            this.casting = false\r\n            this.validTarget = null\r\n            Game.clearSelectedTile()\r\n            endTurn()\r\n        }\r\n\r\n        /* Mouse controls to hover over tiles for info (describe) */\r\n        if (evt.type === 'click') {\r\n            if (this.targeting) {\r\n                if (this.validTarget) {\r\n                    confirmRangedFire()\r\n                } else {\r\n                    Game.log(\"You cannot shoot this tile because it's blocked or out of range!\", 'alert')\r\n                }\r\n            } else if (this.casting) {\r\n                if (this.validTarget) {\r\n                    confirmSpellcasting()\r\n                } else {\r\n                    Game.log(\r\n                        `You cannot cast ${this.cb.currentSpell.name} at this tile because it's blocked or too far away.`,\r\n                        'alert'\r\n                    )\r\n                }\r\n            }\r\n            // else, if the tile is within one square of the player, they can move to that tile by clicking\r\n            return\r\n        }\r\n\r\n        if (evt.type === 'mousemove') {\r\n            let tile = Game.eventToTile()\r\n            if (tile !== null) {\r\n                this.validTarget = Game.changeSelectedTile(tile)\r\n            }\r\n\r\n            setTimeout(() => {\r\n                this.mouseMoved = true\r\n            }, 18)\r\n            if (this.mouseMoved) {\r\n                this.mouseMoved = false\r\n            }\r\n            return\r\n        }\r\n\r\n        let code = evt.keyCode\r\n        let shift_pressed = evt.getModifierState('Shift')\r\n        let movementKeys = [0, 1, 2, 3, 4, 5, 6, 7]\r\n        let cycleKeys = [9, 61, 187, 191]\r\n        let confirmKeys = [101, 13, 190]\r\n        let exitKeys = [70, 27, 90, 88]\r\n        if (cycleKeys.includes(code)) {\r\n            evt.preventDefault()\r\n        }\r\n\r\n        let keyMap = {\r\n            /* Arrow Key movement */\r\n            39: 2,\r\n            37: 6,\r\n            38: 0,\r\n            40: 4,\r\n            /* Num Pad Movement */\r\n            104: 0,\r\n            105: 1,\r\n            102: 2,\r\n            99: 3,\r\n            98: 4,\r\n            97: 5,\r\n            100: 6,\r\n            103: 7,\r\n            /* Rest using '5' in numpad */\r\n            101: 'rest',\r\n            /* vi movement */\r\n            75: 0,\r\n            85: 1,\r\n            76: 2,\r\n            78: 3,\r\n            74: 4,\r\n            66: 5,\r\n            72: 6,\r\n            89: 7,\r\n            /* Fire a weapon */\r\n            70: 'fire',\r\n            /* Cast a spell */\r\n            90: 'cast',\r\n            /* Misc */\r\n            188: 'pickup',\r\n            71: 'pickup',\r\n            190: 'rest',\r\n            88: 'examine'\r\n        }\r\n\r\n        if (evt.type === 'keydown' && movementKeys.includes(keyMap[code])) {\r\n            if (this.keyTimer === null) {\r\n                this.keyTimer = new Date()\r\n            } else {\r\n                let start = this.keyTimer.getTime()\r\n                let now = new Date().getTime()\r\n                if (!(now - start >= 160)) {\r\n                    return\r\n                } else {\r\n                    // we've waited long enough, but add another timer just in case\r\n                    this.keyTimer = new Date()\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.targeting || this.casting || this.examining) {\r\n            let msg = ''\r\n            if (exitKeys.includes(code)) {\r\n                if (this.targeting) msg = `You put away your ${this.cb.equipment.weapon.type.toLowerCase()}.`\r\n                if (this.casting) msg = 'You stop casting the spell.'\r\n                if (this.examining) msg = 'You quit examining the area.'\r\n                Game.log(msg, 'information')\r\n                this.casting = this.targeting = this.examining = false\r\n                Game.clearTempLog()\r\n                Game.clearSelectedTile()\r\n            } else if (confirmKeys.includes(code)) {\r\n                if (this.validTarget) {\r\n                    if (this.casting) confirmSpellcasting()\r\n                    if (this.targeting) confirmRangedFire()\r\n                } else {\r\n                    if (this.casting)\r\n                        msg = `You cannot cast ${this.cb.currentSpell.name} at this tile because it's blocked or too far away.`\r\n                    if (this.targeting) msg = \"You cannot shoot this tile because it's blocked or out of range!\"\r\n                    if (this.examining) return\r\n                    Game.log(msg, 'alert')\r\n                }\r\n            } else if (movementKeys.includes(keyMap[code])) {\r\n                let diff = ROT.DIRS[8][keyMap[code]]\r\n                let x = Game.selectedTile.x + diff[0]\r\n                let y = Game.selectedTile.y + diff[1]\r\n                if (Game.inbounds(x, y) && Game.inViewport(x, y)) {\r\n                    Game.changeSelectedTile(Game.getTile(x, y))\r\n                    this.validTarget = !Game.selectedTile.blocked() && Game.map.visible_tiles[x + ',' + y] !== undefined\r\n                }\r\n            } else if (cycleKeys.includes(code)) {\r\n                this.validTarget = Game.cycleThroughSelectableEnemies()\r\n            }\r\n            return\r\n        }\r\n\r\n        if (!(code in keyMap)) {\r\n            // invalid key press, retry turn\r\n\r\n            return\r\n        }\r\n\r\n        if (keyMap[code] === 'rest' && !shift_pressed) {\r\n            // Rest\r\n            // this.heal(this.cb.hpRecovery);\r\n            // this.restore(this.cb.manaRecovery);\r\n            Game.log('You rest for a turn.', 'player_move')\r\n        } else if (keyMap[code] === 'pickup' && !shift_pressed) {\r\n            this.pickup()\r\n        } else if (keyMap[code] === 'rest' && shift_pressed) {\r\n            // climb down\r\n            this.climb('down')\r\n        } else if (keyMap[code] === 'pickup' && shift_pressed) {\r\n            this.climb('up')\r\n        } else if (keyMap[code] === 'fire' && !shift_pressed) {\r\n            let weapon = this.cb.equipment.weapon\r\n            let ammo = this.cb.equipment.ammo\r\n            if (\r\n                weapon !== null &&\r\n                ammo !== null &&\r\n                weapon.cb.ranged &&\r\n                ammo.cb.ammoType === weapon.cb.ammoType &&\r\n                ammo.quantity > 0\r\n            ) {\r\n                Game.log(`You take aim with your ${weapon.type.toLowerCase()}.`, 'information')\r\n                Game.log(\r\n                    `Select a target with the movement keys and press [enter] or [.] to fire your ${weapon.type.toLowerCase()}.`,\r\n                    'player_move'\r\n                )\r\n                this.validTarget = Game.selectNearestEnemyTile()\r\n                if (!this.validTarget) Game.changeSelectedTile(Game.getTile(this.x, this.y))\r\n                this.targeting = true\r\n\r\n                return\r\n            } else {\r\n                if (weapon === null || !weapon.cb.ranged) {\r\n                    Game.log(\"You don't have a ranged weapon equipped!\", 'information')\r\n                } else if (ammo === null) {\r\n                    Game.log(\"You don't have any ammunition equipped.\", 'information')\r\n                } else if (ammo.cb.ammoType !== weapon.cb.ammoType) {\r\n                    Game.log(\"You don't have the right ammunition equipped for this weapon.\", 'information')\r\n                }\r\n\r\n                return\r\n            }\r\n        } else if (keyMap[code] === 'cast') {\r\n            let currentSpell = this.cb.currentSpell\r\n            if (currentSpell === null) {\r\n                Game.log('You must select a spell to cast. Select one from the spellbook!', 'information')\r\n\r\n                return\r\n            } else if (currentSpell.manaCost > this.cb.mana) {\r\n                Game.log(`You don't have enough mana to cast ${currentSpell.name}!`, 'alert')\r\n\r\n                return\r\n            }\r\n\r\n            if (currentSpell.targetType === targetTypes.SELF) {\r\n                Game.log(`You cast ${currentSpell.name}.`, 'magic')\r\n                currentSpell.cast(this, this)\r\n                this.cb.mana -= currentSpell.manaCost\r\n            } else if (currentSpell.targetType === targetTypes.TARGET) {\r\n                Game.log('You begin casting a spell.', 'defend')\r\n                Game.log('Select a target with the movement keys and press [enter] or [.] to cast the spell.', 'player_move')\r\n\r\n                this.validTarget = Game.selectNearestEnemyTile()\r\n                if (!this.validTarget) Game.changeSelectedTile(Game.getTile(this.x, this.y))\r\n                this.casting = true\r\n                // our first selected tile can be the nearest enemy\r\n\r\n                return\r\n            }\r\n        } else if (keyMap[code] === 'examine') {\r\n            Game.log('You begin examining the area.', 'information')\r\n            this.examining = true\r\n            Game.changeSelectedTile(Game.getTile(this.x, this.y))\r\n            return\r\n        } else {\r\n            let diff = ROT.DIRS[8][keyMap[code]]\r\n            let nx = this.x + diff[0]\r\n            let ny = this.y + diff[1]\r\n            if (!this.tryMove(nx, ny)) {\r\n                return\r\n            }\r\n        }\r\n        endTurn()\r\n    }\r\n\r\n    pickup() {\r\n        let ctile = Game.map.data[this.y][this.x]\r\n        let tileItems = ctile.actors.filter(el => {\r\n            return el instanceof Item\r\n        })\r\n        if (tileItems.length === 1) {\r\n            Game.log(`You picked up a ${tileItems[0].type.toLowerCase()}.`, 'information')\r\n            Game.display.clearSprite(tileItems[0])\r\n            this.addToInventory(tileItems[0])\r\n            ctile.removeActor(tileItems[0])\r\n        } else if (tileItems.length > 1) {\r\n            let itemTypes = []\r\n            for (let item of tileItems) {\r\n                itemTypes.push(item.type.toLowerCase())\r\n                Game.display.clearSprite(item)\r\n                this.addToInventory(item)\r\n                ctile.removeActor(item)\r\n            }\r\n            let prettyItemTypes = itemTypes.slice(1, itemTypes.length - 1)\r\n            prettyItemTypes = prettyItemTypes.reduce((buf, str) => {\r\n                return buf + ', a ' + str\r\n            }, 'a  ' + itemTypes.slice(0, 1))\r\n            let lastItem = ` and a ${itemTypes.slice(-1)}.`\r\n            let buffer = `You picked up ${prettyItemTypes + lastItem}`\r\n            Game.log(buffer, 'information')\r\n        } else {\r\n            Game.log(\"There's nothing to pick up.\", 'information')\r\n        }\r\n    }\r\n\r\n    // Overriding the actor\r\n    equipWeapon(item) {\r\n        super.equipWeapon(item)\r\n        Game.log(`You wield the ${item.type.toLowerCase()}.`, 'information')\r\n    }\r\n\r\n    unequipWeapon() {\r\n        if (this.cb.equipment.weapon !== null) {\r\n            this.cb.equipment.weapon.cb.equipped = false\r\n            this.cb.equipment.weapon = null\r\n        } else {\r\n            throw 'Tried to uneqip weapon but no item was equipped.'\r\n        }\r\n    }\r\n\r\n    unequipAmmo() {\r\n        if (this.cb.equipment.ammo !== null) {\r\n            this.cb.equipment.ammo.cb.equipped = false\r\n            this.cb.equipment.ammo = null\r\n        } else {\r\n            throw 'Tried to uneqip ammo but no item was equipped.'\r\n        }\r\n    }\r\n\r\n    climb(dir) {\r\n        let ctile = Game.map.data[this.y][this.x]\r\n        let ladder = ctile.actors.filter(a => {\r\n            return a instanceof Ladder\r\n        })[0]\r\n        if (ladder === undefined || ladder.direction !== dir) {\r\n            Game.log(`You cannot climb ${dir} here.`, 'information')\r\n        } else {\r\n            ladder.react(this)\r\n        }\r\n    }\r\n\r\n    tryMove(nx, ny) {\r\n        // returns true if the turn should end here\r\n        if (!Game.inbounds(nx, ny)) return\r\n        let ntile = Game.getTile(nx, ny) // new tile to move to\r\n        if (ntile.actors.length === 0 && !ntile.blocked()) {\r\n            this.move(nx, ny)\r\n            Game.clearSelectedTile()\r\n            return true\r\n        } else if (ntile.actors.length > 0) {\r\n            for (let i = 0; i < ntile.actors.length; i++) {\r\n                let actor = ntile.actors[i]\r\n                if (actor.blocked) {\r\n                    this.interact(actor)\r\n                    return true\r\n                }\r\n            }\r\n        }\r\n\r\n        if (!ntile.blocked()) {\r\n            this.move(nx, ny)\r\n            Game.clearSelectedTile()\r\n            return true\r\n        }\r\n\r\n        return false\r\n    }\r\n\r\n    attack(actor) {\r\n        let dmg = super.attack(actor)\r\n    }\r\n\r\n    death() {\r\n        super.death()\r\n        window.removeEventListener('keydown', this)\r\n        this.cb.hp = 0\r\n        // Game.scheduler.remove(Game.player);\r\n        Game.scheduler.clear()\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/Player.js","/**\r\n * Created by Larken on 6/28/2017.\r\n */\r\nimport * as PIXI from 'pixi.js'\r\nimport { Game } from '#/Game.js'\r\nimport Player from '#/entities/actors/Player.js'\r\nexport function getTileInfo(id) {\r\n\t/*\r\n     \"FOV\": boolean,\r\n     \"FOV_id\": int,\r\n     \"animated\": boolean,\r\n     \"animated_id\": int,\r\n     \"bg\": color,\r\n     \"blocked\":boolean,\r\n     \"blocks_vision\": boolean,\r\n     \"entity\": boolean,\r\n     */\r\n\t// console.log(tileset.tileproperties[id]);\r\n\treturn Game.display.tileset.tileproperties[id + '']\r\n}\r\n\r\nexport default class Tile {\r\n\tconstructor(x, y) {\r\n\t\tthis.x = x\r\n\t\tthis.y = y\r\n\t\tthis.actors = []\r\n\t\tthis.obstacles = []\r\n\t}\r\n\r\n\tupdateTileInfo(id) {\r\n\t\tlet obstacle = {}\r\n\t\tif (id in Game.display.tileset.tileproperties) {\r\n\t\t\t// just means there are no tile properties for this guy\r\n\t\t\tobstacle = getTileInfo(id)\r\n\t\t}\r\n\t\tobstacle.id = id\r\n\t\tthis.obstacles.push(obstacle) // add to the end of the obstacles to be drawn on top\r\n\t}\r\n\r\n\t/* Indicates whether or not a tile is blocked; however, this excludes the player for AI purposes. */\r\n\tblocked() {\r\n\t\t// TODO: fix it so that this actually fires off properly without blocking enemies from moving\r\n\t\t/*\r\n        for (let actor of this.actors) {\r\n            if (actor.blocked)\r\n                return true;\r\n        }\r\n        */\r\n\t\tif (this.obstacles.length > 0) return this.obstacles[this.obstacles.length - 1].blocked\r\n\t\treturn false\r\n\t}\r\n\r\n\tvisible() {\r\n\t\treturn !(\r\n\t\t\tthis.obstacles.some(el => {\r\n\t\t\t\treturn el.blocks_vision\r\n\t\t\t}) ||\r\n\t\t\tthis.actors.some(el => {\r\n\t\t\t\treturn !el.visible\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n\r\n\tremoveActor(a) {\r\n\t\tlet idx = this.actors.findIndex(actor => {\r\n\t\t\treturn Object.is(a, actor)\r\n\t\t})\r\n\t\tthis.actors.splice(idx, 1)\r\n\t}\r\n\r\n\tbg() {\r\n\t\tlet obstacles = this.obstacles\r\n\t\tif (\r\n\t\t\t!obstacles.some(e => {\r\n\t\t\t\treturn 'bg' in e\r\n\t\t\t})\r\n\t\t) {\r\n\t\t\treturn 'black'\r\n\t\t} else {\r\n\t\t\tfor (let i = obstacles.length - 1; i >= 0; i--) {\r\n\t\t\t\tlet obs = obstacles[i]\r\n\t\t\t\tif ('bg' in obs) return obs.bg\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/map/Tile.js","/**\r\n * Created by larken on 7/12/17.\r\n */\r\n\r\nimport {Actor} from '#/entities/actors/Actor.js'\r\n\r\nexport default class NPC extends Actor {\r\n\tconstructor(x, y, id) {\r\n\t\tsuper(x, y, {\r\n\t\t\tid: id,\r\n\t\t\tname : 'non-player character',\r\n\t\t\tvisible: true,\r\n\t\t\tblocked: true,\r\n\t\t\tcombat: {\r\n\t\t\t\thostile: false\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/NPC.js","/**\r\n * Created by Larken on 6/22/2017.\r\n */\r\nimport ROT from 'rot-js'\r\nimport { StatelessAI } from '#/entities/actors/enemies/StatelessAI.js'\r\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\r\nimport { createSword, Sword } from '#/entities/items/weapons/Sword.js'\r\nimport HealthPotion from '#/entities/items/potions/HealthPotion.js'\r\nimport StrengthPotion from '#/entities/items/potions/StrengthPotion.js'\r\nimport ManaPotion from '#/entities/items/potions/ManaPotion.js'\r\nimport { Game } from '#/Game.js'\r\nimport { SteelArrow } from '#/entities/items/weapons/ranged/ammo/Arrow.js'\r\n\r\nexport default class Goblin extends StatelessAI {\r\n\tconstructor(x, y, id) {\r\n\t\tlet randomHP = getRandomInt(6, 9)\r\n\t\tlet randomStr = getRandomInt(1, 3)\r\n\t\tsuper(\r\n\t\t\tx,\r\n\t\t\ty,\r\n\t\t\t{\r\n\t\t\t\tid: id,\r\n\t\t\t\tname: 'goblin',\r\n\t\t\t\tdescription: 'A mean, green goblin!',\r\n\t\t\t\tvisible: true,\r\n\t\t\t\tblocked: true,\r\n\t\t\t\tchasing: false,\r\n\t\t\t\tcombat: {\r\n\t\t\t\t\t/* options.combat, dedicated to all things related to combat */\r\n\t\t\t\t\tdescription: [' attacked '],\r\n\t\t\t\t\t/* max stats */\r\n\t\t\t\t\tmaxhp: randomHP,\r\n\t\t\t\t\tmaxmana: 5,\r\n\t\t\t\t\t/* current stats */\r\n\t\t\t\t\thp: randomHP,\r\n\t\t\t\t\tmana: 5,\r\n\t\t\t\t\tstr: randomStr,\r\n\t\t\t\t\tdef: 1,\r\n\t\t\t\t\t/* misc */\r\n\t\t\t\t\thostile: true,\r\n\t\t\t\t\trange: 9,\r\n\t\t\t\t\tinvulnerable: false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t/* AI parameters */\r\n\t\t\t\tmorale: 0.2,\r\n\t\t\t\tminPlayerDist: 0,\r\n\t\t\t\tmaxPlayerDist: 0,\r\n\t\t\t\tranged: false,\r\n\t\t\t\tmelee: true,\r\n\t\t\t\tmagic: false,\r\n\t\t\t\twanders: true\r\n\t\t\t}\r\n\t\t)\r\n\r\n\t\tif (getRandomInt(1, 10) < 2) {\r\n\t\t\tlet items = getItemsFromDropTable({\r\n\t\t\t\tminItems: 0,\r\n\t\t\t\tmaxItems: 1,\r\n\t\t\t\tdropTable: {\r\n\t\t\t\t\tSTRENGTH_POTION: 3,\r\n\t\t\t\t\tHEALTH_POTION: 2,\r\n\t\t\t\t\tMANA_POTION: 2,\r\n\t\t\t\t\tSTEEL_ARROW: 2,\r\n\t\t\t\t\tSWORD: 0\r\n\t\t\t\t},\r\n\t\t\t\tx: this.x,\r\n\t\t\t\ty: this.y\r\n\t\t\t})\r\n\t\t\titems.forEach(item => this.addToInventory(item))\r\n\t\t}\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Goblin.js","/**\r\n * Created by Larken on 6/22/2017.\r\n */\r\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\r\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\r\nimport { createSword, Sword } from '#/entities/items/weapons/Sword.js'\r\nimport HealthPotion from '#/entities/items/potions/HealthPotion.js'\r\nimport StrengthPotion from '#/entities/items/potions/StrengthPotion.js'\r\nimport { Game } from '#/Game.js'\r\nimport { SteelArrow } from '#/entities/items/weapons/ranged/ammo/Arrow.js'\r\n\r\nexport default class Kobold extends SimpleEnemy {\r\n\tconstructor(x, y, id, ranged = false) {\r\n\t\tlet randomHP = getRandomInt(20, 25)\r\n\t\tlet randomStr = getRandomInt(5, 7)\r\n\t\tsuper(x, y, {\r\n\t\t\tid: id,\r\n\t\t\tname: 'Kobold',\r\n\t\t\tdescription: 'A cold-blooded kobold!',\r\n\t\t\tvisible: true,\r\n\t\t\tblocked: true,\r\n\t\t\tchasing: false,\r\n\t\t\tcombat: {\r\n\t\t\t\t/* options.combat, dedicated to all things related to combat */\r\n\t\t\t\tdescription: [' attacked '],\r\n\t\t\t\t/* max stats */\r\n\t\t\t\tmaxhp: randomHP,\r\n\t\t\t\tmaxmana: 5,\r\n\t\t\t\t/* current stats */\r\n\t\t\t\thp: randomHP,\r\n\t\t\t\tmana: 5,\r\n\t\t\t\tstr: randomStr,\r\n\t\t\t\tdef: 1,\r\n\t\t\t\t/* misc */\r\n\t\t\t\thostile: true,\r\n\t\t\t\trange: 9,\r\n\t\t\t\tinvulnerable: false\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tlet items = getItemsFromDropTable({\r\n\t\t\tminItems: 0,\r\n\t\t\tmaxItems: 2,\r\n\t\t\tdropTable: {\r\n\t\t\t\tSTRENGTH_POTION: 1,\r\n\t\t\t\tHEALTH_POTION: 1,\r\n\t\t\t\tSTEEL_ARROW: 2,\r\n\t\t\t\tSWORD: 1\r\n\t\t\t},\r\n\t\t\tx: this.x,\r\n\t\t\ty: this.y\r\n\t\t})\r\n\t\titems.forEach(item => this.addToInventory(item))\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Kobold.js","/**\r\n * Created by Larken on 7/5/2017.\r\n */\r\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\r\nimport HealthPotion from '#/entities/items/potions/HealthPotion.js'\r\nimport StrengthPotion from '#/entities/items/potions/StrengthPotion.js'\r\nimport ManaPotion from '#/entities/items/potions/ManaPotion.js'\r\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\r\nimport { Sword } from '#/entities/items/weapons/Sword.js'\r\nimport { Game } from '#/Game.js'\r\nimport ROT from 'rot-js'\r\nimport { SteelArrow } from '#/entities/items/weapons/ranged/ammo/Arrow.js'\r\n\r\nexport default class Orc extends SimpleEnemy {\r\n\tconstructor(x, y, id, empowered = false) {\r\n\t\tlet randomHP = getRandomInt(30, 35)\r\n\t\tlet randomStr = getRandomInt(5, 10)\r\n\t\tsuper(\r\n\t\t\tx,\r\n\t\t\ty,\r\n\t\t\t{\r\n\t\t\t\tid: id,\r\n\t\t\t\tname: empowered ? 'Empowered Orc' : 'orc',\r\n\t\t\t\tdescription: 'All bronze and no brains!',\r\n\t\t\t\tvisible: true,\r\n\t\t\t\tblocked: true,\r\n\t\t\t\tchasing: false,\r\n\t\t\t\tcombat: {\r\n\t\t\t\t\t/* options.combat, dedicated to all things related to combat */\r\n\t\t\t\t\tdescription: [' attacked '],\r\n\t\t\t\t\t/* max stats */\r\n\t\t\t\t\tmaxhp: randomHP,\r\n\t\t\t\t\tmaxmana: 5,\r\n\t\t\t\t\t/* current stats */\r\n\t\t\t\t\thp: randomHP,\r\n\t\t\t\t\tmana: 5,\r\n\t\t\t\t\tstr: randomStr,\r\n\t\t\t\t\tdef: 1,\r\n\t\t\t\t\t/* misc */\r\n\t\t\t\t\thostile: true,\r\n\t\t\t\t\trange: 5,\r\n\t\t\t\t\tinvulnerable: false,\r\n\t\t\t\t\tempowered: empowered\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfalse\r\n\t\t)\r\n\t\tif (getRandomInt(1, 10) < 5) {\r\n\t\t\tlet items = getItemsFromDropTable({\r\n\t\t\t\tminItems: 0,\r\n\t\t\t\tmaxItems: 2,\r\n\t\t\t\tdropTable: {\r\n\t\t\t\t\tSTRENGTH_POTION: 1,\r\n\t\t\t\t\tHEALTH_POTION: 1,\r\n\t\t\t\t\tSTEEL_ARROW: 1,\r\n\t\t\t\t\tMANA_POTION: 1,\r\n\t\t\t\t\tSWORD: 1\r\n\t\t\t\t},\r\n\t\t\t\tx: this.x,\r\n\t\t\t\ty: this.y\r\n\t\t\t})\r\n\t\t\titems.forEach(item => this.addToInventory(item))\r\n\t\t}\r\n\t}\r\n\r\n\tinteract(actor) {\r\n\t\tif (actor === Game.player) {\r\n\t\t\tlet dmg = this.attack(actor)\r\n\t\t\tif (this.cb.empowered) {\r\n\t\t\t\tlet amtHealed = Math.floor(dmg / 2)\r\n\t\t\t\tGame.log(`The empowered orc steals your health and regenerates ${amtHealed} health!`, 'alert')\r\n\t\t\t\tthis.heal(amtHealed)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tactor.react(this)\r\n\t\t}\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Orc.js","/**\r\n * Created by Larken on 6/22/2017.\r\n */\r\nimport { Game } from '#/Game.js'\r\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\r\n\r\nexport default class Rat extends SimpleEnemy {\r\n\tconstructor(x, y, id) {\r\n\t\tsuper(x, y, {\r\n\t\t\tid: id,\r\n\t\t\tname: 'rat',\r\n\t\t\tdescription: 'A fat rat!',\r\n\t\t\tsymbol: 'r',\r\n\t\t\tfg: 'grey',\r\n\t\t\tbg: 'seagreen',\r\n\t\t\tvisible: true,\r\n\t\t\tblocked: true,\r\n\t\t\tchasing: false,\r\n\t\t\tcombat: {\r\n\t\t\t\t/* options.combat, dedicated to all things related to combat */\r\n\t\t\t\tdescription: [' attacked '],\r\n\t\t\t\t/* max stats */\r\n\t\t\t\tmaxhp: 3,\r\n\t\t\t\tmaxmana: 0,\r\n\t\t\t\t/* current stats */\r\n\t\t\t\thp: 3,\r\n\t\t\t\tmana: 0,\r\n\t\t\t\tstr: 1,\r\n\t\t\t\tdef: 0,\r\n\t\t\t\t/* misc */\r\n\t\t\t\thostile: true,\r\n\t\t\t\trange: 4,\r\n\t\t\t\tinvulnerable: false\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Rat.js","/**\r\n * Created by Larken on 6/22/2017.\r\n */\r\nimport ROT from 'rot-js'\r\nimport { StatelessAI } from '#/entities/actors/enemies/StatelessAI.js'\r\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\r\nimport { Game } from '#/Game.js'\r\n\r\nexport default class Bat extends StatelessAI {\r\n\tconstructor(x, y, id) {\r\n\t\tlet randomHP = getRandomInt(4, 8)\r\n\t\tlet randomStr = getRandomInt(1, 2)\r\n\t\tsuper(\r\n\t\t\tx,\r\n\t\t\ty,\r\n\t\t\t{\r\n\t\t\t\tid: id,\r\n\t\t\t\tname: 'bat',\r\n\t\t\t\tdescription: 'A creature of the night!',\r\n\t\t\t\tvisible: true,\r\n\t\t\t\tblocked: true,\r\n\t\t\t\tchasing: false,\r\n\t\t\t\tcombat: {\r\n\t\t\t\t\t/* options.combat, dedicated to all things related to combat */\r\n\t\t\t\t\tdescription: [' attacked '],\r\n\t\t\t\t\t/* max stats */\r\n\t\t\t\t\tmaxhp: randomHP,\r\n\t\t\t\t\tmaxmana: 5,\r\n\t\t\t\t\t/* current stats */\r\n\t\t\t\t\thp: randomHP,\r\n\t\t\t\t\tmana: 5,\r\n\t\t\t\t\tstr: randomStr,\r\n\t\t\t\t\tdef: 1,\r\n\t\t\t\t\t/* misc */\r\n\t\t\t\t\thostile: true,\r\n\t\t\t\t\trange: 9,\r\n\t\t\t\t\tinvulnerable: false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t/* AI parameters */\r\n\t\t\t\tmorale: 0.4,\r\n\t\t\t\tminPlayerDist: 0,\r\n\t\t\t\tmaxPlayerDist: 0,\r\n\t\t\t\tranged: false,\r\n\t\t\t\tmelee: true,\r\n\t\t\t\tmagic: false,\r\n\t\t\t\twanders: true\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Bat.js","/**\r\n * Created by Larken on 6/22/2017.\r\n */\r\nimport ROT from 'rot-js'\r\nimport { StatelessAI } from '#/entities/actors/enemies/StatelessAI.js'\r\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\r\nimport { Game } from '#/Game.js'\r\n\r\nexport default class WildGoat extends StatelessAI {\r\n\tconstructor(x, y, id) {\r\n\t\tlet randomHP = getRandomInt(4, 8)\r\n\t\tlet randomStr = getRandomInt(1, 2)\r\n\t\tsuper(\r\n\t\t\tx,\r\n\t\t\ty,\r\n\t\t\t{\r\n\t\t\t\tid: id,\r\n\t\t\t\tname: 'wild goat',\r\n\t\t\t\tdescription: 'A really pissed off goat!',\r\n\t\t\t\tvisible: true,\r\n\t\t\t\tblocked: true,\r\n\t\t\t\tchasing: false,\r\n\t\t\t\tcombat: {\r\n\t\t\t\t\t/* options.combat, dedicated to all things related to combat */\r\n\t\t\t\t\tdescription: [' headbutted ', ' rammed '],\r\n\t\t\t\t\t/* max stats */\r\n\t\t\t\t\tmaxhp: randomHP,\r\n\t\t\t\t\tmaxmana: 5,\r\n\t\t\t\t\t/* current stats */\r\n\t\t\t\t\thp: randomHP,\r\n\t\t\t\t\tmana: 5,\r\n\t\t\t\t\tstr: randomStr,\r\n\t\t\t\t\tdef: 1,\r\n\t\t\t\t\t/* misc */\r\n\t\t\t\t\thostile: true,\r\n\t\t\t\t\trange: 9,\r\n\t\t\t\t\tinvulnerable: false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t/* AI parameters */\r\n\t\t\t\tmorale: 0.4,\r\n\t\t\t\tminPlayerDist: 0,\r\n\t\t\t\tmaxPlayerDist: 0,\r\n\t\t\t\tranged: false,\r\n\t\t\t\tmelee: true,\r\n\t\t\t\tmagic: false,\r\n\t\t\t\twanders: true\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/WildGoat.js","/**\r\n * Created by Larken on 7/8/2017.\r\n */\r\n\r\nimport { Game } from '#/Game.js'\r\nimport { Entity } from '#/entities/Entity.js'\r\n\r\nexport default class Chest extends Entity {\r\n    constructor(x, y, id) {\r\n        super(x, y, {\r\n            name: 'chest',\r\n            id: id,\r\n            visible: true,\r\n            blocked: true\r\n        })\r\n        this.closed = true\r\n        this.items = []\r\n    }\r\n\r\n    react(actor) {\r\n        if (this.closed) {\r\n            this.open()\r\n        } else {\r\n            // open up an inventory screen of items in the chest?\r\n            if (this.items.length === 0) {\r\n                Game.log(\"There's nothing left in this chest!\", 'information')\r\n            } else {\r\n                Game.log('You collect everything from the chest.', 'information')\r\n                for (let item of this.items) actor.addToInventory(item)\r\n\r\n                this.items = []\r\n            }\r\n        }\r\n    }\r\n\r\n    addToInventory(item) {\r\n        this.items.push(item)\r\n    }\r\n\r\n    open() {\r\n        this.closed = false\r\n        this.id = Game.display.tileset.tileproperties[this.id].activated_id\r\n        this.sprite.texture = Game.display.tilesetMapping[this.id]\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/misc/Chest.js","import Item from '#/entities/items/Item.js'\r\nimport {Game} from '#/Game.js'\r\n\r\nexport default class Key extends Item {\r\n\r\n\tconstructor(x, y, id) {\r\n\t\tsuper(x, y, {\r\n\t\t\tid: id,\r\n\t\t\ttype: 'Key'\r\n\t\t})\r\n\t}\r\n\r\n\thoverInfo() {\r\n\t\treturn ''\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/misc/Key.js","import Item from '#/entities/items/Item.js'\r\nimport * as magic from '#/magic/Spell.js'\r\nimport { Game } from '#/Game.js'\r\n\r\nexport class Spellbook extends Item {\r\n\tconstructor(x, y, id, options) {\r\n\t\tsuper(x, y, {\r\n\t\t\tid: id,\r\n\t\t\taction: 'Read',\r\n\t\t\ttype: 'Spellbook',\r\n\t\t\t...options\r\n\t\t})\r\n\t}\r\n\r\n\tuse() {\r\n\t\tfor (let spell of this.spells) {\r\n\t\t\tif (\r\n\t\t\t\t!Game.player.cb.spells.some(s => {\r\n\t\t\t\t\treturn s.name === spell.name\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\t\tGame.player.cb.spells.push(spell)\r\n\t\t}\r\n\t\tGame.player.removeFromInventory(this)\r\n\t}\r\n\r\n\thoverInfo() {\r\n\t\t// return `${this.type}${this.name}\\n`\r\n\t}\r\n}\r\n\r\nexport class NecromancySpellBook extends Spellbook {\r\n\tconstructor(x, y, id) {\r\n\t\tsuper(x, y, id, {\r\n\t\t\tspells: [\r\n\t\t\t\tnew magic.Pain(),\r\n\t\t\t\tnew magic.VampiricDraining(),\r\n\t\t\t\tnew magic.AnimateDead(),\r\n\t\t\t\tnew magic.Regeneration()\r\n\t\t\t],\r\n\t\t\tname: 'Book of Death'\r\n\t\t})\r\n\t}\r\n\r\n\tuse() {\r\n\t\tsuper.use()\r\n\t\tGame.log(\r\n\t\t\t'You have learned necromancy spells...but at what cost?',\r\n\t\t\t'lightgreen'\r\n\t\t)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/misc/Spellbook.js","import { Game } from '#/Game.js'\r\nimport { Entity } from '#/entities/Entity.js'\r\n\r\nexport default class LevelTransition extends Entity {\r\n    constructor(x, y, id, dir) {\r\n        super(x, y, {\r\n            id: id,\r\n            name: 'path',\r\n            direction: dir,\r\n            description: 'A path leading to a new area!',\r\n            fg: 'brown',\r\n            bg: 'orange',\r\n            blocked: true,\r\n            visible: true\r\n        })\r\n        this.portal = null\r\n    }\r\n\r\n    act() {}\r\n\r\n    react(actor) {\r\n        Game.log(`You leave the ${Game.currentLevel.name} and go to the ${this.portal}.`, 'information')\r\n        Game.changeLevels(this.portal)\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/misc/LevelTransition.js","import { Game, tileset } from '#/Game.js'\r\nimport Tile, { getTileInfo } from '#/map/Tile.js'\r\n// Entities\r\nimport Player from '#/entities/actors/Player.js'\r\nimport NPC from '#/entities/actors/NPC.js'\r\n// Enemies\r\nimport Goblin from '#/entities/actors/enemies/Goblin.js'\r\nimport Kobold from '#/entities/actors/enemies/Kobold.js'\r\nimport Orc from '#/entities/actors/enemies/Orc.js'\r\nimport Rat from '#/entities/actors/enemies/Rat.js'\r\nimport Bat from '#/entities/actors/enemies/Bat.js'\r\nimport WildGoat from '#/entities/actors/enemies/WildGoat.js'\r\nimport Skeleton from '#/entities/actors/enemies/Skeleton.js'\r\nimport Zombie from '#/entities/actors/enemies/Zombie.js'\r\nimport { Corpse, corpseTypes } from '#/entities/items/misc/Corpse.js'\r\n\r\nimport Lich from '#/entities/actors/enemies/boss/Lich.js'\r\n// Items\r\n// Weapons\r\nimport { createSword, Sword } from '#/entities/items/weapons/Sword.js'\r\nimport { Bow, createBow } from '#/entities/items/weapons/ranged/Bow.js'\r\nimport { SteelArrow } from '#/entities/items/weapons/ranged/ammo/Arrow.js'\r\n// Potions\r\nimport HealthPotion from '#/entities/items/potions/HealthPotion.js'\r\nimport StrengthPotion from '#/entities/items/potions/StrengthPotion.js'\r\nimport ManaPotion from '#/entities/items/potions/ManaPotion.js'\r\n// Misc\r\nimport Chest from '#/entities/misc/Chest.js'\r\nimport Door from '#/entities/misc/Door.js'\r\nimport LockedDoor from '#/entities/misc/LockedDoor.js'\r\nimport Key from '#/entities/items/misc/Key.js'\r\nimport { NecromancySpellBook } from '#/entities/items/misc/Spellbook.js'\r\nimport Ladder from '#/entities/misc/Ladder.js'\r\nimport LevelTransition from '#/entities/misc/LevelTransition.js'\r\n\r\nexport const entityShop = {\r\n\t0: (x, y, id) => {\r\n\t\treturn new Player(x, y, id)\r\n\t},\r\n\t1: (x, y, id) => {\r\n\t\treturn new Goblin(x, y, id)\r\n\t},\r\n\t2: (x, y, id) => {\r\n\t\treturn new Rat(x, y, id)\r\n\t},\r\n\t3: (x, y, id) => {\r\n\t\treturn new Ladder(x, y, id, 'down')\r\n\t},\r\n\t4: (x, y, id) => {\r\n\t\treturn new Ladder(x, y, id, 'up')\r\n\t},\r\n\t5: (x, y, id) => {\r\n\t\treturn createSword(x, y, id)\r\n\t},\r\n\t6: (x, y, id) => {\r\n\t\treturn new NPC(x, y, id)\r\n\t},\r\n\t7: (x, y, id) => {\r\n\t\t// normal Orc\r\n\t\treturn new Orc(x, y, id)\r\n\t},\r\n\t8: (x, y, id) => {\r\n\t\t// empowered Orc\r\n\t\treturn new Orc(x, y, id, true)\r\n\t},\r\n\t9: (x, y, id) => {\r\n\t\treturn new Door(x, y, id)\r\n\t},\r\n\t10: (x, y, id) => {\r\n\t\treturn new Chest(x, y, id)\r\n\t},\r\n\t11: (x, y, id) => {\r\n\t\treturn new HealthPotion(x, y, id)\r\n\t},\r\n\t12: (x, y, id) => {\r\n\t\treturn new StrengthPotion(x, y, id)\r\n\t},\r\n\t13: (x, y, id) => {\r\n\t\treturn new ManaPotion(x, y, id)\r\n\t},\r\n\t14: (x, y, id) => {\r\n\t\treturn new Sword(x, y, 4, 7, 'Orc Purifier', id)\r\n\t},\r\n\t15: (x, y, id) => {\r\n\t\treturn new Key(x, y, id)\r\n\t},\r\n\t16: (x, y, id) => {\r\n\t\treturn new LockedDoor(x, y, id)\r\n\t},\r\n\t17: (x, y, id) => {\r\n\t\treturn createBow(x, y, id)\r\n\t},\r\n\t18: (x, y, id) => {\r\n\t\treturn new SteelArrow(x, y, id, 5)\r\n\t},\r\n\t19: (x, y, id) => {\r\n\t\treturn new Kobold(x, y, id)\r\n\t},\r\n\t20: (x, y, id) => {\r\n\t\treturn new Bat(x, y, id)\r\n\t},\r\n\t21: (x, y, id) => {\r\n\t\treturn new Lich(x, y, id)\r\n\t},\r\n\t22: (x, y, id) => {\r\n\t\treturn new LevelTransition(x, y, id)\r\n\t},\r\n\t23: (x, y, id) => {\r\n\t\treturn new Zombie(x, y, id)\r\n\t},\r\n\t24: (x, y, id) => {\r\n\t\treturn new Skeleton(x, y, id)\r\n\t},\r\n\t25: (x, y, id) => {\r\n\t\treturn new Corpse(x, y, 'zombie', id)\r\n\t},\r\n\t26: (x, y, id) => {\r\n\t\treturn new Corpse(x, y, 'skeleton', id)\r\n\t},\r\n\t27: (x, y, id) => {\r\n\t\treturn new NecromancySpellBook(x, y, id)\r\n\t},\r\n\t28: (x, y, id) => {\r\n\t\treturn new WildGoat(x, y, id)\r\n\t}\r\n}\r\n\r\nexport function createEntity(x, y, entity_id, frame_id) {\r\n\tif (entity_id in entityShop) {\r\n\t\treturn entityShop[entity_id](x, y, frame_id)\r\n\t} else {\r\n\t\tthrow `No entity assigned to ID ${entity_id} for frame ${frame_id} at ${x + ',' + y}`\r\n\t}\r\n}\r\n\r\nexport function createMapFromJSON(json) {\r\n\tlet { layers, width, height } = json\r\n\tlet gameMap = new GameMap(width, height)\r\n\tgameMap.createFromJSON(json)\r\n\treturn gameMap\r\n}\r\n/**\r\n * Created by Larken on 6/28/2017.\r\n */\r\nexport class GameMap {\r\n\tconstructor(width, height) {\r\n\t\tthis.loadedIDS = []\r\n\t\tthis.playerLocation = null // this field is used exclusively for saving the player's last location before they change levels\r\n\t\tthis.width = width\r\n\t\tthis.height = height\r\n\t\tthis.actors = [] // store all of the actors in array\r\n\t\tthis.data = new Array(this.height) // stores all tiles in the game\r\n\t\tthis.visible_tiles = {}\r\n\t\tthis.seen_tiles = {}\r\n\t\t// Intialize all of the tiles...\r\n\t\tfor (let i = 0; i < this.height; i++) {\r\n\t\t\tthis.data[i] = new Array(this.width)\r\n\t\t\tfor (let j = 0; j < this.width; j++) {\r\n\t\t\t\tthis.data[i][j] = new Tile(j, i)\r\n\t\t\t}\r\n\t\t}\r\n\t\t// Process all of the json layers\r\n\t\t// process the group layers last. this is specifically for placing static itemsets into treasure chests in the overworld.\r\n\t\t// process it last so that all of the chest entities have been created already\r\n\t}\r\n\r\n\tgetTile(x, y) {\r\n\t\treturn this.data[y][x]\r\n\t}\r\n\r\n\tcreateFromJSON({ layers }) {\r\n\t\tlet itemLayers = []\r\n\t\tlet portalLayers = []\r\n\t\tfor (let layer of layers) {\r\n\t\t\t// Obstacle Layer\r\n\t\t\tif (layer.properties.obstacles === true) this.processObstacleLayer(layer)\r\n\t\t\telse if (layer.properties.items === true) itemLayers.push(layer)\r\n\t\t\telse if (layer.properties.actors === true) this.processActorLayer(layer)\r\n\t\t\telse if (layer.properties.portal === true) portalLayers.push(layer)\r\n\t\t\telse throw 'A layer has been added to the map and is invalid'\r\n\t\t}\r\n\t\t// if (this.playerLocation === null) throw \"Error - no player starting position!\";\r\n\t\t// add chest items to chests where appropriate\r\n\t\tfor (let layer of itemLayers) {\r\n\t\t\tthis.processItemLayer(layer)\r\n\t\t}\r\n\r\n\t\tfor (let layer of portalLayers) {\r\n\t\t\tthis.processPortalLayer(layer)\r\n\t\t}\r\n\t}\r\n\r\n\tprocessObstacleLayer(layer) {\r\n\t\tfor (let i = 0; i < this.height; i++) {\r\n\t\t\tfor (let j = 0; j < this.width; j++) {\r\n\t\t\t\t// Grabs the ID from the layer\r\n\t\t\t\tlet id = layer.data[i * this.width + j] - 1\r\n\t\t\t\tif (id > 1) {\r\n\t\t\t\t\tGame.loadedIDS.push(id)\r\n\t\t\t\t\tthis.data[i][j].updateTileInfo(id)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprocessActorLayer(layer) {\r\n\t\t// console.log(\"Loading actors...\");\r\n\t\tfor (let i = 0; i < this.height; i++) {\r\n\t\t\tfor (let j = 0; j < this.width; j++) {\r\n\t\t\t\tlet id = layer.data[i * this.width + j] - 1 // grab the id in the json data\r\n\t\t\t\tif (id > 1) {\r\n\t\t\t\t\t// id of zero indicates no actor in this spot\r\n\t\t\t\t\tGame.loadedIDS.push(id)\r\n\t\t\t\t\tlet properties = getTileInfo(id)\r\n\t\t\t\t\tif (properties.entity !== true) throw 'Bad entity creation for tile ' + id\r\n\t\t\t\t\tif (properties.entity_id === 0) {\r\n\t\t\t\t\t\tthis.playerLocation = [j, i]\r\n\t\t\t\t\t\tthis.playerID = id\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet newActor = createEntity(j, i, properties.entity_id, id)\r\n\t\t\t\t\t\tthis.actors.push(newActor) // add to the list of all actors\r\n\t\t\t\t\t\tthis.data[i][j].actors.push(newActor) // also push to the tiles' actors\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprocessItemLayer(layer) {\r\n\t\tfor (let i = 0; i < this.height; i++) {\r\n\t\t\tfor (let j = 0; j < this.width; j++) {\r\n\t\t\t\tlet id = layer.data[i * this.width + j] - 1 // grab the id in the json data\r\n\t\t\t\tif (id > 1) {\r\n\t\t\t\t\t// id of zero indicates no actor in this spot\r\n\t\t\t\t\tGame.loadedIDS.push(id)\r\n\t\t\t\t\tlet properties = getTileInfo(id)\r\n\t\t\t\t\tif (properties.entity !== true) throw 'Bad entity creation for tile ' + id\r\n\t\t\t\t\tlet newActor = createEntity(j, i, properties.entity_id, id)\r\n\t\t\t\t\tthis.actors.push(newActor) // add to the list of all actors\r\n\t\t\t\t\tthis.findActor(j, i).addToInventory(newActor)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprocessPortalLayer(layer) {\r\n\t\tfor (let i = 0; i < this.height; i++) {\r\n\t\t\tfor (let j = 0; j < this.width; j++) {\r\n\t\t\t\tlet id = layer.data[i * this.width + j] - 1 // grab the id in the json data\r\n\t\t\t\tif (id > 1) {\r\n\t\t\t\t\t// id of zero indicates no actor in this spot\r\n\t\t\t\t\tGame.loadedIDS.push(id)\r\n\t\t\t\t\tlet properties = getTileInfo(id)\r\n\t\t\t\t\t// now we've got a portal cell that tells us where a ladder should lead\r\n\t\t\t\t\t// find the ladder at this location\r\n\t\t\t\t\tlet ladders = this.data[i][j].actors.filter(a => {\r\n\t\t\t\t\t\treturn a instanceof Ladder || a instanceof LevelTransition // throwing in condition that it can also be level transition\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif (ladders.length === 0) {\r\n\t\t\t\t\t\tthrow 'tried to create a portal link for a ladder or level transition but neither was found'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tladders[0].portal = properties.level\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprint() {\r\n\t\tlet buf = ''\r\n\t\tfor (let i = 0; i < this.height; i++) {\r\n\t\t\tlet row = ''\r\n\t\t\tfor (let j = 0; j < this.width; j++) row += this.data[i][j].symbol //+ \" \";\r\n\t\t\tbuf += row + '\\n'\r\n\t\t}\r\n\r\n\t\tfor (let i = 0; i < this.actors.length; i++) {\r\n\t\t\tlet actor = this.actors[i]\r\n\t\t\t/* to calculate where the actor should go, we have to consider\r\n             the new line character in each line of the buffer, which is equal\r\n             to the actor's y coord. */\r\n\t\t\tlet index = actor.y * this.width + actor.x + actor.y\r\n\t\t\tbuf = buf.substr(0, index) + actor.symbol + buf.substr(index + 1)\r\n\t\t}\r\n\t\tconsole.log(buf)\r\n\t}\r\n\r\n\tfindActor(x, y) {\r\n\t\tlet chests = this.data[y][x].actors.filter(a => {\r\n\t\t\treturn a instanceof Chest\r\n\t\t})\r\n\t\t// if there are no chests, then that means we need to find an actor who should have all of the items added to\r\n\t\tif (chests.length === 0) {\r\n\t\t\tlet possibleActors = this.data[y][x].actors\r\n\t\t\tif (possibleActors.length === 0) throw `There's no actor in which an item can be placed at (${x},${y})`\r\n\t\t\treturn possibleActors[0]\r\n\t\t} else {\r\n\t\t\treturn chests[0]\r\n\t\t}\r\n\t}\r\n\r\n\t/* Returns the tiles adjacent to the given tile */\r\n\tadjTiles(tile) {\r\n\t\tlet adjacentTiles = []\r\n\t\tfor (let dist of ROT.DIRS[8]) {\r\n\t\t\tlet nx = tile.x + dist[0]\r\n\t\t\tlet ny = tile.y + dist[1]\r\n\t\t\tif (!(nx < 0 || nx === this.width || ny < 0 || ny === this.height)) adjacentTiles.push(this.data[ny][nx])\r\n\t\t}\r\n\t\treturn adjacentTiles\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/map/GameMap.js","/**\r\n * Created by Larken on 7/8/2017.\r\n */\r\nimport {Game, tileset} from '#/Game.js'\r\nimport Door from '#/entities/misc/Door.js'\r\nimport Key from '#/entities/items/misc/Key.js'\r\n\r\nexport default class LockedDoor extends Door {\r\n\tconstructor(x, y, id) {\r\n\t\tsuper(x, y, id)\r\n\t\tthis.name = 'locked door'\r\n\t}\r\n\r\n\treact(actor) {\r\n\t\tif (this.closed && actor === Game.player) {\r\n\t\t\t// if it's closed, then we need to make sure this\r\n\t\t\t// actor who is trying to open the door has a key\r\n\t\t\tlet keys = actor.items().filter((i) => {\r\n\t\t\t\treturn i instanceof Key\r\n\t\t\t})\r\n\t\t\tif (keys.length === 0) {\r\n\t\t\t\tGame.log('You need a key to open this door.', 'alert')\r\n\t\t\t} else {\r\n\t\t\t\tGame.log('You use a key to unlock the door.', 'player_move')\r\n\t\t\t\tactor.removeFromInventory(keys[0])\r\n\t\t\t\tthis.openDoor()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/misc/LockedDoor.js","import { Actor } from '#/entities/actors/Actor.js'\r\nimport { Game } from '#/Game.js'\r\nimport ROT from 'rot-js'\r\n\r\nimport { targetTypes, MagicDart, Regeneration, Pain, VampiricDraining, getNearbyCorpses, AnimateDead } from '#/magic/Spell.js'\r\nimport { getVisibleTiles } from '#/utils/HelperFunctions'\r\nexport default class Lich extends Actor {\r\n    constructor(x, y, id) {\r\n        super(x, y, {\r\n            id: id,\r\n            name: 'Lich',\r\n            description: 'Once a powerful necromancer, now transformed into a lich.',\r\n            visible: true,\r\n            blocked: true,\r\n            chasing: false,\r\n            combat: {\r\n                /* options.combat, dedicated to all things related to combat */\r\n                description: [' attacked '],\r\n                /* max stats */\r\n                maxhp: 40,\r\n                maxmana: 25,\r\n                /* current stats */\r\n                hp: 40,\r\n                mana: 25,\r\n                str: 15,\r\n                def: 5,\r\n                /* misc */\r\n                hostile: true,\r\n                range: 7,\r\n                invulnerable: false\r\n            }\r\n        })\r\n\r\n        this.spells = {\r\n            regeneration: new Regeneration({ cd: 0, maxCD: 5 }),\r\n            pain: new Pain({ cd: 0, maxCD: 2 }),\r\n            vampiricDraining: new VampiricDraining({ cd: 0, maxCD: 5 }),\r\n            animateDead: new AnimateDead({ cd: 0, maxCD: 7 })\r\n        }\r\n    }\r\n\r\n    act() {\r\n        Game.engine.lock()\r\n        // reduce the cooldown of every spell by 1\r\n        for (let spell in this.spells) {\r\n            this.spells[spell].cd = this.spells[spell].cd === 0 ? 0 : this.spells[spell].cd - 1\r\n        }\r\n        // To make these computations more efficient, we can determine whether or not the SimpleEnemy\r\n        // is rendered on the current game screen. If not, we shouldn't really worry about what the enemy can see\r\n        // or its path to the player. So, we can essentially skip their turn.\r\n        let dx = Math.abs(this.x - Game.player.x)\r\n        let dy = Math.abs(this.y - Game.player.y)\r\n        if (dx > Game.width / 2 || dy > Game.height / 2) {\r\n            Game.engine.unlock()\r\n            super.act()\r\n            return\r\n        }\r\n        if (!this.intro) {\r\n            Game.log('You feel a sense of hopelessness and fear come over you.', 'crimson')\r\n            Game.log('Something evil is nearby.', 'crimson')\r\n        }\r\n        this.intro = true\r\n\r\n        Game.player.recalculatePath()\r\n\r\n        let visibleTiles = getVisibleTiles(this)\r\n        let allVisibleActors = visibleTiles.reduce((actors, tile) => {\r\n            return actors.concat(tile.actors)\r\n        }, [])\r\n        let pathToPlayer = []\r\n\r\n        if (\r\n            allVisibleActors.some(a => {\r\n                return a === Game.player\r\n            })\r\n        ) {\r\n            if (!this.chasing) Game.log(`A ${this.name} sees you.`, 'alert')\r\n            this.chasing = true\r\n            Game.player.path.compute(this.x, this.y, function(x, y) {\r\n                pathToPlayer.push([x, y])\r\n            })\r\n\r\n            let lostHP = this.cb.maxhp - this.cb.hp\r\n            let nearbyCorpses = getNearbyCorpses(this)\r\n            const cooldown = spell => {\r\n                spell.cd = spell.maxCD\r\n            }\r\n            // We can see the player\r\n            if (pathToPlayer.length === 2) {\r\n                // player is in melee range. we know we can hit pretty high against the player if he's in melee range, and probably kill them\r\n                if (Game.player.cb.hp <= 15) {\r\n                    // melee attack\r\n                    let newPos = pathToPlayer[1]\r\n                    this.tryMove(newPos[0], newPos[1])\r\n                    // if we can't kill them, but vamp drain is up and we're missing some hp, use it\r\n                } else if (lostHP >= 10 && this.spells.vampiricDraining.cd === 0) {\r\n                    // cast vampiric drain\r\n                    this.spells.vampiricDraining.cast(Game.player, this)\r\n                    cooldown(this.spells.vampiricDraining)\r\n                } else if (lostHP >= 25 && this.spells.regeneration.cd === 0) {\r\n                    // we're badly hurt even though we're at close range\r\n                    // so we cast regenerate to get some hp\r\n                    this.spells.regeneration.cast(this, this)\r\n                    cooldown(this.spells.regeneration)\r\n                } else {\r\n                    // we can't regenerate or drain with vamp, so we need to either raise the undead around us, fight, or flee\r\n                    if (nearbyCorpses.length >= 2 && this.spells.animateDead.cd === 0) {\r\n                        this.spells.animateDead.cast(this, this)\r\n                        cooldown(this.spells.animateDead)\r\n                    } else {\r\n                        // TODO: add logic to run away from the player\r\n                        // melee attack\r\n                        let newPos = pathToPlayer[1]\r\n                        this.tryMove(newPos[0], newPos[1])\r\n                    }\r\n                }\r\n            } else {\r\n                // player is not in melee range (we cast raise undead, regenerate, pain, or attempt to move away from the player)\r\n                if (Game.player.cb.hp <= 9 && this.spells.pain.cd === 0) {\r\n                    this.spells.pain.cast(Game.player, this)\r\n                    cooldown(this.spells.pain)\r\n                } else if (nearbyCorpses.length >= 2 && this.spells.animateDead.cd === 0) {\r\n                    this.spells.animateDead.cast(this, this)\r\n                    cooldown(this.spells.animateDead)\r\n                } else if (lostHP >= 25 && this.spells.regeneration.cd === 0) {\r\n                    // we're badly hurt even though we're at close range\r\n                    // so we cast regenerate to get some hp\r\n                    this.spells.regeneration.cast(this, this)\r\n                    cooldown(this.spells.regeneration)\r\n                } else if (this.spells.pain.cd === 0) {\r\n                    this.spells.pain.cast(Game.player, this)\r\n                    cooldown(this.spells.pain)\r\n                }\r\n            }\r\n        } else {\r\n            // player is not in field of view. if we are low on hp, cast regenerate. if corpses are nearby, raise them\r\n        }\r\n\r\n        Game.engine.unlock()\r\n        super.act()\r\n    }\r\n\r\n    interact(actor) {\r\n        if (actor === Game.player) {\r\n            let dmg = this.attack(actor)\r\n        } else {\r\n            actor.react(this)\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/boss/Lich.js","/**\r\n * Created by larken on 7/4/17.\r\n */\r\nimport ROT from 'rot-js'\r\nimport { Game } from '#/Game.js'\r\nimport { GameMap } from '#/map/GameMap.js'\r\nimport Player from '#/entities/actors/Player.js'\r\nimport NPC from '#/entities/actors/NPC.js'\r\n// Enemies\r\nimport Goblin from '#/entities/actors/enemies/Goblin.js'\r\nimport Kobold from '#/entities/actors/enemies/Kobold.js'\r\nimport Orc from '#/entities/actors/enemies/Orc.js'\r\nimport Rat from '#/entities/actors/enemies/Rat.js'\r\nimport Bat from '#/entities/actors/enemies/Bat.js'\r\nimport Skeleton from '#/entities/actors/enemies/Skeleton.js'\r\nimport Zombie from '#/entities/actors/enemies/Zombie.js'\r\nimport { Corpse, corpseTypes } from '#/entities/items/misc/Corpse.js'\r\n\r\nimport Lich from '#/entities/actors/enemies/boss/Lich.js'\r\n// Items\r\n// Weapons\r\nimport { createSword, Sword } from '#/entities/items/weapons/Sword.js'\r\nimport { Bow, createBow } from '#/entities/items/weapons/ranged/Bow.js'\r\nimport { SteelArrow } from '#/entities/items/weapons/ranged/ammo/Arrow.js'\r\n// Potions\r\nimport HealthPotion from '#/entities/items/potions/HealthPotion.js'\r\nimport StrengthPotion from '#/entities/items/potions/StrengthPotion.js'\r\nimport ManaPotion from '#/entities/items/potions/ManaPotion.js'\r\n// Misc\r\nimport Chest from '#/entities/misc/Chest.js'\r\nimport Door from '#/entities/misc/Door.js'\r\nimport LockedDoor from '#/entities/misc/LockedDoor.js'\r\nimport Key from '#/entities/items/misc/Key.js'\r\nimport { NecromancySpellBook } from '#/entities/items/misc/Spellbook.js'\r\nimport Ladder from '#/entities/misc/Ladder.js'\r\nimport LevelTransition from '#/entities/misc/LevelTransition.js'\r\nimport { getRandomInt, getNormalRandomInt, randomProperty } from '#/utils/HelperFunctions.js'\r\n\r\nconst actorTextures = {\r\n\tORC: [5292, 5293, 5294, 5295, 5296, 5297, 5299],\r\n\tEMPOWERED_ORC: [5298],\r\n\tGOBLIN: [7440, 7441, 7442, 7443, 7444, 7445, 7446],\r\n\tRAT: [2365],\r\n\tBAT: [3704, 3706],\r\n\tKOBOLD: [5532, 5533, 5534, 5535, 5536, 5537, 5538, 5539]\r\n}\r\n\r\nconst flatten = arr => arr.reduce((acc, val) => acc.concat(Array.isArray(val) ? flatten(val) : val), [])\r\n\r\n// function that will yield a random free space in the room\r\nconst randomTile = validTiles => {\r\n\tlet index = getRandomInt(0, validTiles.length) // index of a tile\r\n\tlet tile = validTiles.splice(index, 1)\r\n\tif (tile.length === 1) {\r\n\t\treturn tile[0].split(',').map(e => Number(e))\r\n\t} else {\r\n\t\treturn null\r\n\t}\r\n}\r\n\r\nexport function randomCave(width, height, dir, level = 1) {\r\n\tlet map = {}\r\n\tlet createdLadders = 0\r\n\tmap.revealed = true\r\n\tmap.width = width\r\n\tmap.height = height\r\n\tmap.layers = [\r\n\t\t{\r\n\t\t\tdata: [],\r\n\t\t\tproperties: {\r\n\t\t\t\tobstacles: true\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tdata: [],\r\n\t\t\tproperties: {\r\n\t\t\t\tobstacles: true\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tdata: [],\r\n\t\t\tproperties: {\r\n\t\t\t\tactors: true\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tdata: [],\r\n\t\t\tproperties: {\r\n\t\t\t\tactors: true\r\n\t\t\t}\r\n\t\t}\r\n\t]\r\n\tlet freeCells = {}\r\n\tlet mapCallback = function(x, y, blocked) {\r\n\t\tif (!blocked) freeCells[x + ',' + y] = true\r\n\t}\r\n\tlet cellularMap = new ROT.Map.Cellular(width, height)\r\n\tcellularMap.randomize(0.5)\r\n\tfor (let i = 0; i < 10; i++) cellularMap.create()\r\n\r\n\tcellularMap.connect(mapCallback)\r\n\r\n\t// Initialize obstacles and actors\r\n\tfor (let j = 0; j < height; j++) {\r\n\t\tfor (let l = 0; l < map.layers.length; l++) map.layers[l].data.push([])\r\n\r\n\t\tfor (let i = 0; i < width; i++) {\r\n\t\t\tif (i + ',' + j in freeCells) map.layers[0].data[j].push(9297 + 1)\r\n\t\t\telse map.layers[0].data[j].push(9200 + 1)\r\n\r\n\t\t\tmap.layers[1].data[j].push(0)\r\n\t\t\tmap.layers[2].data[j].push(0)\r\n\t\t\tmap.layers[3].data[j].push(0)\r\n\t\t}\r\n\t}\r\n\r\n\tlet walls = {\r\n\t\tupperLeft: 9197,\r\n\t\ttop: 9198,\r\n\t\tupperRight: 9199,\r\n\t\tleft: 9317,\r\n\t\tcenter: 9318,\r\n\t\tright: 9317,\r\n\t\tlowerLeft: 9437,\r\n\t\tbottom: 9198,\r\n\t\tlowerRight: 9439,\r\n\t\tendBottom: 9318,\r\n\t\tendTop: 9319,\r\n\r\n\t\tmiddleT: 9201,\r\n\t\tmiddleIntersection: 9321\r\n\t}\r\n\r\n\tlet floors = {\r\n\t\tupperLeft: 9176,\r\n\t\ttop: 9177,\r\n\t\tupperRight: 9178,\r\n\t\tleft: 9296,\r\n\t\tcenter: 9297,\r\n\t\tright: 9298,\r\n\t\tlowerLeft: 9416,\r\n\t\tbottom: 9417,\r\n\t\tlowerRight: 9418,\r\n\r\n\t\tendLeft: 9300,\r\n\t\tmiddleCorridorHorizontal: 9301,\r\n\t\tendRight: 9302,\r\n\r\n\t\tendTop: 9179,\r\n\t\tmiddleCorridorVertical: 9299,\r\n\t\tendBottom: 9419,\r\n\r\n\t\tsingle: 9181\r\n\t}\r\n\r\n\tlet computeBitmask = (x, y) => {\r\n\t\tlet sum = 0\r\n\t\tlet above = `${x},${y - 1}`\r\n\t\tlet below = `${x},${y + 1}`\r\n\t\tlet left = `${x - 1},${y}`\r\n\t\tlet right = `${x + 1},${y}`\r\n\r\n\t\tlet ur = `${x + 1},${y - 1}`\r\n\t\tlet ll = `${x - 1},${y + 1}`\r\n\r\n\t\tlet ul = `${x - 1},${y - 1}`\r\n\t\tlet lr = `${x + 1},${y + 1}`\r\n\r\n\t\tlet free = coords => {\r\n\t\t\treturn coords in freeCells\r\n\t\t}\r\n\r\n\t\tif (free(above)) sum += 1\r\n\t\tif (free(right)) sum += 2\r\n\t\tif (free(below)) sum += 4\r\n\t\tif (free(left)) sum += 8\r\n\r\n\t\tif (sum == 0) {\r\n\t\t\tif ((free(ll) && free(ur)) || (free(ul) && free(lr))) return 21\r\n\t\t\telse if (free(ul) && free(above) && free(lr)) return 20\r\n\t\t\telse if (free(lr) && free(below) && free(ul)) return 20\r\n\t\t\telse if (free(ul)) return 16\r\n\t\t\telse if (free(ur)) return 17\r\n\t\t\telse if (free(ll)) return 18\r\n\t\t\telse if (free(lr)) return 19\r\n\t\t}\r\n\r\n\t\treturn sum\r\n\t}\r\n\r\n\tlet wallSums = {\r\n\t\t/*\r\n            ? 0 ?\r\n            0 0 0\r\n            ? 0 ?\r\n        */\r\n\t\t0: 7046, // empty space (black spot)\r\n\t\t/*\r\n            ? 1 ?\r\n            0 0 0\r\n            ? 0 ?\r\n        */\r\n\t\t1: walls.bottom,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 0 1\r\n            ? 0 ?\r\n        */\r\n\t\t2: walls.left,\r\n\t\t/*\r\n            ? 1 ?\r\n            0 0 1\r\n            ? 0 ?\r\n        */\r\n\t\t3: walls.upperRight,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 0 0\r\n            ? 1 ?\r\n        */\r\n\t\t4: walls.top,\r\n\t\t/*\r\n            ? 1 ?\r\n            0 0 0\r\n            ? 1 ?\r\n        */\r\n\t\t5: walls.top,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 0 1\r\n            ? 1 ?\r\n        */\r\n\t\t6: walls.lowerRight,\r\n\t\t/*\r\n            ? 1 ?\r\n            0 0 1\r\n            ? 1 ?\r\n        */\r\n\t\t7: walls.bottom, // this case is a hard one. Need a new tile that properly ends a wall in one tile\r\n\t\t/*\r\n            ? 0 ?\r\n            1 0 0\r\n            ? 0 ?\r\n        */\r\n\t\t8: walls.right,\r\n\t\t/*\r\n            ? 1 ?\r\n            1 0 0\r\n            ? 0 ?\r\n        */\r\n\t\t9: walls.upperLeft,\r\n\t\t/*\r\n            ? 0 ?\r\n            1 0 1\r\n            ? 0 ?\r\n        */\r\n\t\t10: walls.left, // vertical\r\n\t\t/*\r\n            ? 1 ?\r\n            1 0 1\r\n            ? 0 ?\r\n        */\r\n\t\t11: walls.endTop,\r\n\t\t/*\r\n            ? 0 ?\r\n            1 0 0\r\n            ? 1 ?\r\n        */\r\n\t\t12: walls.lowerLeft,\r\n\t\t/*\r\n            ? 1 ?\r\n            1 0 0\r\n            ? 1 ?\r\n        */\r\n\t\t13: walls.bottom,\r\n\t\t/*\r\n            ? 0 ?\r\n            1 0 1\r\n            ? 1 ?\r\n        */\r\n\t\t14: walls.endBottom,\r\n\t\t/*\r\n            ? 1 ?\r\n            1 0 1\r\n            ? 1 ?\r\n        */\r\n\t\t15: walls.center,\r\n\t\t/*\r\n            1 0 ?\r\n            0 0 0\r\n            ? 0 ?\r\n        */\r\n\t\t16: walls.lowerRight,\r\n\t\t/*\r\n            ? 0 1\r\n            0 0 0\r\n            ? 0 ?\r\n        */\r\n\t\t17: walls.lowerLeft,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 0 0\r\n            1 0 ?\r\n        */\r\n\t\t18: walls.upperRight,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 0 0\r\n            ? 0 1\r\n        */\r\n\t\t19: walls.upperLeft,\r\n\t\t/*\r\n            1 1 0    1 0 0\r\n            0 0 0 || 0 0 0\r\n            0 0 1    0 1 1\r\n        */\r\n\t\t20: walls.middleT,\r\n\t\t/*\r\n            0 0 1    1 0 0\r\n            0 0 0 || 0 0 0\r\n            1 0 0    0 0 1\r\n        */\r\n\t\t21: walls.middleIntersection\r\n\t}\r\n\r\n\tlet floorSums = {\r\n\t\t/*\r\n            ? 0 ?\r\n            0 1 0\r\n            ? 0 ?\r\n        */\r\n\t\t0: floors.single, // empty space (black spot)\r\n\t\t/*\r\n            ? 1 ?\r\n            0 1 0\r\n            ? 0 ?\r\n        */\r\n\t\t1: floors.endBottom,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 1 1\r\n            ? 0 ?\r\n        */\r\n\t\t2: floors.endLeft,\r\n\t\t/*\r\n            ? 1 ?\r\n            0 1 1\r\n            ? 0 ?\r\n        */\r\n\t\t3: floors.lowerLeft,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 1 0\r\n            ? 1 ?\r\n        */\r\n\t\t4: floors.endTop,\r\n\t\t/*\r\n            ? 1 ?\r\n            0 1 0\r\n            ? 1 ?\r\n        */\r\n\t\t5: floors.middleCorridorVertical,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 1 1\r\n            ? 1 ?\r\n        */\r\n\t\t6: floors.upperLeft,\r\n\t\t/*\r\n            ? 1 ?\r\n            0 1 1\r\n            ? 1 ?\r\n        */\r\n\t\t7: floors.left, // this case is a hard one. Need a new tile that properly ends a wall in one tile\r\n\t\t/*\r\n            ? 0 ?\r\n            1 1 0\r\n            ? 0 ?\r\n        */\r\n\t\t8: floors.endRight,\r\n\t\t/*\r\n            ? 1 ?\r\n            1 1 0\r\n            ? 0 ?\r\n        */\r\n\t\t9: floors.lowerRight,\r\n\t\t/*\r\n            ? 0 ?\r\n            1 1 1\r\n            ? 0 ?\r\n        */\r\n\t\t10: floors.middleCorridorHorizontal, // vertical\r\n\t\t/*\r\n            ? 1 ?\r\n            1 1 1\r\n            ? 0 ?\r\n        */\r\n\t\t11: floors.bottom,\r\n\t\t/*\r\n            ? 0 ?\r\n            1 1 0\r\n            ? 1 ?\r\n        */\r\n\t\t12: floors.upperRight,\r\n\t\t/*\r\n            ? 1 ?\r\n            1 1 0\r\n            ? 1 ?\r\n        */\r\n\t\t13: floors.right,\r\n\t\t/*\r\n            ? 0 ?\r\n            1 1 1\r\n            ? 1 ?\r\n        */\r\n\t\t14: floors.top,\r\n\t\t/*\r\n            ? 1 ?\r\n            1 1 1\r\n            ? 1 ?\r\n        */\r\n\t\t15: floors.center,\r\n\t\t/*\r\n            1 0 ?\r\n            0 1 0\r\n            ? 0 ?\r\n        */\r\n\t\t16: floors.single,\r\n\t\t/*\r\n            ? 0 1\r\n            0 1 0\r\n            ? 0 ?\r\n        */\r\n\t\t17: floors.single,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 1 0\r\n            1 0 ?\r\n        */\r\n\t\t18: floors.single,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 1 0\r\n            ? 0 1\r\n        */\r\n\t\t19: floors.lowerLeft,\r\n\t\t/*\r\n            1 1 0    1 0 0\r\n            0 1 0 || 0 1 0\r\n            0 0 1    0 1 1\r\n        */\r\n\t\t20: floors.middleT\r\n\t}\r\n\r\n\t// we want to start +1 from the top and left, and bottom and right -1\r\n\tfor (let y = 0; y < height; y++) {\r\n\t\tfor (let x = 0; x < width; x++) {\r\n\t\t\tif (!(`${x},${y}` in freeCells)) {\r\n\t\t\t\t// only want to place a wall somewhere if it's not a free cell\r\n\t\t\t\tlet sum = computeBitmask(x, y)\r\n\t\t\t\tlet sym = wallSums[sum] + 1\r\n\t\t\t\tmap.layers[0].data[y][x] = sym\r\n\t\t\t} else {\r\n\t\t\t\tlet sum = computeBitmask(x, y)\r\n\t\t\t\tlet sym = floorSums[sum] + 1\r\n\t\t\t\tmap.layers[0].data[y][x] = sym\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tlet validTiles = Object.keys(freeCells)\r\n\t// Randomly select starting position for player\r\n\tlet start = randomTile(validTiles)\r\n\tif (start === null) throw 'Could not find an open spot on the map to place the player!'\r\n\r\n\tmap.layers[2].data[start[1]][start[0]] = Game.playerID // set random spot to be the player\r\n\tmap.layers[3].data[start[1]][start[0]] = dir === 'down' ? 238 : 237 // place a ladder going back up a level underneath the player.\r\n\r\n\tlet ladderGoingDown = randomTile(validTiles)\r\n\tmap.layers[2].data[ladderGoingDown[1]][ladderGoingDown[0]] = dir === 'down' ? 237 : 238\r\n\tladderGoingDown = randomTile(validTiles)\r\n\tmap.layers[2].data[ladderGoingDown[1]][ladderGoingDown[0]] = dir === 'down' ? 237 : 238\r\n\r\n\tlet roll = getNormalRandomInt(7 + level, 25 + level)\r\n\tfor (let i = 0; i < roll; i++) {\r\n\t\tlet coords = randomTile(validTiles)\r\n\t\tif (coords === null) break\r\n\t\tlet chosenMob = ROT.RNG.getWeightedValue(mobDistribution)\r\n\t\tlet mobArray = actorTextures[chosenMob]\r\n\t\tlet actor = createActor(chosenMob)\r\n\t\tlet randomMob = mobArray[getRandomInt(0, mobArray.length - 1)] + 1\r\n\t\tmap.layers[2].data[coords[1]][coords[0]] = randomMob\r\n\t}\r\n\r\n\t// Flatten the layers to mimic Tiled map data\r\n\tfor (let i = 0; i < map.layers.length; i++) map.layers[i].data = flatten(map.layers[i].data)\r\n\r\n\treturn map\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/map/generation/RandomCave.js","/**\r\n * Created by larken on 7/4/17.\r\n */\r\nimport ROT from 'rot-js'\r\nimport { Game } from '#/Game.js'\r\nimport { GameMap } from '#/map/GameMap.js'\r\nimport Player from '#/entities/actors/Player.js'\r\nimport NPC from '#/entities/actors/NPC.js'\r\n// Enemies\r\nimport Goblin from '#/entities/actors/enemies/Goblin.js'\r\nimport Kobold from '#/entities/actors/enemies/Kobold.js'\r\nimport Orc from '#/entities/actors/enemies/Orc.js'\r\nimport Rat from '#/entities/actors/enemies/Rat.js'\r\nimport Bat from '#/entities/actors/enemies/Bat.js'\r\nimport Skeleton from '#/entities/actors/enemies/Skeleton.js'\r\nimport Zombie from '#/entities/actors/enemies/Zombie.js'\r\nimport { Corpse, corpseTypes } from '#/entities/items/misc/Corpse.js'\r\n\r\nimport Lich from '#/entities/actors/enemies/boss/Lich.js'\r\n// Items\r\n// Weapons\r\nimport { createSword, Sword } from '#/entities/items/weapons/Sword.js'\r\nimport { Bow, createBow } from '#/entities/items/weapons/ranged/Bow.js'\r\nimport { SteelArrow } from '#/entities/items/weapons/ranged/ammo/Arrow.js'\r\n// Potions\r\nimport HealthPotion from '#/entities/items/potions/HealthPotion.js'\r\nimport StrengthPotion from '#/entities/items/potions/StrengthPotion.js'\r\nimport ManaPotion from '#/entities/items/potions/ManaPotion.js'\r\n// Misc\r\nimport Chest from '#/entities/misc/Chest.js'\r\nimport Door from '#/entities/misc/Door.js'\r\nimport LockedDoor from '#/entities/misc/LockedDoor.js'\r\nimport Key from '#/entities/items/misc/Key.js'\r\nimport { NecromancySpellBook } from '#/entities/items/misc/Spellbook.js'\r\nimport Ladder from '#/entities/misc/Ladder.js'\r\nimport LevelTransition from '#/entities/misc/LevelTransition.js'\r\nimport { getRandomInt, getNormalRandomInt, randomProperty } from '#/utils/HelperFunctions.js'\r\n\r\nconst actorTextures = {\r\n\tORC: [5292, 5293, 5294, 5295, 5296, 5297, 5299],\r\n\tEMPOWERED_ORC: [5298],\r\n\tGOBLIN: [7440, 7441, 7442, 7443, 7444, 7445, 7446],\r\n\tRAT: [2365],\r\n\tBAT: [3704, 3706],\r\n\tKOBOLD: [5532, 5533, 5534, 5535, 5536, 5537, 5538, 5539]\r\n}\r\n\r\nconst flatten = arr => arr.reduce((acc, val) => acc.concat(Array.isArray(val) ? flatten(val) : val), [])\r\n\r\n// function that will yield a random free space in the room\r\nconst randomTile = validTiles => {\r\n\tlet index = getRandomInt(0, validTiles.length) // index of a tile\r\n\tlet tile = validTiles.splice(index, 1)\r\n\tif (tile.length === 1) {\r\n\t\treturn tile[0].split(',').map(e => Number(e))\r\n\t} else {\r\n\t\treturn null\r\n\t}\r\n}\r\n\r\n/* Returns a randomly generated textured dungeon in GameMap form  */\r\nexport function randomDungeon(width, height, dir, level = 1) {\r\n\tlet gameMap = new GameMap(width, height)\r\n\r\n\t/* Texture IDs */\r\n\tconst floor = {\r\n\t\tupperLeft: 7735,\r\n\t\ttop: 7736,\r\n\t\tupperRight: 7737,\r\n\r\n\t\tleft: 7855,\r\n\t\tcenter: 7856,\r\n\t\tright: 7857,\r\n\r\n\t\tlowerLeft: 7975,\r\n\t\tbottom: 7976,\r\n\t\tlowerRight: 7977,\r\n\r\n\t\tendLeft: 7859,\r\n\t\tmiddleCorridorHorizontal: 7860,\r\n\t\tendRight: 7861,\r\n\r\n\t\tendTop: 7738,\r\n\t\tmiddleCorridorVertical: 7858,\r\n\t\tendBottom: 7978,\r\n\r\n\t\tsingle: 7740\r\n\t}\r\n\r\n\tconst corridorFloor = {\r\n\t\thorizontal: {\r\n\t\t\tleft: 7860,\r\n\t\t\tmiddle: 7861,\r\n\t\t\tright: 7862\r\n\t\t},\r\n\t\tvertical: {\r\n\t\t\ttop: 7739,\r\n\t\t\tmiddle: 7859,\r\n\t\t\tbottom: 7979\r\n\t\t}\r\n\t}\r\n\r\n\tconst walls = {\r\n\t\tupperLeft: 8116,\r\n\t\ttop: 8117,\r\n\t\tupperRight: 8118,\r\n\t\tleft: 8236,\r\n\t\tcenter: 8237,\r\n\t\tright: 8236,\r\n\t\tlowerLeft: 8356,\r\n\t\tbottom: 8117,\r\n\t\tlowerRight: 8358,\r\n\t\tendBottom: 8237,\r\n\t\tendTop: 8238,\r\n\t\tisland: 8119,\r\n\r\n\t\tleftT: 8241,\r\n\t\tmiddleT: 8240,\r\n\t\trightT: 8239,\r\n\t\ttopT: 8120,\r\n\t\tbottomT: 8360\r\n\t}\r\n\r\n\tconst doors = {\r\n\t\tvertical: 569,\r\n\t\thorizontal: 568\r\n\t}\r\n\r\n\tconst ladders = {\r\n\t\tup: 477,\r\n\t\tdown: 479\r\n\t}\r\n\r\n\tconst mobDistribution = {\r\n\t\tORC: 1 * ~~(level / 4) + 1,\r\n\t\tEMPOWERED_ORC: ~~(level / 4),\r\n\t\tKOBOLD: ~~(level / 3),\r\n\t\tGOBLIN: 10 - ~~(level / 2),\r\n\t\tBAT: 8 - ~~(level / 4),\r\n\t\tRAT: 8 - ~~(level / 4)\r\n\t}\r\n\r\n\tconst chestTexture = 57\r\n\r\n\tconst createActor = (actorString, x, y, id) => {\r\n\t\tswitch (actorString) {\r\n\t\t\tcase 'ORC':\r\n\t\t\t\treturn new Orc(x, y, id)\r\n\t\t\tcase 'EMPOWERED_ORC':\r\n\t\t\t\treturn new Orc(x, y, id, true)\r\n\t\t\tcase 'KOBOLD':\r\n\t\t\t\treturn new Kobold(x, y, id)\r\n\t\t\tcase 'GOBLIN':\r\n\t\t\t\treturn new Goblin(x, y, id)\r\n\t\t\tcase 'BAT':\r\n\t\t\t\treturn new Bat(x, y, id)\r\n\t\t\tcase 'RAT':\r\n\t\t\t\treturn new Rat(x, y, id)\r\n\t\t\tdefault:\r\n\t\t\t\tthrow 'Unidentified actor given to create actor'\r\n\t\t}\r\n\t}\r\n\r\n\tlet createdLadders = 0\r\n\tlet freeCells = {}\r\n\t// ROT.RNG.setSeed(1513663807130)\r\n\t// console.log(ROT.RNG.getSeed());\r\n\tlet diggerCallback = function(x, y, blocked) {\r\n\t\tif (!blocked) freeCells[x + ',' + y] = true\r\n\t}\r\n\tlet rogueMap = new ROT.Map.Digger(width, height, {\r\n\t\troomWidth: [6, 20],\r\n\t\tcorrdiorLength: [4, 4],\r\n\t\troomDugPercentage: 0.4\r\n\t}).create(diggerCallback)\r\n\t// Initialize obstacles and actors\r\n\tlet sortCorridors = (a, b) => {\r\n\t\tif (a._startX === a._endX && b._startX !== b._endX) {\r\n\t\t\treturn -1\r\n\t\t} else if (b._startX === b._endX && a._startX !== a._endX) {\r\n\t\t\treturn 1\r\n\t\t} else {\r\n\t\t\treturn 0\r\n\t\t}\r\n\t}\r\n\r\n\tlet computeBitmaskFloors = (x, y) => {\r\n\t\tlet sum = 0\r\n\t\tlet above = `${x},${y - 1}`\r\n\t\tlet below = `${x},${y + 1}`\r\n\t\tlet left = `${x - 1},${y}`\r\n\t\tlet right = `${x + 1},${y}`\r\n\r\n\t\tlet ur = `${x + 1},${y - 1}`\r\n\t\tlet ll = `${x - 1},${y + 1}`\r\n\r\n\t\tlet ul = `${x - 1},${y - 1}`\r\n\t\tlet lr = `${x + 1},${y + 1}`\r\n\r\n\t\tlet debug = () => {\r\n\t\t\tconsole.log(ul in freeCells, above in freeCells)\r\n\t\t}\r\n\r\n\t\tlet free = coord => {\r\n\t\t\treturn coord in freeCells\r\n\t\t}\r\n\r\n\t\tif (free(above)) sum += 1\r\n\t\tif (free(right)) sum += 2\r\n\t\tif (free(below)) sum += 4\r\n\t\tif (free(left)) sum += 8\r\n\t\tif (sum == 0) {\r\n\t\t\tif (free(ul)) {\r\n\t\t\t\treturn 16\r\n\t\t\t} else if (free(ur)) {\r\n\t\t\t\treturn 17\r\n\t\t\t} else if (free(ll)) {\r\n\t\t\t\treturn 18\r\n\t\t\t} else if (free(lr)) {\r\n\t\t\t\treturn 19\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn sum\r\n\t}\r\n\r\n\tlet computeBitmaskWalls = (x, y) => {\r\n\t\tlet sum = 0\r\n\t\tlet above = `${x},${y - 1}`\r\n\t\tlet below = `${x},${y + 1}`\r\n\t\tlet left = `${x - 1},${y}`\r\n\t\tlet right = `${x + 1},${y}`\r\n\r\n\t\tlet ur = `${x + 1},${y - 1}`\r\n\t\tlet ll = `${x - 1},${y + 1}`\r\n\r\n\t\tlet ul = `${x - 1},${y - 1}`\r\n\t\tlet lr = `${x + 1},${y + 1}`\r\n\r\n\t\tlet debug = () => {\r\n\t\t\tconsole.log(ul in freeCells, above in freeCells)\r\n\t\t}\r\n\r\n\t\tlet free = coord => {\r\n\t\t\treturn coord in freeCells\r\n\t\t}\r\n\r\n\t\tif (free(above)) sum += 1\r\n\t\tif (free(right)) sum += 2\r\n\t\tif (free(below)) sum += 4\r\n\t\tif (free(left)) sum += 8\r\n\t\tif (free(above) && !free(below) && !free(right) && !free(left) && (free(ll) || free(lr))) {\r\n\t\t\treturn 20\r\n\t\t}\r\n\t\tif (sum == 0) {\r\n\t\t\tif (free(ul)) return 16\r\n\t\t\telse if (free(ur)) return 17\r\n\t\t\telse if (free(ll)) return 18\r\n\t\t\telse if (free(lr)) return 19\r\n\t\t}\r\n\t\treturn sum\r\n\t}\r\n\r\n\tlet floorSums = {\r\n\t\t/*\r\n            ? 0 ?\r\n            0 1 0\r\n            ? 0 ?\r\n        */\r\n\t\t0: floor.single, // empty space (black spot)\r\n\t\t/*\r\n            ? 1 ?\r\n            0 1 0\r\n            ? 0 ?\r\n        */\r\n\t\t1: floor.endBottom,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 1 1\r\n            ? 0 ?\r\n        */\r\n\t\t2: floor.endLeft,\r\n\t\t/*\r\n            ? 1 ?\r\n            0 1 1\r\n            ? 0 ?\r\n        */\r\n\t\t3: floor.lowerLeft,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 1 0\r\n            ? 1 ?\r\n        */\r\n\t\t4: floor.endTop,\r\n\t\t/*\r\n            ? 1 ?\r\n            0 1 0\r\n            ? 1 ?\r\n        */\r\n\t\t5: floor.middleCorridorVertical,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 1 1\r\n            ? 1 ?\r\n        */\r\n\t\t6: floor.upperLeft,\r\n\t\t/*\r\n            ? 1 ?\r\n            0 1 1\r\n            ? 1 ?\r\n        */\r\n\t\t7: floor.left, // this case is a hard one. Need a new tile that properly ends a wall in one tile\r\n\t\t/*\r\n            ? 0 ?\r\n            1 1 0\r\n            ? 0 ?\r\n        */\r\n\t\t8: floor.endRight,\r\n\t\t/*\r\n            ? 1 ?\r\n            1 1 0\r\n            ? 0 ?\r\n        */\r\n\t\t9: floor.lowerRight,\r\n\t\t/*\r\n            ? 0 ?\r\n            1 1 1\r\n            ? 0 ?\r\n        */\r\n\t\t10: floor.middleCorridorHorizontal, // vertical\r\n\t\t/*\r\n            ? 1 ?\r\n            1 1 1\r\n            ? 0 ?\r\n        */\r\n\t\t11: floor.bottom,\r\n\t\t/*\r\n            ? 0 ?\r\n            1 1 0\r\n            ? 1 ?\r\n        */\r\n\t\t12: floor.upperRight,\r\n\t\t/*\r\n            ? 1 ?\r\n            1 1 0\r\n            ? 1 ?\r\n        */\r\n\t\t13: floor.right,\r\n\t\t/*\r\n            ? 0 ?\r\n            1 1 1\r\n            ? 1 ?\r\n        */\r\n\t\t14: floor.top,\r\n\t\t/*\r\n            ? 1 ?\r\n            1 1 1\r\n            ? 1 ?\r\n        */\r\n\t\t15: floor.center,\r\n\t\t/*\r\n            1 0 ?\r\n            0 1 0\r\n            ? 0 ?\r\n        */\r\n\t\t16: floor.single,\r\n\t\t/*\r\n            ? 0 1\r\n            0 1 0\r\n            ? 0 ?\r\n        */\r\n\t\t17: floor.single,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 1 0\r\n            1 0 ?\r\n        */\r\n\t\t18: floor.single,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 1 0\r\n            ? 0 1\r\n        */\r\n\t\t19: floor.lowerLeft\r\n\t}\r\n\tlet wallSums = {\r\n\t\t/*\r\n            ? 0 ?\r\n            0 0 0\r\n            ? 0 ?\r\n        */\r\n\t\t0: 7046, // empty space (black spot)\r\n\t\t/*\r\n            ? 1 ?\r\n            0 0 0\r\n            ? 0 ?\r\n        */\r\n\t\t1: walls.bottom,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 0 1\r\n            ? 0 ?\r\n        */\r\n\t\t2: walls.left,\r\n\t\t/*\r\n            ? 1 ?\r\n            0 0 1\r\n            ? 0 ?\r\n        */\r\n\t\t3: walls.upperRight,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 0 0\r\n            ? 1 ?\r\n        */\r\n\t\t4: walls.top,\r\n\t\t/*\r\n            ? 1 ?\r\n            0 0 0\r\n            ? 1 ?\r\n        */\r\n\t\t5: walls.top,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 0 1\r\n            ? 1 ?\r\n        */\r\n\t\t6: walls.lowerRight,\r\n\t\t/*\r\n            ? 1 ?\r\n            0 0 1\r\n            ? 1 ?\r\n        */\r\n\t\t7: walls.bottom, // this case is a hard one. Need a new tile that properly ends a wall in one tile\r\n\t\t/*\r\n            ? 0 ?\r\n            1 0 0\r\n            ? 0 ?\r\n        */\r\n\t\t8: walls.right,\r\n\t\t/*\r\n            ? 1 ?\r\n            1 0 0\r\n            ? 0 ?\r\n        */\r\n\t\t9: walls.upperLeft,\r\n\t\t/*\r\n            ? 0 ?\r\n            1 0 1\r\n            ? 0 ?\r\n        */\r\n\t\t10: walls.left, // vertical\r\n\t\t/*\r\n            ? 1 ?\r\n            1 0 1\r\n            ? 0 ?\r\n        */\r\n\t\t11: walls.endTop,\r\n\t\t/*\r\n            ? 0 ?\r\n            1 0 0\r\n            ? 1 ?\r\n        */\r\n\t\t12: walls.lowerLeft,\r\n\t\t/*\r\n            ? 1 ?\r\n            1 0 0\r\n            ? 1 ?\r\n        */\r\n\t\t13: walls.bottom,\r\n\t\t/*\r\n            ? 0 ?\r\n            1 0 1\r\n            ? 1 ?\r\n        */\r\n\t\t14: walls.endBottom,\r\n\t\t/*\r\n            ? 1 ?\r\n            1 0 1\r\n            ? 1 ?\r\n        */\r\n\t\t15: walls.center,\r\n\t\t/*\r\n            1 0 ?\r\n            0 0 0\r\n            ? 0 ?\r\n        */\r\n\t\t16: walls.lowerRight,\r\n\t\t/*\r\n            ? 0 1\r\n            0 0 0\r\n            ? 0 ?\r\n        */\r\n\t\t17: walls.lowerLeft,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 0 0\r\n            1 0 ?\r\n        */\r\n\t\t18: walls.upperRight,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 0 0\r\n            ? 0 1\r\n        */\r\n\t\t19: walls.upperLeft,\r\n\t\t/*\r\n            0 1 0    0 1 0\r\n            0 0 0 || 0 0 0\r\n            1 0 0    0 0 1\r\n        */\r\n\t\t20: walls.middleT\r\n\t}\r\n\r\n\t// we want to start +1 from the top and left, and bottom and right -1\r\n\tfor (let y = 0; y < height; y++) {\r\n\t\tfor (let x = 0; x < width; x++) {\r\n\t\t\tlet tile = gameMap.getTile(x, y)\r\n\t\t\tif (!(`${x},${y}` in freeCells)) {\r\n\t\t\t\t// only want to place a wall somewhere if it's not a free cell\r\n\t\t\t\tlet sum = computeBitmaskWalls(x, y)\r\n\t\t\t\tlet sym = wallSums[sum] + 1\r\n\t\t\t\ttile.updateTileInfo(sym)\r\n\t\t\t} else {\r\n\t\t\t\tlet sum = computeBitmaskFloors(x, y)\r\n\t\t\t\tlet sym = floorSums[sum] + 1\r\n\t\t\t\ttile.updateTileInfo(sym)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/* For every room in the dungeon, we're going to add\r\n     * textures from the tileset for the walls and the floors */\r\n\tfor (let room of rogueMap.getRooms()) {\r\n\t\tlet left = room.getLeft() - 1\r\n\t\tlet right = room.getRight() + 1\r\n\t\tlet top = room.getTop() - 1\r\n\t\tlet bottom = room.getBottom() + 1\r\n\t\tlet wleft = room.getLeft()\r\n\t\tlet wright = room.getRight()\r\n\t\tlet wtop = room.getTop()\r\n\t\tlet wbottom = room.getBottom()\r\n\t\tlet center = {\r\n\t\t\ty: ~~((wtop + wbottom) / 2),\r\n\t\t\tx: ~~((wright + wleft) / 2)\r\n\t\t}\r\n\r\n\t\t/* Set up the doors of the room */\r\n\t\troom.getDoors((dx, dy) => {\r\n\t\t\tlet floor_ids =\r\n\t\t\t\tObject.values(corridorFloor.vertical) +\r\n\t\t\t\tObject.values(floor) +\r\n\t\t\t\tObject.values(corridorFloor.horizontal) +\r\n\t\t\t\tObject.values(floor) // doors?\r\n\r\n\t\t\tlet above = gameMap.getTile(dx, dy - 1).obstacles[0].id\r\n\t\t\tlet below = gameMap.getTile(dx, dy + 1).obstacles[0].id\r\n\t\t\tlet door\r\n\t\t\tif (floor_ids.includes(above - 1) && floor_ids.includes(below - 1)) {\r\n\t\t\t\t// horizontal door frame\r\n\t\t\t\tdoor = new Door(dx, dy, doors.horizontal)\r\n\t\t\t} else {\r\n\t\t\t\t// vertical door frame\r\n\t\t\t\tdoor = new Door(dx, dy, doors.vertical)\r\n\t\t\t}\r\n\t\t\tgameMap.getTile(dx, dy).actors.push(door)\r\n\t\t\tgameMap.actors.push(door)\r\n\t\t\t// since we want to put a door here, we need to make sure a wall wasn't put here before\r\n\t\t\tlet sum = computeBitmaskFloors(dx, dy)\r\n\t\t\tlet sym = floorSums[sum] + 1\r\n\t\t\tgameMap.getTile(dx, dy).obstacles = []\r\n\t\t\tgameMap.getTile(dx, dy).updateTileInfo(sym)\r\n\t\t})\r\n\r\n\t\t// Now, we can mess around with the centers of each room and place items in the dungeons\r\n\t\t// this places a ladder going further into the dungeon (either deeper or higher)\r\n\t\tlet roll = getRandomInt(1, rogueMap.getRooms().length)\r\n\t\tif (roll == 1 || createdLadders == 0) {\r\n\t\t\tlet texture = dir === 'down' ? ladders.up : ladders.down\r\n\t\t\tlet ladder = new Ladder(center.x, center.y, texture, 'down')\r\n\t\t\tgameMap.getTile(center.x, center.y).actors.push(ladder)\r\n\t\t\tgameMap.actors.push(ladder)\r\n\t\t\tcreatedLadders++\r\n\t\t}\r\n\r\n\t\t// now I want to populate some random creatures in each room of the dungeon.\r\n\t\tlet validTiles = [] // all the non-wall tiles in the room that don't already a ladder\r\n\t\tlet possibleWalls = Object.values(walls)\r\n\t\tfor (let y = wtop; y < wbottom; y++) {\r\n\t\t\tfor (let x = wleft; x < wright; x++) {\r\n\t\t\t\tif (!gameMap.getTile(x, y).blocked()) validTiles.push(x + ',' + y)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\troll = getNormalRandomInt(1, 5)\r\n\t\tfor (let i = 0; i < roll; i++) {\r\n\t\t\tlet coords = randomTile(validTiles)\r\n\t\t\tif (coords === null) break\r\n\t\t\tlet [x, y] = coords\r\n\t\t\tlet chosenActor = ROT.RNG.getWeightedValue(mobDistribution)\r\n\t\t\tlet possibleActorTextures = actorTextures[chosenActor]\r\n\t\t\tlet randomTexture = possibleActorTextures[getRandomInt(0, possibleActorTextures.length - 1)]\r\n\t\t\tlet actor = createActor(chosenActor, x, y, randomTexture)\r\n\t\t\tgameMap.getTile(x, y).actors.push(actor)\r\n\t\t\tgameMap.actors.push(actor)\r\n\t\t}\r\n\t\t// if there atleast 4 enemies in the room, drop a chest in the room too!\r\n\t\tif (roll >= 4) {\r\n\t\t\tlet coords = randomTile(validTiles)\r\n\t\t\tif (coords !== null) {\r\n\t\t\t\tlet [x, y] = coords\r\n\t\t\t\tlet chest = new Chest(x, y, chestTexture)\r\n\t\t\t\tgameMap.getTile(x, y).actors.push(chest)\r\n\t\t\t\tgameMap.actors.push(chest)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Randomly select starting position for player\r\n\tlet start = randomProperty(freeCells).split(',')\r\n\tlet [x, y] = start.map(s => parseInt(s))\r\n\tgameMap.playerLocation = [x, y]\r\n\t// gameMap.getTile(x, y).actors.push(new Player(x, y, Game.playerID + 1)) // set random spot to be the player\r\n\tlet ladder = new Ladder(x, y, ladders.up, 'up')\r\n\tgameMap.getTile(x, y).actors.push(ladder)\r\n\tgameMap.actors.push(ladder)\r\n\treturn gameMap\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/map/generation/RandomDungeon.js","/**\r\n * Created by larken on 7/4/17.\r\n */\r\nimport ROT from 'rot-js'\r\nimport SimplexNoise from 'simplex-noise'\r\nimport RNG from 'prng-parkmiller-js'\r\nimport { Game } from '#/Game.js'\r\nimport { GameMap } from '#/map/GameMap.js'\r\nimport Player from '#/entities/actors/Player.js'\r\nimport NPC from '#/entities/actors/NPC.js'\r\n// Enemies\r\nimport Goblin from '#/entities/actors/enemies/Goblin.js'\r\nimport Kobold from '#/entities/actors/enemies/Kobold.js'\r\nimport Orc from '#/entities/actors/enemies/Orc.js'\r\nimport Rat from '#/entities/actors/enemies/Rat.js'\r\nimport Bat from '#/entities/actors/enemies/Bat.js'\r\nimport WildGoat from '#/entities/actors/enemies/WildGoat.js'\r\nimport Skeleton from '#/entities/actors/enemies/Skeleton.js'\r\nimport Zombie from '#/entities/actors/enemies/Zombie.js'\r\n// Items\r\n// Weapons\r\nimport { createSword, Sword } from '#/entities/items/weapons/Sword.js'\r\nimport { Bow, createBow } from '#/entities/items/weapons/ranged/Bow.js'\r\nimport { SteelArrow } from '#/entities/items/weapons/ranged/ammo/Arrow.js'\r\n// Potions\r\nimport HealthPotion from '#/entities/items/potions/HealthPotion.js'\r\nimport StrengthPotion from '#/entities/items/potions/StrengthPotion.js'\r\nimport ManaPotion from '#/entities/items/potions/ManaPotion.js'\r\n// Misc\r\nimport Chest from '#/entities/misc/Chest.js'\r\nimport Door from '#/entities/misc/Door.js'\r\nimport LockedDoor from '#/entities/misc/LockedDoor.js'\r\nimport Key from '#/entities/items/misc/Key.js'\r\nimport Ladder from '#/entities/misc/Ladder.js'\r\nimport { getRandomInt, getNormalRandomInt, randomProperty, between } from '#/utils/HelperFunctions.js'\r\n\r\nconst textures = {\r\n\tOLD_BEACH: {\r\n\t\ttype: 'OLD_BEACH',\r\n\t\ttextures: {\r\n\t\t\tupperLeft: 8816,\r\n\t\t\ttop: 8817,\r\n\t\t\tupperRight: 8818,\r\n\r\n\t\t\tleft: 8936,\r\n\t\t\tcenter: 8937,\r\n\t\t\tright: 8938,\r\n\r\n\t\t\tlowerLeft: 9056,\r\n\t\t\tbottom: 9057,\r\n\t\t\tlowerRight: 9058,\r\n\r\n\t\t\tendLeft: 8940,\r\n\t\t\tmiddleCorridorHorizontal: 8941,\r\n\t\t\tendRight: 8942,\r\n\r\n\t\t\tendTop: 8819,\r\n\t\t\tmiddleCorridorVertical: 8939,\r\n\t\t\tendBottom: 9059,\r\n\r\n\t\t\tsingle: 8937\r\n\t\t}\r\n\t},\r\n\tBEACH: {\r\n\t\ttype: 'BEACH',\r\n\t\ttextures: {\r\n\t\t\tupperLeft: 8816 + 14,\r\n\t\t\ttop: 8817 + 14,\r\n\t\t\tupperRight: 8818 + 14,\r\n\r\n\t\t\tleft: 8936 + 14,\r\n\t\t\tcenter: 8937 + 14,\r\n\t\t\tright: 8938 + 14,\r\n\r\n\t\t\tlowerLeft: 9056 + 14,\r\n\t\t\tbottom: 9057 + 14,\r\n\t\t\tlowerRight: 9058 + 14,\r\n\r\n\t\t\tendLeft: 8940 + 14,\r\n\t\t\tmiddleCorridorHorizontal: 8941 + 14,\r\n\t\t\tendRight: 8942 + 14,\r\n\r\n\t\t\tendTop: 8819 + 14,\r\n\t\t\tmiddleCorridorVertical: 8939 + 14,\r\n\t\t\tendBottom: 9059 + 14,\r\n\r\n\t\t\tsingle: 8937 + 14\r\n\t\t}\r\n\t},\r\n\tOCEAN_WATER: {\r\n\t\ttype: 'OCEAN_WATER',\r\n\t\ttextures: {\r\n\t\t\tupperLeft: 9017,\r\n\t\t\ttop: 9017,\r\n\t\t\tupperRight: 9017,\r\n\r\n\t\t\tleft: 9017,\r\n\t\t\tcenter: 9017,\r\n\t\t\tright: 9017,\r\n\r\n\t\t\tlowerLeft: 9017,\r\n\t\t\tbottom: 9017,\r\n\t\t\tlowerRight: 9017,\r\n\r\n\t\t\tendLeft: 9017,\r\n\t\t\tmiddleCorridorHorizontal: 9017,\r\n\t\t\tendRight: 9017,\r\n\r\n\t\t\tendTop: 9017,\r\n\t\t\tmiddleCorridorVertical: 9017,\r\n\t\t\tendBottom: 9017,\r\n\r\n\t\t\tsingle: 9017\r\n\t\t}\r\n\t},\r\n\tCOASTAL_WATER: {\r\n\t\ttype: 'COASTAL_WATER',\r\n\t\ttextures: {\r\n\t\t\tupperLeft: 8176,\r\n\t\t\ttop: 8177,\r\n\t\t\tupperRight: 8178,\r\n\r\n\t\t\tleft: 8296,\r\n\t\t\tcenter: 8297,\r\n\t\t\tright: 8298,\r\n\r\n\t\t\tlowerLeft: 8296,\r\n\t\t\tbottom: 8297,\r\n\t\t\tlowerRight: 8298,\r\n\r\n\t\t\tendLeft: 8296,\r\n\t\t\tmiddleCorridorHorizontal: 8177,\r\n\t\t\tendRight: 8178,\r\n\r\n\t\t\taltUpperRight: 8181,\r\n\t\t\tendTop: 8177,\r\n\t\t\tmiddleCorridorVertical: 8298,\r\n\t\t\tendBottom: 8296,\r\n\r\n\t\t\tsingle: 8178\r\n\t\t}\r\n\t},\r\n\tFOREST: {\r\n\t\ttype: 'FOREST',\r\n\t\ttextures: {\r\n\t\t\thasCorridors: true,\r\n\t\t\tupperLeft: 7743,\r\n\t\t\ttop: 7744,\r\n\t\t\tupperRight: 7745,\r\n\r\n\t\t\tleft: 7863,\r\n\t\t\tcenter: 7864,\r\n\t\t\tright: 7865,\r\n\r\n\t\t\tlowerLeft: 7983,\r\n\t\t\tbottom: 7984,\r\n\t\t\tlowerRight: 7985,\r\n\r\n\t\t\tendLeft: 7867,\r\n\t\t\tmiddleCorridorHorizontal: 7868,\r\n\t\t\tendRight: 7869,\r\n\r\n\t\t\tendTop: 7746,\r\n\t\t\tmiddleCorridorVertical: 7866,\r\n\t\t\tendBottom: 7986,\r\n\r\n\t\t\tsingle: 7748\r\n\t\t}\r\n\t},\r\n\tMOUNTAIN: {\r\n\t\ttype: 'MOUNTAIN',\r\n\t\ttextures: {\r\n\t\t\tupperLeft: 9197,\r\n\t\t\ttop: 9198,\r\n\t\t\tupperRight: 9199,\r\n\r\n\t\t\tleft: 9317,\r\n\t\t\t// center: 9318,\r\n\t\t\tright: 9317,\r\n\r\n\t\t\tlowerLeft: 9437,\r\n\t\t\tbottom: 9198,\r\n\t\t\tlowerRight: 9439,\r\n\r\n\t\t\tendLeft: 9198,\r\n\t\t\tmiddleCorridorHorizontal: 9198,\r\n\t\t\tendRight: 9198,\r\n\r\n\t\t\tendTop: 9198,\r\n\t\t\tmiddleCorridorVertical: 9200,\r\n\t\t\tendBottom: 9198,\r\n\r\n\t\t\tmiddleT: 9201,\r\n\t\t\tmiddleIntersection: 9321\r\n\t\t\t// single: 7748\r\n\t\t}\r\n\t},\r\n\tSNOW: {\r\n\t\ttype: 'SNOW',\r\n\t\ttextures: {}\r\n\t}\r\n}\r\n\r\nconst actorTextures = {\r\n\tORC: [5292, 5293, 5294, 5295, 5296, 5297, 5299],\r\n\tEMPOWERED_ORC: [5298],\r\n\tGOBLIN: [7440, 7441, 7442, 7443, 7444, 7445, 7446],\r\n\tRAT: [2362, 2363, 2365, 2366],\r\n\tBAT: [3704, 3706],\r\n\tKOBOLD: [5532, 5533, 5534, 5535, 5536, 5537, 5538, 5539],\r\n\tWILD_GOAT: [2600, 2601, 2602, 2603, 2604, 2605]\r\n}\r\n\r\n// textures for grass/flowers/trees\r\nconst wildGrass1 = 1242,\r\n\twildGrass2 = 1243,\r\n\twildGrass3 = 1362,\r\n\twildGrass4 = 1363,\r\n\tshrub1 = 1722,\r\n\tshrub2 = 1723,\r\n\tshrub3 = 1726,\r\n\tmushroom1 = 1724,\r\n\tmushroom2 = 1725,\r\n\ttree = 7355,\r\n\tflower1 = 1482,\r\n\tflower2 = 1483,\r\n\tflower3 = 1484,\r\n\tflower4 = 1485\r\n\r\nconst flatten = arr => arr.reduce((acc, val) => acc.concat(Array.isArray(val) ? flatten(val) : val), [])\r\n\r\n// function that will yield a random free space in the room\r\nconst randomTile = validTiles => {\r\n\tlet index = getRandomInt(0, validTiles.length) // index of a tile\r\n\tlet tile = validTiles.splice(index, 1)\r\n\tif (tile.length === 1) {\r\n\t\treturn tile[0].split(',').map(e => Number(e))\r\n\t} else {\r\n\t\treturn null\r\n\t}\r\n}\r\n\r\nexport function randomSimplexMap(width, height, zoom) {\r\n\t// we want to zoom in a lot so that the land is larger, so the width & height will be half\r\n\tlet w = ~~(width / zoom)\r\n\tlet h = ~~(height / zoom)\r\n\tlet gameMap = new GameMap(w, h)\r\n\tconsole.log(w, h)\r\n\t// base textures\r\n\t/* GOOD SEEDS\r\n        - 908234\r\n    */\r\n\tlet seed1 = 908234\r\n\tlet seed2 = 908234\r\n\tlet rng1 = RNG.create(seed1)\r\n\tlet rng2 = RNG.create(seed2)\r\n\tlet gen1 = new SimplexNoise(rng1.nextDouble.bind(rng1))\r\n\tlet gen2 = new SimplexNoise(rng2.nextDouble.bind(rng2))\r\n\tlet frequency = 1.5\r\n\r\n\tconst mobDistribution = {\r\n\t\t// ORC: 1,\r\n\t\t// EMPOWERED_ORC: 1,\r\n\t\t// KOBOLD: 1,\r\n\t\tGOBLIN: 1,\r\n\t\t// BAT: 1,\r\n\t\tRAT: 3,\r\n\t\tWILD_GOAT: 3\r\n\t}\r\n\r\n\tconst createActor = (actorString, x, y, id) => {\r\n\t\tswitch (actorString) {\r\n\t\t\tcase 'ORC':\r\n\t\t\t\treturn new Orc(x, y, id)\r\n\t\t\tcase 'EMPOWERED_ORC':\r\n\t\t\t\treturn new Orc(x, y, id, true)\r\n\t\t\tcase 'KOBOLD':\r\n\t\t\t\treturn new Kobold(x, y, id)\r\n\t\t\tcase 'GOBLIN':\r\n\t\t\t\treturn new Goblin(x, y, id)\r\n\t\t\tcase 'BAT':\r\n\t\t\t\treturn new Bat(x, y, id)\r\n\t\t\tcase 'RAT':\r\n\t\t\t\treturn new Rat(x, y, id)\r\n\t\t\tcase 'WILD_GOAT':\r\n\t\t\t\treturn new WildGoat(x, y, id)\r\n\t\t\tdefault:\r\n\t\t\t\tthrow 'Unidentified actor given to create actor'\r\n\t\t}\r\n\t}\r\n\r\n\tconst noise1 = (nx, ny) => {\r\n\t\treturn gen1.noise2D(nx, ny) / 2 + 0.5\r\n\t}\r\n\r\n\tconst noise2 = (nx, ny) => {\r\n\t\treturn gen2.noise2D(nx, ny) / 2 + 0.5\r\n\t}\r\n\r\n\tconst getElevation = (x, y) => {\r\n\t\tlet nx = x / width - 0.5,\r\n\t\t\tny = y / height - 0.5\r\n\t\tlet e =\r\n\t\t\t1.0 * noise1(frequency * 1 * nx, frequency * 1 * ny) +\r\n\t\t\t0.5 * noise1(frequency * 2 * nx, frequency * 2 * ny) +\r\n\t\t\t0.25 * noise1(frequency * 4 * nx, frequency * 4 * ny) +\r\n\t\t\t0.13 * noise1(frequency * 8 * nx, frequency * 8 * ny) +\r\n\t\t\t0.06 * noise1(frequency * 16 * nx, frequency * 16 * ny) +\r\n\t\t\t0.03 * noise1(frequency * 32 * nx, frequency * 32 * ny)\r\n\t\te /= 1.0 + 0.5 + 0.25 + 0.13 + 0.06 + 0.03\r\n\t\te = Math.pow(e, 5.0)\r\n\t\treturn e * 100\r\n\t}\r\n\r\n\tconst getMoisture = (x, y) => {\r\n\t\tlet nx = x / width - 0.5,\r\n\t\t\tny = y / height - 0.5\r\n\t\tlet m =\r\n\t\t\t1.0 * noise2(1 * nx, 1 * ny) +\r\n\t\t\t0.75 * noise2(2 * nx, 2 * ny) +\r\n\t\t\t0.33 * noise2(4 * nx, 4 * ny) +\r\n\t\t\t0.33 * noise2(8 * nx, 8 * ny) +\r\n\t\t\t0.33 * noise2(16 * nx, 16 * ny) +\r\n\t\t\t0.5 * noise2(32 * nx, 32 * ny)\r\n\t\tm /= 1.0 + 0.75 + 0.33 + 0.33 + 0.33 + 0.5\r\n\t\treturn m\r\n\t}\r\n\r\n\tconst biome = e => {\r\n\t\tif (e < 1.5) {\r\n\t\t\treturn textures.COASTAL_WATER\r\n\t\t} else {\r\n\t\t\treturn textures.FOREST\r\n\t\t}\r\n\t}\r\n\r\n\tlet getTexture = (textures, sum) => {\r\n\t\tconst { hasCorridors } = textures\r\n\t\tlet sumToTexture = {\r\n\t\t\t0: textures.single,\r\n\t\t\t1: textures.endBottom,\r\n\t\t\t2: hasCorridors ? textures.endLeft : textures.upperLeft,\r\n\t\t\t3: textures.lowerLeft,\r\n\t\t\t4: hasCorridors ? textures.endTop : textures.upperLeft,\r\n\t\t\t5: textures.middleCorridorVertical,\r\n\t\t\t6: textures.upperLeft,\r\n\t\t\t7: textures.left,\r\n\t\t\t8: hasCorridors ? textures.endRight : textures.upperRight,\r\n\t\t\t9: textures.lowerRight,\r\n\t\t\t10: textures.middleCorridorHorizontal,\r\n\t\t\t11: textures.bottom,\r\n\t\t\t12: textures.upperRight,\r\n\t\t\t13: textures.right,\r\n\t\t\t14: textures.top,\r\n\t\t\t15: textures.center,\r\n\t\t\t16: textures.lowerRight,\r\n\t\t\t17: textures.lowerLeft,\r\n\t\t\t18: textures.altUpperRight,\r\n\t\t\t19: textures.upperLeft,\r\n\t\t\t20: textures.middleT,\r\n\t\t\t21: textures.middleIntersection\r\n\t\t}\r\n\r\n\t\tif (sum in sumToTexture) {\r\n\t\t\treturn sumToTexture[sum]\r\n\t\t} else {\r\n\t\t\tconsole.warn(`Couldn't find a texture for sum: ${sum} with tile options: ${tileOptions}`)\r\n\t\t\treturn 0\r\n\t\t}\r\n\t}\r\n\r\n\tlet computeBitmask = (x, y) => {\r\n\t\tlet elevation = getElevation(x, y)\r\n\t\tlet texture = biome(elevation)\r\n\t\tlet sum = 0\r\n\t\tlet above = `${x},${y - 1}`\r\n\t\tlet below = `${x},${y + 1}`\r\n\t\tlet left = `${x - 1},${y}`\r\n\t\tlet right = `${x + 1},${y}`\r\n\r\n\t\tlet ur = `${x + 1},${y - 1}`\r\n\t\tlet ll = `${x - 1},${y + 1}`\r\n\r\n\t\tlet ul = `${x - 1},${y - 1}`\r\n\t\tlet lr = `${x + 1},${y + 1}`\r\n\r\n\t\tlet free = coord => {\r\n\t\t\tlet [x, y] = coord.split(',')\r\n\t\t\tlet e = getElevation(x, y)\r\n\t\t\tlet textureType = biome(e).type\r\n\t\t\treturn textureType === texture.type || (textureType === 'OCEAN_WATER' && texture.type === 'COASTAL_WATER')\r\n\t\t}\r\n\r\n\t\tif (free(above)) sum += 1\r\n\t\tif (free(right)) sum += 2\r\n\t\tif (free(below)) sum += 4\r\n\t\tif (free(left)) sum += 8\r\n\r\n\t\tif (sum === 15 && !free(ul) && texture.type === 'COASTAL_WATER') {\r\n\t\t\tsum = 18\r\n\t\t}\r\n\r\n\t\treturn { texture: getTexture(texture.textures, sum), type: texture.type, elevation }\r\n\t}\r\n\r\n\tlet possible_player_location = null\r\n\r\n\tconst floraFaunaProbability = {\r\n\t\t[wildGrass1]: 25,\r\n\t\t[wildGrass2]: 25,\r\n\t\t[wildGrass3]: 25,\r\n\t\t[wildGrass4]: 25,\r\n\t\t[shrub1]: 1,\r\n\t\t[shrub3]: 1,\r\n\t\t[flower1]: 1,\r\n\t\t[flower2]: 1,\r\n\t\t[flower3]: 1,\r\n\t\t[flower4]: 1,\r\n\t\t[mushroom1]: 1\r\n\t}\r\n\r\n\tfor (let y = 0; y < h; y++) {\r\n\t\tfor (let x = 0; x < w; x++) {\r\n\t\t\tlet t = computeBitmask(x, y)\r\n\t\t\tlet tile = gameMap.getTile(x, y)\r\n\t\t\tif (t.type === textures.OCEAN_WATER.type || t.type === textures.COASTAL_WATER.type) {\r\n\t\t\t\t// since it's an animated tile, it needs a static texture underneath it\r\n\t\t\t\ttile.updateTileInfo(7146)\r\n\t\t\t\ttile.updateTileInfo(t.texture)\r\n\t\t\t} else if (t.type === textures.FOREST.type) {\r\n\t\t\t\ttile.updateTileInfo(t.texture)\r\n\t\t\t\tif (between(5, t.elevation, 6) || between(10, t.elevation, 100)) {\r\n\t\t\t\t\ttile.updateTileInfo(tree)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (getRandomInt(0, 4) > 0) {\r\n\t\t\t\t\t\tlet obstacle = ROT.RNG.getWeightedValue(floraFaunaProbability)\r\n\t\t\t\t\t\ttile.updateTileInfo(obstacle)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// chance of placing an enemy in the open tiles...\r\n\t\t\t\tif (!tile.blocked()) {\r\n\t\t\t\t\tif (getRandomInt(0, 500) === 1) {\r\n\t\t\t\t\t\t// 1% chance\r\n\t\t\t\t\t\tlet chosenActor = ROT.RNG.getWeightedValue(mobDistribution)\r\n\t\t\t\t\t\tlet possibleActorTextures = actorTextures[chosenActor]\r\n\t\t\t\t\t\tlet randomTexture = possibleActorTextures[getRandomInt(0, possibleActorTextures.length - 1)]\r\n\t\t\t\t\t\tlet actor = createActor(chosenActor, x, y, randomTexture)\r\n\t\t\t\t\t\ttile.actors.push(actor)\r\n\t\t\t\t\t\tgameMap.actors.push(actor)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgameMap.playerLocation = [~~(w / 2), ~~(h / 2)]\r\n\r\n\treturn gameMap\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/map/generation/RandomSimplex.js","import { randomCave } from './RandomCave.js'\r\nimport { randomDungeon } from './RandomDungeon.js'\r\nimport { randomSimplexMap } from './RandomSimplex.js'\r\n\r\nexport default {\r\n\trandomCave,\r\n\trandomDungeon,\r\n\trandomSimplexMap\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/map/generation/index.js","import ROT from 'rot-js'\r\nimport * as PIXI from 'pixi.js'\r\nPIXI.utils.skipHello()\r\n\r\nimport { getTilesetCoords, createMapFromJSON } from '#/map/GameMap.js'\r\nimport GameDisplay from '#/GameDisplay.js'\r\nimport { Actor } from '#/entities/actors/Actor.js'\r\nimport { Entity } from '#/entities/Entity.js'\r\nimport { getItemsFromDropTable, addPrefix } from '#/utils/HelperFunctions.js'\r\n\r\nimport Item from '#/entities/items/Item.js'\r\nimport Player from '#/entities/actors/Player.js'\r\nimport MapGen from '#/map/generation/index.js'\r\nimport Door from '#/entities/misc/Door.js'\r\nimport Ladder from '#/entities/misc/Ladder.js'\r\nimport Chest from '#/entities/misc/Chest.js'\r\n\r\nconst { randomSimplexMap, randomDungeon, randomCave } = MapGen\r\n\r\nconst targetingBorders = {\r\n\tid: 7418,\r\n\tvisible: true\r\n}\r\nconst untargetableBorders = {\r\n\tid: 7419,\r\n\tvisible: true\r\n}\r\n\r\nexport let Game = {\r\n\tapp: null,\r\n\toverview: null,\r\n\tdev: false,\r\n\tdisplay: null,\r\n\tHUD: null,\r\n\tconsole: null,\r\n\tplayer: null,\r\n\tplayerLocation: null,\r\n\tplayerID: 4696,\r\n\tloadedIDS: [],\r\n\tscheduler: null,\r\n\tturn: 0,\r\n\tengine: null,\r\n\tloaded: false,\r\n\tlevels: {},\r\n\tcurrentLevel: { name: 'overworld' },\r\n\tmap: null,\r\n\tmessageHistory: [],\r\n\ttempMessages: [],\r\n\tminimap: null,\r\n\tselectedTile: null,\r\n\tpathToTarget: {},\r\n\ttargetReticle: null,\r\n\tenemyCycle: null,\r\n\tenemyCycleIndex: 0,\r\n\tuserSettings: { hpBars: true },\r\n\r\n\tinit(playerSpriteID) {\r\n\t\tthis.playerID = playerSpriteID\r\n\t\tthis.player = new Player(0, 0, playerSpriteID)\r\n\t\tthis.currentLevel.name = 'overworld'\r\n\t\tthis.displayOptions = {\r\n\t\t\twidth: 32,\r\n\t\t\theight: 20,\r\n\t\t\tforceSquareRatio: true,\r\n\t\t\tlayout: 'tile',\r\n\t\t\t// bg: \"transparent\",\r\n\t\t\ttileWidth: 32,\r\n\t\t\ttileHeight: 32\r\n\t\t}\r\n\t\tlet onceLoaded = () => {\r\n\t\t\tthis.levels['graveyard'] = createMapFromJSON(PIXI.loader.resources['graveyard'].data)\r\n\t\t\tthis.levels['Lich Lair'] = createMapFromJSON(PIXI.loader.resources['lichLair'].data)\r\n\t\t\tthis.levels['overworld'] = createMapFromJSON(PIXI.loader.resources['overworld'].data)\r\n\t\t\tthis.levels['Orc Castle'] = createMapFromJSON(PIXI.loader.resources['orcCastle'].data)\r\n\t\t\tthis.levels['graveyard'].revealed = true\r\n\t\t\tthis.levels['Lich Lair'].revealed = true\r\n\t\t\tthis.levels['overworld'].revealed = true\r\n\t\t\tthis.levels['Orc Castle'].revealed = true\r\n\t\t\tthis.map = this.levels[this.currentLevel.name]\r\n\t\t\tthis.width = this.map.width < this.displayOptions.width ? this.map.width : this.displayOptions.width\r\n\t\t\tthis.height = this.map.height < this.displayOptions.height ? this.map.height : this.displayOptions.height\r\n\t\t\tthis.map.actors.push(this.player) // add to the list of all actors\r\n\t\t\tlet [px, py] = this.map.playerLocation\r\n\t\t\tthis.player.placeAt(px, py)\r\n\t\t\tthis.scheduleAllActors()\r\n\t\t\tthis.initializeMinimap()\r\n\t\t\tdocument.getElementById('game_container').appendChild(this.display.getContainer())\r\n\t\t\tdocument.getElementById('minimap_container').appendChild(this.minimap.getContainer())\r\n\r\n\t\t\tthis.engine.start() // Start the engine\r\n\t\t\tthis.renderMap()\r\n\t\t}\r\n\t\tthis.display = new GameDisplay()\r\n\t\tthis.display.loadAssets(onceLoaded)\r\n\t},\r\n\r\n\trenderMap() {\r\n\t\tthis.display.renderMap(this.map)\r\n\t\tthis.targetReticle = new PIXI.Sprite(this.display.tilesetMapping[7418])\r\n\t\tthis.targetReticle.visible = false\r\n\t\tthis.display.background.addChild(this.targetReticle)\r\n\t},\r\n\r\n\tscheduleAllActors() {\r\n\t\t// Set up the ROT engine and scheduler\r\n\t\tthis.scheduler = new ROT.Scheduler.Simple()\r\n\t\tthis.scheduler.add(this.player, true) // Add the player to the scheduler\r\n\t\tthis.scheduler.add(this.display, true)\r\n\t\tfor (let i = 0; i < this.map.actors.length; i++) {\r\n\t\t\t// Some 'actor' objects do not take turns, such as ladders / items\r\n\t\t\tif (this.map.actors[i] !== this.player && this.map.actors[i] instanceof Actor) {\r\n\t\t\t\tthis.scheduler.add(this.map.actors[i], true)\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.engine = new ROT.Engine(this.scheduler) // Create new engine with the newly created scheduler\r\n\t},\r\n\r\n\tinitializeMinimap() {\r\n\t\t/* Create a ROT.JS display for the minimap! */\r\n\t\tthis.minimap = new ROT.Display()\r\n\t\tthis.minimap.setOptions({\r\n\t\t\twidth: this.map.width,\r\n\t\t\theight: this.map.height,\r\n\t\t\tfontSize: 2,\r\n\t\t\tspacing: 2,\r\n\t\t\tforceSquareRatio: true\r\n\t\t})\r\n\t\tthis.drawMiniMap()\r\n\t},\r\n\r\n\tclearTempLog() {\r\n\t\tthis.tempMessages.splice(0, this.tempMessages.length)\r\n\t},\r\n\r\n\tinbounds(x, y) {\r\n\t\treturn !(x < 0 || x >= this.map.width || y < 0 || y >= this.map.height)\r\n\t},\r\n\r\n\tinViewport(x, y) {\r\n\t\tlet cx = Game.player.x - ~~(Game.width / 2)\r\n\t\tlet cy = Game.player.y - ~~(Game.height / 2)\r\n\t\treturn cx <= x && x <= cx + Game.width && cy <= y && y <= cy + Game.height\r\n\t},\r\n\r\n\tchangeLevels(newLevel, dir, level) {\r\n\t\tif (this.levels[newLevel] === undefined) {\r\n\t\t\t// generating a new random room\r\n\t\t\tif (newLevel.toLowerCase().includes('cave')) {\r\n\t\t\t\tthis.levels[newLevel] = randomCave(80, 40, dir, level)\r\n\t\t\t} else {\r\n\t\t\t\tthis.levels[newLevel] = randomDungeon(40, 40, dir, level)\r\n\t\t\t}\r\n\t\t\tthis.levels[newLevel].revealed = false\r\n\t\t\tfor (let actor of this.levels[newLevel].actors) {\r\n\t\t\t\tif (actor instanceof Chest) {\r\n\t\t\t\t\t// console.log(\"filling chest with goodies!\");\r\n\t\t\t\t\t// we want to populate the chests with loot\r\n\t\t\t\t\tlet items = getItemsFromDropTable({\r\n\t\t\t\t\t\tminItems: 1,\r\n\t\t\t\t\t\tmaxItems: 4,\r\n\t\t\t\t\t\tdropTable: {\r\n\t\t\t\t\t\t\tSTRENGTH_POTION: 1,\r\n\t\t\t\t\t\t\tHEALTH_POTION: 1,\r\n\t\t\t\t\t\t\tSTEEL_ARROW: 1,\r\n\t\t\t\t\t\t\tMANA_POTION: 1,\r\n\t\t\t\t\t\t\tSWORD: 3\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tx: actor.x,\r\n\t\t\t\t\t\ty: actor.y\r\n\t\t\t\t\t})\r\n\t\t\t\t\titems.forEach(item => actor.addToInventory(item))\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// console.log(newLevel + \" does not exist, so a new random instance is being created.\");\r\n\t\t}\r\n\t\t// save the player's location on this map\r\n\t\tthis.map.playerLocation = [Game.player.x, Game.player.y]\r\n\t\t// Save the old map\r\n\t\tthis.levels[this.currentLevel.name] = this.map // add the old map to 'levels'\r\n\t\t// Unshift player from ladder position (so that when resurfacing, no player is present)\r\n\t\tthis.getTile(this.player.x, this.player.y).removeActor(this.player)\r\n\t\tthis.map.actors = this.map.actors.filter(a => a !== this.player)\r\n\t\tthis.map = this.levels[newLevel]\r\n\t\tthis.currentLevel.name = newLevel\r\n\t\tthis.playerLocation = this.map.playerLocation\r\n\t\t// before drawing the viewport, we need to clear the screen of whatever was here last\r\n\t\tthis.display.clear()\r\n\t\tthis.width = this.map.width < this.displayOptions.width ? this.map.width : this.displayOptions.width\r\n\t\tthis.height = this.map.height < this.displayOptions.height ? this.map.height : this.displayOptions.height\r\n\t\tthis.player.placeAt(this.playerLocation[0], this.playerLocation[1])\r\n\t\tthis.map.actors.push(this.player)\r\n\t\tthis.scheduleAllActors()\r\n\t\t// Clear the last visible tiles that were available to be seen\r\n\t\tObject.assign(this.map.seen_tiles, this.map.visible_tiles)\r\n\t\tthis.map.visible_tiles = {}\r\n\r\n\t\t// FOV calculations\r\n\t\tlet fov = new ROT.FOV.PreciseShadowcasting((x, y) => {\r\n\t\t\treturn this.inbounds(x, y) && this.getTile(x, y).visible()\r\n\t\t})\r\n\r\n\t\tfov.compute(this.player.x, this.player.y, this.player.cb.range, (x, y, r, visibility) => {\r\n\t\t\tthis.map.visible_tiles[x + ',' + y] = true\r\n\t\t})\r\n\t\tthis.minimap.setOptions({\r\n\t\t\twidth: this.map.width,\r\n\t\t\theight: this.map.height,\r\n\t\t\tfontSize: 2,\r\n\t\t\tspacing: 2,\r\n\t\t\tforceSquareRatio: true\r\n\t\t})\r\n\t\tthis.minimap.clear()\r\n\t\tthis.drawMiniMap()\r\n\t\tthis.renderMap()\r\n\t},\r\n\r\n\tdrawMiniMap() {\r\n\t\tlet otherActors = this.map.actors.filter(a => {\r\n\t\t\treturn a instanceof Ladder || a instanceof Door\r\n\t\t})\r\n\t\tif (this.map.revealed) {\r\n\t\t\tfor (let y = 0; y < this.map.height; y++) {\r\n\t\t\t\tfor (let x = 0; x < this.map.width; x++) {\r\n\t\t\t\t\tlet tile = this.getTile(x, y)\r\n\t\t\t\t\tif (tile.x + ',' + tile.y in this.map.visible_tiles) {\r\n\t\t\t\t\t\tthis.minimap.draw(x, y, ' ', tile.bg(), this.brightenColor(tile.bg()))\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.minimap.draw(x, y, ' ', tile.bg(), tile.bg())\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (let a of otherActors) {\r\n\t\t\t\tthis.minimap.draw(a.x, a.y, ' ', a.fg, a.bg)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor (let y = 0; y < this.map.height; y++) {\r\n\t\t\t\tfor (let x = 0; x < this.map.width; x++) {\r\n\t\t\t\t\tlet tile = this.getTile(x, y)\r\n\t\t\t\t\tif (tile.x + ',' + tile.y in this.map.visible_tiles) {\r\n\t\t\t\t\t\tthis.minimap.draw(x, y, ' ', tile.bg(), this.brightenColor(tile.bg()))\r\n\t\t\t\t\t} else if (tile.x + ',' + tile.y in this.map.seen_tiles) {\r\n\t\t\t\t\t\tthis.minimap.draw(x, y, ' ', tile.bg(), tile.bg())\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (let a of otherActors) {\r\n\t\t\t\tif (a.x + ',' + a.y in this.map.seen_tiles) {\r\n\t\t\t\t\tthis.minimap.draw(a.x, a.y, ' ', a.fg, a.bg)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// Draw the actor in the mini-map\r\n\t\tthis.minimap.draw(this.player.x, this.player.y, ' ', 'yellow', 'yellow')\r\n\t},\r\n\r\n\tbrightenColor(color) {\r\n\t\t// console.log(color);\r\n\t\tlet hsl_color = ROT.Color.rgb2hsl(ROT.Color.fromString(color))\r\n\t\thsl_color[2] *= 1.25\r\n\t\treturn ROT.Color.toRGB(ROT.Color.hsl2rgb(hsl_color))\r\n\t},\r\n\r\n\tgetNearbyEnemies() {\r\n\t\tlet camera = {\r\n\t\t\t// camera x,y resides in the upper left corner\r\n\t\t\tx: this.player.x - ~~(Game.width / 2),\r\n\t\t\ty: this.player.y - ~~(Game.height / 2),\r\n\t\t\twidth: Math.ceil(Game.width),\r\n\t\t\theight: Game.height\r\n\t\t}\r\n\t\tlet startingPos = [camera.x, camera.y]\r\n\t\tif (camera.x < 0) {\r\n\t\t\t// far left\r\n\t\t\tstartingPos[0] = 0\r\n\t\t}\r\n\t\tif (camera.x + camera.width > Game.map.width) {\r\n\t\t\t// far right\r\n\t\t\tstartingPos[0] = Game.map.width - camera.width\r\n\t\t}\r\n\t\tif (camera.y <= 0) {\r\n\t\t\t// at the top of the map\r\n\t\t\tstartingPos[1] = 0\r\n\t\t}\r\n\t\tif (camera.y + camera.height > Game.map.height) {\r\n\t\t\t// at the bottom of the map\r\n\t\t\tstartingPos[1] = Game.map.height - camera.height\r\n\t\t}\r\n\t\tthis.camera = {\r\n\t\t\tx: startingPos[0],\r\n\t\t\ty: startingPos[1]\r\n\t\t}\r\n\t\tlet endingPos = [startingPos[0] + camera.width, startingPos[1] + camera.height]\r\n\t\tlet dx = 0\r\n\t\tlet dy = 0\r\n\t\tlet actors = []\r\n\t\tfor (let x = startingPos[0]; x < endingPos[0]; x++) {\r\n\t\t\tfor (let y = startingPos[1]; y < endingPos[1]; y++) {\r\n\t\t\t\tlet tile = this.getTile(x, y)\r\n\t\t\t\t// if (tile.x + ',' + tile.y in this.map.visible_tiles) {\r\n\t\t\t\tactors = actors.concat(tile.actors)\r\n\t\t\t\t// }\r\n\r\n\t\t\t\t// if (this.map.revealed) {\r\n\t\t\t\t//     actors = actors.concat(tile.actors);\r\n\t\t\t\t// } else {\r\n\t\t\t\t//     if (tile.x + \",\" + tile.y in this.map.visible_tiles)\r\n\t\t\t\t//         actors = actors.concat(tile.actors);\r\n\t\t\t\t// }\r\n\t\t\t}\r\n\t\t\tdx++\r\n\t\t\tdy = 0\r\n\t\t}\r\n\t\tlet enemies = actors.filter(actor => {\r\n\t\t\treturn actor.cb !== undefined && actor.cb.hostile\r\n\t\t})\r\n\r\n\t\t// we sort the enemies closest to farthest away\r\n\t\treturn enemies.sort((a1, a2) => {\r\n\t\t\tif (a1.distanceTo(this.player) < a2.distanceTo(this.player)) {\r\n\t\t\t\treturn -1\r\n\t\t\t} else if (a2.distanceTo(this.player) < a1.distanceTo(this.player)) {\r\n\t\t\t\treturn 1\r\n\t\t\t} else {\r\n\t\t\t\treturn 0\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\r\n\tgetClosestEnemyToPlayer() {\r\n\t\treturn this.getNearbyEnemies()[0]\r\n\t},\r\n\r\n\tclearSelectedTile() {\r\n\t\tthis.selectedTile = null\r\n\t\tthis.pathToTarget = {}\r\n\t\tthis.clearTempLog() // clear the temporary log which describes the tile we're on\r\n\t\tthis.targetReticle.visible = false\r\n\t},\r\n\r\n\tchangeSelectedTile(tile) {\r\n\t\tthis.selectedTile = tile\r\n\t\tlet { x, y } = tile\r\n\t\tlet blockedTile = this.selectedTile.blocked() || this.map.visible_tiles[x + ',' + y] === undefined\r\n\t\t// highlighting the path from the player to the target reticle using bresenham line algorithm\r\n\t\t/* https://rosettacode.org/wiki/Bitmap/Bresenham%27s_line_algorithm#JavaScript */\r\n\t\tthis.pathToTarget = {}\r\n\t\tif (!blockedTile) {\r\n\t\t\tlet x0 = this.player.x,\r\n\t\t\t\tx1 = this.selectedTile.x,\r\n\t\t\t\ty0 = this.player.y,\r\n\t\t\t\ty1 = this.selectedTile.y,\r\n\t\t\t\tdx = Math.abs(x1 - x0),\r\n\t\t\t\tsx = x0 < x1 ? 1 : -1,\r\n\t\t\t\tdy = Math.abs(y1 - y0),\r\n\t\t\t\tsy = y0 < y1 ? 1 : -1,\r\n\t\t\t\terr = (dx > dy ? dx : -dy) / 2\r\n\t\t\twhile (!(x0 === x1 && y0 === y1)) {\r\n\t\t\t\tthis.pathToTarget[x0 + ',' + y0] = true\r\n\t\t\t\tlet e2 = err\r\n\t\t\t\tif (e2 > -dx) {\r\n\t\t\t\t\terr -= dy\r\n\t\t\t\t\tx0 += sx\r\n\t\t\t\t}\r\n\t\t\t\tif (e2 < dy) {\r\n\t\t\t\t\terr += dx\r\n\t\t\t\t\ty0 += sy\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.pathToTarget[x0 + ',' + y0] = true\r\n\t\t\tthis.pathToTarget[this.player.x + ',' + this.player.y] = false\r\n\t\t}\r\n\t\tthis.targetReticle.visible = true\r\n\t\tthis.targetReticle.position.set(tile.x * this.display.tileSize, tile.y * this.display.tileSize)\r\n\t\tthis.describeSelectedTile()\r\n\r\n\t\treturn !blockedTile\r\n\t},\r\n\r\n\tselectNearestEnemyTile() {\r\n\t\tthis.clearSelectedTile()\r\n\t\tlet enemy = this.getClosestEnemyToPlayer()\r\n\t\tif (enemy !== undefined) {\r\n\t\t\tlet { x, y } = enemy\r\n\t\t\treturn this.changeSelectedTile(this.getTile(x, y))\r\n\t\t} else {\r\n\t\t\treturn false\r\n\t\t}\r\n\t},\r\n\r\n\tcycleThroughSelectableEnemies() {\r\n\t\tif (this.enemyCycle === null) {\r\n\t\t\tthis.enemyCycle = this.getNearbyEnemies()\r\n\t\t\tthis.enemyCycleIndex = 0\r\n\t\t}\r\n\t\t// if there's more than one enemy, we can cycle to the next closest enemy\r\n\t\tif (this.enemyCycle.length > 1) {\r\n\t\t\tthis.clearSelectedTile()\r\n\t\t\tthis.enemyCycleIndex += 1\r\n\t\t\tif (this.enemyCycleIndex === this.enemyCycle.length) {\r\n\t\t\t\tthis.enemyCycleIndex = 0\r\n\t\t\t}\r\n\r\n\t\t\tlet newTarget = this.enemyCycle[this.enemyCycleIndex]\r\n\t\t\treturn this.changeSelectedTile(this.getTile(newTarget.x, newTarget.y))\r\n\t\t}\r\n\t},\r\n\r\n\tdescribeSelectedTile() {\r\n\t\t/* Returns an array of strings describing what exists on the currently selected tile.\r\n        this can be obstacles, items, traps, or enemies */\r\n\t\tlet { actors, obstacles } = this.selectedTile\r\n\t\tlet names = actors\r\n\t\t\t.filter(a => {\r\n\t\t\t\treturn a instanceof Entity && a !== this.player\r\n\t\t\t})\r\n\t\t\t.map(a => {\r\n\t\t\t\treturn a instanceof Item ? a.type.toLowerCase() : a.name.toLowerCase()\r\n\t\t\t})\r\n\r\n\t\tlet obstacleDescriptions = obstacles.map(o => o.description).filter(o => o !== undefined)\r\n\t\tif (obstacleDescriptions.length > 0) names.push(obstacleDescriptions.slice(-1)[0])\r\n\t\tlet prettyNames = []\r\n\t\tprettyNames = names.slice(1, -1).reduce((buf, str) => {\r\n\t\t\treturn buf + ', ' + addPrefix(str)\r\n\t\t}, addPrefix(names.slice(0, 1)[0]))\r\n\r\n\t\tif (names.length > 1) {\r\n\t\t\tprettyNames = prettyNames + [` and ${addPrefix(names.slice(-1)[0])}`]\r\n\t\t} else if (names.length == 0) {\r\n\t\t\tprettyNames = 'nothing'\r\n\t\t}\r\n\r\n\t\tif ((Game.player.targeting || Game.player.casting) && this.selectedTile !== null) {\r\n\t\t\tlet inView = Game.map.data[this.selectedTile.y][this.selectedTile.x].actors.some(obs => {\r\n\t\t\t\treturn obs.id === untargetableBorders.id\r\n\t\t\t})\r\n\t\t\t\t? ' This tile is out of range or blocked.'\r\n\t\t\t\t: ''\r\n\t\t\tthis.log(`[You see ${prettyNames} here.${inView}]`, 'player_move', true)\r\n\t\t} else {\r\n\t\t\tthis.log(`[You see ${prettyNames} here.]`, 'player_move', true)\r\n\t\t}\r\n\t},\r\n\r\n\tgetTile(x, y) {\r\n\t\treturn this.map.data[y][x]\r\n\t},\r\n\r\n\tprintPlayerTile() {\r\n\t\tconsole.log(Game.map.data[this.player.y][this.player.x])\r\n\t},\r\n\r\n\teventToTile() {\r\n\t\tlet { x, y } = this.display.app.renderer.plugins.interaction.mouse.global\r\n\t\tlet camera = {\r\n\t\t\t// camera x,y resides in the upper left corner\r\n\t\t\tx: Game.player.x - ~~(Game.width / 2),\r\n\t\t\ty: Game.player.y - ~~(Game.height / 2) - 1\r\n\t\t}\r\n\t\tlet dx = camera.x + ~~(x / this.display.tileSize)\r\n\t\tlet dy = camera.y + ~~(y / this.display.tileSize)\r\n\t\tif (this.inbounds(dx, dy)) return this.getTile(dx, dy)\r\n\t\telse return null\r\n\t},\r\n\r\n\tlog(message, type, tmp = false) {\r\n\t\tlet message_color = {\r\n\t\t\tdefend: 'lightblue',\r\n\t\t\tmagic: '#3C1CFD',\r\n\t\t\tattack: 'red',\r\n\t\t\tdeath: 'crimson',\r\n\t\t\tinformation: 'yellow',\r\n\t\t\tplayer_move: '#878787',\r\n\t\t\tlevel_up: 'green',\r\n\t\t\talert: 'orange'\r\n\t\t}\r\n\t\tlet color = type in message_color ? message_color[type] : type\r\n\t\tif (tmp) this.tempMessages.splice(0, 1, [message, color])\r\n\t\telse this.messageHistory.push([message, color])\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/Game.js","import ROT from 'rot-js'\n\nimport { createMapFromJSON } from '#/map/GameMap.js'\nimport Player from '#/entities/actors/Player.js'\nimport { Actor } from '#/entities/actors/Actor.js'\nimport NPC from '#/entities/actors/NPC.js'\n\nimport { Game } from '#/Game.js'\nimport Item from '#/entities/items/Item.js'\nimport * as PIXI from 'pixi.js'\n\nexport default class GameDisplay {\n\tconstructor() {\n\t\tthis.app = new PIXI.Application({\n\t\t\t// forceCanvas: true,\n\t\t\twidth: 1024,\n\t\t\theight: 640\n\t\t})\n\t\t// this will be the texture we generate by creating a container, rendering it and generating it from\n\t\t// the renderer\n\t\t/*\n\t\t\tthis.staticBackground = renderer.generateTexture(theContainer)\n\t\t*/\n\t\tthis.staticBackground = null\n\t\tthis.animatedBackground = null\n\t\tthis.FOVBackground = null\n\t\tthis.HUDBackground = null\n\t\tthis.movingSprites = []\n\t\tthis.viewPort = null\n\t\tthis.tileSize = 32\n\t\tthis.tileset = null\n\t\tthis.tilesetMapping = {}\n\t\tthis.spriteBox = [] // Game.width * Game.height sprites to overlay screen for FOV\n\t}\n\n\tloadAssets(cb) {\n\t\tlet { renderer, stage, view } = this.app\n\t\tlet { resources } = PIXI.loader\n\t\tconst spritesheet = {\n\t\t\turl: 'static/images/compiled_tileset_32x32.png',\n\t\t\tname: 'spritesheet'\n\t\t}\n\t\tconst textureAtlas = {\n\t\t\turl: 'static/compiled_dawnlike.json',\n\t\t\tname: 'textureAtlas'\n\t\t}\n\t\tconst overworldMap = {\n\t\t\turl: 'static/maps/overworld.json',\n\t\t\tname: 'overworld'\n\t\t}\n\t\tconst graveyardMap = {\n\t\t\turl: 'static/maps/graveyard.json',\n\t\t\tname: 'graveyard'\n\t\t}\n\t\tconst lichLairMap = {\n\t\t\turl: 'static/maps/lichLair.json',\n\t\t\tname: 'lichLair'\n\t\t}\n\t\tconst orcCastleMap = {\n\t\t\turl: 'static/maps/orcCastle.json',\n\t\t\tname: 'orcCastle'\n\t\t}\n\n\t\tPIXI.loader\n\t\t\t.add(textureAtlas)\n\t\t\t.add(spritesheet)\n\t\t\t.add(overworldMap)\n\t\t\t.add(graveyardMap)\n\t\t\t.add(lichLairMap)\n\t\t\t.add(orcCastleMap)\n\t\t\t.on('progress', (l, r) => this.handleAssetLoad(l, r))\n\t\t\t.load(() => {\n\t\t\t\tthis.tileset = PIXI.loader.resources['textureAtlas'].data\n\t\t\t\t// I want to load every 32x32 frame from the tileset image\n\t\t\t\tfor (let id = 0; id < this.tileset.tilecount; id++) {\n\t\t\t\t\tlet coords = this.getTilesetCoords(id)\n\t\t\t\t\tlet frame = new PIXI.Rectangle(coords[0], coords[1], this.tileSize, this.tileSize)\n\t\t\t\t\tlet texture = new PIXI.Texture(PIXI.loader.resources['spritesheet'].texture, frame)\n\t\t\t\t\tthis.tilesetMapping[id] = texture\n\t\t\t\t}\n\t\t\t\tthis.clear()\n\t\t\t\tlet renderLoop = delta => {\n\t\t\t\t\t// maintain a track of all the sprites that should have updated movement on this tick\n\t\t\t\t\t// if they are at their location, filter them from the record\n\t\t\t\t\tfor (let obj of this.movingSprites)\n\t\t\t\t\t\tif (obj.sprite.x === obj.target.x && obj.sprite.y === obj.target.y)\n\t\t\t\t\t\t\tthis.movingSprites = this.movingSprites.filter(o => o.sprite !== obj.sprite)\n\n\t\t\t\t\t// update the location of every sprite\n\t\t\t\t\tfor (let obj of this.movingSprites) {\n\t\t\t\t\t\tlet { sprite, target } = obj\n\t\t\t\t\t\tlet x = 0\n\t\t\t\t\t\tlet y = 0\n\t\t\t\t\t\tlet distX = Math.abs(sprite.x - target.x)\n\t\t\t\t\t\tlet distY = Math.abs(sprite.y - target.y)\n\t\t\t\t\t\tlet shouldSlowDown = (distX <= 12 && distX !== 0) || (distY <= 12 && distY !== 0)\n\t\t\t\t\t\tlet movementSpeed = shouldSlowDown ? 2.0 : 4.0\n\t\t\t\t\t\tif (target.x > sprite.x) x = movementSpeed\n\t\t\t\t\t\tif (target.x < sprite.x) x = -movementSpeed\n\t\t\t\t\t\tif (target.y > sprite.y) y = movementSpeed\n\t\t\t\t\t\tif (target.y < sprite.y) y = -movementSpeed\n\t\t\t\t\t\tif (Math.abs(x) > distX) x = distX\n\t\t\t\t\t\tif (Math.abs(y) > distY) y = distY\n\t\t\t\t\t\tsprite.position.set(sprite.x + x, sprite.y + y)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.app.ticker.add(delta => renderLoop(delta))\n\t\t\t\tcb()\n\t\t\t})\n\t}\n\n\tgetTilesetCoords(id) {\n\t\tlet tileWidth = this.tileset.tilewidth\n\t\tlet tileHeight = this.tileset.tileheight\n\t\tlet cols = this.tileset.columns\n\t\tlet rowNumber = Math.floor(id / cols) * tileHeight\n\t\tlet colNumber = (id % cols) * tileHeight\n\t\treturn [colNumber, rowNumber]\n\t}\n\t/*\n\t\t\tI want to iterate through every tile in the map that is an obstacle (animated or not).\n\t\t\tFor each obstacle:\n\t\t\t\tif it is animated, create a new PIXI.extras.AnimatedSprite for it with the proper frames and animation speed\n\t\t\t\tif it is not animated, create a normal PIXI.Sprite\n\t\t\t\tOnce the obstacle sprite is created, add it to a container\n\t\t*/\n\trenderMap(map) {\n\t\tlet { renderer, stage } = this.app\n\t\tstage.removeChildren()\n\t\tlet staticBackground = new PIXI.Container()\n\t\tthis.animatedBackground = new PIXI.Container()\n\t\tfor (let y = 0; y < map.height; y++) {\n\t\t\tfor (let x = 0; x < map.width; x++) {\n\t\t\t\tlet tile = map.getTile(x, y)\n\t\t\t\tfor (let o of tile.obstacles) {\n\t\t\t\t\tif (o.animated === true && o.animated_id !== undefined && this.getTexture(o.animated_id) !== undefined) {\n\t\t\t\t\t\tlet frames = [this.getTexture(o.id), this.getTexture(o.animated_id)]\n\t\t\t\t\t\tlet sprite = new PIXI.extras.AnimatedSprite(frames)\n\t\t\t\t\t\tsprite.position.set(x * this.tileSize, y * this.tileSize)\n\t\t\t\t\t\tsprite.animationSpeed = 0.025\n\t\t\t\t\t\t// pick a random interval for the animation to play at!\n\t\t\t\t\t\tlet interval = ~~(Math.random() * 150)\n\t\t\t\t\t\t// let interval = x * 5\n\t\t\t\t\t\tsetTimeout(() => sprite.play(), interval)\n\t\t\t\t\t\t// sprite.play()\n\t\t\t\t\t\tthis.animatedBackground.addChild(sprite)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet sprite = new PIXI.Sprite(this.getTexture(o.id))\n\t\t\t\t\t\tsprite.position.set(x * this.tileSize, y * this.tileSize)\n\t\t\t\t\t\tstaticBackground.addChild(sprite)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.staticBackground = new PIXI.Sprite(renderer.generateTexture(staticBackground))\n\t\tthis.staticBackground.position.set(0, 0)\n\t\tthis.animatedBackground.position.set(0, 0)\n\t\tthis.background = new PIXI.Container()\n\t\tthis.background.addChild(this.staticBackground)\n\t\tthis.background.addChild(this.animatedBackground)\n\t\tstage.addChild(this.background)\n\t\tlet camera = {\n\t\t\t// camera x,y resides in the upper left corner\n\t\t\tx: Game.player.x - ~~(Game.width / 2),\n\t\t\ty: Game.player.y - ~~(Game.height / 2),\n\t\t\twidth: Math.ceil(Game.width),\n\t\t\theight: Game.height\n\t\t}\n\t\tlet startingPos = [camera.x, camera.y]\n\t\tif (camera.x < 0) {\n\t\t\t// far left\n\t\t\tstartingPos[0] = 0\n\t\t}\n\t\tif (camera.x + camera.width > Game.map.width) {\n\t\t\t// far right\n\t\t\tstartingPos[0] = Game.map.width - camera.width\n\t\t}\n\t\tif (camera.y <= 0) {\n\t\t\t// at the top of the map\n\t\t\tstartingPos[1] = 0\n\t\t}\n\t\tif (camera.y + camera.height > Game.map.height) {\n\t\t\t// at the bottom of the map\n\t\t\tstartingPos[1] = Game.map.height - camera.height\n\t\t}\n\t\tlet endingPos = [startingPos[0] + camera.width, startingPos[1] + camera.height]\n\t\tthis.background.position.set(-startingPos[0] * this.tileSize, -startingPos[1] * this.tileSize)\n\t\t// draw the actors last because they should be on the top-most layer\n\t\tfor (let a of map.actors) {\n\t\t\tif (!(a instanceof Item)) {\n\t\t\t\tthis.assignSprite(a)\n\t\t\t}\n\t\t}\n\n\t\t// if the map isn't completely revealed, we need to generate some FOV shadowing hiding the\n\t\t// unvisited parts of the map\n\t\tif (!map.revealed) {\n\t\t\tthis.FOVBackground = new PIXI.Container()\n\t\t\tthis.spriteBox = [] // Game.width * Game.height sprites to overlay screen for FOV\n\t\t\tfor (let i = 0; i < Game.map.height; i++) {\n\t\t\t\tthis.spriteBox.push([])\n\t\t\t\tfor (let j = 0; j < Game.map.width; j++) {\n\t\t\t\t\tlet sprite = new PIXI.Sprite(this.getTexture(7026))\n\t\t\t\t\tsprite.position.set(j * this.tileSize, i * this.tileSize)\n\t\t\t\t\tthis.spriteBox[i].push(sprite)\n\t\t\t\t\tthis.FOVBackground.addChild(sprite)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (let y = 0; y < map.height; y++) {\n\t\t\t\tfor (let x = 0; x < map.width; x++) {\n\t\t\t\t\tif (!map.visible_tiles[x + ',' + y]) {\n\t\t\t\t\t\tif (x + ',' + y in map.seen_tiles) {\n\t\t\t\t\t\t\tthis.spriteBox[y][x].alpha = 0.5\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.spriteBox[y][x].alpha = 1\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.spriteBox[y][x].visible = false\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.background.addChild(this.FOVBackground)\n\t\t}\n\t\tGame.drawMiniMap()\n\t}\n\n\tupdateMap() {\n\t\tlet camera = {\n\t\t\t// camera x,y resides in the upper left corner\n\t\t\tx: Game.player.x - ~~(Game.width / 2),\n\t\t\ty: Game.player.y - ~~(Game.height / 2),\n\t\t\twidth: Math.ceil(Game.width),\n\t\t\theight: Game.height\n\t\t}\n\t\tlet startingPos = [camera.x, camera.y]\n\t\tif (camera.x < 0) {\n\t\t\tstartingPos[0] = 0\n\t\t}\n\t\tif (camera.x + camera.width > Game.map.width) {\n\t\t\tstartingPos[0] = Game.map.width - camera.width\n\t\t}\n\t\tif (camera.y <= 0) {\n\t\t\tstartingPos[1] = 0\n\t\t}\n\t\tif (camera.y + camera.height > Game.map.height) {\n\t\t\tstartingPos[1] = Game.map.height - camera.height\n\t\t}\n\t\tlet endingPos = [startingPos[0] + camera.width, startingPos[1] + camera.height]\n\t\tif (!Game.map.revealed) {\n\t\t\tObject.assign(Game.map.seen_tiles, Game.map.visible_tiles)\n\t\t\tGame.map.visible_tiles = {}\n\n\t\t\t// FOV calculations\n\t\t\tlet fov = new ROT.FOV.PreciseShadowcasting((x, y) => {\n\t\t\t\treturn Game.inbounds(x, y) && Game.getTile(x, y).visible()\n\t\t\t})\n\n\t\t\tfov.compute(Game.player.x, Game.player.y, Game.player.cb.range, (x, y, r, visibility) => {\n\t\t\t\tGame.map.visible_tiles[x + ',' + y] = true\n\t\t\t})\n\t\t\tfor (let y = 0; y < Game.map.height; y++) {\n\t\t\t\tfor (let x = 0; x < Game.map.width; x++) {\n\t\t\t\t\tif (Game.map.visible_tiles[x + ',' + y]) {\n\t\t\t\t\t\tthis.spriteBox[y][x].visible = false\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// tile is not directly visible\n\t\t\t\t\t\tthis.spriteBox[y][x].visible = true\n\t\t\t\t\t\tif (Game.map.seen_tiles[x + ',' + y]) {\n\t\t\t\t\t\t\t// we can do some special transparency to make tiles closest to visible tiles brighter, giving some illusion of\n\t\t\t\t\t\t\t// less & less vision as you go farther back\n\t\t\t\t\t\t\tlet visible = (...s) => s.some(c => Game.map.visible_tiles[c])\n\t\t\t\t\t\t\tlet lighter1 = visible(\n\t\t\t\t\t\t\t\t`${x - 1},${y}`,\n\t\t\t\t\t\t\t\t`${x + 1},${y}`,\n\t\t\t\t\t\t\t\t`${x},${y - 1}`,\n\t\t\t\t\t\t\t\t`${x},${y + 1}`,\n\t\t\t\t\t\t\t\t`${x - 1},${y - 1}`,\n\t\t\t\t\t\t\t\t`${x + 1},${y + 1}`,\n\t\t\t\t\t\t\t\t`${x - 1},${y + 1}`,\n\t\t\t\t\t\t\t\t`${x + 1},${y - 1}`\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t// let lighter2 = visible(\n\t\t\t\t\t\t\t//     `${x - 2},${y}`,\n\t\t\t\t\t\t\t//     `${x + 2},${y}`,\n\t\t\t\t\t\t\t//     `${x},${y - 2}`,\n\t\t\t\t\t\t\t//     `${x},${y + 2}`,\n\t\t\t\t\t\t\t//     `${x - 2},${y - 2}`,\n\t\t\t\t\t\t\t//     `${x + 2},${y + 2}`,\n\t\t\t\t\t\t\t//     `${x - 2},${y + 2}`,\n\t\t\t\t\t\t\t//     `${x + 2},${y - 2}`\n\t\t\t\t\t\t\t// )\n\t\t\t\t\t\t\tthis.spriteBox[y][x].alpha = lighter1 ? 0.5 : 0.7\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.spriteBox[y][x].alpha = 1\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!Game.userSettings.hpBars) {\n\t\t\tfor (let actor of Game.map.actors) {\n\t\t\t\tif (actor.spriteHPBar !== undefined) {\n\t\t\t\t\tthis.background.removeChild(actor.spriteHPBar)\n\t\t\t\t\tactor.spriteHPBar = undefined\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let x = camera.x; x < camera.x + camera.width - 1; x++) {\n\t\t\t\tfor (let y = camera.y; y < camera.y + camera.height - 1; y++) {\n\t\t\t\t\tif (Game.inbounds(x, y)) {\n\t\t\t\t\t\tif (Game.map.revealed || Game.map.visible_tiles[x + ',' + y]) {\n\t\t\t\t\t\t\tlet tile = Game.getTile(x, y)\n\t\t\t\t\t\t\tlet actors = tile.actors.filter(a => {\n\t\t\t\t\t\t\t\treturn a instanceof Actor && !(a instanceof Player) && !(a instanceof NPC)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tif (actors.length >= 1) {\n\t\t\t\t\t\t\t\tfor (let a of actors) {\n\t\t\t\t\t\t\t\t\tif (a.spriteHPBar !== undefined) {\n\t\t\t\t\t\t\t\t\t\tthis.background.removeChild(a.spriteHPBar)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (a.cb.hp < a.cb.maxhp) {\n\t\t\t\t\t\t\t\t\t\t// create new PIXI Sprite to be the health bar\n\t\t\t\t\t\t\t\t\t\tlet g = new PIXI.Graphics()\n\t\t\t\t\t\t\t\t\t\tlet gx = a.x * this.tileSize\n\t\t\t\t\t\t\t\t\t\tlet gy = (a.y - 0.5) * this.tileSize\n\t\t\t\t\t\t\t\t\t\t// background\n\t\t\t\t\t\t\t\t\t\tg.beginFill(0xa22a2a)\n\t\t\t\t\t\t\t\t\t\tg.drawRect(gx + 1, gy, this.tileSize - 2, 7)\n\t\t\t\t\t\t\t\t\t\t// foreground\n\t\t\t\t\t\t\t\t\t\tg.beginFill(0xff5252)\n\t\t\t\t\t\t\t\t\t\tlet width = a.cb.hp / a.cb.maxhp * (this.tileSize - 4)\n\t\t\t\t\t\t\t\t\t\tg.drawRect(gx + 2, gy + 1, width, 5)\n\t\t\t\t\t\t\t\t\t\tg.endFill()\n\t\t\t\t\t\t\t\t\t\tlet sprite = new PIXI.Sprite(this.app.renderer.generateTexture(g))\n\t\t\t\t\t\t\t\t\t\tsprite.position.set(gx, gy)\n\t\t\t\t\t\t\t\t\t\ta.setSpriteHPBar(sprite)\n\t\t\t\t\t\t\t\t\t\tthis.background.addChild(sprite)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.moveSprite(this.background, -startingPos[0], -startingPos[1])\n\t\tGame.drawMiniMap()\n\t}\n\n\tgetTexture(id) {\n\t\treturn this.tilesetMapping[id]\n\t}\n\n\tmoveSprite(sprite, x, y, animate = true) {\n\t\t// used to smoothly pan the map from its curent location to a new one\n\t\t// by adding it to the list of sprites who should smoothly progress towards some location\n\t\tlet nx = x * this.tileSize\n\t\tlet ny = y * this.tileSize\n\t\tif (animate) {\n\t\t\tlet existingMovementObject = this.movingSprites.filter(o => {\n\t\t\t\treturn o.sprite === sprite\n\t\t\t})\n\t\t\tif (existingMovementObject.length > 0) {\n\t\t\t\t// sprite.position.set(nx, ny)\n\t\t\t\tthis.movingSprites = this.movingSprites.filter(o => {\n\t\t\t\t\treturn o.sprite !== sprite\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tthis.movingSprites.push({ sprite, target: { x: nx, y: ny } })\n\t\t} else {\n\t\t\tsprite.position.set(nx, ny)\n\t\t}\n\t}\n\n\tassignSprite(actor, belowPlayer = false, index = 1) {\n\t\tlet { x, y, id } = actor\n\t\tlet props = this.tileset.tileproperties[actor.id + '']\n\t\t// if (actor.sprite === null || actor.sprite === undefined) {\n\t\tif (props.animated === true && props.animated_id !== undefined && this.getTexture(props.animated_id) !== undefined) {\n\t\t\tlet frames = [this.getTexture(actor.id), this.getTexture(props.animated_id)]\n\t\t\tlet sprite = new PIXI.extras.AnimatedSprite(frames)\n\t\t\tactor.setSprite(sprite)\n\t\t\tsprite.animationSpeed = 0.065\n\t\t\tlet randomInterval = ~~(Math.random() * 1000)\n\t\t\tsetTimeout(() => sprite.play(), randomInterval)\n\t\t\tif (belowPlayer) this.background.addChildAt(sprite, index)\n\t\t\telse this.background.addChild(sprite)\n\t\t\tsprite.position.set(actor.x * this.tileSize, actor.y * this.tileSize)\n\t\t} else {\n\t\t\tlet sprite = new PIXI.Sprite(this.getTexture(actor.id))\n\t\t\tactor.setSprite(sprite)\n\t\t\tif (belowPlayer) this.background.addChildAt(sprite, 1)\n\t\t\telse this.background.addChild(sprite)\n\t\t\tsprite.position.set(actor.x * this.tileSize, actor.y * this.tileSize)\n\t\t}\n\t}\n\n\tclearSprite(actor) {\n\t\tthis.background.removeChild(actor.sprite)\n\t\tactor.sprite = null\n\t}\n\n\tremoveChild(sprite) {\n\t\tthis.background.removeChild(sprite)\n\t}\n\n\tgetContainer() {\n\t\treturn this.app.view\n\t}\n\n\thandleAssetLoad(loader, resource) {\n\t\tlet { stage, renderer } = this.app\n\t\tthis.clear()\n\t\tlet graphics = new PIXI.Graphics()\n\t\tlet cx = renderer.width / 2\n\t\tlet cy = renderer.height / 2\n\t\tlet barLength = renderer.width / 2\n\t\tlet text = new PIXI.Text(`Loading ${resource.name}... ${Math.floor(loader.progress)}%`, {\n\t\t\tfill: 0xffffff,\n\t\t\tfontSize: 16,\n\t\t\tfontFamily: ['Source Code Pro', 'Menlo', 'Consolas'],\n\t\t\tx: cx,\n\t\t\ty: cy\n\t\t})\n\t\t// clear the previous progress bar\n\t\t// draw the progress bar outline\n\t\tgraphics.lineStyle(50, 0x6f6f6f)\n\t\tgraphics.drawRoundedRect(cx - barLength / 2, cy, barLength, 4)\n\t\t// draw the progress bar interior\n\t\tlet maxInteriorBarLength = barLength - 10\n\t\tlet currentBarLength = maxInteriorBarLength * (loader.progress / 100)\n\t\tgraphics.lineStyle(30, 0x04ab34)\n\t\tgraphics.drawRoundedRect(cx - maxInteriorBarLength / 2, cy, currentBarLength, 4)\n\t\tstage.addChild(graphics)\n\t\tstage.addChild(text)\n\t}\n\n\tclear() {\n\t\tthis.app.stage.removeChildren()\n\t}\n\n\tact() {\n\t\tGame.engine.lock()\n\t\tthis.updateMap()\n\t\tGame.engine.unlock()\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/GameDisplay.js","<style>\r\n.ability {\r\n    cursor: pointer;\r\n    border: 2px solid #4f4f4f;\r\n    border-radius: 4px;\r\n}\r\n\r\n.sprite {\r\n    cursor: pointer;\r\n}\r\n\r\n.sprite:hover {\r\n    cursor: pointer;\r\n    background-color: #565656;\r\n    border-radius: 2px;\r\n}\r\n\r\n.spriteIsSelected {\r\n    cursor: pointer;\r\n    background-color: rgb(103, 141, 255);\r\n    border-radius: 2px;\r\n}\r\n</style>\r\n\r\n<template>\r\n\r\n<v-app dark>\r\n    <v-container grid-list-xl>\r\n        <v-layout row>\r\n            <v-flex xs12>\r\n                <h2>Welcome to Rotten Soup</h2>\r\n            </v-flex>\r\n        </v-layout>\r\n        <v-layout row>\r\n            <v-flex>\r\n                <h3>Select your hero by clicking on the character you want to play</h3>\r\n            </v-flex>\r\n        </v-layout>\r\n        <v-layout row wrap>\r\n            <v-flex style=\"padding: 10px\" xs4 v-for=\"(sprite, index) in playerSprites\" :key=\"index\">\r\n                <!-- Card representing player class -->\r\n                <v-card style=\"padding: 25px\">\r\n                    <!-- Class name and short description  -->\r\n                    <v-layout row>\r\n                        <div>\r\n                            <h5>{{sprite.name}}</h5>\r\n                            <p>{{sprite.description}}</p>\r\n                        </div>\r\n                    </v-layout>\r\n                    <!--  Class abilities and stats-->\r\n                    <!-- <v-layout row>\r\n                        <div>\r\n                            <p>\r\n                                Abilities\r\n                            </p>\r\n                            <v-flex xs4 v-for=\"(ability, index) in sprite.abilities\" key=\"index\">\r\n                                <v-layout row>\r\n                                    <v-tooltip bottom align-center>\r\n                                        <p class=\"text-xs-center ma-0\" style=\"max-width: 200px\">\r\n                                            {{ability.description}}\r\n                                        </p>\r\n                                        <img\r\n                                            class=\"ability\"\r\n                                            v-bind:src=\"getSpellSplashArt(ability.school.toLowerCase(), ability.art)\"\r\n                                            slot=\"activator\"\r\n                                        />\r\n                                    </v-tooltip>\r\n                                </v-layout>\r\n                            </v-flex>\r\n                        </div>\r\n                    </v-layout> -->\r\n                    <!-- Possible sprites player can choose to play  -->\r\n                    <v-layout row>\r\n                        Characters\r\n                    </v-layout>\r\n                    <v-layout row>\r\n                        <v-flex style=\"margin-right: 5px\" col xs1 v-for=\"id in sprite.sprites\" :key=\"id\">\r\n                            <v-layout row align-center>\r\n                                <v-flex>\r\n                                    <img v-on:click=\"selectSprite(id)\" v-bind:class=\"{spriteIsSelected : (selectedSprite === id), sprite : (selectedSprite !== id)}\" :src=\"getPlayerSpriteImage(id)\" />\r\n                                </v-flex>\r\n                            </v-layout>\r\n                        </v-flex>\r\n                    </v-layout>\r\n                </v-card>\r\n            </v-flex>\r\n        </v-layout>\r\n    </v-container>\r\n</v-app>\r\n\r\n</template>\r\n\r\n<script>\r\n// import { Game } from '@/assets/js/game/Game.js'\r\n\r\nexport default {\r\n    name: 'start-menu',\r\n    // props: ['Game'],\r\n    data() {\r\n        return {\r\n            selectedSprite: null,\r\n            playerSprites: [\r\n                {\r\n                    name: 'Monk',\r\n                    description: 'A master of martial arts with special healing abilities',\r\n                    abilities: [\r\n                        {\r\n                            name: 'Magic Dart',\r\n                            description: 'A magical dart of energy that deals between 1-8 damage to a target',\r\n                            school: 'conjuration',\r\n                            art: 'magic_dart'\r\n                        }\r\n                    ],\r\n                    stats: {\r\n                        hp: 50,\r\n                        strength: 1,\r\n                        dexterity: 1,\r\n                        wisdom: 1\r\n                    },\r\n                    sprites: [4812, 4453, 3859, 4219]\r\n                },\r\n                {\r\n                    name: 'Ninja',\r\n                    description: 'A sneaky, hidden ninja of a secret order with the ability to stealth',\r\n                    abilities: [\r\n                        {\r\n                            name: 'Magic Dart',\r\n                            description: 'A magical dart of energy that deals between 1-8 damage to a target',\r\n                            school: 'conjuration',\r\n                            art: 'magic_dart'\r\n                        }\r\n                    ],\r\n                    stats: {\r\n                        hp: 50,\r\n                        strength: 1,\r\n                        dexterity: 1,\r\n                        wisdom: 1\r\n                    },\r\n                    sprites: [4334, 4814]\r\n                },\r\n                {\r\n                    name: 'Knight',\r\n                    description: 'A proud knight, sworn to uphold chivalric values',\r\n                    abilities: [\r\n                        {\r\n                            name: 'Magic Dart',\r\n                            description: 'A magical dart of energy that deals between 1-8 damage to a target',\r\n                            school: 'conjuration',\r\n                            art: 'magic_dart'\r\n                        }\r\n                    ],\r\n                    stats: {\r\n                        hp: 50,\r\n                        strength: 1,\r\n                        dexterity: 1,\r\n                        wisdom: 1\r\n                    },\r\n                    sprites: [4213, 4693]\r\n                },\r\n                {\r\n                    name: 'Barbarian',\r\n                    description: 'A wild and vicious savage with extreme strength and rage',\r\n                    abilities: [\r\n                        {\r\n                            name: 'Magic Dart',\r\n                            description: 'A magical dart of energy that deals between 1-8 damage to a target',\r\n                            school: 'conjuration',\r\n                            art: 'magic_dart'\r\n                        }\r\n                    ],\r\n                    stats: {\r\n                        hp: 50,\r\n                        strength: 1,\r\n                        dexterity: 1,\r\n                        wisdom: 1\r\n                    },\r\n                    sprites: [4337, 4336]\r\n                },\r\n                {\r\n                    name: 'Wizard',\r\n                    description: 'A scholar of the arcane and all things magical',\r\n                    abilities: [\r\n                        {\r\n                            name: 'Magic Dart',\r\n                            description: 'A magical dart of energy that deals between 1-8 damage to a target',\r\n                            school: 'conjuration',\r\n                            art: 'magic_dart'\r\n                        }\r\n                    ],\r\n                    stats: {\r\n                        hp: 50,\r\n                        strength: 1,\r\n                        dexterity: 1,\r\n                        wisdom: 1\r\n                    },\r\n                    sprites: [3858, 4218, 4813]\r\n                }\r\n            ]\r\n        }\r\n    },\r\n    created() {},\r\n    methods: {\r\n        getPlayerSpriteImage(id) {\r\n            return `../static/images/player_sprites/${id}.png`\r\n        },\r\n        selectSprite(id) {\r\n            this.$emit('spriteSelected', id)\r\n            // this.selectedSprite = id\r\n            // this.loadGame()\r\n        },\r\n        getSpellSplashArt(school, name) {\r\n            return `../static/images/spells/${school}/${name}.png`\r\n        }\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/StartMenu.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{attrs:{\"dark\":\"\"}},[_c('v-container',{attrs:{\"grid-list-xl\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('h2',[_vm._v(\"Welcome to Rotten Soup\")])])],1),_vm._v(\" \"),_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',[_c('h3',[_vm._v(\"Select your hero by clicking on the character you want to play\")])])],1),_vm._v(\" \"),_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},_vm._l((_vm.playerSprites),function(sprite,index){return _c('v-flex',{key:index,staticStyle:{\"padding\":\"10px\"},attrs:{\"xs4\":\"\"}},[_c('v-card',{staticStyle:{\"padding\":\"25px\"}},[_c('v-layout',{attrs:{\"row\":\"\"}},[_c('div',[_c('h5',[_vm._v(_vm._s(sprite.name))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(sprite.description))])])]),_vm._v(\" \"),_c('v-layout',{attrs:{\"row\":\"\"}},[_vm._v(\"\\r\\n                        Characters\\r\\n                    \")]),_vm._v(\" \"),_c('v-layout',{attrs:{\"row\":\"\"}},_vm._l((sprite.sprites),function(id){return _c('v-flex',{key:id,staticStyle:{\"margin-right\":\"5px\"},attrs:{\"col\":\"\",\"xs1\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"align-center\":\"\"}},[_c('v-flex',[_c('img',{class:{spriteIsSelected : (_vm.selectedSprite === id), sprite : (_vm.selectedSprite !== id)},attrs:{\"src\":_vm.getPlayerSpriteImage(id)},on:{\"click\":function($event){_vm.selectSprite(id)}}})])],1)],1)}))],1)],1)}))],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-38ff1d5b\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/StartMenu.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-38ff1d5b\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./StartMenu.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./StartMenu.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./StartMenu.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-38ff1d5b\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./StartMenu.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/StartMenu.vue\n// module id = null\n// module chunks = ","<template>\r\n    <v-layout id=\"console_container\">\r\n      <v-flex column align-start>\r\n        <v-list id=\"console\" class=\"pt-3\">\r\n          <li class=\"ml-2\" v-for=\"(message, index) in getMessages()\" v-bind:key=\"index\">\r\n            <p><b v-bind:style=\"{color : message[1]}\">{{message[0]}}</b></p>\r\n          </li>\r\n          <!-- Temporary log item for displaying info that isn't stored (examine text, or \"this is blocked\")  -->\r\n          <li class=\"ml-2\" v-for=\"(message, index) in getTempMessages()\">\r\n            <p><b v-bind:style=\"{color : message[1]}\">{{message[0]}}</b> </p>\r\n          </li>\r\n        </v-list>\r\n      </v-flex>\r\n      <v-flex id=\"scroll_controls\" column class=\"text-xs-center\" style=\"max-width: 27px\">\r\n        <v-layout>\r\n          <v-flex xs12 class=\"text-xs-center\">\r\n            <v-icon class=\"scroll_controls\" v-on:click=\"up()\" small>fa-angle-up</v-icon>\r\n          </v-flex>\r\n        </v-layout>\r\n        <v-layout style=\"height: 70px;\" />\r\n        <v-layout>\r\n          <v-flex xs12 class=\"text-xs-center\">\r\n            <v-icon class=\"scroll_controls\" v-on:click=\"down()\" small>fa-angle-down</v-icon>\r\n          </v-flex>\r\n        </v-layout>\r\n        <v-layout>\r\n          <v-flex xs12 class=\"text-xs-center\">\r\n              <v-icon class=\"scroll_controls\" v-on:click=\"resetOffset()\" small>fa-angle-double-down</v-icon>\r\n          </v-flex>\r\n        </v-layout>\r\n        <!-- <v-layout>\r\n          <v-flex xs12 class=\"text-xs-center\">\r\n            <v-icon class=\"scroll_controls\" v-on:click=\"\" small>fa-sticky-note</v-icon>\r\n          </v-flex>\r\n        </v-layout> -->\r\n      </v-flex>\r\n    </v-layout>\r\n</template>\r\n\r\n<script>\r\nimport { Game } from '#/Game.js'\r\n\r\n/* import your actions here */\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tmessages: Game.messageHistory,\r\n\t\t\ttempMessages: Game.tempMessages,\r\n\t\t\toffset: 0\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tgetTempMessages() {\r\n\t\t\treturn this.tempMessages\r\n\t\t},\r\n\t\tgetMessages() {\r\n\t\t\treturn this.messages.slice(-10 + -this.offset + this.getTempMessages().length)\r\n\t\t},\r\n\t\tresetOffset() {\r\n\t\t\tthis.offset = 0\r\n\t\t},\r\n\t\tdown() {\r\n\t\t\tif (this.offset > 0) this.offset--\r\n\t\t},\r\n\t\tup() {\r\n\t\t\tif (this.offset < this.messages.length - 10) this.offset++\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n#console_container {\r\n\tborder-top: 4px solid #4f4f4f;\r\n\tbackground-color: #1e1f1f;\r\n}\r\n\r\n#console {\r\n\tfont-size: 14px;\r\n\tfont-style: normal;\r\n\tfont-weight: normal;\r\n\theight: 175px;\r\n\tline-height: 0;\r\n\toverflow: hidden;\r\n\tposition: relative;\r\n\tbackground-color: inherit;\r\n}\r\n\r\n.scroll_controls {\r\n\tpadding: 3px;\r\n\tcursor: pointer;\r\n}\r\n\r\n.scroll_controls:hover {\r\n\tcursor: pointer;\r\n\tborder-radius: 4px;\r\n\tbackground-color: #4a5d69;\r\n}\r\n\r\nul {\r\n\tpadding: 0;\r\n\tlist-style-type: none;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/MessageLog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layout',{attrs:{\"id\":\"console_container\"}},[_c('v-flex',{attrs:{\"column\":\"\",\"align-start\":\"\"}},[_c('v-list',{staticClass:\"pt-3\",attrs:{\"id\":\"console\"}},[_vm._l((_vm.getMessages()),function(message,index){return _c('li',{key:index,staticClass:\"ml-2\"},[_c('p',[_c('b',{style:({color : message[1]})},[_vm._v(_vm._s(message[0]))])])])}),_vm._v(\" \"),_vm._l((_vm.getTempMessages()),function(message,index){return _c('li',{staticClass:\"ml-2\"},[_c('p',[_c('b',{style:({color : message[1]})},[_vm._v(_vm._s(message[0]))])])])})],2)],1),_vm._v(\" \"),_c('v-flex',{staticClass:\"text-xs-center\",staticStyle:{\"max-width\":\"27px\"},attrs:{\"id\":\"scroll_controls\",\"column\":\"\"}},[_c('v-layout',[_c('v-flex',{staticClass:\"text-xs-center\",attrs:{\"xs12\":\"\"}},[_c('v-icon',{staticClass:\"scroll_controls\",attrs:{\"small\":\"\"},on:{\"click\":function($event){_vm.up()}}},[_vm._v(\"fa-angle-up\")])],1)],1),_vm._v(\" \"),_c('v-layout',{staticStyle:{\"height\":\"70px\"}}),_vm._v(\" \"),_c('v-layout',[_c('v-flex',{staticClass:\"text-xs-center\",attrs:{\"xs12\":\"\"}},[_c('v-icon',{staticClass:\"scroll_controls\",attrs:{\"small\":\"\"},on:{\"click\":function($event){_vm.down()}}},[_vm._v(\"fa-angle-down\")])],1)],1),_vm._v(\" \"),_c('v-layout',[_c('v-flex',{staticClass:\"text-xs-center\",attrs:{\"xs12\":\"\"}},[_c('v-icon',{staticClass:\"scroll_controls\",attrs:{\"small\":\"\"},on:{\"click\":function($event){_vm.resetOffset()}}},[_vm._v(\"fa-angle-double-down\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2d6ec670\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MessageLog.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2d6ec670\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./MessageLog.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MessageLog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MessageLog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2d6ec670\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./MessageLog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/MessageLog.vue\n// module id = null\n// module chunks = ","<template>\r\n    <v-flex column style=\"max-width: 1120px;\">\r\n        <v-layout row style=\"padding: 0px;\">\r\n            <!--<item-transfer-modal></item-transfer-modal>-->\r\n            <div style=\"margin:0; padding:0;\" id=\"game_container\">\r\n            </div>\r\n        </v-layout>\r\n        <message-log></message-log>\r\n    </v-flex>\r\n</template>\r\n\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\nimport messageLog from './MessageLog.vue'\r\n/* import other components here */\r\nexport default {\r\n\tcomponents: {\r\n\t\t'message-log': messageLog\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\t// gameContainer: Game.dispay.getContainer()\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n<style>\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/GameDisplay.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-flex',{staticStyle:{\"max-width\":\"1120px\"},attrs:{\"column\":\"\"}},[_c('v-layout',{staticStyle:{\"padding\":\"0px\"},attrs:{\"row\":\"\"}},[_c('div',{staticStyle:{\"margin\":\"0\",\"padding\":\"0\"},attrs:{\"id\":\"game_container\"}})]),_vm._v(\" \"),_c('message-log')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0fd20502\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/GameDisplay.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0fd20502\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./GameDisplay.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./GameDisplay.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./GameDisplay.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0fd20502\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./GameDisplay.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/GameDisplay.vue\n// module id = null\n// module chunks = ","<style scoped>\r\n.inventory_row {\r\n\t/*margin-left: 10px;*/\r\n}\r\n\r\n.inventory_cell {\r\n\tmargin: 2px;\r\n\tborder: 2px solid #4f4f4f;\r\n\tbackground-color: #294646;\r\n\tborder-radius: 4px;\r\n\tmin-width: 40px;\r\n\tmin-height: 40px;\r\n\tmax-width: 40px !important;\r\n\tmax-height: 40px !important;\r\n}\r\n\r\n.inventory_cell:hover {\r\n\tbackground-color: #698394;\r\n\tcursor: pointer;\r\n}\r\n\r\n.selectedItem {\r\n\tbackground-color: green;\r\n\tmargin: 2px;\r\n\tborder: 2px solid #3d3d3d;\r\n\tborder-radius: 4px;\r\n\tmin-width: 40px;\r\n\tmin-height: 40px;\r\n\tmax-width: 40px !important;\r\n\tmax-height: 40px !important;\r\n}\r\n\r\n.selectedItem:hover {\r\n\tbackground-color: #009e00;\r\n\tcursor: pointer;\r\n}\r\n</style>\r\n\r\n<template>\r\n\r\n<v-container fluid class=\"pa-0\">\r\n  <v-layout row>\r\n    <v-flex xs4><b>Items</b></v-flex>\r\n  </v-layout>\r\n    <draggable element=\"v-layout\" v-model=\"inventory\" row wrap class=\"layout inventory_row row\">\r\n        <v-flex xs1 col v-for=\"(cell, i) in getInventory()\" v-bind:key=\"i\" v-bind:class=\"{selectedItem : colorSlot(cell), inventory_cell : ! colorSlot(cell)}\" align-center>\r\n            <v-tooltip open-delay=\"200\" bottom v-if=\"cell.item !== null\" align-center>\r\n                <p class=\"text-xs-center ma-0\">\r\n                    {{cell.item.getAction()}} {{cell.item.type}}\r\n                    <br />\r\n                    <span v-if=\"'name' in cell.item\">{{\"Name: \" + cell.item.name}}<br /></span> {{cell.item.hoverInfo()}}\r\n                </p>\r\n                <v-layout ripple v-on:click=\"useItem(cell, $event)\" v-if=\"cell.item !== null\" slot=\"activator\" @contextmenu=\"show(cell, $event)\" row>\r\n                    <v-menu offset-x :nudge-width=\"200\" :close-on-click=\"true\" v-model=\"cell.menu\" absolute :position-x=\"x\" :position-y=\"y\">\r\n                        <v-card>\r\n                            <v-list>\r\n                                <v-list-tile avatar>\r\n                                    <v-list-tile-avatar>\r\n                                        <img v-bind:src=\"getInventorySprite(cell.item.id)\">\r\n                                    </v-list-tile-avatar>\r\n                                    <v-list-tile-content>\r\n                                        <v-list-tile-title>{{cell.item.type}}</v-list-tile-title>\r\n                                        <v-list-tile-sub-title>{{cell.item.hoverInfo()}}</v-list-tile-sub-title>\r\n                                    </v-list-tile-content>\r\n                                </v-list-tile>\r\n                            </v-list>\r\n                            <v-divider></v-divider>\r\n                            <v-card-actions>\r\n                                <v-btn flat color=\"blue\" @click=\"useItem(cell, $event)\">{{cell.item.getAction()}}</v-btn>\r\n                                <v-btn flat color=\"red\" @click=\"dropItem(cell, $event)\">Drop</v-btn>\r\n                            </v-card-actions>\r\n                        </v-card>\r\n                    </v-menu>\r\n                    <v-badge overlay bottom color=\"grey\" overlap>\r\n                        <span v-if=\"cell.item.quantity !== undefined\" slot=\"badge\" dark>\r\n                                    <b>{{cell.item.quantity}}</b>\r\n                                </span>\r\n                        <img v-bind:src=\"getInventorySprite(cell.item.id)\" />\r\n                    </v-badge>\r\n                </v-layout>\r\n            </v-tooltip>\r\n        </v-flex>\r\n    </draggable>\r\n</v-container>\r\n\r\n</template>\r\n\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\nimport draggable from 'vuedraggable'\r\n\r\n/* import other components here */\r\nexport default {\r\n\tcomponents: {\r\n\t\tdraggable\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tinventory: [],\r\n\t\t\tlength: Game.player.inventory,\r\n\t\t\trows: [1, 2, 3, 4],\r\n\t\t\tx: 0,\r\n\t\t\ty: 0\r\n\t\t}\r\n\t},\r\n\tcreated() {},\r\n\tmethods: {\r\n\t\tgetInventorySprite(id) {\r\n\t\t\treturn `../static/images/inventory_sprites/${id}.png`\r\n\t\t},\r\n\t\tcolorSlot(cell) {\r\n\t\t\tif (cell.item !== null && 'cb' in cell.item) {\r\n\t\t\t\treturn cell.item.cb.equipped\r\n\t\t\t} else {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetInventoryRow(n) {\r\n\t\t\t// let inventory = Game.player.inventory\r\n\t\t\tlet offset = n * (Game.player.inventory.length / this.rows.length)\r\n\t\t\treturn Game.player.inventory.slice(offset, offset + Game.player.inventory.length / this.rows.length)\r\n\t\t},\r\n\t\tuseItem(cell, evt) {\r\n\t\t\t// drop cell.item\r\n\t\t\tif (evt.shiftKey) {\r\n\t\t\t\tcell.item.drop()\r\n\t\t\t} else {\r\n\t\t\t\t// use cell.item\r\n\t\t\t\tcell.item.use()\r\n\t\t\t}\r\n\t\t},\r\n\t\tdropItem(cell, evt) {\r\n\t\t\t// drop cell.item\r\n\t\t\tcell.item.drop()\r\n\t\t},\r\n\t\tgetInventory() {\r\n\t\t\treturn Game.player.inventory\r\n\t\t},\r\n\t\tshow(cell, e) {\r\n\t\t\te.preventDefault()\r\n\t\t\tGame.player.inventory.forEach(slot => {\r\n\t\t\t\tslot.menu = false\r\n\t\t\t})\r\n\t\t\tthis.x = e.clientX\r\n\t\t\tthis.y = e.clientY\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tcell.menu = true\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Inventory.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"pa-0\",attrs:{\"fluid\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs4\":\"\"}},[_c('b',[_vm._v(\"Items\")])])],1),_vm._v(\" \"),_c('draggable',{staticClass:\"layout inventory_row row\",attrs:{\"element\":\"v-layout\",\"row\":\"\",\"wrap\":\"\"},model:{value:(_vm.inventory),callback:function ($$v) {_vm.inventory=$$v},expression:\"inventory\"}},_vm._l((_vm.getInventory()),function(cell,i){return _c('v-flex',{key:i,class:{selectedItem : _vm.colorSlot(cell), inventory_cell : ! _vm.colorSlot(cell)},attrs:{\"xs1\":\"\",\"col\":\"\",\"align-center\":\"\"}},[(cell.item !== null)?_c('v-tooltip',{attrs:{\"open-delay\":\"200\",\"bottom\":\"\",\"align-center\":\"\"}},[_c('p',{staticClass:\"text-xs-center ma-0\"},[_vm._v(\"\\r\\n                    \"+_vm._s(cell.item.getAction())+\" \"+_vm._s(cell.item.type)+\"\\r\\n                    \"),_c('br'),_vm._v(\" \"),('name' in cell.item)?_c('span',[_vm._v(_vm._s(\"Name: \" + cell.item.name)),_c('br')]):_vm._e(),_vm._v(\" \"+_vm._s(cell.item.hoverInfo())+\"\\r\\n                \")]),_vm._v(\" \"),(cell.item !== null)?_c('v-layout',{attrs:{\"slot\":\"activator\",\"ripple\":\"\",\"row\":\"\"},on:{\"click\":function($event){_vm.useItem(cell, $event)},\"contextmenu\":function($event){_vm.show(cell, $event)}},slot:\"activator\"},[_c('v-menu',{attrs:{\"offset-x\":\"\",\"nudge-width\":200,\"close-on-click\":true,\"absolute\":\"\",\"position-x\":_vm.x,\"position-y\":_vm.y},model:{value:(cell.menu),callback:function ($$v) {_vm.$set(cell, \"menu\", $$v)},expression:\"cell.menu\"}},[_c('v-card',[_c('v-list',[_c('v-list-tile',{attrs:{\"avatar\":\"\"}},[_c('v-list-tile-avatar',[_c('img',{attrs:{\"src\":_vm.getInventorySprite(cell.item.id)}})]),_vm._v(\" \"),_c('v-list-tile-content',[_c('v-list-tile-title',[_vm._v(_vm._s(cell.item.type))]),_vm._v(\" \"),_c('v-list-tile-sub-title',[_vm._v(_vm._s(cell.item.hoverInfo()))])],1)],1)],1),_vm._v(\" \"),_c('v-divider'),_vm._v(\" \"),_c('v-card-actions',[_c('v-btn',{attrs:{\"flat\":\"\",\"color\":\"blue\"},on:{\"click\":function($event){_vm.useItem(cell, $event)}}},[_vm._v(_vm._s(cell.item.getAction()))]),_vm._v(\" \"),_c('v-btn',{attrs:{\"flat\":\"\",\"color\":\"red\"},on:{\"click\":function($event){_vm.dropItem(cell, $event)}}},[_vm._v(\"Drop\")])],1)],1)],1),_vm._v(\" \"),_c('v-badge',{attrs:{\"overlay\":\"\",\"bottom\":\"\",\"color\":\"grey\",\"overlap\":\"\"}},[(cell.item.quantity !== undefined)?_c('span',{attrs:{\"slot\":\"badge\",\"dark\":\"\"},slot:\"badge\"},[_c('b',[_vm._v(_vm._s(cell.item.quantity))])]):_vm._e(),_vm._v(\" \"),_c('img',{attrs:{\"src\":_vm.getInventorySprite(cell.item.id)}})])],1):_vm._e()],1):_vm._e()],1)}))],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-46096a4a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Inventory.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-46096a4a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Inventory.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Inventory.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Inventory.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-46096a4a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Inventory.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-46096a4a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Inventory.vue\n// module id = null\n// module chunks = ","<template>\r\n    <v-container class=\"modal elevation-24\" v-if=\"inventoryModalOpened\">\r\n        <v-layout row>\r\n            <!-- Non-player inventory items -->\r\n            <v-flex xs5 col>\r\n                <h3>Bob the NPC</h3>\r\n                <inventory></inventory>\r\n            </v-flex>\r\n            <!-- Middle functionality (?) -->\r\n            <v-flex xs2 col></v-flex>\r\n            <!-- Player Inventory -->\r\n            <v-flex xs5 col>\r\n                <h3>Your Items</h3>\r\n\r\n                <inventory></inventory>\r\n            </v-flex>\r\n        </v-layout>\r\n    </v-container>\r\n</template>\r\n\r\n<script>\r\n    /* import other components here */\r\n    import inventory from './Inventory.vue'\r\n    export default {\r\n        components: {\r\n            'inventory': inventory\r\n        },\r\n        data() {\r\n            return {\r\n                inventoryModalOpened: false,\r\n            };\r\n        },\r\n        methods: {},\r\n    }\r\n\r\n</script>\r\n<style>\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/ItemTransferModal.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.inventoryModalOpened)?_c('v-container',{staticClass:\"modal elevation-24\"},[_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs5\":\"\",\"col\":\"\"}},[_c('h3',[_vm._v(\"Bob the NPC\")]),_vm._v(\" \"),_c('inventory')],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs2\":\"\",\"col\":\"\"}}),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs5\":\"\",\"col\":\"\"}},[_c('h3',[_vm._v(\"Your Items\")]),_vm._v(\" \"),_c('inventory')],1)],1)],1):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0770a95c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ItemTransferModal.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0770a95c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ItemTransferModal.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ItemTransferModal.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ItemTransferModal.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0770a95c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ItemTransferModal.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ItemTransferModal.vue\n// module id = null\n// module chunks = ","<template>\r\n    <v-container fluid style=\"min-height: 50px;\">\r\n        <v-layout row wrap v-if=\"getNearbyEnemies().length > 0\">\r\n            <v-flex\r\n\r\n                    md4\r\n                    col\r\n                    v-for=\"(enemy, index) in getNearbyEnemies()\"\r\n                    v-bind:key=\"index\"\r\n            >\r\n                <v-tooltip bottom>\r\n                    <span align-center>\r\n                        HP : {{enemy.cb.hp}} / {{enemy.cb.maxhp}}<br />\r\n                        \"{{enemy.description}}\"<br />\r\n                    </span>\r\n                    <div class=\"enemy_col\" fluid slot=\"activator\">\r\n                            <v-layout class=\"text-xs-center\" align-center row style=\"font-size: 10px; margin: 0px auto -10px 0px;\" >\r\n                                <v-flex xs12>{{enemy.name.capitalize()}}</v-flex>\r\n                            </v-layout>\r\n                            <v-layout row style=\"margin: 0px;\">\r\n                                <v-flex xs12>\r\n                                    <v-progress-linear :value=\"(enemy.cb.hp / enemy.cb.maxhp) * 100\"\r\n                                                       height=\"4\"\r\n                                                       color=\"error\"\r\n                                    ></v-progress-linear>\r\n                                </v-flex>\r\n                            </v-layout>\r\n                    </div >\r\n                </v-tooltip>\r\n            </v-flex>\r\n        </v-layout>\r\n        <v-layout v-else row>\r\n            <v-container fluid>\r\n                No enemies in view\r\n            </v-container>\r\n        </v-layout>\r\n    </v-container>\r\n\r\n</template>\r\n\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\n\r\n/* import other components here */\r\nexport default {\r\n    data() {\r\n        return {\r\n            enemies: Game.player.nearbyEnemies\r\n        }\r\n    },\r\n    methods: {\r\n        getNearbyEnemies() {\r\n            return Game.player.nearbyEnemies\r\n        }\r\n    },\r\n    created() {}\r\n}\r\n</script>\r\n<style>\r\n.enemy_col {\r\n    cursor: pointer;\r\n    border: 2px solid #4f4f4f;\r\n    background-color: #142929;\r\n    border-radius: 4px;\r\n    /* margin: 2px; */\r\n    max-height: 35px;\r\n}\r\n\r\n.enemy_col:hover {\r\n    cursor: pointer;\r\n    border: 2px solid #4f4f4f;\r\n    background-color: #557081;\r\n    border-radius: 4px;\r\n    /* margin: 2px; */\r\n    max-height: 32px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/EnemyOverview.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticStyle:{\"min-height\":\"50px\"},attrs:{\"fluid\":\"\"}},[(_vm.getNearbyEnemies().length > 0)?_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},_vm._l((_vm.getNearbyEnemies()),function(enemy,index){return _c('v-flex',{key:index,attrs:{\"md4\":\"\",\"col\":\"\"}},[_c('v-tooltip',{attrs:{\"bottom\":\"\"}},[_c('span',{attrs:{\"align-center\":\"\"}},[_vm._v(\"\\n                    HP : \"+_vm._s(enemy.cb.hp)+\" / \"+_vm._s(enemy.cb.maxhp)),_c('br'),_vm._v(\"\\n                    \\\"\"+_vm._s(enemy.description)+\"\\\"\"),_c('br')]),_vm._v(\" \"),_c('div',{staticClass:\"enemy_col\",attrs:{\"slot\":\"activator\",\"fluid\":\"\"},slot:\"activator\"},[_c('v-layout',{staticClass:\"text-xs-center\",staticStyle:{\"font-size\":\"10px\",\"margin\":\"0px auto -10px 0px\"},attrs:{\"align-center\":\"\",\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_vm._v(_vm._s(enemy.name.capitalize()))])],1),_vm._v(\" \"),_c('v-layout',{staticStyle:{\"margin\":\"0px\"},attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-progress-linear',{attrs:{\"value\":(enemy.cb.hp / enemy.cb.maxhp) * 100,\"height\":\"4\",\"color\":\"error\"}})],1)],1)],1)])],1)})):_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-container',{attrs:{\"fluid\":\"\"}},[_vm._v(\"\\n            No enemies in view\\n        \")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-696021bb\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/EnemyOverview.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-696021bb\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./EnemyOverview.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./EnemyOverview.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./EnemyOverview.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-696021bb\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./EnemyOverview.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/EnemyOverview.vue\n// module id = null\n// module chunks = ","<template>\r\n        <v-layout row class=\"text-xs-center\">\r\n            <v-flex xs10 fluid id=\"minimap_container\"></v-flex>\r\n        </v-layout>\r\n</template>\r\n\r\n<script>\r\n/* import other components here */\r\nexport default {\r\n\tdata() {\r\n\t\treturn {}\r\n\t},\r\n\tmethods: {}\r\n}\r\n</script>\r\n<style>\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Minimap.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layout',{staticClass:\"text-xs-center\",attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs10\":\"\",\"fluid\":\"\",\"id\":\"minimap_container\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4821da06\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Minimap.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4821da06\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Minimap.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Minimap.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Minimap.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4821da06\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Minimap.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Minimap.vue\n// module id = null\n// module chunks = ","<template>\r\n    <v-container fluid class=\"pa-0\">\r\n        <!-- Level -->\r\n        <v-flex class=\"stat-row\">\r\n            <v-layout row align-center>\r\n                <v-flex md1 style=\"min-width: 70px;\" col><b>Level</b></v-flex>\r\n                <v-flex md2 col style=\"padding-left: 7px;\">{{getLevel()}}</v-flex>\r\n                <v-flex md5 col>{{Math.floor(getRemainingXP())}}XP until level {{getLevel()+1}}</v-flex>\r\n                <!-- <v-flex md2 col>\r\n                    <v-progress-circular\r\n                        style=\"xpCircleFont\"\r\n                        color=\"success\"\r\n                        background-color=\"grey lighten-1\"\r\n                        fill=\"success\"\r\n                        size=\"10\"\r\n                        height\r\n                        :value=\"Math.floor(getPercentToLevel() * 100)\"\r\n                    >\r\n                  </v-progress-circular>\r\n                </v-flex> -->\r\n            </v-layout>\r\n        </v-flex>\r\n        <!-- Strength -->\r\n        <v-flex class=\"stat-row\">\r\n            <v-layout row align-center>\r\n                <v-flex md1 style=\"min-width: 70px;\" col><b>Strength</b></v-flex>\r\n                <v-flex md3 col style=\"padding-left: 7px;\">{{getStrength()}}</v-flex>\r\n            </v-layout>\r\n        </v-flex>\r\n        <!-- Damage -->\r\n        <v-flex class=\"stat-row\">\r\n          <v-layout  row align-center>\r\n            <v-flex md1 style=\"min-width: 70px;\" col><b>Damage</b></v-flex>\r\n            <v-flex md2 col style=\"padding-left: 7px;\">{{getDamageRange()}}</v-flex>\r\n            <v-flex v-if=\"getCurrentWeapon() !== null && getCurrentWeaponEnchantments() !== null\" md6 col>\r\n              <b>Weapon Enchantments:</b> {{getCurrentWeaponEnchantments()}}\r\n            </v-flex>\r\n        </v-layout>\r\n      </v-flex>\r\n        <!-- Defence -->\r\n        <!-- <v-flex class=\"stat-row\">\r\n            <v-layout   row align-center>\r\n                <v-flex md1 style=\"min-width: 70px;\" col><b>Defence</b></v-flex>\r\n                <v-flex md3 col style=\"padding-left: 5px;\">{{getDefence()}}</v-flex>\r\n            </v-layout>\r\n        </v-flex> -->\r\n    </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\nimport { xp_levels } from '#/entities/Entity.js'\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {}\r\n\t},\r\n\tmethods: {\r\n\t\tgetHP() {\r\n\t\t\treturn Game.player.cb.hp\r\n\t\t},\r\n\t\tgetMaxHP() {\r\n\t\t\treturn Game.player.cb.maxhp\r\n\t\t},\r\n\t\tgetMana() {\r\n\t\t\treturn Game.player.cb.mana\r\n\t\t},\r\n\t\tgetMaxMana() {\r\n\t\t\treturn Game.player.cb.maxmana\r\n\t\t},\r\n\t\tgetStrength() {\r\n\t\t\treturn Game.player.cb.str\r\n\t\t},\r\n\t\tgetDefence() {\r\n\t\t\treturn Game.player.cb.def\r\n\t\t},\r\n\t\tgetDamageRange() {\r\n\t\t\tif (Game.player.getMinDmg() === Game.player.getMaxDmg()) return Game.player.getMinDmg()\r\n\r\n\t\t\treturn Game.player.getMinDmg() + ' - ' + Game.player.getMaxDmg()\r\n\t\t},\r\n\t\tgetLevel() {\r\n\t\t\treturn Game.player.cb.level\r\n\t\t},\r\n\t\tgetRemainingXP() {\r\n\t\t\treturn Game.player.remainingXP()\r\n\t\t},\r\n\t\tgetPercentToLevel() {\r\n\t\t\tlet costOfLevel = xp_levels[this.getLevel()] - xp_levels[this.getLevel() - 1]\r\n\t\t\tlet expTowards = Game.player.cb.xp - xp_levels[this.getLevel() - 1]\r\n\t\t\treturn expTowards / costOfLevel\r\n\t\t},\r\n\t\tgetCurrentWeapon() {\r\n\t\t\treturn Game.player.cb.equipment.weapon\r\n\t\t},\r\n\t\tgetCurrentWeaponEnchantments() {\r\n\t\t\tif (this.getCurrentWeapon() !== null) {\r\n\t\t\t\tlet enchantments = this.getCurrentWeapon().cb.enchantments\r\n\t\t\t\tif (enchantments.length === 0) return null\r\n\t\t\t\telse if (enchantments.length === 1) return enchantments[0].name\r\n\t\t\t\telse\r\n\t\t\t\t\treturn enchantments.reduce((str, enchantment) => {\r\n\t\t\t\t\t\treturn str + ', ' + enchantment.name\r\n\t\t\t\t\t}, '')\r\n\t\t\t} else {\r\n\t\t\t\treturn null\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/HUD/Stats.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"pa-0\",attrs:{\"fluid\":\"\"}},[_c('v-flex',{staticClass:\"stat-row\"},[_c('v-layout',{attrs:{\"row\":\"\",\"align-center\":\"\"}},[_c('v-flex',{staticStyle:{\"min-width\":\"70px\"},attrs:{\"md1\":\"\",\"col\":\"\"}},[_c('b',[_vm._v(\"Level\")])]),_vm._v(\" \"),_c('v-flex',{staticStyle:{\"padding-left\":\"7px\"},attrs:{\"md2\":\"\",\"col\":\"\"}},[_vm._v(_vm._s(_vm.getLevel()))]),_vm._v(\" \"),_c('v-flex',{attrs:{\"md5\":\"\",\"col\":\"\"}},[_vm._v(_vm._s(Math.floor(_vm.getRemainingXP()))+\"XP until level \"+_vm._s(_vm.getLevel()+1))])],1)],1),_vm._v(\" \"),_c('v-flex',{staticClass:\"stat-row\"},[_c('v-layout',{attrs:{\"row\":\"\",\"align-center\":\"\"}},[_c('v-flex',{staticStyle:{\"min-width\":\"70px\"},attrs:{\"md1\":\"\",\"col\":\"\"}},[_c('b',[_vm._v(\"Strength\")])]),_vm._v(\" \"),_c('v-flex',{staticStyle:{\"padding-left\":\"7px\"},attrs:{\"md3\":\"\",\"col\":\"\"}},[_vm._v(_vm._s(_vm.getStrength()))])],1)],1),_vm._v(\" \"),_c('v-flex',{staticClass:\"stat-row\"},[_c('v-layout',{attrs:{\"row\":\"\",\"align-center\":\"\"}},[_c('v-flex',{staticStyle:{\"min-width\":\"70px\"},attrs:{\"md1\":\"\",\"col\":\"\"}},[_c('b',[_vm._v(\"Damage\")])]),_vm._v(\" \"),_c('v-flex',{staticStyle:{\"padding-left\":\"7px\"},attrs:{\"md2\":\"\",\"col\":\"\"}},[_vm._v(_vm._s(_vm.getDamageRange()))]),_vm._v(\" \"),(_vm.getCurrentWeapon() !== null && _vm.getCurrentWeaponEnchantments() !== null)?_c('v-flex',{attrs:{\"md6\":\"\",\"col\":\"\"}},[_c('b',[_vm._v(\"Weapon Enchantments:\")]),_vm._v(\" \"+_vm._s(_vm.getCurrentWeaponEnchantments())+\"\\n        \")]):_vm._e()],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4f71c599\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/HUD/Stats.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Stats.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Stats.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4f71c599\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Stats.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/HUD/Stats.vue\n// module id = null\n// module chunks = ","<template>\r\n    <v-container fluid class=\"pa-0\">\r\n        <v-layout row>\r\n            <v-flex xs4><b>Spells</b></v-flex>\r\n        </v-layout>\r\n        <v-layout row wrap id=\"spell_bar\">\r\n            <v-flex\r\n                xs1\r\n                col\r\n                v-for=\"(spell, i) in getSpells()\"\r\n                v-on:click=\"selectSpell(spell)\"\r\n                v-bind:key=\"i\"\r\n                style=\"margin: 4px;\"\r\n            >\r\n                <v-tooltip bottom align-center>\r\n                    <p class=\"text-xs-center ma-0\" style=\"max-width: 200px\">\r\n                        Cast {{spell.name}} <br/>\r\n                        Costs <b style=\"color: blue;\">{{spell.manaCost}} Mana</b><br/>\r\n                        {{spell.hoverInfo}}\r\n                    </p>\r\n                    <img\r\n                        v-bind:class=\"{selectedSpell : highlightSpell(spell), spell : ! highlightSpell(spell)}\"\r\n                        v-bind:src=\"getSpellSplashArt(spell.type.toLowerCase(), spell.splashArt)\"\r\n                        slot=\"activator\"\r\n                    />\r\n                </v-tooltip>\r\n            </v-flex>\r\n        </v-layout>\r\n    </v-container>\r\n</template>\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tspells: Game.player.cb.spells\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\thighlightSpell(spell) {\r\n\t\t\treturn Game.player.cb.currentSpell === spell\r\n\t\t},\r\n\t\tgetSpellSplashArt(school, name) {\r\n\t\t\treturn `../static/images/spells/${school}/${name}.png`\r\n\t\t},\r\n\t\tgetSpells() {\r\n\t\t\treturn this.spells\r\n\t\t},\r\n\t\tselectSpell(spell) {\r\n\t\t\tGame.player.selectSpell(spell)\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n<style>\r\n.spell {\r\n\tcursor: pointer;\r\n\tborder: 2px solid #4f4f4f;\r\n\tborder-radius: 4px;\r\n}\r\n\r\n#spell_bar {\r\n\tmargin: 2px;\r\n}\r\n\r\n.selectedSpell {\r\n\tcursor: pointer;\r\n\tborder: 2px solid #113ba7;\r\n\tborder-radius: 4px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/HUD/Spellbook.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"pa-0\",attrs:{\"fluid\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs4\":\"\"}},[_c('b',[_vm._v(\"Spells\")])])],1),_vm._v(\" \"),_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\",\"id\":\"spell_bar\"}},_vm._l((_vm.getSpells()),function(spell,i){return _c('v-flex',{key:i,staticStyle:{\"margin\":\"4px\"},attrs:{\"xs1\":\"\",\"col\":\"\"},on:{\"click\":function($event){_vm.selectSpell(spell)}}},[_c('v-tooltip',{attrs:{\"bottom\":\"\",\"align-center\":\"\"}},[_c('p',{staticClass:\"text-xs-center ma-0\",staticStyle:{\"max-width\":\"200px\"}},[_vm._v(\"\\n                    Cast \"+_vm._s(spell.name)+\" \"),_c('br'),_vm._v(\"\\n                    Costs \"),_c('b',{staticStyle:{\"color\":\"blue\"}},[_vm._v(_vm._s(spell.manaCost)+\" Mana\")]),_c('br'),_vm._v(\"\\n                    \"+_vm._s(spell.hoverInfo)+\"\\n                \")]),_vm._v(\" \"),_c('img',{class:{selectedSpell : _vm.highlightSpell(spell), spell : ! _vm.highlightSpell(spell)},attrs:{\"slot\":\"activator\",\"src\":_vm.getSpellSplashArt(spell.type.toLowerCase(), spell.splashArt)},slot:\"activator\"})])],1)}))],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1a31e898\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/HUD/Spellbook.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1a31e898\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Spellbook.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Spellbook.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Spellbook.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1a31e898\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Spellbook.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/HUD/Spellbook.vue\n// module id = null\n// module chunks = ","<template lang=\"html\">\r\n  <div class=\"item_slot pa-0 ma-0 text-xs-center\">\r\n      <v-tooltip open-delay=\"200\" bottom v-if=\"item !== null\" align-center>\r\n          <p class=\"text-xs-center ma-0\">\r\n              {{item.getAction()}} {{item.type}}\r\n              <br />\r\n              <span v-if=\"'name' in item\">{{\"Name: \" + item.name}}<br /></span> {{item.hoverInfo()}}\r\n          </p>\r\n          <v-layout ripple v-on:click=\"useItem(item, $event)\" v-if=\"item !== null\" slot=\"activator\"  row>\r\n              <v-badge overlay bottom color=\"grey\" overlap>\r\n                  <span v-if=\"item.quantity !== undefined\" slot=\"badge\" dark>\r\n                              <b>{{item.quantity}}</b>\r\n                          </span>\r\n                  <img v-bind:src=\"getInventorySprite(item.id)\" />\r\n              </v-badge>\r\n          </v-layout>\r\n      </v-tooltip>\r\n      <!-- <img v-else-if=\"altSprite !== null\" v-bind:src=\"altSprite\" /> -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tprops: ['item', 'altSprite'],\r\n\tmethods: {\r\n\t\tgetInventorySprite(id) {\r\n\t\t\treturn `../static/images/inventory_sprites/${id}.png`\r\n\t\t},\r\n\t\tcolorSlot(item) {\r\n\t\t\treturn true\r\n\t\t},\r\n\t\tuseItem(item, evt) {\r\n\t\t\t// drop item\r\n\t\t\tif (evt.shiftKey) {\r\n\t\t\t\titem.drop()\r\n\t\t\t} else {\r\n\t\t\t\t// use item\r\n\t\t\t\titem.use()\r\n\t\t\t}\r\n\t\t},\r\n\t\tdropItem(item, evt) {\r\n\t\t\t// drop item\r\n\t\t\titem.drop()\r\n\t\t},\r\n\t\tgetInventory() {\r\n\t\t\treturn Game.player.inventory\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n<style>\r\n.inventory_row {\r\n\t/*margin-left: 10px;*/\r\n}\r\n\r\n.item_slot {\r\n\tborder: 2px solid #4f4f4f;\r\n\tbackground-color: #294646;\r\n\tborder-radius: 4px;\r\n\twidth: 40px;\r\n\theight: 40px;\r\n}\r\n\r\n.item_slot:hover {\r\n\tbackground-color: #698394;\r\n\tcursor: pointer;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/HUD/ItemSlot.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"item_slot pa-0 ma-0 text-xs-center\"},[(_vm.item !== null)?_c('v-tooltip',{attrs:{\"open-delay\":\"200\",\"bottom\":\"\",\"align-center\":\"\"}},[_c('p',{staticClass:\"text-xs-center ma-0\"},[_vm._v(\"\\n            \"+_vm._s(_vm.item.getAction())+\" \"+_vm._s(_vm.item.type)+\"\\n            \"),_c('br'),_vm._v(\" \"),('name' in _vm.item)?_c('span',[_vm._v(_vm._s(\"Name: \" + _vm.item.name)),_c('br')]):_vm._e(),_vm._v(\" \"+_vm._s(_vm.item.hoverInfo())+\"\\n        \")]),_vm._v(\" \"),(_vm.item !== null)?_c('v-layout',{attrs:{\"slot\":\"activator\",\"ripple\":\"\",\"row\":\"\"},on:{\"click\":function($event){_vm.useItem(_vm.item, $event)}},slot:\"activator\"},[_c('v-badge',{attrs:{\"overlay\":\"\",\"bottom\":\"\",\"color\":\"grey\",\"overlap\":\"\"}},[(_vm.item.quantity !== undefined)?_c('span',{attrs:{\"slot\":\"badge\",\"dark\":\"\"},slot:\"badge\"},[_c('b',[_vm._v(_vm._s(_vm.item.quantity))])]):_vm._e(),_vm._v(\" \"),_c('img',{attrs:{\"src\":_vm.getInventorySprite(_vm.item.id)}})])],1):_vm._e()],1):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-083dd6c7\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/HUD/ItemSlot.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-083dd6c7\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ItemSlot.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ItemSlot.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ItemSlot.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-083dd6c7\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ItemSlot.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/HUD/ItemSlot.vue\n// module id = null\n// module chunks = ","<template>\r\n  <v-container fluid class=\"pa-0\">\r\n    <v-layout>\r\n      <v-flex md1 style=\"min-width: 75px;\"> <b>Equipment</b></v-flex>\r\n    </v-layout>\r\n    <!-- Equipment View  -->\r\n    <v-container fluid class=\"pa-0 text-xs-left\">\r\n      <!-- Helmet, Arrows  -->\r\n      <v-layout style=\"margin-top: 4px;\">\r\n        <v-flex class=\"filler\" xs1 v-for=\"i in 4\" :key=\"i\"/>\r\n        <v-flex xs1 class=\"filler\"><item-slot :item=\"equipment.head\"  altSprite=\"../static/images/equipment_placeholders/head.png\" index=\"head\"  /></v-flex>\r\n        <v-flex xs1 class=\"filler\"><item-slot :item=\"equipment.ammo\" altSprite=\"\" index=\"ammo\" /></v-flex>\r\n      </v-layout>\r\n      <!-- Main, Torso, Off-hand  -->\r\n      <v-layout style=\"margin-top: 4px;\">\r\n        <v-flex class=\"filler\" xs1 v-for=\"i in 3\" :key=\"i\"/>\r\n        <v-flex xs1 class=\"filler\"><item-slot :item=\"equipment.weapon\" altSprite=\"\" index=\"weapon\" /></v-flex>\r\n        <v-flex xs1 class=\"filler\"><item-slot :item=\"equipment.torso\" altSprite=\"\" index=\"torso\" /></v-flex>\r\n      </v-layout>\r\n      <!-- Legs  -->\r\n      <v-layout style=\"margin-top: 4px;\">\r\n        <v-flex class=\"filler\" xs1 v-for=\"i in 4\" :key=\"i\"/>\r\n        <v-flex xs1 class=\"filler\"><item-slot :item=\"equipment.legs\" altSprite=\"\" index=\"legs\" /></v-flex>\r\n      </v-layout>\r\n    </v-container>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\nimport itemSlot from './ItemSlot.vue'\r\n\r\nexport default {\r\n\tcomponents: {\r\n\t\t'item-slot': itemSlot\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tequipment: Game.player.cb.equipment // head, torso, legs, weapon, ammo\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n<style>\r\n.filler {\r\n\tmargin: 0px 4px 0px 4px;\r\n\twidth: 40px;\r\n\theight: 40px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/HUD/Equipment.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"pa-0\",attrs:{\"fluid\":\"\"}},[_c('v-layout',[_c('v-flex',{staticStyle:{\"min-width\":\"75px\"},attrs:{\"md1\":\"\"}},[_c('b',[_vm._v(\"Equipment\")])])],1),_vm._v(\" \"),_c('v-container',{staticClass:\"pa-0 text-xs-left\",attrs:{\"fluid\":\"\"}},[_c('v-layout',{staticStyle:{\"margin-top\":\"4px\"}},[_vm._l((4),function(i){return _c('v-flex',{key:i,staticClass:\"filler\",attrs:{\"xs1\":\"\"}})}),_vm._v(\" \"),_c('v-flex',{staticClass:\"filler\",attrs:{\"xs1\":\"\"}},[_c('item-slot',{attrs:{\"item\":_vm.equipment.head,\"altSprite\":\"../static/images/equipment_placeholders/head.png\",\"index\":\"head\"}})],1),_vm._v(\" \"),_c('v-flex',{staticClass:\"filler\",attrs:{\"xs1\":\"\"}},[_c('item-slot',{attrs:{\"item\":_vm.equipment.ammo,\"altSprite\":\"\",\"index\":\"ammo\"}})],1)],2),_vm._v(\" \"),_c('v-layout',{staticStyle:{\"margin-top\":\"4px\"}},[_vm._l((3),function(i){return _c('v-flex',{key:i,staticClass:\"filler\",attrs:{\"xs1\":\"\"}})}),_vm._v(\" \"),_c('v-flex',{staticClass:\"filler\",attrs:{\"xs1\":\"\"}},[_c('item-slot',{attrs:{\"item\":_vm.equipment.weapon,\"altSprite\":\"\",\"index\":\"weapon\"}})],1),_vm._v(\" \"),_c('v-flex',{staticClass:\"filler\",attrs:{\"xs1\":\"\"}},[_c('item-slot',{attrs:{\"item\":_vm.equipment.torso,\"altSprite\":\"\",\"index\":\"torso\"}})],1)],2),_vm._v(\" \"),_c('v-layout',{staticStyle:{\"margin-top\":\"4px\"}},[_vm._l((4),function(i){return _c('v-flex',{key:i,staticClass:\"filler\",attrs:{\"xs1\":\"\"}})}),_vm._v(\" \"),_c('v-flex',{staticClass:\"filler\",attrs:{\"xs1\":\"\"}},[_c('item-slot',{attrs:{\"item\":_vm.equipment.legs,\"altSprite\":\"\",\"index\":\"legs\"}})],1)],2)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-15e0052d\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/HUD/Equipment.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-15e0052d\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Equipment.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Equipment.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Equipment.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-15e0052d\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Equipment.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/HUD/Equipment.vue\n// module id = null\n// module chunks = ","<template>\r\n    <div id=\"help\">\r\n        <v-tooltip right align-center>\r\n            <span>Controls</span>\r\n            <v-btn flat icon color=\"yellow darken-4\" slot=\"activator\" @click.stop=\"helpDialog=true\">\r\n              <v-icon>fa-question-circle</v-icon>\r\n            </v-btn>\r\n        </v-tooltip>\r\n        <v-dialog v-model=\"helpDialog\" max-width=\"600px\" >\r\n            <v-card>\r\n                <v-card-text class=\"text-xs-center\">\r\n                    <h2 class=\"pa-1\">Controls</h2>\r\n                </v-card-text>\r\n                <v-card-text>\r\n                    <v-expansion-panel>\r\n                        <v-expansion-panel-content>\r\n                            <div slot=\"header\">All Keybinds</div>\r\n                            <v-card flat>\r\n                                <v-card-text class=\"pb-0 pt-0\">\r\n                                    <v-container>\r\n                                        <v-layout row class=\"pb-2\">\r\n                                            <v-flex xs6><b>Keys</b></v-flex>\r\n                                            <v-flex xs6><b>Description</b></v-flex>\r\n                                        </v-layout>\r\n                                        <v-layout row wrap v-for=\"(cheat, index) in cheatSheet\" :key=\"index\">\r\n                                            <v-flex xs6>\r\n                                                <code>{{cheat.code}}</code>\r\n                                            </v-flex>\r\n                                            <v-flex xs6>\r\n                                                <p>{{cheat.description}}</p>\r\n                                            </v-flex>\r\n                                        </v-layout>\r\n                                        </v-container>\r\n                                    </v-container>\r\n                                </v-card-text>\r\n                            </v-card>\r\n                        </v-expansion-panel-content>\r\n                        <v-expansion-panel-content>\r\n                            <div slot=\"header\">Magic and Ranged Combat</div>\r\n                            <v-card flat>\r\n                                <v-card-text class=\"pt-0\">\r\n                                    <v-container fluid>\r\n                                        <p><b>Magic</b></p>\r\n                                        <p>To cast a spell, first select a spell from your spellbook by <code>clicking</code> on it. Then, you can press <code>z</code> to cast the selected spell. If your spell is targeted, you will enter targeting mode.\r\n\r\n                                        <p><b>Ranged</b></p>\r\n\r\n                                        <p>If you have a ranged weapon and proper ammunition equipped, press <code>f</code> to enter targeting mode to fire your ranged weapon.\r\n                                        </p>\r\n\r\n                                        <p><b>Targeting</b></p>\r\n                                        In targeting mode, you can select a tile to cast a spell or shoot a projectile so long as it's within range. By default, targeting will select the nearest enemy. You can change the selected tile with the standard <code>movement</code> keys. You can also cycle through enemies in view with <code>tab</code>, <code>=</code>, and <code>/</code>. You cannot select a tile that is blocked or out of your line of sight. Pressing <code>escape</code> will cancel your spell or ranged attack. You can also press <code>f</code> or <code>z</code> for ranged or magic respectively.\r\n                                        </v-container>\r\n                                </v-card-text>\r\n                            </v-card>\r\n                        </v-expansion-panel-content>\r\n                        <v-expansion-panel-content>\r\n                            <div slot=\"header\">Movement and Examining</div>\r\n                            <v-card flat>\r\n                                <v-card-text class=\"pb-0 pt-0\">\r\n                                    <v-container>\r\n                                        <p>You can move with arrow keys, the numpad, or vi keys. You can move in all 8 directions. </p>\r\n                                        <v-container class=\"text-xs-center\">\r\n                                          <pre>y  k  u      7  8  9  </pre>\r\n                                          <pre> \\ | /        \\ | /   </pre>\r\n                                          <pre> h-+-l        4-5-6   </pre>\r\n                                          <pre> / | \\        / | \\   </pre>\r\n                                          <pre>b  j  n      1  2  3  </pre>\r\n                                          <pre>vi-keys     numberpad </pre>\r\n                                        </v-container>\r\n                                        <p>\r\n                                            When in targeting mode, you can use these keys to switch to different tiles. Press <code>x</code> to examine your surroundings. Press <code>x</code> or <code>escape</code> to leave the examine mode.\r\n                                        </p>\r\n                                    </v-container>\r\n                                </v-card-text>\r\n                            </v-card>\r\n                        </v-expansion-panel-content>\r\n                        <v-expansion-panel-content>\r\n                            <div slot=\"header\">Melee Combat</div>\r\n                            <v-card flat>\r\n                                <v-card-text class=\"pt-0\">\r\n                                    <v-container fluid>\r\n                                        <p>To fight an enemy with your fists or melee weapon, simply <code>move</code> into a tile where they are standing.</p>\r\n                                    </v-container>\r\n                                </v-card-text>\r\n                            </v-card>\r\n                        </v-expansion-panel-content>\r\n\r\n\r\n                        <v-expansion-panel-content>\r\n                        <v-card flat>\r\n                            <div slot=\"header\">Ladders, Resting, and Picking up Items</div>\r\n                            <v-card-text class=\"pt-0\">\r\n                                <v-container fluid>\r\n                                    <p>To pick up items off the ground, press <code>,</code> or <code>g</code>.</p>\r\n                                    <p>To rest for a turn and restore a little health, press <code>.</code> or <code>5</code> on the numpad.</p>\r\n                                    <p>To climb ladders, press <code><</code> to go up and press <code>></code> to go down.</p>\r\n                                </v-container>\r\n                            </v-card-text>\r\n                        </v-card>\r\n                    </v-expansion-panel-content>\r\n\r\n                        <v-expansion-panel-content>\r\n                            <div slot=\"header\">Inventory Management</div>\r\n                            <v-card flat>\r\n                                <v-card-text class=\"pt-0\">\r\n                                    <v-container fluid>\r\n                                        <p>\r\n                                            To equip a weapon or drink a potion, <code>click</code> the item in your inventory. To drop an item, <code>shift+click</code> the item in your inventory. Alternatively, you can either equip or drop items by right-clicking an item to bring up its context menu and selecting one of the actions from there.\r\n                                        </p>\r\n                                        <p>\r\n                                            You can rearrange inventory items by dragging and dropping items where you want them to be.\r\n                                        </p>\r\n                                        <p>\r\n                                            To view details about items, simply <code>hover</code> over the item in your inventory and view the tooltip.\r\n                                        </p>\r\n                                    </v-container>\r\n                                </v-card-text>\r\n                            </v-card>\r\n                        </v-expansion-panel-content>\r\n                </v-expansion-panel>\r\n            </v-card-text>\r\n              <v-card-actions>\r\n                  <v-spacer></v-spacer>\r\n                  <v-btn color=\"yellow darken-4\" flat @click.stop=\"helpDialog=false\">Close</v-btn>\r\n              </v-card-actions>\r\n            </v-card>\r\n        </v-dialog>\r\n    </div>\r\n\r\n</template>\r\n<script>\r\nexport default {\r\n\tname: 'help-dialog',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\thelpDialog: false,\r\n\t\t\tcheatSheet: [\r\n\t\t\t\t{ code: '. | 5', description: 'Rest for a turn' },\r\n\t\t\t\t{ code: ', | g', description: 'Pick up an item' },\r\n\t\t\t\t{ code: '<', description: 'Climb up a ladder' },\r\n\t\t\t\t{ code: '>', description: 'Climb down a ladder' },\r\n\t\t\t\t{ code: 'f', description: 'Fire a ranged weapon' },\r\n\t\t\t\t{ code: 'z', description: 'Cast a spell' },\r\n\t\t\t\t{ code: 'x', description: 'Examine the area' }\r\n\t\t\t]\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\twindow.addEventListener('keydown', evt => {\r\n\t\t\tif ((evt.getModifierState('Shift') && evt.keyCode === 191) || (evt.keyCode === 27 && this.helpDialog)) {\r\n\t\t\t\tthis.helpDialog = !this.helpDialog\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n</script>\r\n<style>\r\ncode {\r\n\tbackground-color: #2f3136;\r\n\tcolor: white;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/HelpDialog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"help\"}},[_c('v-tooltip',{attrs:{\"right\":\"\",\"align-center\":\"\"}},[_c('span',[_vm._v(\"Controls\")]),_vm._v(\" \"),_c('v-btn',{attrs:{\"slot\":\"activator\",\"flat\":\"\",\"icon\":\"\",\"color\":\"yellow darken-4\"},on:{\"click\":function($event){$event.stopPropagation();_vm.helpDialog=true}},slot:\"activator\"},[_c('v-icon',[_vm._v(\"fa-question-circle\")])],1)],1),_vm._v(\" \"),_c('v-dialog',{attrs:{\"max-width\":\"600px\"},model:{value:(_vm.helpDialog),callback:function ($$v) {_vm.helpDialog=$$v},expression:\"helpDialog\"}},[_c('v-card',[_c('v-card-text',{staticClass:\"text-xs-center\"},[_c('h2',{staticClass:\"pa-1\"},[_vm._v(\"Controls\")])]),_vm._v(\" \"),_c('v-card-text',[_c('v-expansion-panel',[_c('v-expansion-panel-content',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"All Keybinds\")]),_vm._v(\" \"),_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-text',{staticClass:\"pb-0 pt-0\"},[_c('v-container',[_c('v-layout',{staticClass:\"pb-2\",attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs6\":\"\"}},[_c('b',[_vm._v(\"Keys\")])]),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs6\":\"\"}},[_c('b',[_vm._v(\"Description\")])])],1),_vm._v(\" \"),_vm._l((_vm.cheatSheet),function(cheat,index){return _c('v-layout',{key:index,attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs6\":\"\"}},[_c('code',[_vm._v(_vm._s(cheat.code))])]),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs6\":\"\"}},[_c('p',[_vm._v(_vm._s(cheat.description))])])],1)})],2)],1)],1)],1),_vm._v(\" \"),_c('v-expansion-panel-content',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"Magic and Ranged Combat\")]),_vm._v(\" \"),_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-text',{staticClass:\"pt-0\"},[_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('p',[_c('b',[_vm._v(\"Magic\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"To cast a spell, first select a spell from your spellbook by \"),_c('code',[_vm._v(\"clicking\")]),_vm._v(\" on it. Then, you can press \"),_c('code',[_vm._v(\"z\")]),_vm._v(\" to cast the selected spell. If your spell is targeted, you will enter targeting mode.\\n\\n                                    \")]),_c('p',[_c('b',[_vm._v(\"Ranged\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"If you have a ranged weapon and proper ammunition equipped, press \"),_c('code',[_vm._v(\"f\")]),_vm._v(\" to enter targeting mode to fire your ranged weapon.\\n                                    \")]),_vm._v(\" \"),_c('p',[_c('b',[_vm._v(\"Targeting\")])]),_vm._v(\"\\n                                    In targeting mode, you can select a tile to cast a spell or shoot a projectile so long as it's within range. By default, targeting will select the nearest enemy. You can change the selected tile with the standard \"),_c('code',[_vm._v(\"movement\")]),_vm._v(\" keys. You can also cycle through enemies in view with \"),_c('code',[_vm._v(\"tab\")]),_vm._v(\", \"),_c('code',[_vm._v(\"=\")]),_vm._v(\", and \"),_c('code',[_vm._v(\"/\")]),_vm._v(\". You cannot select a tile that is blocked or out of your line of sight. Pressing \"),_c('code',[_vm._v(\"escape\")]),_vm._v(\" will cancel your spell or ranged attack. You can also press \"),_c('code',[_vm._v(\"f\")]),_vm._v(\" or \"),_c('code',[_vm._v(\"z\")]),_vm._v(\" for ranged or magic respectively.\\n                                    \")])],1)],1)],1),_vm._v(\" \"),_c('v-expansion-panel-content',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"Movement and Examining\")]),_vm._v(\" \"),_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-text',{staticClass:\"pb-0 pt-0\"},[_c('v-container',[_c('p',[_vm._v(\"You can move with arrow keys, the numpad, or vi keys. You can move in all 8 directions. \")]),_vm._v(\" \"),_c('v-container',{staticClass:\"text-xs-center\"},[_c('pre',[_vm._v(\"y  k  u      7  8  9  \")]),_vm._v(\" \"),_c('pre',[_vm._v(\" \\\\ | /        \\\\ | /   \")]),_vm._v(\" \"),_c('pre',[_vm._v(\" h-+-l        4-5-6   \")]),_vm._v(\" \"),_c('pre',[_vm._v(\" / | \\\\        / | \\\\   \")]),_vm._v(\" \"),_c('pre',[_vm._v(\"b  j  n      1  2  3  \")]),_vm._v(\" \"),_c('pre',[_vm._v(\"vi-keys     numberpad \")])]),_vm._v(\" \"),_c('p',[_vm._v(\"\\n                                        When in targeting mode, you can use these keys to switch to different tiles. Press \"),_c('code',[_vm._v(\"x\")]),_vm._v(\" to examine your surroundings. Press \"),_c('code',[_vm._v(\"x\")]),_vm._v(\" or \"),_c('code',[_vm._v(\"escape\")]),_vm._v(\" to leave the examine mode.\\n                                    \")])],1)],1)],1)],1),_vm._v(\" \"),_c('v-expansion-panel-content',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"Melee Combat\")]),_vm._v(\" \"),_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-text',{staticClass:\"pt-0\"},[_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('p',[_vm._v(\"To fight an enemy with your fists or melee weapon, simply \"),_c('code',[_vm._v(\"move\")]),_vm._v(\" into a tile where they are standing.\")])])],1)],1)],1),_vm._v(\" \"),_c('v-expansion-panel-content',[_c('v-card',{attrs:{\"flat\":\"\"}},[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"Ladders, Resting, and Picking up Items\")]),_vm._v(\" \"),_c('v-card-text',{staticClass:\"pt-0\"},[_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('p',[_vm._v(\"To pick up items off the ground, press \"),_c('code',[_vm._v(\",\")]),_vm._v(\" or \"),_c('code',[_vm._v(\"g\")]),_vm._v(\".\")]),_vm._v(\" \"),_c('p',[_vm._v(\"To rest for a turn and restore a little health, press \"),_c('code',[_vm._v(\".\")]),_vm._v(\" or \"),_c('code',[_vm._v(\"5\")]),_vm._v(\" on the numpad.\")]),_vm._v(\" \"),_c('p',[_vm._v(\"To climb ladders, press \"),_c('code',[_vm._v(\"<\")]),_vm._v(\" to go up and press \"),_c('code',[_vm._v(\">\")]),_vm._v(\" to go down.\")])])],1)],1)],1),_vm._v(\" \"),_c('v-expansion-panel-content',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"Inventory Management\")]),_vm._v(\" \"),_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-text',{staticClass:\"pt-0\"},[_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('p',[_vm._v(\"\\n                                        To equip a weapon or drink a potion, \"),_c('code',[_vm._v(\"click\")]),_vm._v(\" the item in your inventory. To drop an item, \"),_c('code',[_vm._v(\"shift+click\")]),_vm._v(\" the item in your inventory. Alternatively, you can either equip or drop items by right-clicking an item to bring up its context menu and selecting one of the actions from there.\\n                                    \")]),_vm._v(\" \"),_c('p',[_vm._v(\"\\n                                        You can rearrange inventory items by dragging and dropping items where you want them to be.\\n                                    \")]),_vm._v(\" \"),_c('p',[_vm._v(\"\\n                                        To view details about items, simply \"),_c('code',[_vm._v(\"hover\")]),_vm._v(\" over the item in your inventory and view the tooltip.\\n                                    \")])])],1)],1)],1)],1)],1),_vm._v(\" \"),_c('v-card-actions',[_c('v-spacer'),_vm._v(\" \"),_c('v-btn',{attrs:{\"color\":\"yellow darken-4\",\"flat\":\"\"},on:{\"click\":function($event){$event.stopPropagation();_vm.helpDialog=false}}},[_vm._v(\"Close\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-58c60f7a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/HelpDialog.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-58c60f7a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./HelpDialog.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./HelpDialog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./HelpDialog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-58c60f7a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./HelpDialog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/HelpDialog.vue\n// module id = null\n// module chunks = ","<template>\r\n    <div>\r\n        <v-tooltip right align-center>\r\n            <span>Settings</span>\r\n            <v-btn flat icon color=\"yellow darken-4\" slot=\"activator\" @click.stop=\"toolDialog=true\">\r\n                <v-icon>fa-cog</v-icon>\r\n            </v-btn>\r\n        </v-tooltip>\r\n        <v-dialog v-model=\"toolDialog\" max-width=\"400px\" >\r\n            <v-card>\r\n                <v-card-text class=\"text-xs-center\">\r\n                    <h2>Settings</h2>\r\n                </v-card-text>\r\n                <v-card-text>\r\n                    <v-layout row>\r\n                        <v-flex xs6>Enable Mouse Controls</v-flex>\r\n                        <v-flex xs4 offset-xs2>\r\n                            <v-switch color=\"yellow darken-4\" v-model=\"mouseEnabled\"></v-switch>\r\n                        </v-flex>\r\n                    </v-layout>\r\n\r\n                    <v-layout row>\r\n                        <v-flex xs6>Show HP Bars</v-flex>\r\n                        <v-flex xs4 offset-xs2>\r\n                            <v-switch color=\"yellow darken-4\" @click.stop=\"toggleHPBars\" v-model=\"userSettings.hpBars\"></v-switch>\r\n                        </v-flex>\r\n                    </v-layout>\r\n\r\n                </v-card-text>\r\n                <v-card-actions>\r\n                    <v-spacer></v-spacer>\r\n                    <v-btn color=\"yellow darken-4\" flat @click.stop=\"toolDialog=false\">Close</v-btn>\r\n                </v-card-actions>\r\n            </v-card>\r\n        </v-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\n\r\nexport default {\r\n\tname: 'help-dialog',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tuserSettings: Game.userSettings,\r\n\t\t\ttoolDialog: false,\r\n\t\t\tmouseEnabled: false,\r\n\t\t\tshowHPBars: Game.userSettings.hpBars,\r\n\t\t\tturnOffAnimation: false\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tmouseEnabled(newState, oldState) {\r\n\t\t\tGame.player.mouseEnabled = newState\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\ttoggleHPBars() {\r\n\t\t\tGame.userSettings.hpBars = !Game.userSettings.hpBars\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/ToolDialog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-tooltip',{attrs:{\"right\":\"\",\"align-center\":\"\"}},[_c('span',[_vm._v(\"Settings\")]),_vm._v(\" \"),_c('v-btn',{attrs:{\"slot\":\"activator\",\"flat\":\"\",\"icon\":\"\",\"color\":\"yellow darken-4\"},on:{\"click\":function($event){$event.stopPropagation();_vm.toolDialog=true}},slot:\"activator\"},[_c('v-icon',[_vm._v(\"fa-cog\")])],1)],1),_vm._v(\" \"),_c('v-dialog',{attrs:{\"max-width\":\"400px\"},model:{value:(_vm.toolDialog),callback:function ($$v) {_vm.toolDialog=$$v},expression:\"toolDialog\"}},[_c('v-card',[_c('v-card-text',{staticClass:\"text-xs-center\"},[_c('h2',[_vm._v(\"Settings\")])]),_vm._v(\" \"),_c('v-card-text',[_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs6\":\"\"}},[_vm._v(\"Enable Mouse Controls\")]),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs4\":\"\",\"offset-xs2\":\"\"}},[_c('v-switch',{attrs:{\"color\":\"yellow darken-4\"},model:{value:(_vm.mouseEnabled),callback:function ($$v) {_vm.mouseEnabled=$$v},expression:\"mouseEnabled\"}})],1)],1),_vm._v(\" \"),_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs6\":\"\"}},[_vm._v(\"Show HP Bars\")]),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs4\":\"\",\"offset-xs2\":\"\"}},[_c('v-switch',{attrs:{\"color\":\"yellow darken-4\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.toggleHPBars($event)}},model:{value:(_vm.userSettings.hpBars),callback:function ($$v) {_vm.$set(_vm.userSettings, \"hpBars\", $$v)},expression:\"userSettings.hpBars\"}})],1)],1)],1),_vm._v(\" \"),_c('v-card-actions',[_c('v-spacer'),_vm._v(\" \"),_c('v-btn',{attrs:{\"color\":\"yellow darken-4\",\"flat\":\"\"},on:{\"click\":function($event){$event.stopPropagation();_vm.toolDialog=false}}},[_vm._v(\"Close\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c74e5968\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ToolDialog.vue\n// module id = null\n// module chunks = ","<style>\r\n#hud_container .hud_tabs_card {\r\n\tbackground-color: #2a2a2a;\r\n}\r\n\r\n.hud_tab {\r\n\tbackground-color: #294646;\r\n}\r\n\r\n.hud_container {\r\n\tcolor: white;\r\n\tfont-size: 13px;\r\n\tmax-width: 440px;\r\n\tborder-left: 4px solid #4f4f4f;\r\n\tbackground-color: #1e1f1f;\r\n\tpadding: 0px;\r\n\t/* margin-left: 20px; */\r\n}\r\n\r\n#hpBar {\r\n\tborder: solid 2px hsl(0, 59%, 40%);\r\n\tborder-radius: 2px;\r\n}\r\n\r\n#manaBar {\r\n\tborder: solid 2px rgb(20, 99, 177);\r\n\tborder-radius: 2px;\r\n}\r\n\r\n.statsBar {\r\n\t/*border : solid 2px goldenrod;*/\r\n\t/*border-radius: 2px;*/\r\n}\r\n\r\n.xpCircleFont {\r\n\tfont-size: 5px;\r\n}\r\n\r\n/* .v-tab-card {\r\n\tmin-height: 103px;\r\n} */\r\n</style>\r\n\r\n<template>\r\n\t<v-flex class=\"hud_container elevation-0\" column>\r\n\t    <v-container fluid class=\"pa-2\">\r\n\t      <!-- Health Bar -->\r\n\t      <v-layout align-center style=\"margin-bottom: -20px; margin-top: -10px\">\r\n          <v-flex style=\"min-width: 75px;\" md1 ><b>Health </b></v-flex>\r\n          <v-flex md8>\r\n              <v-progress-linear id=\"hpBar\" color=\"error\" :value=\"(getHP() / getMaxHP()) * 100\" height=\"15\"></v-progress-linear>\r\n          </v-flex>\r\n          <v-flex md3 class=\"text-xs-center\" style=\"padding-left: 5px;\">{{getHP()}} / {{getMaxHP()}}</v-flex>\r\n\t\t  \t\t<v-flex>\r\n\t\t  \t\t\t<help-dialog></help-dialog>\r\n\t\t  \t\t</v-flex>\r\n\t      </v-layout>\r\n\r\n\t      <!-- Magic Bar -->\r\n\t      <v-layout align-center>\r\n\t        <v-flex md1 style=\"min-width: 75px;\" ><b>Magic</b></v-flex>\r\n\t        <v-flex md8 >\r\n\t            <v-progress-linear id=\"manaBar\" :value=\"(getMana() / getMaxMana()) * 100\" height=\"15\" info></v-progress-linear>\r\n\t        </v-flex>\r\n\t        <v-flex md3 class=\"text-xs-center\" style=\"padding-left: 5px;\">{{getMana()}} / {{getMaxMana()}}</v-flex>\r\n\t        <v-flex>\r\n\t\t\t\t\t\t<tool-dialog></tool-dialog>\r\n\t\t\t\t\t</v-flex>\r\n\t      </v-layout>\r\n\r\n\t\t\t\t<v-layout >\r\n\t\t\t\t\t<stats></stats>\r\n\t\t\t\t</v-layout>\r\n\r\n\t      <!-- Current World -->\r\n\t      <v-layout align-center class=\"mt-4\">\r\n          <v-flex xs5><b>Location:</b> {{getCurrentLevel().capitalize()}}</v-flex>\r\n          <v-flex class=\"pl-3\" v-if=\"getCurrentLevelDepth() > 0\" ><b>Level:</b> {{getCurrentLevelDepth()}}</v-flex>\r\n\t      </v-layout>\r\n\r\n\r\n\t      <!-- Mini-map -->\r\n\t      <v-layout class=\"text-xs-center pt-1\" >\r\n          <v-flex xs10 fluid id=\"minimap_container\"></v-flex>\r\n\t      </v-layout>\r\n\r\n\t\t\t\t<!--  Placeholder Row for stuff -->\r\n\t\t\t\t<v-layout class=\"pt-1\" style=\"min-height: 145px;\">\r\n\t\t\t\t\t<equipment></equipment>\r\n\t\t\t\t</v-layout>\r\n\r\n\t\t\t\t<!-- Spells  -->\r\n\t\t\t\t<v-layout >\r\n\t\t\t\t\t<spellbook></spellbook>\r\n\t\t\t\t</v-layout>\r\n\r\n\t      <!-- Inventory -->\r\n\t\t\t\t<v-layout class=\"mt-1\">\r\n\t\t\t\t\t<inventory></inventory>\r\n\t\t\t\t</v-layout>\r\n\t    </v-container>\r\n\t</v-flex>\r\n</template>\r\n\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\nimport inventory from './Inventory.vue'\r\nimport enemyOverview from './EnemyOverview.vue'\r\nimport minimap from './Minimap.vue'\r\nimport stats from './HUD/Stats.vue'\r\nimport spellBook from './HUD/Spellbook.vue'\r\nimport equipment from './HUD/Equipment.vue'\r\n\r\nimport helpDialog from '@/components/HelpDialog.vue'\r\nimport toolDialog from '@/components/ToolDialog.vue'\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tactiveTab: null,\r\n\t\t\tcurrentLevel: Game.currentLevel,\r\n\t\t\tcb: Game.player.cb,\r\n\t\t\tequipment: Game.player.cb.equipment // head, torso, legs, weapon, ammo\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tgetHP() {\r\n\t\t\treturn Game.player.cb.hp\r\n\t\t},\r\n\t\tgetMaxHP() {\r\n\t\t\treturn Game.player.cb.maxhp\r\n\t\t},\r\n\t\tgetMana() {\r\n\t\t\treturn Game.player.cb.mana\r\n\t\t},\r\n\t\tgetMaxMana() {\r\n\t\t\treturn Game.player.cb.maxmana\r\n\t\t},\r\n\t\tgetCurrentLevel() {\r\n\t\t\tlet levelName = Game.currentLevel.name.replace(/[0-9]/g, '')\r\n\t\t\treturn levelName\r\n\t\t},\r\n\t\tgetCurrentLevelDepth() {\r\n\t\t\treturn parseInt(Game.currentLevel.name.replace(/[^0-9]/g, ''))\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t\tinventory: inventory,\r\n\t\t'enemy-overview': enemyOverview,\r\n\t\t'mini-map': minimap,\r\n\t\tstats: stats,\r\n\t\tspellbook: spellBook,\r\n\t\t'help-dialog': helpDialog,\r\n\t\t'tool-dialog': toolDialog,\r\n\t\tequipment: equipment\r\n\t},\r\n\tcreated() {}\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/HUD.vue","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ToolDialog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ToolDialog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c74e5968\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ToolDialog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ToolDialog.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-flex',{staticClass:\"hud_container elevation-0\",attrs:{\"column\":\"\"}},[_c('v-container',{staticClass:\"pa-2\",attrs:{\"fluid\":\"\"}},[_c('v-layout',{staticStyle:{\"margin-bottom\":\"-20px\",\"margin-top\":\"-10px\"},attrs:{\"align-center\":\"\"}},[_c('v-flex',{staticStyle:{\"min-width\":\"75px\"},attrs:{\"md1\":\"\"}},[_c('b',[_vm._v(\"Health \")])]),_vm._v(\" \"),_c('v-flex',{attrs:{\"md8\":\"\"}},[_c('v-progress-linear',{attrs:{\"id\":\"hpBar\",\"color\":\"error\",\"value\":(_vm.getHP() / _vm.getMaxHP()) * 100,\"height\":\"15\"}})],1),_vm._v(\" \"),_c('v-flex',{staticClass:\"text-xs-center\",staticStyle:{\"padding-left\":\"5px\"},attrs:{\"md3\":\"\"}},[_vm._v(_vm._s(_vm.getHP())+\" / \"+_vm._s(_vm.getMaxHP()))]),_vm._v(\" \"),_c('v-flex',[_c('help-dialog')],1)],1),_vm._v(\" \"),_c('v-layout',{attrs:{\"align-center\":\"\"}},[_c('v-flex',{staticStyle:{\"min-width\":\"75px\"},attrs:{\"md1\":\"\"}},[_c('b',[_vm._v(\"Magic\")])]),_vm._v(\" \"),_c('v-flex',{attrs:{\"md8\":\"\"}},[_c('v-progress-linear',{attrs:{\"id\":\"manaBar\",\"value\":(_vm.getMana() / _vm.getMaxMana()) * 100,\"height\":\"15\",\"info\":\"\"}})],1),_vm._v(\" \"),_c('v-flex',{staticClass:\"text-xs-center\",staticStyle:{\"padding-left\":\"5px\"},attrs:{\"md3\":\"\"}},[_vm._v(_vm._s(_vm.getMana())+\" / \"+_vm._s(_vm.getMaxMana()))]),_vm._v(\" \"),_c('v-flex',[_c('tool-dialog')],1)],1),_vm._v(\" \"),_c('v-layout',[_c('stats')],1),_vm._v(\" \"),_c('v-layout',{staticClass:\"mt-4\",attrs:{\"align-center\":\"\"}},[_c('v-flex',{attrs:{\"xs5\":\"\"}},[_c('b',[_vm._v(\"Location:\")]),_vm._v(\" \"+_vm._s(_vm.getCurrentLevel().capitalize()))]),_vm._v(\" \"),(_vm.getCurrentLevelDepth() > 0)?_c('v-flex',{staticClass:\"pl-3\"},[_c('b',[_vm._v(\"Level:\")]),_vm._v(\" \"+_vm._s(_vm.getCurrentLevelDepth()))]):_vm._e()],1),_vm._v(\" \"),_c('v-layout',{staticClass:\"text-xs-center pt-1\"},[_c('v-flex',{attrs:{\"xs10\":\"\",\"fluid\":\"\",\"id\":\"minimap_container\"}})],1),_vm._v(\" \"),_c('v-layout',{staticClass:\"pt-1\",staticStyle:{\"min-height\":\"145px\"}},[_c('equipment')],1),_vm._v(\" \"),_c('v-layout',[_c('spellbook')],1),_vm._v(\" \"),_c('v-layout',{staticClass:\"mt-1\"},[_c('inventory')],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f5d458e8\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/HUD.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f5d458e8\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./HUD.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./HUD.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./HUD.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f5d458e8\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./HUD.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/HUD.vue\n// module id = null\n// module chunks = ","<template>\r\n    <!-- Death Modal -->\r\n    <v-container class=\"modal elevation-24\" v-if=\"playerIsDead()\">\r\n        <v-layout class=\"text-xs-center\" row>\r\n            <v-flex xs12><h2 class=\"red--text\">You died</h2></v-flex>\r\n        </v-layout>\r\n        <v-layout>\r\n            <v-flex class=\"text-xs-center\" xs12>\r\n                <v-btn raised color=\"success\" dark class=\"flat\" v-on:click.native=\"startNewGame()\"\r\n                       style=\"margin: 0 auto;\">Play Again?</v-btn>\r\n            </v-flex>\r\n        </v-layout>\r\n    </v-container>\r\n</template>\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\n/* import other components here */\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tplayer: Game.player.cb\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tstartNewGame() {\r\n\t\t\tlocation.reload()\r\n\t\t},\r\n\t\tplayerIsDead() {\r\n\t\t\tif (Game.player) return Game.player.isDead()\r\n\t\t\telse return false\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n<style>\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/DeathModal.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.playerIsDead())?_c('v-container',{staticClass:\"modal elevation-24\"},[_c('v-layout',{staticClass:\"text-xs-center\",attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('h2',{staticClass:\"red--text\"},[_vm._v(\"You died\")])])],1),_vm._v(\" \"),_c('v-layout',[_c('v-flex',{staticClass:\"text-xs-center\",attrs:{\"xs12\":\"\"}},[_c('v-btn',{staticClass:\"flat\",staticStyle:{\"margin\":\"0 auto\"},attrs:{\"raised\":\"\",\"color\":\"success\",\"dark\":\"\"},nativeOn:{\"click\":function($event){_vm.startNewGame()}}},[_vm._v(\"Play Again?\")])],1)],1)],1):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-538a867e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/DeathModal.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-538a867e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./DeathModal.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./DeathModal.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./DeathModal.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-538a867e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./DeathModal.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/DeathModal.vue\n// module id = null\n// module chunks = ","<template>\r\n  <v-app dark class=\"black\">\r\n    <v-content>\r\n      <v-container v-show=\"playerSelected\" id=\"main_container\">\r\n          <!--  Notifications -->\r\n          <v-layout row v-if=\"unstableBuildMessage\">\r\n            <v-flex xs12>\r\n              <v-alert color=\"yellow darken-4\" type=\"warning\" dismissible v-model=\"unstableBuildMessage\">\r\n                This build is unstable. A lot of working is going on under the hood. Expect lots of broken, weird things!\r\n              </v-alert>\r\n            </v-flex>\r\n          </v-layout>\r\n          <!-- Game Display and HUD-->\r\n          <v-layout class=\"mt-3\" row id=\"ui\">\r\n            <v-flex column style=\"max-width: 1024px;\">\r\n              <v-layout id=\"game_container_row\" row>\r\n                <div id=\"game_container\" />\r\n              </v-layout>\r\n              <message-log v-if=\"playerSelected\"></message-log>\r\n            </v-flex>\r\n            <hud v-if=\"playerSelected\"></hud>\r\n          </v-layout>\r\n          <death-modal v-if=\"playerSelected\"></death-modal>\r\n      </v-container>\r\n      <start-menu v-show=\"!playerSelected\" v-on:spriteSelected=\"loadGame\"></start-menu>\r\n    </v-content>\r\n    <v-footer app>\r\n      <small class=\"pl-2\">RottenSoup</small>\r\n      <v-btn target=\"_blank\" href=\"https://github.com/Larkenx/Rotten-Soup\" icon ripple>\r\n        <v-icon>fa-github</v-icon>\r\n      </v-btn>\r\n    </v-footer>\r\n  </v-app>\r\n</template>\r\n\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\n// components\r\nimport startMenu from './components/StartMenu.vue'\r\nimport gameDisplay from './components/GameDisplay.vue'\r\nimport itemTransferModal from './components/ItemTransferModal.vue'\r\nimport hud from './components/HUD.vue'\r\nimport deathModal from './components/DeathModal.vue'\r\nimport helpDialog from './components/HelpDialog.vue'\r\nimport messageLog from './components/MessageLog.vue'\r\nwindow.Game = Game\r\n// DEBUG: Imports to export to window\r\n\r\nexport default {\r\n\tname: 'app',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tmouseControls: false,\r\n\t\t\tloading: true,\r\n\t\t\tplayerSelected: false,\r\n\t\t\tunstableBuildMessage: false\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t\t'start-menu': startMenu,\r\n\t\t'game-display': gameDisplay,\r\n\t\thud: hud,\r\n\t\t'item-transfer-modal': itemTransferModal,\r\n\t\t'death-modal': deathModal,\r\n\t\t'help-dialog': helpDialog,\r\n\t\t'message-log': messageLog\r\n\t},\r\n\tcreated() {\r\n\t\t// this.loadGame(4219)\r\n\t},\r\n\tmounted() {},\r\n\tmethods: {\r\n\t\tloadGame(id) {\r\n\t\t\tthis.playerSelected = true\r\n\t\t\tGame.init(id)\r\n\t\t\tGame.log('Welcome to Rotten Soup!', 'information')\r\n\t\t\tGame.log('Press ? to view the controls.', 'player_move')\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n@import url('https://fonts.googleapis.com/css?family=Droid+Sans+Mono|PT+Mono');\r\n.black {\r\n\tbackground-color: black;\r\n}\r\n\r\nhtml {\r\n\toverflow: hidden;\r\n}\r\n\r\n* {\r\n\tfont-family: 'Droid Sans Mono', monospace;\r\n\t-webkit-touch-callout: none;\r\n\t/* iOS Safari */\r\n\t-webkit-user-select: none;\r\n\t/* Safari */\r\n\t-khtml-user-select: none;\r\n\t/* Konqueror HTML */\r\n\t-moz-user-select: none;\r\n\t/* Firefox */\r\n\t-ms-user-select: none;\r\n\t/* Internet Explorer/Edge */\r\n\tuser-select: none;\r\n}\r\n\r\n#main_container {\r\n\tmax-width: 1470px;\r\n\tmax-height: 823px;\r\n\tpadding: 0px;\r\n}\r\n\r\n#ui {\r\n\tmax-width: 1470px;\r\n\tborder: 3px solid #4f4f4f;\r\n\tbackground-color: #1e1f1f;\r\n\tborder-radius: 4px;\r\n}\r\n\r\n#game_container_row {\r\n\tmax-height: 640px;\r\n}\r\n\r\n.test {\r\n\tbackground-color: #824d03;\r\n}\r\n\r\n/* Overriding Vuetify's tool tip so that it is centered :) */\r\n\r\n[data-tooltip] {\r\n\tposition: relative;\r\n\ttext-align: center;\r\n}\r\n\r\n.modal {\r\n\tborder: 2px solid #3d3d3d;\r\n\tborder-radius: 4px;\r\n\tbackground-color: black;\r\n\tcolor: white;\r\n\twidth: 400px;\r\n\tpadding: 10px;\r\n\t/*height: 600px;*/\r\n\tposition: absolute;\r\n\tleft: 20%;\r\n\ttop: 25%;\r\n\t/*margin-left: -150px;*/\r\n\tz-index: 2;\r\n\t/*margin-top: -150px;*/\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{staticClass:\"black\",attrs:{\"dark\":\"\"}},[_c('v-content',[_c('v-container',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.playerSelected),expression:\"playerSelected\"}],attrs:{\"id\":\"main_container\"}},[(_vm.unstableBuildMessage)?_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-alert',{attrs:{\"color\":\"yellow darken-4\",\"type\":\"warning\",\"dismissible\":\"\"},model:{value:(_vm.unstableBuildMessage),callback:function ($$v) {_vm.unstableBuildMessage=$$v},expression:\"unstableBuildMessage\"}},[_vm._v(\"\\n              This build is unstable. A lot of working is going on under the hood. Expect lots of broken, weird things!\\n            \")])],1)],1):_vm._e(),_vm._v(\" \"),_c('v-layout',{staticClass:\"mt-3\",attrs:{\"row\":\"\",\"id\":\"ui\"}},[_c('v-flex',{staticStyle:{\"max-width\":\"1024px\"},attrs:{\"column\":\"\"}},[_c('v-layout',{attrs:{\"id\":\"game_container_row\",\"row\":\"\"}},[_c('div',{attrs:{\"id\":\"game_container\"}})]),_vm._v(\" \"),(_vm.playerSelected)?_c('message-log'):_vm._e()],1),_vm._v(\" \"),(_vm.playerSelected)?_c('hud'):_vm._e()],1),_vm._v(\" \"),(_vm.playerSelected)?_c('death-modal'):_vm._e()],1),_vm._v(\" \"),_c('start-menu',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.playerSelected),expression:\"!playerSelected\"}],on:{\"spriteSelected\":_vm.loadGame}})],1),_vm._v(\" \"),_c('v-footer',{attrs:{\"app\":\"\"}},[_c('small',{staticClass:\"pl-2\"},[_vm._v(\"RottenSoup\")]),_vm._v(\" \"),_c('v-btn',{attrs:{\"target\":\"_blank\",\"href\":\"https://github.com/Larkenx/Rotten-Soup\",\"icon\":\"\",\"ripple\":\"\"}},[_c('v-icon',[_vm._v(\"fa-github\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7a39e842\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7a39e842\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7a39e842\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\r\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\r\n\r\nimport Vue from 'vue'\r\nimport App from './App'\r\nimport Vuetify from 'vuetify'\r\nimport 'vuetify/dist/vuetify.min.css'\r\n\r\nVue.use(Vuetify)\r\n\r\nVue.config.productionTip = false\r\n\r\n/* eslint-disable no-new */\r\nnew Vue({\r\n\tel: '#app',\r\n\tcomponents: { App },\r\n\ttemplate: '<App/>'\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}