{"version":3,"sources":["webpack:///./src/assets/js/game/entities/Entity.js","webpack:///./src/assets/js/game/entities/items/Item.js","webpack:///./src/assets/js/game/entities/items/potions/Potion.js","webpack:///./src/assets/js/game/entities/items/potions/HealthPotion.js","webpack:///./src/assets/js/game/modifiers/Effect.js","webpack:///./src/assets/js/game/modifiers/Buff.js","webpack:///./src/assets/js/game/entities/items/potions/StrengthPotion.js","webpack:///./src/assets/js/game/entities/items/potions/ManaPotion.js","webpack:///./src/assets/js/game/entities/items/weapons/Weapon.js","webpack:///./src/assets/js/game/modifiers/Enchantment.js","webpack:///./src/assets/js/game/entities/items/weapons/Sword.js","webpack:///./src/assets/js/game/entities/items/weapons/ranged/ammo/Ammo.js","webpack:///./src/assets/js/game/entities/items/weapons/ranged/ammo/Arrow.js","webpack:///./src/assets/js/game/utils/HelperFunctions.js","webpack:///./src/assets/js/game/entities/misc/Door.js","webpack:///./src/assets/js/game/entities/items/misc/Corpse.js","webpack:///./src/assets/js/game/entities/actors/Actor.js","webpack:///./src/assets/js/game/entities/items/weapons/ranged/RangedWeapon.js","webpack:///./src/assets/js/game/entities/items/weapons/ranged/Bow.js","webpack:///./src/assets/js/game/entities/actors/enemies/StatelessAI.js","webpack:///./src/assets/js/game/entities/actors/enemies/SimpleEnemy.js","webpack:///./src/assets/js/game/entities/actors/enemies/Skeleton.js","webpack:///./src/assets/js/game/entities/actors/enemies/Zombie.js","webpack:///./src/assets/js/game/magic/Spell.js","webpack:///./src/assets/js/game/entities/misc/Ladder.js","webpack:///./src/assets/js/game/entities/actors/Player.js","webpack:///./src/assets/js/game/map/Tile.js","webpack:///./src/assets/js/game/entities/actors/NPC.js","webpack:///./src/assets/js/game/entities/actors/enemies/Goblin.js","webpack:///./src/assets/js/game/entities/actors/enemies/Kobold.js","webpack:///./src/assets/js/game/entities/actors/enemies/Orc.js","webpack:///./src/assets/js/game/entities/actors/enemies/Rat.js","webpack:///./src/assets/js/game/entities/actors/enemies/Bat.js","webpack:///./src/assets/js/game/entities/misc/Chest.js","webpack:///./src/assets/js/game/entities/items/misc/Key.js","webpack:///./src/assets/js/game/entities/items/misc/Spellbook.js","webpack:///./src/assets/js/game/entities/misc/LevelTransition.js","webpack:///./src/assets/js/game/map/GameMap.js","webpack:///./src/assets/js/game/entities/misc/LockedDoor.js","webpack:///./src/assets/js/game/entities/actors/enemies/boss/Lich.js","webpack:///./src/assets/js/game/map/RandomMap.js","webpack:///./src/assets/js/game/Game.js","webpack:///./src/assets/js/game/GameDisplay.js","webpack:///src/components/StartMenu.vue","webpack:///./src/components/StartMenu.vue?ae3b","webpack:///./src/components/StartMenu.vue","webpack:///src/components/MessageLog.vue","webpack:///./src/components/MessageLog.vue?deda","webpack:///./src/components/MessageLog.vue","webpack:///src/components/GameDisplay.vue","webpack:///./src/components/GameDisplay.vue?4ee0","webpack:///./src/components/GameDisplay.vue","webpack:///src/components/Inventory.vue","webpack:///./src/components/Inventory.vue?37dd","webpack:///./src/components/Inventory.vue","webpack:///src/components/ItemTransferModal.vue","webpack:///./src/components/ItemTransferModal.vue?2fd8","webpack:///./src/components/ItemTransferModal.vue","webpack:///src/components/EnemyOverview.vue","webpack:///./src/components/EnemyOverview.vue?ade5","webpack:///./src/components/EnemyOverview.vue","webpack:///src/components/Minimap.vue","webpack:///./src/components/Minimap.vue?5922","webpack:///./src/components/Minimap.vue","webpack:///src/components/HUD/StatsTabContent.vue","webpack:///./src/components/HUD/StatsTabContent.vue?ee96","webpack:///./src/components/HUD/StatsTabContent.vue","webpack:///src/components/HUD/Spellbook.vue","webpack:///./src/components/HUD/Spellbook.vue?27fa","webpack:///./src/components/HUD/Spellbook.vue","webpack:///src/components/HelpDialog.vue","webpack:///./src/components/HelpDialog.vue?3771","webpack:///./src/components/HelpDialog.vue","webpack:///src/components/ToolDialog.vue","webpack:///./src/components/ToolDialog.vue?2b16","webpack:///src/components/HUD.vue","webpack:///./src/components/ToolDialog.vue","webpack:///./src/components/HUD.vue?8cdf","webpack:///./src/components/HUD.vue","webpack:///src/components/DeathModal.vue","webpack:///./src/components/DeathModal.vue?8509","webpack:///./src/components/DeathModal.vue","webpack:///src/App.vue","webpack:///./src/App.vue?eea8","webpack:///./src/App.vue","webpack:///./src/main.js"],"names":["xp_levels","i","push","Entity_Entity","constructor","x","y","options","this","Object","assign","undefined","id","setSprite","sprite","setSpriteHPBar","spriteHPBar","move","nx","ny","ntile","Game","map","data","removeActor","actors","display","moveSprite","scale","anchor","set","placeAt","getTile","Item_Item","visible","super","hoverInfo","type","name","clipLocation","getTilesetCoords","use","getAction","action","drop","player","dropItem","Potion","HealthPotion_HealthPotion","log","heal","removeFromInventory","Effect","description","duration","applyEffect","entity","Effect_BleedEffect","dmg","cb","maxhp","damage","capitalize","Effect_RegenerationEffect","Buff_Buff","undoAction","initialDuration","StrengthBuff","amt","str","amount","StrengthPotion_StrengthPotion","buff","addNewBuff","ManaPotion_ManaPotion","restore","Weapon_Weapon","combat","blocked","equippable","equipped","enchantments","equipment","weapon","unequipWeapon","equipWeapon","roll","rolls","getRandomInt","sides","addNewEnchantment","enchantment","Enchantment","getEffect","Enchantment_BleedEnchantment","Sword","fg","attackVerbs","swordNames","createSword","sword","length","AMMO_TYPES","ARROW","Ammo_Ammo","ammo","unequipAmmo","equipAmmo","quantity","Arrow_Arrow","ammoType","SteelArrow","min","max","Math","ceil","floor","random","getNormalRandomInt","rand","gaussianRand","addPrefix","vowels","HelperFunctions_itemTypes","STRENGTH_POTION","MANA_POTION","HEALTH_POTION","SWORD","STEEL_ARROW","getDiceRoll","n","getItemsFromDropTable","dropTable","minItems","maxItems","items","chosenItem","rot_default","a","RNG","getWeightedValue","console","getVisibleTiles","actor","visibleTiles","FOV","PreciseShadowcasting","inbounds","compute","range","r","visibility","Door_Door","bg","closed","react","openDoor","tileset","tileproperties","activated_id","texture","tilesetMapping","closeDoor","corpseTypes","SKELETON","HUMANOID","Corpse_Corpse","toLowerCase","rotten","turns","act","engine","lock","tint","idx","_scheduler","remove","indexOf","splice","removeChild","unlock","Actor_Actor","routine","corpseType","effects","head","torso","legs","inventory","item","menu","filter","e","effect","addNewEffect","memberOfInventory","findIndex","cell","is","addToInventory","newItem","nextFreeIndex","placeEntityBelow","assignSprite","removeItem","distanceTo","sqrt","pow","interact","setTimeout","tryMove","width","height","isDead","attack","ranged","verb","message","some","hp","invulnerable","gain_xp","death","mana","maxmana","fireRangedWeapon","dir","diff","DIRS","tx","ty","tile","enemies","hostile","enemy","evtdamage","ctile","background","children","blood","bloodSprite","lib","position","tileSize","addChildAt","corpse","unshift","scheduler","add","getHoverInfo","getMinDmg","wep","minWeaponDmg","getMaxDmg","maxWeaponDmg","RangedWeapon","createBow","StatelessAI_StatelessAI","config","ai","endTurn","dx","abs","dy","recalculatePath","reduce","concat","chasing","pathToPlayer","path","morale","minPlayerDist","maxPlayerDist","melee","magic","findNearbyTiles","nearbyTiles","playerDistToTile","maxDist","farthestTile","currentDist","getFarthestAwayTile","fleeing","newPos","len","SimpleEnemy","Skeleton_Skeleton","randomHP","randomStr","def","Zombie_Skeleton","spellTypes","CONJURATION","CHARMS","ICE","AIR","EARTH","FIRE","POISON","NECROMANCY","TRANSLOCATION","TRANSMUTATION","HEXES","targetTypes","SELF","TARGET","Spell","manaCost","targetType","cast","Spell_MagicDart","hit","splashArt","target","caster","Spell_Pain","adjective","Spell_Regeneration","Spell_VampiricDraining","reanimate","undeadActor","getNearbyCorpses","cartOfCorpses","corpses","Spell_AnimateDead","forEach","Ladder_Ladder","direction","portal","levelName","currentLevel","replace","levelNumber","parseInt","changeLevels","pathfinding","Player_Player","targeting","casting","examining","leveled_up","mouseEnabled","xp","level","hpRecovery","manaRecovery","validTarget","currentSpell","spells","keyTimer","Path","AStar","nearbyEnemies","selectSpell","spell","includes","level_up","remainingXP","getNearbyEnemies","window","addEventListener","handleEvent","evt","seen_tiles","visible_tiles","waitUntilPlayerReleases","removeEventListener","clearTempLog","confirmRangedFire","selectedTile","clearSelectedTile","confirmSpellcasting","eventToTile","changeSelectedTile","mouseMoved","code","keyCode","shift_pressed","getModifierState","movementKeys","cycleKeys","confirmKeys","exitKeys","preventDefault","keyMap","39","37","38","40","104","105","102","99","98","97","100","103","101","75","85","76","78","74","66","72","89","70","90","188","71","190","88","Date","start","getTime","msg","inViewport","cycleThroughSelectableEnemies","climb","selectNearestEnemyTile","pickup","tileItems","el","clearSprite","itemTypes","prettyItemTypes","slice","buffer","buf","ladder","clear","getTileInfo","Tile_Tile","obstacles","updateTileInfo","obstacle","blocks_vision","obs","NPC","Goblin_Goblin","Kobold_Kobold","Orc_Orc","empowered","amtHealed","Rat","symbol","Bat_Bat","Chest_Chest","open","Key","Spellbook_Spellbook","_extends","s","LevelTransition_LevelTransition","entityShop","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","keys","17","18","19","20","21","regeneration","cd","maxCD","pain","vampiricDraining","animateDead","intro","lostHP","nearbyCorpses","cooldown","22","23","24","25","26","27","createEntity","entity_id","frame_id","createMapFromJSON","json","layers","gameMap","GameMap_GameMap","createFromJSON","loadedIDS","playerLocation","Array","j","itemLayers","portalLayers","layer","properties","processObstacleLayer","processActorLayer","processItemLayer","processPortalLayer","playerID","newActor","findActor","ladders","print","row","index","substr","chests","possibleActors","adjTiles","adjacentTiles","dist","ROT","actorTextures","ORC","EMPOWERED_ORC","GOBLIN","RAT","BAT","KOBOLD","flatten","arr","acc","val","isArray","randomTile","validTiles","split","Number","randomDungeon","upperLeft","top","upperRight","left","center","right","lowerLeft","bottom","lowerRight","endLeft","middleCorridorHorizontal","endRight","endTop","middleCorridorVertical","endBottom","single","corridorFloor","middle","walls","island","leftT","middleT","rightT","topT","bottomT","doors","mobDistribution","createActor","actorString","createdLadders","freeCells","rogueMap","Map","Digger","roomWidth","corrdiorLength","roomDugPercentage","create","computeBitmaskFloors","sum","above","below","ur","ll","ul","lr","free","coord","computeBitmaskWalls","floorSums","wallSums","sym","room","getRooms","getLeft","getRight","getTop","getBottom","wleft","wright","wtop","wbottom","getDoors","door","floor_ids","values","coords","chosenActor","possibleActorTextures","chest","object","randomProperty","untargetableBorders","app","overview","dev","HUD","turn","loaded","levels","messageHistory","tempMessages","minimap","pathToTarget","targetReticle","enemyCycle","enemyCycleIndex","userSettings","hpBars","init","playerSpriteID","displayOptions","forceSquareRatio","layout","tileWidth","tileHeight","staticBackground","animatedBackground","FOVBackground","HUDBackground","movingSprites","viewPort","spriteBox","loadAssets","renderer","stage","view","resources","url","on","l","handleAssetLoad","load","tilecount","frame","renderLoop","delta","obj","o","distX","distY","movementSpeed","ticker","tilewidth","tileheight","cols","columns","renderMap","removeChildren","animated","animated_id","getTexture","frames","AnimatedSprite","animationSpeed","randomInterval","play","addChild","generateTexture","camera","startingPos","revealed","alpha","updateMap","lighter1","c","g","gx","gy","beginFill","drawRect","endFill","animate","belowPlayer","props","getContainer","loader","resource","graphics","cx","cy","barLength","text","progress","fill","fontSize","fontFamily","lineStyle","drawRoundedRect","maxInteriorBarLength","currentBarLength","drawMiniMap","px","py","scheduleAllActors","initializeMinimap","document","getElementById","appendChild","Scheduler","Simple","Engine","Display","setOptions","spacing","newLevel","cellularMap","Cellular","randomize","connect","floors","computeBitmask","ladderGoingDown","chosenMob","mobArray","randomMob","randomCave","otherActors","draw","brightenColor","color","hsl_color","Color","rgb2hsl","fromString","toRGB","hsl2rgb","endingPos","sort","a1","a2","getClosestEnemyToPlayer","blockedTile","x0","x1","y0","y1","sx","sy","err","e2","describeSelectedTile","newTarget","names","prettyNames","inView","printPlayerTile","plugins","interaction","mouse","global","tmp","message_color","defend","information","player_move","alert","StartMenu","components_StartMenu","render","_vm","_h","$createElement","_c","_self","attrs","dark","grid-list-xl","xs12","_v","wrap","_l","key","staticStyle","padding","xs4","_s","margin-right","col","xs1","align-center","class","spriteIsSelected","selectedSprite","src","getPlayerSpriteImage","click","$event","selectSprite","staticRenderFns","src_components_StartMenu","__webpack_require__","normalizeComponent","ssrContext","MessageLog","components_MessageLog","margin","overflow","padding-top","getMessages","style","getTempMessages","src_components_MessageLog","MessageLog_normalizeComponent","components_GameDisplay","selectortype_template_index_0_src_components_GameDisplay","max-width","column","src_components_GameDisplay","GameDisplay_normalizeComponent","Inventory","draggable","clientX","clientY","components_Inventory","padding-left","fluid","staticClass","element","model","value","callback","$$v","expression","getInventory","selectedItem","colorSlot","inventory_cell","open-delay","_e","slot","ripple","useItem","contextmenu","show","offset-x","nudge-width","close-on-click","absolute","position-x","position-y","$set","avatar","getInventorySprite","flat","overlay","overlap","src_components_Inventory","Inventory_normalizeComponent","ItemTransferModal","components_ItemTransferModal","xs5","xs2","src_components_ItemTransferModal","ItemTransferModal_normalizeComponent","EnemyOverview","components_EnemyOverview","min-height","md4","font-size","src_components_EnemyOverview","EnemyOverview_normalizeComponent","Minimap","components_Minimap","xs10","src_components_Minimap","Minimap_normalizeComponent","StatsTabContent","costOfLevel","HUD_StatsTabContent","min-width","md1","md2","getLevel","md6","getRemainingXP","rotate","size","getPercentToLevel","getDamageRange","getCurrentWeapon","getCurrentWeaponEnchantments","md3","getStrength","components_HUD_StatsTabContent","StatsTabContent_normalizeComponent","HUD_Spellbook","components_HUD_Spellbook","margin-top","getSpells","selectedSpell","highlightSpell","getSpellSplashArt","src_components_HUD_Spellbook","Spellbook_normalizeComponent","HelpDialog","helpDialog","components_HelpDialog","icon","stopPropagation","xs6","cheat","src_components_HelpDialog","HelpDialog_normalizeComponent","ToolDialog","newState","components_ToolDialog","toolDialog","offset-xs2","toggleHPBars","ToolDialog_normalizeComponent","components_HUD","margin-bottom","getHP","getMaxHP","getMana","getMaxMana","info","getCurrentLevel","getCurrentLevelDepth","slider-color","scrollable","grow","activeTab","href","src_components_HUD","HUD_normalizeComponent","DeathModal","reload","components_DeathModal","playerIsDead","raised","nativeOn","startNewGame","src_components_DeathModal","DeathModal_normalizeComponent","App","selectortype_template_index_0_src_App","directives","rawName","xs7","dismissible","unstableBuildMessage","text-decoration","aria-hidden","playerSelected","spriteSelected","loadGame","src_App","App_normalizeComponent","vue_esm","vuetify_default","productionTip","components","template"],"mappings":"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jBnF,KAAKmD,GAAGsB,aAAa/E,KAAKyF,GAG3BvD,YACC,iBAAkB5B,KAAKmD,GAAG4B,SAAS/E,KAAKmD,GAAG8B,MAAQjF,KAAKmD,GAAG4B,eChDhDK,EAEZxF,YAAYG,GAEX,GADAE,OAAOC,OAAOF,KAAMD,QACFI,IAAdH,KAAK8B,WAA2C3B,IAArBH,KAAK6C,kBAAgD1C,IAAnBH,KAAKqF,UACrE,KAAM,6CAKIC,UAAyBF,EACrCxF,cACC+B,OACCG,KAAM,QACNe,YAAa,8DACbwC,UAAW,IACH,IAAIpC,WCVFsC,UAAcnB,EACvBxE,YAAYC,EAAGC,EAAGmF,EAAOF,EAAOjD,EAAM1B,GAClCuB,MAAM9B,EAAGC,GACLM,GAAIA,EACJ0B,KAAMA,EACND,KAAM,QACN2D,GAAI,SACJnB,QACIU,MAAOA,EACPE,MAAOA,GAEXQ,aAAc,UAAW,UAAW,SAAU,aAK1D,IAAIC,GACA,aACA,YACA,eACA,YACA,SACA,UACA,mBACA,oBACA,wBACA,mBACA,eACA,WACA,UACA,cACA,cACA,cACA,kBACA,uBACA,UACA,YACA,SACA,YACA,QACA,8BACA,+BACA,QACA,qBACA,mBACA,kBACA,aACA,oBACA,YACA,mBACA,WACA,UACA,UACA,YACA,aACA,aACA,OACA,aACA,aACA,eACA,MACA,eACA,WACA,WACA,SACA,SACA,kBACA,aACA,aACA,WACA,UACA,aACA,UACA,eACA,YACA,WACA,YACA,gBACA,cACA,SACA,eACA,aACA,eACA,YACA,UACA,cACA,YACA,0BACA,YACA,YACA,eACA,WACA,YACA,UACA,WACA,eACA,cACA,QACA,UACA,YACA,YACA,SACA,gBACA,iBACA,WACA,aACA,WACA,eACA,SACA,aACA,WACA,YACA,QACA,gBACA,UACA,WACA,aACA,WACA,WACA,wBACA,eACA,aACA,uBACA,UACA,WACA,OACA,WACA,SACA,gBACA,iBACA,gBACA,iBACA,cACA,cACA,SACA,WACA,WACA,YACA,SAGG,SAASC,EAAY9F,EAAGC,EAAGM,GAC9B,IAAIwF,EAAQ,IAAIL,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","file":"static/js/app.a984c382d08e2c31eef8.js","sourcesContent":["import { Game } from '#/Game.js'\r\n\r\nexport let xp_levels = [50]\r\nfor (let i = 1; i < 100; i++) xp_levels.push(1.5 * xp_levels[i - 1])\r\n\r\n/* Entities are in-game objects that exist in the map. They have symbols,\r\n * foregrounds, backgrounds, descriptions, names, visibility, and blocked properties. */\r\nexport class Entity {\r\n    constructor(x, y, options) {\r\n        this.x = x\r\n        this.y = y\r\n        Object.assign(this, options)\r\n        if (options.id === undefined) throw 'Error - entity created without valid id'\r\n    }\r\n\r\n    setSprite(sprite) {\r\n        this.sprite = sprite\r\n    }\r\n\r\n    setSpriteHPBar(sprite) {\r\n      this.spriteHPBar = sprite\r\n    }\r\n\r\n    move(nx, ny) {\r\n        let ntile = Game.map.data[ny][nx] // new tile to move to\r\n        let ctile = Game.map.data[this.y][this.x] // current tile\r\n        ctile.removeActor(this) // remove this actor from this tile\r\n        ntile.actors.push(this) // add this actor to the new tile\r\n        Game.display.moveSprite(this.sprite, nx, ny)\r\n        if (this.x < nx) {\r\n            this.sprite.scale.x = -1\r\n            this.sprite.anchor.set(1, 0)\r\n        } else if (this.x > nx) {\r\n            this.sprite.scale.x = 1\r\n            this.sprite.anchor.set(0, 0)\r\n        }\r\n        this.x = nx // update x,y coords to new coords\r\n        this.y = ny\r\n        if (this.spriteHPBar !== undefined) {\r\n          Game.display.moveSprite(this.spriteHPBar, nx, ny - 0.5)\r\n        }\r\n        // this.sprite.position.set(this.x * 32, this.y * 32)\r\n        // Game.drawActor(this); // draw the actor at the new spot\r\n        // Game.drawViewPort();\r\n        // Game.drawMiniMap();\r\n    }\r\n\r\n    placeAt(nx, ny) {\r\n        let ntile = Game.getTile(nx, ny) // new tile to move to\r\n        ntile.actors.push(this) // add this actor to the new tile\r\n        this.x = nx // update x,y coords to new coords\r\n        this.y = ny\r\n        // Place the sprite directly at the new location\r\n        if (this.sprite !== undefined) Game.display.moveSprite(this.sprite, nx, ny, false)\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/Entity.js","/**\n * Created by larken on 7/12/17.\n */\n\nimport { Game } from '#/Game.js'\nimport { Entity } from '#/entities/Entity.js'\n\nexport default class Item extends Entity {\n\tconstructor(x, y, options) {\n\t\toptions.visible = true\n\t\tsuper(x, y, options)\n\t}\n\n\t/* UI / Front End functions */\n\thoverInfo() {\n\t\treturn `${this.type}${this.name}\\n`\n\t}\n\n\tclipLocation() {\n\t\tlet c = getTilesetCoords(this.id)\n\t\t// let css = `rect(${c[1]}px 32px 32px ${c[0]}px)`;\n\t\tlet css = 'rect(0,32,32,0)'\n\t\treturn css\n\t}\n\n\tuse() {\n\t\t// to be overwritten\n\t}\n\n\tgetAction() {\n\t\treturn this.action\n\t}\n\n\t// making a major assumption that the player is the only thing that drops things.\n\t// might change if some enemy type needs to do so\n\tdrop() {\n\t\tGame.player.dropItem(this)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/Item.js","import Item from '#/entities/items/Item.js'\r\n\r\nexport default class Potion extends Item {\r\n\tconstructor(x, y, options) {\r\n\t\toptions.action = 'Drink'\r\n\t\tsuper(x, y, options)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/potions/Potion.js","import Potion from '#/entities/items/potions/Potion.js'\r\nimport {Game} from '#/Game.js'\r\n\r\nexport default class HealthPotion extends Potion {\r\n\r\n\tconstructor(x, y, id) {\r\n\t\tsuper(x, y, {\r\n\t\t\tid: id,\r\n\t\t\ttype: 'Health Potion'\r\n\t\t})\r\n\t}\r\n\r\n\tuse() {\r\n\t\tGame.log('You drink a health potion. It restores a little HP.', 'defend')\r\n\t\tGame.player.heal(25)\r\n\t\tGame.player.removeFromInventory(this)\r\n\t}\r\n\r\n\thoverInfo() {\r\n\t\treturn 'Effect: Heals for 25 HP'\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/potions/HealthPotion.js","/*\r\n An effect is exclusively carried out to manipulate an Entity in some way (typically an actor, but we might carry\r\n it out against other entities like weapons (e.g. imbue a sword with fire damage for 5 turns)). We can divide up effects\r\n in different types of effects:\r\n - Effects that are immediate versus Effects that exist over multiple turns/ticks in the game.\r\n ~ examples include a health potion that restores HP immediately vs a strength potion which might increase str for 5 turns\r\n */\r\n\r\nimport { Game } from '#/Game.js'\r\n\r\nexport class Effect {\r\n\tconstructor(options) {\r\n\t\tObject.assign(this, options)\r\n\t\tif (\r\n\t\t\tthis.name === undefined ||\r\n\t\t\tthis.description === undefined ||\r\n\t\t\tthis.action === undefined ||\r\n\t\t\tthis.duration === undefined\r\n\t\t)\r\n\t\t\tthrow 'Effect missing critical fields'\r\n\t}\r\n\r\n\tapplyEffect(entity) {\r\n\t\tif (this.duration == 0) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.action(entity)\r\n\t\tthis.duration--\r\n\t}\r\n}\r\n\r\nexport class BleedEffect extends Effect {\r\n\tconstructor() {\r\n\t\tsuper({\r\n\t\t\tname: 'Bleed',\r\n\t\t\taction: entity => {\r\n\t\t\t\tlet dmg = ~~(entity.cb.maxhp * 0.1)\r\n\t\t\t\tif (dmg === 0) dmg = 1\r\n\t\t\t\tentity.damage(dmg)\r\n\t\t\t},\r\n\t\t\tdescription: entity => {\r\n\t\t\t\tlet dmg = ~~(entity.cb.maxhp * 0.1)\r\n\t\t\t\tif (dmg === 0) dmg = 1\r\n\t\t\t\tif (entity === Game.player) return `You bleed for ${dmg} damage.`\r\n\t\t\t\telse return `${entity.name.capitalize()} took ${dmg} bleed damage.`\r\n\t\t\t},\r\n\t\t\tduration: 3\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport class RegenerationEffect extends Effect {\r\n\tconstructor() {\r\n\t\tsuper({\r\n\t\t\tname: 'Regeneration',\r\n\t\t\taction: entity => {\r\n\t\t\t\tentity.heal(10)\r\n\t\t\t},\r\n\t\t\tdescription: entity => {\r\n\t\t\t\tif (entity === Game.player) return 'You regenerate 10 health.'\r\n\t\t\t\telse return `${entity.name.capitalize()} regenerated 10 health.`\r\n\t\t\t},\r\n\t\t\tduration: 5\r\n\t\t})\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/modifiers/Effect.js","import {Game} from '#/Game.js'\r\nimport {Effect} from '#/modifiers/Effect.js'\r\n/* Very similar class to Effect; however, instead of performing an action each turn, this will perform\r\n it once during the initial proc of the effect, then it will remove the effect after the buff wears off. It will\r\n still be added as an effect under the Actor effects array */\r\nexport class Buff extends Effect {\r\n\tconstructor(options) {\r\n\t\t// buffs must specify a way to 'undo' the temporary effect it has on the entity\r\n\t\tif (options.undoAction === undefined)\r\n\t\t\tthrow 'Buffs must declare a way to undo temporary effects'\r\n\r\n\t\tsuper(options)\r\n\t\tthis.initialDuration = this.duration // 'remember' the initial duration\r\n\t}\r\n\r\n\t// overriding super method\r\n\tapplyEffect(entity) {\r\n\t\tif (this.duration === this.initialDuration) {\r\n\t\t\tthis.action(entity)\r\n\t\t\tthis.duration--\r\n\t\t} else if (this.duration === 1) {\r\n\t\t\tGame.log(`Your ${this.name} has expired.`, 'alert')\r\n\t\t\tthis.undoAction(entity)\r\n\t\t\tthis.duration--\r\n\t\t} else {\r\n\t\t\tthis.duration--\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class StrengthBuff extends Buff {\r\n\tconstructor(amt) {\r\n\t\tsuper({\r\n\t\t\tname: 'Strength Buff',\r\n\t\t\taction: (entity) => {\r\n\t\t\t\tentity.cb.str += amt\r\n\t\t\t},\r\n\t\t\tundoAction: (entity) => {\r\n\t\t\t\tentity.cb.str -= amt\r\n\t\t\t},\r\n\t\t\tdescription: (entity) => {\r\n\t\t\t\treturn `${entity.name} has +${amt} Strength for ${this.duration} turns`\r\n\t\t\t},\r\n\t\t\tduration: 5,\r\n\t\t\tamount: amt\r\n\t\t})\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/modifiers/Buff.js","import Potion from '#/entities/items/potions/Potion.js'\r\nimport {Game} from '#/Game.js'\r\nimport {StrengthBuff} from '#/modifiers/Buff.js'\r\n\r\nexport default class StrengthPotion extends Potion {\r\n\r\n\tconstructor(x, y, id) {\r\n\t\tsuper(x, y, {\r\n\t\t\tid: id,\r\n\t\t\ttype: 'Strength Potion',\r\n\t\t})\r\n\t\tthis.buff = new StrengthBuff(3)\r\n\t}\r\n\r\n\tuse() {\r\n\t\tGame.player.addNewBuff(this.buff)\r\n\t\tGame.log(`You drink a strength potion. It boosts your strength for the next ${this.buff.duration + 1} moves.`, 'defend')\r\n\t\tGame.player.removeFromInventory(this)\r\n\t}\r\n\r\n\thoverInfo() {\r\n\t\treturn `Effect: +${this.buff.amount} STR for ${this.buff.duration} moves`\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/potions/StrengthPotion.js","import Potion from '#/entities/items/potions/Potion.js'\r\n\r\nimport {Game} from '#/Game.js'\r\n\r\nexport default class ManaPotion extends Potion {\r\n\r\n\tconstructor(x, y, id) {\r\n\t\tsuper(x, y, {\r\n\t\t\tid: id,\r\n\t\t\ttype: 'Mana Potion',\r\n\t\t})\r\n\t}\r\n\r\n\tuse() {\r\n\t\tGame.log('You drink a mana potion. It restores a little mana.', 'defend')\r\n\t\tGame.player.restore(10)\r\n\t\tGame.player.removeFromInventory(this)\r\n\t}\r\n\r\n\thoverInfo() {\r\n\t\treturn 'Effect: Restores 10 mana'\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/potions/ManaPotion.js","/**\n * Created by Larken on 6/22/2017.\n */\nimport { Game } from '#/Game.js'\nimport Item from '#/entities/items/Item.js'\nimport { getRandomInt } from '#/utils/HelperFunctions.js'\n\nexport default class Weapon extends Item {\n\tconstructor(x, y, options) {\n\t\tif (options.combat === null)\n\t\t\tthrow `Error - no options.combat property defined. Bad weapon creation for ${options.name}`\n\t\toptions.visible = true\n\t\toptions.blocked = false\n\t\toptions.combat.equippable = true\n\t\toptions.combat.equipped = false\n\t\tsuper(x, y, options)\n\t\tthis.cb = this.combat\n\t\tthis.cb.enchantments = []\n\t\tthis.action = 'Equip'\n\t}\n\n\tuse() {\n\t\tif (Game.player.cb.equipment.weapon === this) {\n\t\t\tGame.player.unequipWeapon()\n\t\t} else {\n\t\t\tGame.player.equipWeapon(this)\n\t\t}\n\t}\n\n\troll() {\n\t\tlet dmg = 0\n\t\tfor (let i = 0; i < this.cb.rolls; i++) {\n\t\t\tdmg += getRandomInt(1, this.cb.sides)\n\t\t}\n\t\treturn dmg\n\t}\n\n\tgetAction() {\n\t\tif (this.cb.equipped) return 'Unequip'\n\t\treturn this.action\n\t}\n\n\t/* Effects are equivalent to enchantments, in a way...\n     * Might need to do some work on editing how these are displayed in the UI\n     */\n\taddNewEnchantment(enchantment) {\n\t\tthis.cb.enchantments.push(enchantment)\n\t}\n\n\thoverInfo() {\n\t\treturn `Damage: ${this.cb.rolls}-${this.cb.sides * this.cb.rolls}`\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/weapons/Weapon.js","import {BleedEffect} from '#/modifiers/Effect.js'\r\n\r\nexport class Enchantment {\r\n\r\n\tconstructor(options) {\r\n\t\tObject.assign(this, options)\r\n\t\tif (this.name === undefined || this.description === undefined || this.getEffect === undefined)\r\n\t\t\tthrow 'Enchantment missing critical fields'\r\n\t}\r\n\r\n}\r\n\r\nexport class BleedEnchantment extends Enchantment {\r\n\tconstructor() {\r\n\t\tsuper({\r\n\t\t\tname: 'Bleed',\r\n\t\t\tdescription: 'Applies a bleed effect on-hit, dealing % max health damage.',\r\n\t\t\tgetEffect: () => {\r\n\t\t\t\treturn new BleedEffect()\r\n\t\t\t},\r\n\t\t})\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/modifiers/Enchantment.js","/**\r\n * Created by Larken on 6/22/2017.\r\n */\r\n\r\nimport Weapon from '#/entities/items/weapons/Weapon.js'\r\nimport { getRandomInt } from '#/utils/HelperFunctions.js'\r\nimport { BleedEnchantment } from '#/modifiers/Enchantment.js'\r\n\r\nexport class Sword extends Weapon {\r\n    constructor(x, y, sides, rolls, name, id) {\r\n        super(x, y, {\r\n            id: id,\r\n            name: name,\r\n            type: 'Sword',\r\n            fg: 'orange',\r\n            combat: {\r\n                rolls: rolls,\r\n                sides: sides\r\n            },\r\n            attackVerbs: ['slashed', 'stabbed', 'gutted', 'sliced']\r\n        })\r\n    }\r\n}\r\n\r\nlet swordNames = [\r\n    'Caledfwlch',\r\n    'Hywelbane',\r\n    'Brightkiller',\r\n    'Excalibur',\r\n    'Joyeux',\r\n    'Dyrnwyn',\r\n    'Johnny Corkscrew',\r\n    'The Sword of Leah',\r\n    'The Sword of Shannara',\r\n    'The Vorpal Sword',\r\n    'Seraph Blade',\r\n    'Glorious',\r\n    'Cortana',\r\n    'Heosphorous',\r\n    'Phaesphoros',\r\n    'Maellartach',\r\n    'The Rivan Sword',\r\n    'The Sword of Shadows',\r\n    'Sikanda',\r\n    'Dragnipur',\r\n    'Chance',\r\n    'Vengeance',\r\n    'Grief',\r\n    'The Swords of Night and Day',\r\n    'The Swords of Blood and Fire',\r\n    'Snaga',\r\n    'The Sword of Truth',\r\n    'The Lady Vivamus',\r\n    'Sword of Martin',\r\n    'Verminfate',\r\n    'Rapscallion sword',\r\n    'Callandor',\r\n    'Heron Mark Sword',\r\n    'Graywand',\r\n    'Scalpel',\r\n    'Rhindon',\r\n    'Blackfyre',\r\n    'Brightroar',\r\n    'Dark Siste',\r\n    'Dawn',\r\n    'Hearteater',\r\n    'Heartsbane',\r\n    \"Widow's Wail\",\r\n    'Ice',\r\n    'Lady Forlorn',\r\n    'Longclaw',\r\n    'Red Rain',\r\n    'Albitr',\r\n    'Needle',\r\n    'The Black Blade',\r\n    'Mournblade',\r\n    'Oathkeeper',\r\n    'Naegling',\r\n    'Arvindr',\r\n    'Ravenbrand',\r\n    \"Zar'roc\",\r\n    \"Lion's Tooth\",\r\n    'Doomgiver',\r\n    'Kanajana',\r\n    'Támerlein',\r\n    'Shieldbreaker',\r\n    'Woundhealer',\r\n    'Narsil',\r\n    'Lightbringer',\r\n    'Soulcutter',\r\n    'Sightblinder',\r\n    'Wayfinder',\r\n    'Orcrist',\r\n    'Stonecutter',\r\n    'Townsaver',\r\n    'The Sword of Gryffindor',\r\n    'Farslayer',\r\n    'Mindsword',\r\n    'Dragonslicer',\r\n    'Katopris',\r\n    'Backbiter',\r\n    'Undbitr',\r\n    'Brisingr',\r\n    'Barrow-blade',\r\n    'Coinspinner',\r\n    'Lhang',\r\n    'Traitor',\r\n    'Anglachel',\r\n    'Hadhafang',\r\n    'Vrangr',\r\n    'The Darksword',\r\n    'The Lightsword',\r\n    'Herugrim',\r\n    'Anaklusmos',\r\n    'Gúthwinë',\r\n    'Terminus Est',\r\n    'Memory',\r\n    \"Khazid'hea\",\r\n    'Clamorer',\r\n    'Backbiter',\r\n    'Thorn',\r\n    \"Charon's Claw\",\r\n    'Twinkle',\r\n    'Godsbane',\r\n    'Icingdeath',\r\n    'Hrunting',\r\n    'Naegling',\r\n    'The Sword of the Dawn',\r\n    'Hill Cleaver',\r\n    'Werewindle',\r\n    'Kijin-marukuni-shige',\r\n    'Balaraw',\r\n    'Keyblade',\r\n    'Hina',\r\n    'Tessaiga',\r\n    'Sorrow',\r\n    'Singing Sword',\r\n    'Sword of Chaos',\r\n    'The Starsword',\r\n    'Biggoron Sword',\r\n    'Grayswandir',\r\n    'Rain Dragon',\r\n    'Shisui',\r\n    'Gurthang',\r\n    'Aranrúth',\r\n    'Nightfall',\r\n    'Sting'\r\n]\r\n\r\nexport function createSword(x, y, id) {\r\n    let sword = new Sword(x, y, getRandomInt(2, 5), getRandomInt(2, 3), swordNames[getRandomInt(0, swordNames.length - 1)], id)\r\n    sword.addNewEnchantment(new BleedEnchantment())\r\n    return sword\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/weapons/Sword.js","/**\n * Created by Larken on 6/22/2017.\n */\nimport Item from '#/entities/items/Item.js'\nimport { Game } from '#/Game.js'\n\nexport const AMMO_TYPES = {\n\tARROW: 'Arrow'\n}\n\nexport class Ammo extends Item {\n\tconstructor(x, y, options) {\n\t\toptions.visible = true\n\t\toptions.blocked = false\n\t\toptions.combat.equippable = true\n\t\toptions.combat.equipped = false\n\t\toptions.action = 'Equip'\n\t\tsuper(x, y, options)\n\t\tObject.assign(this, options)\n\t\tthis.cb = this.combat\n\t}\n\n\tuse() {\n\t\tif (Game.player.cb.equipment.ammo === this) {\n\t\t\tGame.player.unequipAmmo()\n\t\t} else {\n\t\t\tGame.player.equipAmmo(this)\n\t\t}\n\t}\n\n\tgetAction() {\n\t\tif (this.cb.equipped) return 'Unequip'\n\t\treturn this.action\n\t}\n\n\thoverInfo() {\n\t\treturn `Quantity: ${this.quantity}`\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/weapons/ranged/ammo/Ammo.js","import { Ammo, AMMO_TYPES } from '#/entities/items/weapons/ranged/ammo/Ammo.js'\n\nexport class Arrow extends Ammo {\n\tconstructor(x, y, options) {\n\t\toptions.combat.ammoType = AMMO_TYPES.ARROW\n\t\tsuper(x, y, options)\n\t}\n}\n\nexport class SteelArrow extends Arrow {\n\tconstructor(x, y, id, quantity) {\n\t\tsuper(x, y, {\n\t\t\tid: id,\n\t\t\ttype: 'Steel Arrows',\n\t\t\tcombat: {\n\t\t\t\tdamage: 0\n\t\t\t},\n\t\t\tquantity: quantity\n\t\t})\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/weapons/ranged/ammo/Arrow.js","import ROT from 'rot-js'\r\n\r\nimport { Game } from '#/Game.js'\r\nimport HealthPotion from '#/entities/items/potions/HealthPotion.js'\r\nimport StrengthPotion from '#/entities/items/potions/StrengthPotion.js'\r\nimport ManaPotion from '#/entities/items/potions/ManaPotion.js'\r\nimport { createSword } from '#/entities/items/weapons/Sword.js'\r\nimport { SteelArrow } from '#/entities/items/weapons/ranged/ammo/Arrow.js'\r\n\r\nexport function getRandomInt(min, max) {\r\n\tmin = Math.ceil(min)\r\n\tmax = Math.floor(max)\r\n\treturn Math.floor(Math.random() * (max - min + 1)) + min //The maximum is exclusive and the minimum is inclusive\r\n}\r\n\r\nexport function getNormalRandomInt(min, max) {\r\n\tlet gaussianRand = () => {\r\n\t\tlet rand = 0\r\n\t\tfor (let i = 0; i < 6; i++) rand += Math.random()\r\n\r\n\t\treturn rand / 6\r\n\t}\r\n\treturn Math.floor(min + gaussianRand() * (max - min + 1))\r\n}\r\n\r\nexport function randomProperty(object) {\r\n\tlet keys = Object.keys(object)\r\n\treturn keys[Math.floor(keys.length * Math.random())]\r\n}\r\n\r\nexport function addPrefix(name) {\r\n\tconst vowels = ['a', 'e', 'i', 'o', 'u']\r\n\tif (name !== 'you') {\r\n\t\tif (name[0] in vowels) return 'an ' + name\r\n\t\telse return 'a ' + name\r\n\t} else {\r\n\t\treturn name\r\n\t}\r\n}\r\n\r\nexport let itemTypes = {\r\n\tSTRENGTH_POTION: 'STRENGTH_POTION',\r\n\tMANA_POTION: 'MANA_POTION',\r\n\tHEALTH_POTION: 'HEALTH_POTION',\r\n\tSWORD: 'SWORD',\r\n\tSTEEL_ARROW: 'STEEL_ARROW'\r\n}\r\n\r\nexport function getDiceRoll(rolls, sides) {\r\n\tlet n = 0\r\n\tfor (let i = 0; i < rolls; i++) {\r\n\t\tn += getRandomInt(1, sides)\r\n\t}\r\n\treturn n\r\n}\r\n\r\nexport function getItemsFromDropTable(options) {\r\n\tif (\r\n\t\toptions.dropTable == undefined ||\r\n\t\toptions.minItems == undefined ||\r\n\t\toptions.maxItems == undefined ||\r\n\t\toptions.x == undefined ||\r\n\t\toptions.y == undefined\r\n\t)\r\n\t\tthrow 'Not enough arguments given. Expected drop table object, min and max number of items to produce, and x,y location'\r\n\r\n\tlet { dropTable, minItems, maxItems, x, y } = options\r\n\tlet items = []\r\n\tlet roll = getRandomInt(minItems, maxItems)\r\n\tfor (let i = 0; i < roll; i++) {\r\n\t\tlet chosenItem = ROT.RNG.getWeightedValue(dropTable)\r\n\t\tswitch (chosenItem) {\r\n\t\t\tcase itemTypes.STRENGTH_POTION:\r\n\t\t\t\titems.push(new StrengthPotion(x, y, 969))\r\n\t\t\t\tbreak\r\n\t\t\tcase itemTypes.HEALTH_POTION:\r\n\t\t\t\titems.push(new HealthPotion(x, y, 488))\r\n\t\t\t\tbreak\r\n\t\t\tcase itemTypes.MANA_POTION:\r\n\t\t\t\titems.push(new ManaPotion(x, y, 608))\r\n\t\t\t\tbreak\r\n\t\t\tcase itemTypes.SWORD:\r\n\t\t\t\titems.push(createSword(x, y, 35))\r\n\t\t\t\tbreak\r\n\t\t\tcase itemTypes.STEEL_ARROW:\r\n\t\t\t\titems.push(new SteelArrow(x, y, 784, 5))\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\tconsole.log(\"tried to add some item that doesn't exist to an inventroy from drop table\")\r\n\t\t\t\tconsole.log(chosenItem)\r\n\t\t}\r\n\t}\r\n\t// console.log(\"Generated drop table\", items)\r\n\treturn items\r\n}\r\n\r\nexport function getVisibleTiles(actor) {\r\n\tlet fov = new ROT.FOV.PreciseShadowcasting(function(x, y) {\r\n\t\treturn Game.inbounds(x, y) && Game.map.data[y][x].visible()\r\n\t})\r\n\r\n\tlet visibleTiles = []\r\n\tfov.compute(actor.x, actor.y, actor.cb.range, (x, y, r, visibility) => {\r\n\t\tif (Game.inbounds(x, y)) visibleTiles.push(Game.map.data[y][x])\r\n\t})\r\n\treturn visibleTiles\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/utils/HelperFunctions.js","/**\r\n * Created by Larken on 7/8/2017.\r\n */\r\nimport { Game } from '#/Game.js'\r\nimport { Entity } from '#/entities/Entity.js'\r\n\r\nexport default class Door extends Entity {\r\n\tconstructor(x, y, id) {\r\n\t\tsuper(x, y, {\r\n\t\t\tname: 'door',\r\n\t\t\tid: id,\r\n\t\t\tbg: 'rgb(140, 80, 0)',\r\n\t\t\tfg: 'red',\r\n\t\t\tvisible: false,\r\n\t\t\tblocked: true\r\n\t\t})\r\n\t\tthis.closed = true\r\n\t}\r\n\r\n\treact() {\r\n\t\tif (this.closed) {\r\n\t\t\tthis.openDoor()\r\n\t\t}\r\n\t}\r\n\r\n\topenDoor() {\r\n\t\tthis.closed = false\r\n\t\tthis.blocked = false\r\n\t\tthis.visible = true\r\n\t\tthis.id = Game.display.tileset.tileproperties[this.id].activated_id\r\n\t\tthis.sprite.texture = Game.display.tilesetMapping[this.id]\r\n\t}\r\n\r\n\tcloseDoor() {\r\n\t\tthis.closed = false\r\n\t\tthis.blocked = false\r\n\t\tthis.visible = true\r\n\t\tthis.id = this.id\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/misc/Door.js","import { Entity } from '#/entities/Entity.js'\r\nimport { Game } from '#/Game.js'\r\n// import Skeleton from \"#/entities/actors/enemies/Skeleton.js\";\r\n// import Zombie from \"#/entities/actors/enemies/Zombie.js\";\r\n\r\nexport const corpseTypes = {\r\n    SKELETON: 5489,\r\n    HUMANOID: 2647\r\n}\r\n\r\nexport class Corpse extends Entity {\r\n    constructor(x, y, name, id) {\r\n        super(x, y, {\r\n            id,\r\n            name: name.toLowerCase() === 'skeleton' ? 'pile of bones' : `${name.capitalize()} Corpse`,\r\n            blocked: false,\r\n            visible: true\r\n        })\r\n        this.rotten = false\r\n        this.turns = 0\r\n    }\r\n\r\n    act() {\r\n        Game.engine.lock()\r\n        this.turns++\r\n        // corpse has rotted after 40 turns\r\n        if (this.turns === 30) this.sprite.tint = 0x31af48\r\n        if (this.turns === 35) this.sprite.tint = 0x267735\r\n\r\n        if (this.turns >= 40) {\r\n            let idx = Game.engine._scheduler.remove(this)\r\n            let ctile = Game.map.data[this.y][this.x]\r\n            // remove this actor from the global actors list and the occupied tile\r\n            ctile.removeActor(this)\r\n            idx = Game.map.actors.indexOf(this)\r\n            Game.map.actors.splice(idx, 1)\r\n            Game.display.removeChild(this.sprite)\r\n        }\r\n        Game.engine.unlock()\r\n    }\r\n\r\n    hoverInfo() {\r\n        return ''\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/misc/Corpse.js","/**\r\n * Created by larken on 7/12/17.\r\n */\r\nimport ROT from 'rot-js'\r\nimport * as PIXI from 'pixi.js'\r\n\r\nimport { Game } from '#/Game.js'\r\nimport { Entity } from '#/entities/Entity.js'\r\nimport { getRandomInt, addPrefix } from '#/utils/HelperFunctions.js'\r\nimport Door from '#/entities/misc/Door.js'\r\nimport Weapon from '#/entities/items/weapons/Weapon.js'\r\nimport { Ammo } from '#/entities/items/weapons/ranged/ammo/Ammo.js'\r\nimport { Buff } from '#/modifiers/Buff.js'\r\nimport { Corpse, corpseTypes } from '#/entities/items/misc/Corpse.js'\r\nimport Item from '#/entities/items/Item.js'\r\n\r\nexport class Actor extends Entity {\r\n    constructor(x, y, options, routine = null) {\r\n        super(x, y, options)\r\n        this.cb = this.combat\r\n        if (this.corpseType === undefined) this.corpseType = corpseTypes.HUMANOID\r\n\r\n        this.cb.effects = []\r\n        this.cb.equipment = {\r\n            head: null,\r\n            torso: null,\r\n            legs: null,\r\n            weapon: null,\r\n            ammo: null\r\n        }\r\n        this.inventory = []\r\n        for (let i = 0; i < 27; i++) {\r\n            this.inventory.push({\r\n                item: null,\r\n                menu: false\r\n            })\r\n        }\r\n    }\r\n\r\n    /* Called by the ROT.js game scheduler to indicate a turn */\r\n    act() {\r\n        this.cb.effects = this.cb.effects.filter(e => {\r\n            return e.duration > 0\r\n        })\r\n        // apply all of the effects on this Actor at the beginning of their turn\r\n        for (let effect of this.cb.effects) {\r\n            if (!(effect instanceof Buff)) Game.log(effect.description(this), 'alert')\r\n\r\n            effect.applyEffect(this)\r\n        }\r\n        // if any effects have expired, we remove them\r\n    }\r\n\r\n    addNewEffect(effect) {\r\n        this.cb.effects.push(effect)\r\n    }\r\n\r\n    addNewBuff(buff) {\r\n        buff.applyEffect(this)\r\n        this.cb.effects.push(buff)\r\n    }\r\n\r\n    memberOfInventory(item) {\r\n        return (\r\n            -1 <\r\n            this.inventory.findIndex(cell => {\r\n                return Object.is(item, cell.item)\r\n            })\r\n        )\r\n    }\r\n\r\n    addToInventory(newItem) {\r\n        if ('quantity' in newItem) {\r\n            for (let i = 0; i < this.inventory.length; i++) {\r\n                let item = this.inventory[i].item\r\n                if (item !== null && item.type === newItem.type) {\r\n                    item.quantity += newItem.quantity\r\n                    return item\r\n                }\r\n            }\r\n        }\r\n\r\n        let nextFreeIndex = null\r\n        for (let i = 0; i < this.inventory.length; i++) {\r\n            if (this.inventory[i].item == null) {\r\n                nextFreeIndex = i\r\n                break\r\n            }\r\n        }\r\n        if (nextFreeIndex === null) {\r\n            Game.log('Your inventory is full! Drop something in order to pick this up.')\r\n            // if your item is in a chest and you try to pick it up, but your inventory is full,\r\n            // it will drop the item below you.\r\n            this.placeEntityBelow(newItem)\r\n            return newItem\r\n        }\r\n\r\n        this.inventory[nextFreeIndex].item = newItem\r\n        // this.inventory[nextFreeIndex].action = newItem.use;\r\n        return this.inventory[nextFreeIndex].item\r\n    }\r\n\r\n    placeEntityBelow(entity) {\r\n        if (entity instanceof Item) {\r\n            entity.placeAt(this.x, this.y)\r\n            Game.display.assignSprite(item)\r\n        } else {\r\n            Game.map.data[this.y][this.x].actors.push(entity)\r\n        }\r\n    }\r\n\r\n    // expressly want to just remove the item from the inventory.\r\n    // no actions are taken to mutate the item (like unequipping it from the player - this is done in those classes)\r\n    removeFromInventory(removeItem) {\r\n        let idx = this.inventory.findIndex(cell => {\r\n            return Object.is(removeItem, cell.item)\r\n        })\r\n        if (idx != -1) {\r\n            this.inventory[idx].item = null\r\n        } else {\r\n            throw 'invalid item removal - trying to remove an item that cannot be found in inventory!'\r\n        }\r\n    }\r\n\r\n    dropItem(item) {\r\n        if (!this.memberOfInventory(item)) throw \"Error - trying to drop an item you don't have in your inventory\"\r\n        if (item !== null && 'cb' in item) {\r\n            item.cb.equipped = false\r\n            if (this.cb.equipment.weapon == item) this.cb.equipment.weapon = null\r\n        }\r\n        item.placeAt(this.x, this.y)\r\n        Game.display.assignSprite(item, true, 2)\r\n        this.removeFromInventory(item)\r\n    }\r\n\r\n    /* The inventory property of actors is an array of object 'slots'. This function\r\n     * returns the actual items that are held at any given time */\r\n    items() {\r\n        return this.inventory.filter(e => e.item !== null).map(e => e.item)\r\n    }\r\n\r\n    distanceTo(actor) {\r\n        // linear distance, no obstacles factored in\r\n        return Math.sqrt(Math.pow(this.x - actor.x, 2) + Math.pow(this.y - actor.y, 2))\r\n    }\r\n\r\n    /* Used to perform an action against another actor. This always involves \"bumper car interaction\", so\r\n\tit makes sense to have an animation following that concept */\r\n    interact(actor) {\r\n        let nx = actor.x - this.x\r\n        let ny = actor.y - this.y\r\n        if (this === Game.player || actor === Game.player) {\r\n            Game.display.moveSprite(this.sprite, this.x + nx / 2, this.y + ny / 2)\r\n            setTimeout(() => {\r\n                Game.display.moveSprite(this.sprite, this.x, this.y)\r\n            }, 100)\r\n        }\r\n        return null\r\n    }\r\n\r\n    /* Used to react to the interaction of another actor */\r\n    react(actor) {\r\n        return null\r\n    }\r\n\r\n    tryMove(nx, ny) {\r\n        // returns true if the turn should end here\r\n        if (nx < 0 || nx === Game.map.width || ny < 0 || ny === Game.map.height) return false\r\n        let ntile = Game.map.data[ny][nx] // new tile to move to\r\n        if (ntile.actors.length === 0 && !ntile.blocked()) {\r\n            this.move(nx, ny)\r\n            return true\r\n        } else if (ntile.actors.length > 0) {\r\n            for (let i = 0; i < ntile.actors.length; i++) {\r\n                let actor = ntile.actors[i]\r\n                // this actor has stumbled upon another actor\r\n                if (actor instanceof Actor && actor.blocked && actor.visible) {\r\n                    if (!actor.isDead()) this.interact(actor)\r\n                    return true\r\n                }\r\n                // actor has stumbled upon a non-Actor entity (an item or miscellaneous entity like a door)\r\n                if (actor instanceof Door) {\r\n                    this.interact(actor)\r\n                    // return actor.blocked;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (!ntile.blocked()) {\r\n            this.move(nx, ny)\r\n            return true\r\n        }\r\n\r\n        return false\r\n    }\r\n\r\n    /* attacks another actor with a melee attack */\r\n    attack(actor) {\r\n        let { weapon } = this.cb.equipment\r\n        let dmg = weapon !== null ? this.cb.str + weapon.roll() : this.cb.str\r\n        if (weapon && weapon.cb.ranged) dmg = this.cb.str\r\n        let verb,\r\n            message = ''\r\n        if (weapon !== null) {\r\n            let { attackVerbs, type } = weapon\r\n            verb = attackVerbs[~~(Math.random() * attackVerbs.length)]\r\n            message = `${addPrefix(this.name).capitalize()} ${verb} ${addPrefix(actor.name)} with ${addPrefix(\r\n                type.toLowerCase()\r\n            )} and dealt ${dmg} damage.`\r\n        } else {\r\n            message = `${addPrefix(this.name).capitalize()} attacked ${addPrefix(actor.name)} and dealt ${dmg} damage.`\r\n        }\r\n\r\n        if (Game.player === this) Game.log(message, 'player_move')\r\n        else Game.log(message, 'attack')\r\n\r\n        if (dmg > 0) actor.damage(dmg)\r\n\r\n        if (weapon && weapon.cb.enchantments.length > 0) {\r\n            for (let enchantment of weapon.cb.enchantments) {\r\n                let effect = enchantment.getEffect()\r\n                if (\r\n                    !actor.cb.effects.some(e => {\r\n                        e.name === effect.name\r\n                    })\r\n                ) {\r\n                    actor.addNewEffect(effect)\r\n                }\r\n            }\r\n        }\r\n\r\n        return dmg\r\n    }\r\n\r\n    equipWeapon(item) {\r\n        if (!(item instanceof Weapon) || !('cb' in item)) throw 'Error - equipped invalid item - ' + this.item.type\r\n\r\n        // already wielding a weapon\r\n        if (this.cb.equipment.weapon !== null) {\r\n            this.cb.equipment.weapon.cb.equipped = false\r\n        }\r\n        this.cb.equipment.weapon = item\r\n        item.cb.equipped = true\r\n    }\r\n\r\n    equipAmmo(item) {\r\n        if (!(item instanceof Ammo) || !('cb' in item)) throw 'Error - equipped invalid item - ' + this.item.type\r\n\r\n        // already wielding a weapon\r\n        if (this.cb.equipment.ammo !== null) {\r\n            this.cb.equipment.ammo.cb.equipped = false\r\n        }\r\n        this.cb.equipment.ammo = item\r\n        this.cb.equipment.ammo.cb.equipped = true\r\n    }\r\n\r\n    /* Reduce hp. If less than 0, causes death */\r\n    damage(hp) {\r\n        if (this.cb.invulnerable) return\r\n        this.cb.hp -= hp\r\n        if (this.isDead()) {\r\n            if (this !== Game.player) Game.player.gain_xp(Math.floor(this.cb.maxhp * 0.5))\r\n\r\n            this.death()\r\n        }\r\n        if (this.sprite !== null) {\r\n            this.sprite.tint = '0xba1b21'\r\n            setTimeout(() => (this.sprite.tint = '0xFFFFFF'), 200)\r\n        }\r\n    }\r\n\r\n    /* Restore HP up to maxhp */\r\n    heal(hp) {\r\n        if (this.cb.hp + hp > this.cb.maxhp) this.cb.hp = this.cb.maxhp\r\n        else this.cb.hp += hp\r\n    }\r\n\r\n    /* Restores mana up to max */\r\n    restore(mana) {\r\n        if (this.cb.mana + mana > this.cb.maxmana) this.cb.mana = this.cb.maxmana\r\n        else this.cb.mana += mana\r\n    }\r\n\r\n    /* Starting out with basic 8 dir firing */\r\n    fireRangedWeapon(ammo, dir) {\r\n        // assuming we have a ranged weapon and ammunition to fire\r\n        let weapon = this.cb.equipment.weapon\r\n        let range = weapon.cb.range\r\n        let dmg = weapon.roll() + ammo.cb.damage + this.cb.str\r\n        let diff = ROT.DIRS[8][dir]\r\n        // iterate from the first to last tile in the given direction\r\n        for (let i = 1; i < range; i++) {\r\n            let tx = this.x + diff[0] * i\r\n            let ty = this.y + diff[1] * i\r\n            let tile = Game.map.data[ty][tx]\r\n            // if the tile is a blocked obstacle, then we want to cancel the projectile's motion\r\n            // since water and some other special obstacles are \"blocked\", need to use the \"blocks vision\"\r\n            // attribute to determine if a projectile can pass through\r\n            // (e.g if light can pass through, so can an arrow or crossbow bolt)\r\n            if (!tile.visible()) {\r\n                if (Game.player === this) Game.log(`Your ${ammo.type.toLowerCase()} hit an obstacle!`, 'alert')\r\n                return\r\n            }\r\n            // if we find an enemy on the tile, we damage it and the projectile stops moving\r\n            let enemies = tile.actors.filter(function(e) {\r\n                return e.combat && e.cb.hostile\r\n            })\r\n            if (enemies.length > 0) {\r\n                let enemy = enemies[0]\r\n                let evtdamage = `${addPrefix(this.name).capitalize()} hit ${addPrefix(enemy.name)} with ${addPrefix(\r\n                    ammo.type.toLowerCase()\r\n                )} and dealt ${dmg} damage.`\r\n                if (Game.player === this) Game.log(evtdamage, 'player_move')\r\n                else Game.log(evtdamage, 'attack')\r\n                enemy.damage(dmg)\r\n                return\r\n            }\r\n        }\r\n        Game.log(`Your ${ammo.type.toLowerCase()} didn't hit anything!`, 'alert')\r\n        // place the ammo down at\r\n        /*\r\n         let tx = this.x + diff[0]*range;\r\n         let ty = this.y + diff[1]*range;\r\n         let tile = Game.map.data[ty][tx];\r\n         */\r\n    }\r\n\r\n    death() {\r\n        let idx = Game.engine._scheduler.remove(this)\r\n        let ctile = Game.map.data[this.y][this.x]\r\n        // remove this actor from the global actors list and the occupied tile\r\n        ctile.removeActor(this)\r\n        idx = Game.map.actors.indexOf(this)\r\n        Game.map.actors.splice(idx, 1)\r\n        // dump the contents of the actor's inventory (items) onto the ground.\r\n        const numberOfEntities = Game.display.background.children.length\r\n\r\n        // redraw the tile, either with an appropriate actor or the tile symbol\r\n        /* On death, we want to spray some blood on the tile.\r\n         * We also want to place a corpse corresponding to the actor as well\r\n        */\r\n\r\n        if (this.inventory.length > 0) {\r\n            let items = this.items()\r\n            for (let item of items) {\r\n                // if the item was previously equipped, it needs to be 'unequipped'\r\n                this.dropItem(item)\r\n            }\r\n        }\r\n\r\n        if (getRandomInt(0, 1) === 0) {\r\n            let blood = 2644 - getRandomInt(0, 1)\r\n            // specifically don't want to add blood if it's a skeleton...\r\n            if (this.corpseType !== corpseTypes.SKELETON) {\r\n                let bloodSprite = new PIXI.Sprite(Game.display.tilesetMapping[blood])\r\n                bloodSprite.position.set(this.x * Game.display.tileSize, this.y * Game.display.tileSize)\r\n                Game.display.background.addChildAt(bloodSprite, 1)\r\n            }\r\n\r\n            if (this.corpseType !== undefined) {\r\n                let corpse = new Corpse(this.x, this.y, this.name, this.corpseType)\r\n                ctile.actors.unshift(corpse)\r\n                Game.scheduler.add(corpse, true)\r\n                Game.display.assignSprite(corpse, true)\r\n            }\r\n        }\r\n\r\n        Game.display.background.removeChild(this.sprite)\r\n        if (this.spriteHPBar !== undefined)\r\n          Game.display.background.removeChild(this.spriteHPBar)\r\n\r\n        if (this === Game.player) {\r\n            Game.log('You died!', 'death')\r\n        } else {\r\n            Game.log(`You killed the ${this.name}.`, 'death')\r\n        }\r\n    }\r\n\r\n    isDead() {\r\n        return this.cb.hp <= 0\r\n    }\r\n\r\n    getHoverInfo() {\r\n        return `HP: ${this.cb.hp} / ${this.cb.maxhp}<br />\\\"${this.description}\\\"`\r\n    }\r\n\r\n    getMinDmg() {\r\n        let wep = this.cb.equipment.weapon\r\n        let minWeaponDmg = wep !== null ? wep.cb.rolls : 0\r\n        return this.cb.str + minWeaponDmg\r\n    }\r\n\r\n    getMaxDmg() {\r\n        let wep = this.cb.equipment.weapon\r\n        let maxWeaponDmg = wep !== null ? wep.cb.rolls * wep.cb.sides : 0\r\n        return this.cb.str + maxWeaponDmg\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/Actor.js","/**\r\n * Created by Larken on 6/22/2017.\r\n */\r\nimport Weapon from '#/entities/items/weapons/Weapon.js'\r\n// import {AMMO_TYPES} from '#/entities/items/weapons/ranged/ammo/Ammo.js'\r\n\r\nexport default class RangedWeapon extends Weapon {\r\n\r\n\tconstructor(x, y, options) {\r\n\t\tsuper(x, y, options)\r\n\t\tthis.cb.ranged = true\r\n\t}\r\n\r\n\r\n\thoverInfo() {\r\n\t\treturn `Damage: ${this.cb.rolls}-${this.cb.sides * this.cb.rolls} Range: ${this.cb.range}`\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/weapons/ranged/RangedWeapon.js","import RangedWeapon from '#/entities/items/weapons/ranged/RangedWeapon.js'\r\nimport { AMMO_TYPES } from '#/entities/items/weapons/ranged/ammo/Ammo.js'\r\n\r\nexport class Bow extends RangedWeapon {\r\n    constructor(x, y, id, name, rolls, sides, range) {\r\n        super(x, y, {\r\n            id: id,\r\n            name: name,\r\n            type: 'Bow',\r\n            combat: {\r\n                rolls: rolls,\r\n                sides: sides,\r\n                range: range,\r\n                ammoType: AMMO_TYPES.ARROW\r\n            },\r\n            attackVerbs: ['slapped', 'smacked', 'whacked']\r\n        })\r\n    }\r\n}\r\n\r\nexport const createBow = (x, y, id) => {\r\n    return new Bow(x, y, id, 'Bow of the Sunwalker', 3, 2, 8)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/weapons/ranged/Bow.js","import { Actor } from '#/entities/actors/Actor.js'\r\nimport { Game } from '#/Game.js'\r\nimport { getVisibleTiles, getDiceRoll, addPrefix } from '#/utils/HelperFunctions'\r\n\r\nimport ROT from 'rot-js'\r\n\r\n/* StatelessAI class to encapsulate all enemies with simple AI that will move towards the player,\r\n   run away from the player, attempt to stay within maximum range (if ranged) by using a limited set\r\n   of parameters:\r\n   - morale, distance to the player (how far, how close it should be), ranged?, magic caster?\r\n   * based on http://www.roguebasin.com/index.php?title=Roguelike_Intelligence_-_Stateless_AIs\r\n*/\r\nexport class StatelessAI extends Actor {\r\n\tconstructor(x, y, options, config) {\r\n\t\tsuper(x, y, options)\r\n\t\tthis.ai = config\r\n\t}\r\n\r\n\tact() {\r\n\t\tGame.engine.lock()\r\n\t\tconst endTurn = () => {\r\n\t\t\tsuper.act()\r\n\t\t\tGame.engine.unlock()\r\n\t\t}\r\n\t\tlet dx = Math.abs(this.x - Game.player.x)\r\n\t\tlet dy = Math.abs(this.y - Game.player.y)\r\n\t\tif (dx > Game.width / 2 || dy > Game.height / 2) {\r\n\t\t\tendTurn()\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tGame.player.recalculatePath()\r\n\t\tlet visibleTiles = getVisibleTiles(this)\r\n\t\tlet allVisibleActors = visibleTiles.reduce((actors, tile) => {\r\n\t\t\treturn actors.concat(tile.actors)\r\n\t\t}, [])\r\n\r\n\t\tlet playerInView = allVisibleActors.some(a => {\r\n\t\t\treturn a === Game.player\r\n\t\t})\r\n\r\n\t\tif (playerInView) {\r\n\t\t\tif (!this.chasing) {\r\n\t\t\t\tGame.log(`A ${this.name} sees you.`, 'alert')\r\n\t\t\t}\r\n\r\n\t\t\tthis.chasing = true\r\n\t\t\tlet pathToPlayer = []\r\n\t\t\tGame.player.path.compute(this.x, this.y, (x, y) => {\r\n\t\t\t\tpathToPlayer.push([x, y])\r\n\t\t\t})\r\n\r\n\t\t\tlet { morale, minPlayerDist, maxPlayerDist, ranged, melee, magic } = this.ai\r\n\t\t\tlet healthRemainingPercentage = this.cb.hp / this.cb.maxhp\r\n\r\n\t\t\tconst findNearbyTiles = () => {\r\n\t\t\t\tlet nearbyTiles = []\r\n\t\t\t\tfor (let i = 0; i < 7; i++) {\r\n\t\t\t\t\tlet diff = ROT.DIRS[8][i]\r\n\t\t\t\t\tlet x = this.x + diff[0]\r\n\t\t\t\t\tlet y = this.y + diff[1]\r\n\t\t\t\t\tif (Game.inbounds(x, y)) {\r\n\t\t\t\t\t\tlet ctile = Game.getTile(x, y)\r\n\t\t\t\t\t\tif (!ctile.blocked() && ctile.actors.length === 0) nearbyTiles.push(ctile)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tnearbyTiles.push(Game.getTile(this.x, this.y))\r\n\t\t\t\treturn nearbyTiles\r\n\t\t\t}\r\n\r\n\t\t\tconst playerDistToTile = tile => {\r\n\t\t\t\treturn Math.sqrt(Math.pow(Game.player.x - tile.x, 2) + Math.pow(Game.player.y - tile.y, 2))\r\n\t\t\t}\r\n\r\n\t\t\tconst getFarthestAwayTile = () => {\r\n\t\t\t\tlet nearbyTiles = findNearbyTiles()\r\n\t\t\t\tlet maxDist = playerDistToTile(nearbyTiles[0])\r\n\t\t\t\tlet farthestTile = nearbyTiles[0]\r\n\t\t\t\tfor (let tile of nearbyTiles) {\r\n\t\t\t\t\tlet currentDist = playerDistToTile(tile)\r\n\t\t\t\t\tif (currentDist >= maxDist) {\r\n\t\t\t\t\t\tmaxDist = currentDist\r\n\t\t\t\t\t\tfarthestTile = tile\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn farthestTile\r\n\t\t\t}\r\n\r\n\t\t\t// if morale is greater than the health remaining, we need to flee!\r\n\t\t\tif (morale >= healthRemainingPercentage) {\r\n\t\t\t\tlet tile = getFarthestAwayTile()\r\n\t\t\t\tif (tile.x !== this.x || tile.y !== this.y) {\r\n\t\t\t\t\tif (!this.fleeing)\r\n\t\t\t\t\t\tGame.log(`The ${this.name.toLowerCase()} trembles at your might and attempts to escape death.`, 'purple')\r\n\t\t\t\t\tthis.fleeing = true\r\n\t\t\t\t\t// if we can run away\r\n\t\t\t\t\tthis.tryMove(tile.x, tile.y)\r\n\t\t\t\t\tendTurn()\r\n\t\t\t\t\treturn\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// we can't flee, so we might as well fight\r\n\t\t\t\t\tif (pathToPlayer.length <= 2) {\r\n\t\t\t\t\t\tlet newPos = pathToPlayer[1]\r\n\t\t\t\t\t\tthis.tryMove(newPos[0], newPos[1])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (pathToPlayer.length >= 2) {\r\n\t\t\t\t\tlet newPos = pathToPlayer[1] // 1 past the current position\r\n\t\t\t\t\tthis.tryMove(newPos[0], newPos[1])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n                              TYPICAL AI\r\n                     If damage > morale\r\n                        if can-run-away-from-player\r\n                           run-away-from-player\r\n                        else if can-attack-player\r\n                           attack-player\r\n                     else if too-far-from-player\r\n                        AND can-attack-player\r\n                        AND can-move-toward-player\r\n                            if  random < charge-probability\r\n                                move-toward-player\r\n                            else attack-player\r\n                     else if too-close-to-character\r\n                        AND can-attack-player\r\n                        AND can-move-away-from-player\r\n                            if random < retreat-probability\r\n                               move-away-from-player\r\n                            else attack-player\r\n                     else if can-attack-player\r\n                        attack-player\r\n                     else if too-far-from-player\r\n                        AND can-move-toward-player\r\n                  move-toward-player\r\n                     else if too-close-to-player\r\n                        AND can-move-away-from-player\r\n                            move-away-from-player\r\n                     else stand-still\r\n                  */\r\n\t\t}\r\n\r\n\t\tendTurn()\r\n\t}\r\n\r\n\tinteract(actor) {\r\n\t\tsuper.interact(actor)\r\n\t\tif (actor === Game.player) {\r\n\t\t\tthis.attack(actor)\r\n\t\t} else {\r\n\t\t\tactor.react(this)\r\n\t\t}\r\n\t}\r\n\r\n\tattack(actor) {\r\n\t\tlet dmg = getDiceRoll(2, this.cb.str)\r\n\r\n\t\tlet len = this.cb.description.length\r\n\t\tlet evtdamage = `${addPrefix(this.name).capitalize()}${\r\n\t\t\tthis.cb.description[Math.floor(Math.random() * len)]\r\n\t\t}${addPrefix(actor.name)} and dealt ${dmg} damage.`\r\n\r\n\t\tif (Game.player === this) Game.log(evtdamage, 'player_move')\r\n\t\telse Game.log(evtdamage, 'attack')\r\n\r\n\t\tif (dmg > 0) actor.damage(dmg)\r\n\t\treturn dmg\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/StatelessAI.js","import { StatelessAI } from '#/entities/actors/enemies/StatelessAI.js'\r\nimport { Game } from '#/Game.js'\r\nimport ROT from 'rot-js'\r\n\r\n/* Simple enemy class to encapsulate all enemies with very simple AI.\r\n Essentially, these enemies have a range that they can see the player from, and if the player\r\n enters within the distance between the enemy and player */\r\nexport default class SimpleEnemy extends StatelessAI {\r\n\tconstructor(x, y, options) {\r\n\t\tsuper(x, y, options, {\r\n\t\t\t/* AI parameters */\r\n\t\t\tmorale: 0,\r\n\t\t\tminPlayerDist: 0,\r\n\t\t\tmaxPlayerDist: 0,\r\n\t\t\tranged: false,\r\n\t\t\tmelee: true,\r\n\t\t\tmagic: false\r\n\t\t})\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/SimpleEnemy.js","/**\n * Created by Larken on 6/22/2017.\n */\nimport { Game } from '#/Game.js'\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\nimport { corpseTypes } from '#/entities/items/misc/Corpse.js'\n\nexport default class Skeleton extends SimpleEnemy {\n\tconstructor(x, y, id) {\n\t\tlet randomHP = getRandomInt(10, 17)\n\t\tlet randomStr = getRandomInt(3, 6)\n\t\tsuper(x, y, {\n\t\t\tid: id,\n\t\t\tname: 'skeleton',\n\t\t\tdescription: 'A skeleton raised from the dead!',\n\t\t\tcorpseType: corpseTypes.SKELETON,\n\t\t\tvisible: true,\n\t\t\tblocked: true,\n\t\t\tchasing: false,\n\t\t\tcombat: {\n\t\t\t\t/* options.combat, dedicated to all things related to combat */\n\t\t\t\tdescription: [' attacked '],\n\t\t\t\t/* max stats */\n\t\t\t\tmaxhp: randomHP,\n\t\t\t\tmaxmana: 5,\n\t\t\t\t/* current stats */\n\t\t\t\thp: randomHP,\n\t\t\t\tmana: 5,\n\t\t\t\tstr: randomStr,\n\t\t\t\tdef: 1,\n\t\t\t\t/* misc */\n\t\t\t\thostile: true,\n\t\t\t\trange: 7,\n\t\t\t\tinvulnerable: false\n\t\t\t}\n\t\t})\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Skeleton.js","/**\r\n * Created by Larken on 6/22/2017.\r\n */\r\nimport { Game } from '#/Game.js'\r\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\r\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\r\n\r\nexport default class Skeleton extends SimpleEnemy {\r\n\tconstructor(x, y, id) {\r\n\t\tlet randomHP = getRandomInt(10, 15)\r\n\t\tlet randomStr = getRandomInt(1, 3)\r\n\t\tsuper(x, y, {\r\n\t\t\tid: id,\r\n\t\t\tname: 'zombie',\r\n\t\t\tdescription: 'A zombie raised from the dead!',\r\n\t\t\tvisible: true,\r\n\t\t\tblocked: true,\r\n\t\t\tchasing: false,\r\n\t\t\tcombat: {\r\n\t\t\t\t/* options.combat, dedicated to all things related to combat */\r\n\t\t\t\tdescription: [' attacked '],\r\n\t\t\t\t/* max stats */\r\n\t\t\t\tmaxhp: randomHP,\r\n\t\t\t\tmaxmana: 5,\r\n\t\t\t\t/* current stats */\r\n\t\t\t\thp: randomHP,\r\n\t\t\t\tmana: 5,\r\n\t\t\t\tstr: randomStr,\r\n\t\t\t\tdef: 1,\r\n\t\t\t\t/* misc */\r\n\t\t\t\thostile: true,\r\n\t\t\t\trange: 7,\r\n\t\t\t\tinvulnerable: false\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Zombie.js","/* Class to hold spells. Spells can be self-casted or targeted. Some special cases can be considered,\r\n such as 'reanimate the nearest dead character'. */\r\nimport ROT from 'rot-js'\r\nimport { getRandomInt, getDiceRoll } from '#/utils/HelperFunctions.js'\r\nimport { RegenerationEffect } from '#/modifiers/Effect.js'\r\nimport { Game } from '#/Game.js'\r\nimport { Corpse, corpseTypes } from '#/entities/items/misc/Corpse.js'\r\nimport Skeleton from '#/entities/actors/enemies/Skeleton.js'\r\nimport Zombie from '#/entities/actors/enemies/Zombie.js'\r\n\r\nexport const spellTypes = {\r\n    CONJURATION: 'CONJURATION',\r\n    CHARMS: 'CHARMS',\r\n    ICE: 'ICE',\r\n    AIR: 'AIR',\r\n    EARTH: 'EARTH',\r\n    FIRE: 'FIRE',\r\n    POISON: 'POISON',\r\n    NECROMANCY: 'NECROMANCY',\r\n    TRANSLOCATION: 'TRANSLOCATION',\r\n    TRANSMUTATION: 'TRANSMUTATION',\r\n    HEXES: 'HEXES'\r\n}\r\n\r\nexport const targetTypes = {\r\n    SELF: 'SELF', // applies spell to self\r\n    TARGET: 'TARGET' // applies to a target\r\n}\r\n\r\nexport class Spell {\r\n    constructor(options) {\r\n        // any characteristics of the spell we get from extensions can just be properties on the class\r\n        if (\r\n            options.name === undefined ||\r\n            options.hoverInfo === undefined ||\r\n            options.action === undefined ||\r\n            options.type === undefined ||\r\n            options.manaCost === undefined ||\r\n            options.targetType === undefined\r\n        )\r\n            throw 'Spell creation failed - insufficient information provided'\r\n\r\n        Object.assign(this, options)\r\n    }\r\n\r\n    cast() {} // to be overwritten\r\n}\r\n\r\n/* Conjuration Spellls */\r\n\r\nexport class MagicDart extends Spell {\r\n    constructor(options) {\r\n        super({\r\n            name: 'Magic Dart',\r\n            hoverInfo: 'Deals 1-8 damage to a target',\r\n            action: (entity, hit) => {\r\n                entity.damage(hit)\r\n            },\r\n            splashArt: 'magic_dart',\r\n            type: spellTypes.CONJURATION,\r\n            targetType: targetTypes.TARGET,\r\n            manaCost: 3\r\n        })\r\n        Object.assign(this, options)\r\n    }\r\n\r\n    cast(target, caster) {\r\n        let dmg = getRandomInt(1, 8) // remember to update hover info if this changes!\r\n        if (target === Game.player) Game.log(`You took ${dmg} damage from a Magic Dart spell!`, 'attack')\r\n        else Game.log(`Magic Dart blasts the ${target.name} for ${dmg} magical damage.`, 'player_move')\r\n\r\n        this.action(target, dmg)\r\n    }\r\n}\r\n\r\n/* Necromancy Spells */\r\n\r\nexport class Pain extends Spell {\r\n    constructor(options) {\r\n        super({\r\n            name: 'Pain',\r\n            hoverInfo: 'Deals 3-9 negative energy to a target',\r\n            action: (entity, hit) => {\r\n                entity.damage(hit)\r\n            },\r\n            splashArt: 'pain',\r\n            type: spellTypes.NECROMANCY,\r\n            targetType: targetTypes.TARGET,\r\n            manaCost: 3\r\n        })\r\n        Object.assign(this, options)\r\n    }\r\n\r\n    cast(target, caster) {\r\n        let dmg = getDiceRoll(3, 3) // remember to update hover info if this changes!\r\n        let adjective = dmg >= 7 ? 'extreme' : 'some'\r\n        if (target === Game.player) {\r\n            Game.log(`The ${caster.name.capitalize()} casts ${this.name} on ${target.name.toLowerCase()}.`, 'plum')\r\n            Game.log(`You feel ${adjective} pain and take ${dmg} damage.`, 'attack')\r\n        } else {\r\n            Game.log(`Pain causes ${adjective} trauma the ${target.name} for ${dmg} magical damage.`, 'player_move')\r\n        }\r\n\r\n        this.action(target, dmg)\r\n    }\r\n}\r\n\r\nexport class Regeneration extends Spell {\r\n    constructor(options) {\r\n        super({\r\n            name: 'Regeneration',\r\n            hoverInfo: 'Regenerates 10 health per turn by reanimating wounds with necromancy.',\r\n            action: entity => {\r\n                entity.addNewEffect(new RegenerationEffect())\r\n            },\r\n            splashArt: 'regeneration',\r\n            type: spellTypes.NECROMANCY,\r\n            targetType: targetTypes.SELF,\r\n            manaCost: 3\r\n        })\r\n        Object.assign(this, options)\r\n    }\r\n\r\n    cast(target, caster) {\r\n        if (caster === Game.player) Game.log('You begin regenerating your wounds with dark magic.', 'player_move')\r\n        else Game.log(`${caster.name.capitalize()} begins regenerating its wounds.`, 'plum')\r\n\r\n        this.action(target)\r\n    }\r\n}\r\n\r\nexport class VampiricDraining extends Spell {\r\n    constructor(options) {\r\n        super({\r\n            name: 'Vampiric Draining',\r\n            hoverInfo: 'Drains the health of an enemy for 10-20 damage, healing the caster half of the damage dealt',\r\n            action: (entity, dmg) => {\r\n                entity.damage(dmg)\r\n            },\r\n            splashArt: 'vampiric_draining',\r\n            type: spellTypes.NECROMANCY,\r\n            targetType: targetTypes.TARGET,\r\n            manaCost: 3\r\n        })\r\n        Object.assign(this, options)\r\n    }\r\n\r\n    cast(target, caster) {\r\n        let dmg = getDiceRoll(10, 2) // remember to update hover info if this changes!\r\n        if (caster === Game.player) {\r\n            Game.log(\r\n                `You suck the life energy out of the ${target.name.toLowerCase()}, damaging it for ${dmg} hp.`,\r\n                'player_move'\r\n            )\r\n            Game.log(`You siphon ${~~(dmg / 2)} hp from the enemy and gain it as health.`, 'lightgreen')\r\n        } else {\r\n            Game.log(`The ${caster.name.capitalize()} casts ${this.name} on ${target.name.toLowerCase()}.`, 'plum')\r\n            Game.log(`You feel your life energy slipping away and take ${dmg} damage.`, 'alert')\r\n            Game.log(`The ${caster.name.capitalize()} gains ${~~(dmg / 2)} health.`, 'plum')\r\n        }\r\n        this.action(target, dmg)\r\n        caster.heal(~~(dmg / 2))\r\n    }\r\n}\r\n\r\nexport const reanimate = corpse => {\r\n    let ctile = Game.map.data[corpse.y][corpse.x]\r\n    // remove the corpse from the ground\r\n    ctile.removeActor(corpse)\r\n    let idx = Game.map.actors.indexOf(corpse)\r\n    Game.map.actors.splice(idx, 1)\r\n    Game.display.removeChild(corpse)\r\n    let undeadActor =\r\n        corpse.id === corpseTypes.HUMANOID ? new Zombie(corpse.x, corpse.y, 2317) : new Skeleton(corpse.x, corpse.y, 2552)\r\n\r\n    undeadActor.chasing = true\r\n    ctile.actors.push(undeadActor)\r\n    Game.display.assignSprite(undeadActor)\r\n    Game.map.actors.push(undeadActor)\r\n    Game.scheduler.add(undeadActor, true)\r\n}\r\n\r\n/* returns an array of corpses :) */\r\nexport const getNearbyCorpses = actor => {\r\n    let fov = new ROT.FOV.PreciseShadowcasting(function(x, y) {\r\n        return Game.inbounds(x, y) && Game.map.data[y][x].visible()\r\n    })\r\n\r\n    let visibleTiles = []\r\n    fov.compute(actor.x, actor.y, actor.cb.range, function(x, y, r, visibility) {\r\n        if (Game.inbounds(x, y)) visibleTiles.push(Game.map.data[y][x])\r\n    })\r\n\r\n    let cartOfCorpses = []\r\n    for (let tile of visibleTiles) {\r\n        let corpses = tile.actors.filter(e => {\r\n            return e instanceof Corpse\r\n        })\r\n        if (corpses.length > 0) cartOfCorpses.push(corpses[0])\r\n    }\r\n    return cartOfCorpses\r\n}\r\n\r\nexport class AnimateDead extends Spell {\r\n    constructor(options) {\r\n        super({\r\n            name: 'Animate Dead',\r\n            hoverInfo: \"Raises all skeletons and corpses within caster's line of sight as undead.\",\r\n            action: caster => {\r\n                getNearbyCorpses(caster).forEach(corpse => {\r\n                    reanimate(corpse)\r\n                })\r\n            },\r\n            splashArt: 'animate_dead',\r\n            type: spellTypes.NECROMANCY,\r\n            targetType: targetTypes.SELF,\r\n            manaCost: 7\r\n        })\r\n        Object.assign(this, options)\r\n    }\r\n\r\n    cast(target, caster) {\r\n        this.action(caster)\r\n        if (caster === Game.player) {\r\n            Game.log('You raise nearby dead corpses around you into undead zombies and skeletons.', 'lightgreen')\r\n        } else {\r\n            Game.log(`The ${caster.name.capitalize()} raises nearby corpses as undead minions.`, 'plum')\r\n            Game.log('The undead begin marching towards you.', 'plum')\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/magic/Spell.js","/**\r\n * Created by Larken on 6/22/2017.\r\n */\r\nimport { Game } from '#/Game.js'\r\nimport { Entity } from '#/entities/Entity.js'\r\n\r\nexport default class Ladder extends Entity {\r\n    constructor(x, y, id, dir) {\r\n        super(x, y, {\r\n            id: id,\r\n            name: 'ladder',\r\n            direction: dir,\r\n            description: 'A ladder leading ' + dir,\r\n            fg: 'brown',\r\n            bg: 'orange',\r\n            blocked: false,\r\n            visible: true\r\n        })\r\n        this.portal = null\r\n    }\r\n\r\n    act() {}\r\n\r\n    react(actor) {\r\n        let levelName = Game.currentLevel.name.replace(/[0-9]/g, '')\r\n        let levelNumber = parseInt(Game.currentLevel.name.replace(/[^0-9]/g, ''))\r\n        if (this.direction === 'down') {\r\n            Game.log('You climb down the ladder...', 'player_move')\r\n            if (this.portal !== null) {\r\n                Game.changeLevels(this.portal, this.direction == 'down' ? 'up' : 'down')\r\n                return\r\n            } else {\r\n                Game.changeLevels(levelName + (levelNumber + 1), this.direction == 'down' ? 'up' : 'down', levelNumber)\r\n                return\r\n            }\r\n        } else {\r\n            Game.log('You climb up the ladder...', 'player_move')\r\n            if (this.portal !== null) {\r\n                Game.changeLevels(this.portal, this.direction == 'down' ? 'up' : 'down')\r\n                return\r\n            }\r\n            if (levelNumber === 1) {\r\n                Game.changeLevels('overworld')\r\n                return\r\n            }\r\n            Game.changeLevels(levelName + (levelNumber - 1), this.direction == 'down' ? 'up' : 'down', levelNumber)\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/misc/Ladder.js","/**\r\n * Created by Larken on 6/22/2017.\r\n */\r\nimport ROT from 'rot-js'\r\nimport { Game } from '#/Game.js'\r\nimport { Actor } from '#/entities/actors/Actor.js'\r\nimport { addPrefix } from '#/utils/HelperFunctions.js'\r\nimport Item from '#/entities/items/Item.js'\r\n// Weapons\r\nimport { Sword } from '#/entities/items/weapons/Sword.js'\r\n\r\nimport { createBow } from '#/entities/items/weapons/ranged/Bow.js'\r\nimport { SteelArrow } from '#/entities/items/weapons/ranged/ammo/Arrow.js'\r\n// Potions\r\nimport HealthPotion from '#/entities/items/potions/HealthPotion.js'\r\nimport StrengthPotion from '#/entities/items/potions/StrengthPotion.js'\r\nimport ManaPotion from '#/entities/items/potions/ManaPotion.js'\r\n// Spells\r\nimport { targetTypes, MagicDart, Regeneration, Pain, VampiricDraining, AnimateDead } from '#/magic/Spell.js'\r\n// effects\r\nimport { BleedEnchantment } from '#/modifiers/Enchantment.js'\r\n// Misc\r\nimport Ladder from '#/entities/misc/Ladder.js'\r\nimport { xp_levels } from '#/entities/Entity.js'\r\n\r\nfunction pathfinding(x, y) {\r\n    if (x <= 0 || x >= Game.map.width || y <= 0 || y >= Game.map.height) return false\r\n    return !Game.getTile(x, y).blocked()\r\n}\r\n\r\nexport default class Player extends Actor {\r\n    constructor(x, y, id) {\r\n        super(x, y, {\r\n            id: id,\r\n            name: 'you',\r\n            description: \"It's you!\",\r\n            fg: 'yellow',\r\n            bg: 'black',\r\n            visible: true,\r\n            targeting: false,\r\n            casting: false,\r\n            examining: false,\r\n            blocked: true,\r\n            leveled_up: true,\r\n            mouseEnabled: false,\r\n            combat: {\r\n                /* options.combat, dedicated to all things related to combat */\r\n                description: [' attacked ', ' stabbed ', ' jabbed ', ' smashed '],\r\n                /* stat caps */\r\n                maxhp: 50,\r\n                maxmana: 15,\r\n                /* current stats */\r\n                xp: 50,\r\n                level: 1,\r\n                hp: 50,\r\n                mana: 15,\r\n                str: 1,\r\n                def: 1,\r\n                /* Per-turn effects */\r\n                hpRecovery: 5,\r\n                manaRecovery: 2.5,\r\n                invulnerable: false,\r\n                /* Magic & Ranged */\r\n                validTarget: null,\r\n                currentSpell: null,\r\n                spells: [],\r\n                range: 7 // how far we can see\r\n            },\r\n            keyTimer: null\r\n        })\r\n        this.path = new ROT.Path.AStar(this.x, this.y, pathfinding)\r\n        this.nearbyEnemies = []\r\n        this.currentLevel = Game.currentLevel\r\n        // Inventory is an array of objects that contain items and an action that can be done with that item.\r\n        // You can think of the objects as individual 'slots' to store the item with actions like 'use' or 'equip'.\r\n        // Give the player a few starting items:\r\n        // - a health potion\r\n        // - a random sword (equip the sword)\r\n        let sword = new Sword(this.x, this.y, 2, 2, 'Training Sword', 35)\r\n        sword.addNewEnchantment(new BleedEnchantment())\r\n        this.addToInventory(sword)\r\n        super.equipWeapon(this.inventory[0].item)\r\n        this.addToInventory(createBow(this.x, this.y, 664))\r\n        this.addToInventory(new SteelArrow(this.x, this.y, 784, 30))\r\n        this.addToInventory(new HealthPotion(this.x, this.y, 488))\r\n        this.addToInventory(new ManaPotion(this.x, this.y, 608))\r\n\r\n        // this.addToInventory(new ManaPotion(this.x,this.y, 495));\r\n        this.cb.spells.push(new MagicDart())\r\n        // this.cb.spells.push(new Pain())\r\n        // this.cb.spells.push(new Regeneration())\r\n        // this.cb.spells.push(new VampiricDraining())\r\n        // this.cb.spells.push(new AnimateDead())\r\n\r\n        this.selectSpell(this.cb.spells[0])\r\n        this.mouseEnabled = false\r\n    }\r\n\r\n    selectSpell(spell) {\r\n        if (this.cb.spells.includes(spell)) {\r\n            this.cb.currentSpell = spell\r\n        }\r\n    }\r\n\r\n    recalculatePath() {\r\n        this.path = new ROT.Path.AStar(this.x, this.y, pathfinding)\r\n    }\r\n\r\n    interact(actor) {\r\n        super.interact(actor)\r\n        // returns true if we can continue to move to the tile\r\n        if ('cb' in actor && actor.cb.hostile) {\r\n            this.attack(actor)\r\n            if (!actor.isDead()) actor.react(this)\r\n            else return true // we can move\r\n        } else {\r\n            // non-combat interaction which leties from each actor to another,\r\n            // so we will design non-combat based actors to simply perform actions\r\n            // in a reactionary manner so that it offloads player code blocks.\r\n            actor.react(this)\r\n            return false\r\n        }\r\n    }\r\n\r\n    gain_xp(xp) {\r\n        this.cb.xp += xp\r\n        if (xp_levels[this.cb.level] <= this.cb.xp) {\r\n            this.level_up()\r\n        }\r\n    }\r\n\r\n    remainingXP() {\r\n        return xp_levels[this.cb.level] - this.cb.xp\r\n    }\r\n\r\n    level_up() {\r\n        this.cb.level += 1\r\n        this.cb.maxhp += 5\r\n        this.cb.str += 1\r\n        this.cb.hp = this.cb.maxhp\r\n        this.cb.mana = this.cb.maxmana\r\n        Game.log(`You leveled up! You are now Level ${this.cb.level}.`, 'level_up')\r\n        Game.log('Your strength and health have improved.', 'level_up')\r\n    }\r\n\r\n    act() {\r\n        super.act()\r\n        this.path = new ROT.Path.AStar(this.x, this.y, pathfinding)\r\n        this.nearbyEnemies = Game.getNearbyEnemies()\r\n        this.currentLevel = Game.currentLevel\r\n\r\n        Game.engine.lock()\r\n        window.addEventListener('keydown', this)\r\n        if (this.mouseEnabled) {\r\n            window.addEventListener('mousemove', this)\r\n            window.addEventListener('click', this)\r\n        }\r\n    }\r\n\r\n    handleEvent(evt) {\r\n        // updating our vision with the most up to date information\r\n        Object.assign(Game.map.seen_tiles, Game.map.visible_tiles)\r\n        Game.map.visible_tiles = {}\r\n\r\n        // FOV calculations\r\n        let fov = new ROT.FOV.PreciseShadowcasting((x, y) => {\r\n            return Game.inbounds(x, y) && Game.getTile(x, y).visible()\r\n        })\r\n\r\n        fov.compute(Game.player.x, Game.player.y, Game.player.cb.range, (x, y, r, visibility) => {\r\n            Game.map.visible_tiles[x + ',' + y] = true\r\n        })\r\n\r\n        let endTurn = () => {\r\n            let waitUntilPlayerReleases = evt => {\r\n                this.keyTimer = null\r\n            }\r\n            // setTimeout(() => Game.engine.unlock(), 18)\r\n            window.removeEventListener('keyup', waitUntilPlayerReleases)\r\n\r\n            window.removeEventListener('keydown', this)\r\n            window.removeEventListener('mousemove', this)\r\n            window.removeEventListener('click', this)\r\n            window.addEventListener('keyup', waitUntilPlayerReleases)\r\n            Game.clearTempLog()\r\n            Game.engine.unlock()\r\n        }\r\n\r\n        const confirmRangedFire = () => {\r\n            let tile = Game.selectedTile\r\n            let ammo = this.cb.equipment.ammo\r\n            let weapon = this.cb.equipment.weapon\r\n            let dmg = weapon.roll() + ammo.cb.damage + this.cb.str\r\n            ammo.quantity--\r\n            if (ammo.quantity === 0) {\r\n                Game.log(`You fire your last ${ammo.type.toLowerCase()}!`, 'alert')\r\n            }\r\n            // find actors on this tile\r\n            let enemies = tile.actors.filter(e => {\r\n                return e.cb !== undefined && e.cb.hostile\r\n            })\r\n            if (enemies.length > 0) {\r\n                let enemy = enemies[0]\r\n                let evtdamage = `${addPrefix(this.name).capitalize()} hit ${addPrefix(enemy.name)} with ${addPrefix(\r\n                    ammo.type.toLowerCase()\r\n                )} and dealt ${dmg} damage.`\r\n                Game.log(evtdamage, 'player_move')\r\n                enemy.damage(dmg)\r\n            } else {\r\n                Game.log(`Your ${ammo.type.toLowerCase()} didn't hit anything!`, 'alert')\r\n            }\r\n            if (ammo.quantity == 0) {\r\n                this.unequipAmmo()\r\n                this.removeFromInventory(ammo)\r\n            }\r\n            this.targeting = false\r\n            this.validTarget = null\r\n            // create an arrow sprite and move it to the fired location\r\n            // let ammoSprite = new PIXI.Sprite(Game.display.getTexture(ammo.id))\r\n            // Game.display.background.addChild(ammoSprite)\r\n            // ammoSprite.position.set(this.x * Game.display.tileSize, this.y * Game.display.tileSize)\r\n            // // ammoSprite.scale.y = -1\r\n            // ammoSprite.anchor.set(0.5)\r\n            // // Math.atan2(tile.x - this.x, tile.y - this.y)\r\n            // ammoSprite.rotation = 2.356\r\n            // let x = 0\r\n            // let y = 0\r\n            // if (tile.x < this.x) x = tile.x - this.x\r\n            // if (this.x < tile.x) x = this.x - tile.x\r\n            // if (tile.y > this.y) y = tile.y - this.y\r\n            // if (this.y < tile.y) y = this.y - tile.y\r\n            // ammoSprite.rotation += Math.atan2(x, y)\r\n            // Game.display.moveSprite(ammoSprite, tile.x, tile.y)\r\n            Game.clearSelectedTile()\r\n            endTurn()\r\n        }\r\n\r\n        const confirmSpellcasting = () => {\r\n            let tile = Game.selectedTile\r\n            // find actors on this tile\r\n            let enemies = tile.actors.filter(e => {\r\n                return e.cb !== undefined && e.cb.hostile\r\n            })\r\n            if (enemies.length > 0) {\r\n                let enemy = enemies[0]\r\n                Game.log(`You cast ${this.cb.currentSpell.name} at the ${enemies[0].name}.`, 'magic')\r\n                this.cb.currentSpell.cast(enemies[0], this)\r\n            } else {\r\n                Game.log(`You cast ${this.cb.currentSpell.name} but it hits nothing!`, 'magic')\r\n            }\r\n            this.cb.mana -= this.cb.currentSpell.manaCost\r\n            this.casting = false\r\n            this.validTarget = null\r\n            Game.clearSelectedTile()\r\n            endTurn()\r\n        }\r\n\r\n        /* Mouse controls to hover over tiles for info (describe) */\r\n        if (evt.type === 'click') {\r\n            if (this.targeting) {\r\n                if (this.validTarget) {\r\n                    confirmRangedFire()\r\n                } else {\r\n                    Game.log(\"You cannot shoot this tile because it's blocked or out of range!\", 'alert')\r\n                }\r\n            } else if (this.casting) {\r\n                if (this.validTarget) {\r\n                    confirmSpellcasting()\r\n                } else {\r\n                    Game.log(\r\n                        `You cannot cast ${this.cb.currentSpell.name} at this tile because it's blocked or too far away.`,\r\n                        'alert'\r\n                    )\r\n                }\r\n            }\r\n            // else, if the tile is within one square of the player, they can move to that tile by clicking\r\n            return\r\n        }\r\n\r\n        if (evt.type === 'mousemove') {\r\n            let tile = Game.eventToTile()\r\n            if (tile !== null) {\r\n                this.validTarget = Game.changeSelectedTile(tile)\r\n            }\r\n\r\n            setTimeout(() => {\r\n                this.mouseMoved = true\r\n            }, 18)\r\n            if (this.mouseMoved) {\r\n                this.mouseMoved = false\r\n            }\r\n            return\r\n        }\r\n\r\n        let code = evt.keyCode\r\n        let shift_pressed = evt.getModifierState('Shift')\r\n        let movementKeys = [0, 1, 2, 3, 4, 5, 6, 7]\r\n        let cycleKeys = [9, 61, 187, 191]\r\n        let confirmKeys = [101, 13, 190]\r\n        let exitKeys = [70, 27, 90, 88]\r\n        if (cycleKeys.includes(code)) {\r\n            evt.preventDefault()\r\n        }\r\n\r\n        let keyMap = {\r\n            /* Arrow Key movement */\r\n            39: 2,\r\n            37: 6,\r\n            38: 0,\r\n            40: 4,\r\n            /* Num Pad Movement */\r\n            104: 0,\r\n            105: 1,\r\n            102: 2,\r\n            99: 3,\r\n            98: 4,\r\n            97: 5,\r\n            100: 6,\r\n            103: 7,\r\n            /* Rest using '5' in numpad */\r\n            101: 'rest',\r\n            /* vi movement */\r\n            75: 0,\r\n            85: 1,\r\n            76: 2,\r\n            78: 3,\r\n            74: 4,\r\n            66: 5,\r\n            72: 6,\r\n            89: 7,\r\n            /* Fire a weapon */\r\n            70: 'fire',\r\n            /* Cast a spell */\r\n            90: 'cast',\r\n            /* Misc */\r\n            188: 'pickup',\r\n            71: 'pickup',\r\n            190: 'rest',\r\n            88: 'examine'\r\n        }\r\n\r\n        if (evt.type === 'keydown' && movementKeys.includes(keyMap[code])) {\r\n            if (this.keyTimer === null) {\r\n                this.keyTimer = new Date()\r\n            } else {\r\n                let start = this.keyTimer.getTime()\r\n                let now = new Date().getTime()\r\n                if (!(now - start >= 160)) {\r\n                    return\r\n                } else {\r\n                    // we've waited long enough, but add another timer just in case\r\n                    this.keyTimer = new Date()\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.targeting || this.casting || this.examining) {\r\n            let msg = ''\r\n            if (exitKeys.includes(code)) {\r\n                if (this.targeting) msg = `You put away your ${this.cb.equipment.weapon.type.toLowerCase()}.`\r\n                if (this.casting) msg = 'You stop casting the spell.'\r\n                if (this.examining) msg = 'You quit examining the area.'\r\n                Game.log(msg, 'information')\r\n                this.casting = this.targeting = this.examining = false\r\n                Game.clearTempLog()\r\n                Game.clearSelectedTile()\r\n            } else if (confirmKeys.includes(code)) {\r\n                if (this.validTarget) {\r\n                    if (this.casting) confirmSpellcasting()\r\n                    if (this.targeting) confirmRangedFire()\r\n                } else {\r\n                    if (this.casting)\r\n                        msg = `You cannot cast ${this.cb.currentSpell.name} at this tile because it's blocked or too far away.`\r\n                    if (this.targeting) msg = \"You cannot shoot this tile because it's blocked or out of range!\"\r\n                    if (this.examining) return\r\n                    Game.log(msg, 'alert')\r\n                }\r\n            } else if (movementKeys.includes(keyMap[code])) {\r\n                let diff = ROT.DIRS[8][keyMap[code]]\r\n                let x = Game.selectedTile.x + diff[0]\r\n                let y = Game.selectedTile.y + diff[1]\r\n                if (Game.inbounds(x, y) && Game.inViewport(x, y)) {\r\n                    Game.changeSelectedTile(Game.getTile(x, y))\r\n                    this.validTarget = !Game.selectedTile.blocked() && Game.map.visible_tiles[x + ',' + y] !== undefined\r\n                }\r\n            } else if (cycleKeys.includes(code)) {\r\n                this.validTarget = Game.cycleThroughSelectableEnemies()\r\n            }\r\n            return\r\n        }\r\n\r\n        if (!(code in keyMap)) {\r\n            // invalid key press, retry turn\r\n\r\n            return\r\n        }\r\n\r\n        if (keyMap[code] === 'rest' && !shift_pressed) {\r\n            // Rest\r\n            // this.heal(this.cb.hpRecovery);\r\n            // this.restore(this.cb.manaRecovery);\r\n            Game.log('You rest for a turn.', 'player_move')\r\n        } else if (keyMap[code] === 'pickup' && !shift_pressed) {\r\n            this.pickup()\r\n        } else if (keyMap[code] === 'rest' && shift_pressed) {\r\n            // climb down\r\n            this.climb('down')\r\n        } else if (keyMap[code] === 'pickup' && shift_pressed) {\r\n            this.climb('up')\r\n        } else if (keyMap[code] === 'fire' && !shift_pressed) {\r\n            let weapon = this.cb.equipment.weapon\r\n            let ammo = this.cb.equipment.ammo\r\n            if (\r\n                weapon !== null &&\r\n                ammo !== null &&\r\n                weapon.cb.ranged &&\r\n                ammo.cb.ammoType === weapon.cb.ammoType &&\r\n                ammo.quantity > 0\r\n            ) {\r\n                Game.log(`You take aim with your ${weapon.type.toLowerCase()}.`, 'information')\r\n                Game.log(\r\n                    `Select a target with the movement keys and press [enter] or [.] to fire your ${weapon.type.toLowerCase()}.`,\r\n                    'player_move'\r\n                )\r\n                this.validTarget = Game.selectNearestEnemyTile()\r\n                if (!this.validTarget) Game.changeSelectedTile(Game.getTile(this.x, this.y))\r\n                this.targeting = true\r\n\r\n                return\r\n            } else {\r\n                if (weapon === null || !weapon.cb.ranged) {\r\n                    Game.log(\"You don't have a ranged weapon equipped!\", 'information')\r\n                } else if (ammo === null) {\r\n                    Game.log(\"You don't have any ammunition equipped.\", 'information')\r\n                } else if (ammo.cb.ammoType !== weapon.cb.ammoType) {\r\n                    Game.log(\"You don't have the right ammunition equipped for this weapon.\", 'information')\r\n                }\r\n\r\n                return\r\n            }\r\n        } else if (keyMap[code] === 'cast') {\r\n            let currentSpell = this.cb.currentSpell\r\n            if (currentSpell === null) {\r\n                Game.log('You must select a spell to cast. Select one from the spellbook!', 'information')\r\n\r\n                return\r\n            } else if (currentSpell.manaCost > this.cb.mana) {\r\n                Game.log(`You don't have enough mana to cast ${currentSpell.name}!`, 'alert')\r\n\r\n                return\r\n            }\r\n\r\n            if (currentSpell.targetType === targetTypes.SELF) {\r\n                Game.log(`You cast ${currentSpell.name}.`, 'magic')\r\n                currentSpell.cast(this, this)\r\n                this.cb.mana -= currentSpell.manaCost\r\n            } else if (currentSpell.targetType === targetTypes.TARGET) {\r\n                Game.log('You begin casting a spell.', 'defend')\r\n                Game.log('Select a target with the movement keys and press [enter] or [.] to cast the spell.', 'player_move')\r\n\r\n                this.validTarget = Game.selectNearestEnemyTile()\r\n                if (!this.validTarget) Game.changeSelectedTile(Game.getTile(this.x, this.y))\r\n                this.casting = true\r\n                // our first selected tile can be the nearest enemy\r\n\r\n                return\r\n            }\r\n        } else if (keyMap[code] === 'examine') {\r\n            Game.log('You begin examining the area.', 'information')\r\n            this.examining = true\r\n            Game.changeSelectedTile(Game.getTile(this.x, this.y))\r\n            return\r\n        } else {\r\n            let diff = ROT.DIRS[8][keyMap[code]]\r\n            let nx = this.x + diff[0]\r\n            let ny = this.y + diff[1]\r\n            if (!this.tryMove(nx, ny)) {\r\n                return\r\n            }\r\n        }\r\n        endTurn()\r\n    }\r\n\r\n    pickup() {\r\n        let ctile = Game.map.data[this.y][this.x]\r\n        let tileItems = ctile.actors.filter(el => {\r\n            return el instanceof Item\r\n        })\r\n        if (tileItems.length === 1) {\r\n            Game.log(`You picked up a ${tileItems[0].type.toLowerCase()}.`, 'information')\r\n            Game.display.clearSprite(tileItems[0])\r\n            this.addToInventory(tileItems[0])\r\n            ctile.removeActor(tileItems[0])\r\n        } else if (tileItems.length > 1) {\r\n            let itemTypes = []\r\n            for (let item of tileItems) {\r\n                itemTypes.push(item.type.toLowerCase())\r\n                Game.display.clearSprite(item)\r\n                this.addToInventory(item)\r\n                ctile.removeActor(item)\r\n            }\r\n            let prettyItemTypes = itemTypes.slice(1, itemTypes.length - 1)\r\n            prettyItemTypes = prettyItemTypes.reduce((buf, str) => {\r\n                return buf + ', a ' + str\r\n            }, 'a  ' + itemTypes.slice(0, 1))\r\n            let lastItem = ` and a ${itemTypes.slice(-1)}.`\r\n            let buffer = `You picked up ${prettyItemTypes + lastItem}`\r\n            Game.log(buffer, 'information')\r\n        } else {\r\n            Game.log(\"There's nothing to pick up.\", 'information')\r\n        }\r\n    }\r\n\r\n    // Overriding the actor\r\n    equipWeapon(item) {\r\n        super.equipWeapon(item)\r\n        Game.log(`You wield the ${item.type.toLowerCase()}.`, 'information')\r\n    }\r\n\r\n    unequipWeapon() {\r\n        if (this.cb.equipment.weapon !== null) {\r\n            this.cb.equipment.weapon.cb.equipped = false\r\n            this.cb.equipment.weapon = null\r\n        } else {\r\n            throw 'Tried to uneqip weapon but no item was equipped.'\r\n        }\r\n    }\r\n\r\n    unequipAmmo() {\r\n        if (this.cb.equipment.ammo !== null) {\r\n            this.cb.equipment.ammo.cb.equipped = false\r\n            this.cb.equipment.ammo = null\r\n        } else {\r\n            throw 'Tried to uneqip ammo but no item was equipped.'\r\n        }\r\n    }\r\n\r\n    climb(dir) {\r\n        let ctile = Game.map.data[this.y][this.x]\r\n        let ladder = ctile.actors.filter(a => {\r\n            return a instanceof Ladder\r\n        })[0]\r\n        if (ladder === undefined || ladder.direction !== dir) {\r\n            Game.log(`You cannot climb ${dir} here.`, 'information')\r\n        } else {\r\n            ladder.react(this)\r\n        }\r\n    }\r\n\r\n    tryMove(nx, ny) {\r\n        // returns true if the turn should end here\r\n        if (!Game.inbounds(nx, ny)) return\r\n        let ntile = Game.getTile(nx, ny) // new tile to move to\r\n        if (ntile.actors.length === 0 && !ntile.blocked()) {\r\n            this.move(nx, ny)\r\n            Game.clearSelectedTile()\r\n            return true\r\n        } else if (ntile.actors.length > 0) {\r\n            for (let i = 0; i < ntile.actors.length; i++) {\r\n                let actor = ntile.actors[i]\r\n                if (actor.blocked) {\r\n                    this.interact(actor)\r\n                    return true\r\n                }\r\n            }\r\n        }\r\n\r\n        if (!ntile.blocked()) {\r\n            this.move(nx, ny)\r\n            Game.clearSelectedTile()\r\n            return true\r\n        }\r\n\r\n        return false\r\n    }\r\n\r\n    attack(actor) {\r\n        let dmg = super.attack(actor)\r\n    }\r\n\r\n    death() {\r\n        super.death()\r\n        window.removeEventListener('keydown', this)\r\n        this.cb.hp = 0\r\n        // Game.scheduler.remove(Game.player);\r\n        Game.scheduler.clear()\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/Player.js","/**\r\n * Created by Larken on 6/28/2017.\r\n */\r\nimport * as PIXI from 'pixi.js'\r\nimport { Game } from '#/Game.js'\r\nimport Player from '#/entities/actors/Player.js'\r\nexport function getTileInfo(id) {\r\n\t/*\r\n     \"FOV\": boolean,\r\n     \"FOV_id\": int,\r\n     \"animated\": boolean,\r\n     \"animated_id\": int,\r\n     \"bg\": color,\r\n     \"blocked\":boolean,\r\n     \"blocks_vision\": boolean,\r\n     \"entity\": boolean,\r\n     */\r\n\t// console.log(tileset.tileproperties[id]);\r\n\treturn Game.display.tileset.tileproperties[id + '']\r\n}\r\n\r\nexport default class Tile {\r\n\tconstructor(x, y) {\r\n\t\tthis.x = x\r\n\t\tthis.y = y\r\n\t\tthis.actors = []\r\n\t\tthis.obstacles = []\r\n\t}\r\n\r\n\tupdateTileInfo(id) {\r\n\t\tlet obstacle = {}\r\n\t\tif (id in Game.display.tileset.tileproperties) {\r\n\t\t\t// just means there are no tile properties for this guy\r\n\t\t\tobstacle = getTileInfo(id)\r\n\t\t}\r\n\t\tobstacle.id = id\r\n\t\tthis.obstacles.push(obstacle) // add to the end of the obstacles to be drawn on top\r\n\t}\r\n\r\n\t/* Indicates whether or not a tile is blocked; however, this excludes the player for AI purposes. */\r\n\tblocked() {\r\n\t\t// TODO: fix it so that this actually fires off properly without blocking enemies from moving\r\n\t\t/*\r\n        for (let actor of this.actors) {\r\n            if (actor.blocked)\r\n                return true;\r\n        }\r\n        */\r\n\t\tif (this.obstacles.length > 0) return this.obstacles[this.obstacles.length - 1].blocked\r\n\t\treturn false\r\n\t}\r\n\r\n\tvisible() {\r\n\t\treturn !(\r\n\t\t\tthis.obstacles.some(el => {\r\n\t\t\t\treturn el.blocks_vision\r\n\t\t\t}) ||\r\n\t\t\tthis.actors.some(el => {\r\n\t\t\t\treturn !el.visible\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n\r\n\tremoveActor(a) {\r\n\t\tlet idx = this.actors.findIndex(actor => {\r\n\t\t\treturn Object.is(a, actor)\r\n\t\t})\r\n\t\tthis.actors.splice(idx, 1)\r\n\t}\r\n\r\n\tbg() {\r\n\t\tlet obstacles = this.obstacles\r\n\t\tif (\r\n\t\t\t!obstacles.some(e => {\r\n\t\t\t\treturn 'bg' in e\r\n\t\t\t})\r\n\t\t) {\r\n\t\t\treturn 'black'\r\n\t\t} else {\r\n\t\t\tfor (let i = obstacles.length - 1; i >= 0; i--) {\r\n\t\t\t\tlet obs = obstacles[i]\r\n\t\t\t\tif ('bg' in obs) return obs.bg\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/map/Tile.js","/**\r\n * Created by larken on 7/12/17.\r\n */\r\n\r\nimport {Actor} from '#/entities/actors/Actor.js'\r\n\r\nexport default class NPC extends Actor {\r\n\tconstructor(x, y, id) {\r\n\t\tsuper(x, y, {\r\n\t\t\tid: id,\r\n\t\t\tname : 'non-player character',\r\n\t\t\tvisible: true,\r\n\t\t\tblocked: true,\r\n\t\t\tcombat: {\r\n\t\t\t\thostile: false\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/NPC.js","/**\r\n * Created by Larken on 6/22/2017.\r\n */\r\nimport ROT from 'rot-js'\r\nimport { StatelessAI } from '#/entities/actors/enemies/StatelessAI.js'\r\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\r\nimport { createSword, Sword } from '#/entities/items/weapons/Sword.js'\r\nimport HealthPotion from '#/entities/items/potions/HealthPotion.js'\r\nimport StrengthPotion from '#/entities/items/potions/StrengthPotion.js'\r\nimport ManaPotion from '#/entities/items/potions/ManaPotion.js'\r\nimport { Game } from '#/Game.js'\r\nimport { SteelArrow } from '#/entities/items/weapons/ranged/ammo/Arrow.js'\r\n\r\nexport default class Goblin extends StatelessAI {\r\n\tconstructor(x, y, id) {\r\n\t\tlet randomHP = getRandomInt(6, 9)\r\n\t\tlet randomStr = getRandomInt(1, 3)\r\n\t\tsuper(\r\n\t\t\tx,\r\n\t\t\ty,\r\n\t\t\t{\r\n\t\t\t\tid: id,\r\n\t\t\t\tname: 'goblin',\r\n\t\t\t\tdescription: 'A mean, green goblin!',\r\n\t\t\t\tvisible: true,\r\n\t\t\t\tblocked: true,\r\n\t\t\t\tchasing: false,\r\n\t\t\t\tcombat: {\r\n\t\t\t\t\t/* options.combat, dedicated to all things related to combat */\r\n\t\t\t\t\tdescription: [' attacked '],\r\n\t\t\t\t\t/* max stats */\r\n\t\t\t\t\tmaxhp: randomHP,\r\n\t\t\t\t\tmaxmana: 5,\r\n\t\t\t\t\t/* current stats */\r\n\t\t\t\t\thp: randomHP,\r\n\t\t\t\t\tmana: 5,\r\n\t\t\t\t\tstr: randomStr,\r\n\t\t\t\t\tdef: 1,\r\n\t\t\t\t\t/* misc */\r\n\t\t\t\t\thostile: true,\r\n\t\t\t\t\trange: 9,\r\n\t\t\t\t\tinvulnerable: false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t/* AI parameters */\r\n\t\t\t\tmorale: 0.2,\r\n\t\t\t\tminPlayerDist: 0,\r\n\t\t\t\tmaxPlayerDist: 0,\r\n\t\t\t\tranged: false,\r\n\t\t\t\tmelee: true,\r\n\t\t\t\tmagic: false\r\n\t\t\t}\r\n\t\t)\r\n\r\n\t\tif (getRandomInt(1, 10) < 2) {\r\n\t\t\tlet items = getItemsFromDropTable({\r\n\t\t\t\tminItems: 0,\r\n\t\t\t\tmaxItems: 1,\r\n\t\t\t\tdropTable: {\r\n\t\t\t\t\tSTRENGTH_POTION: 3,\r\n\t\t\t\t\tHEALTH_POTION: 2,\r\n\t\t\t\t\tMANA_POTION: 2,\r\n\t\t\t\t\tSTEEL_ARROW: 2,\r\n\t\t\t\t\tSWORD: 0\r\n\t\t\t\t},\r\n\t\t\t\tx: this.x,\r\n\t\t\t\ty: this.y\r\n\t\t\t})\r\n\t\t\titems.forEach(item => this.addToInventory(item))\r\n\t\t}\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Goblin.js","/**\r\n * Created by Larken on 6/22/2017.\r\n */\r\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\r\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\r\nimport { createSword, Sword } from '#/entities/items/weapons/Sword.js'\r\nimport HealthPotion from '#/entities/items/potions/HealthPotion.js'\r\nimport StrengthPotion from '#/entities/items/potions/StrengthPotion.js'\r\nimport { Game } from '#/Game.js'\r\nimport { SteelArrow } from '#/entities/items/weapons/ranged/ammo/Arrow.js'\r\n\r\nexport default class Kobold extends SimpleEnemy {\r\n\tconstructor(x, y, id, ranged = false) {\r\n\t\tlet randomHP = getRandomInt(20, 25)\r\n\t\tlet randomStr = getRandomInt(5, 7)\r\n\t\tsuper(x, y, {\r\n\t\t\tid: id,\r\n\t\t\tname: 'Kobold',\r\n\t\t\tdescription: 'A cold-blooded kobold!',\r\n\t\t\tvisible: true,\r\n\t\t\tblocked: true,\r\n\t\t\tchasing: false,\r\n\t\t\tcombat: {\r\n\t\t\t\t/* options.combat, dedicated to all things related to combat */\r\n\t\t\t\tdescription: [' attacked '],\r\n\t\t\t\t/* max stats */\r\n\t\t\t\tmaxhp: randomHP,\r\n\t\t\t\tmaxmana: 5,\r\n\t\t\t\t/* current stats */\r\n\t\t\t\thp: randomHP,\r\n\t\t\t\tmana: 5,\r\n\t\t\t\tstr: randomStr,\r\n\t\t\t\tdef: 1,\r\n\t\t\t\t/* misc */\r\n\t\t\t\thostile: true,\r\n\t\t\t\trange: 9,\r\n\t\t\t\tinvulnerable: false\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tlet items = getItemsFromDropTable({\r\n\t\t\tminItems: 0,\r\n\t\t\tmaxItems: 2,\r\n\t\t\tdropTable: {\r\n\t\t\t\tSTRENGTH_POTION: 1,\r\n\t\t\t\tHEALTH_POTION: 1,\r\n\t\t\t\tSTEEL_ARROW: 2,\r\n\t\t\t\tSWORD: 1\r\n\t\t\t},\r\n\t\t\tx: this.x,\r\n\t\t\ty: this.y\r\n\t\t})\r\n\t\titems.forEach(item => this.addToInventory(item))\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Kobold.js","/**\r\n * Created by Larken on 7/5/2017.\r\n */\r\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\r\nimport HealthPotion from '#/entities/items/potions/HealthPotion.js'\r\nimport StrengthPotion from '#/entities/items/potions/StrengthPotion.js'\r\nimport ManaPotion from '#/entities/items/potions/ManaPotion.js'\r\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\r\nimport { Sword } from '#/entities/items/weapons/Sword.js'\r\nimport { Game } from '#/Game.js'\r\nimport ROT from 'rot-js'\r\nimport { SteelArrow } from '#/entities/items/weapons/ranged/ammo/Arrow.js'\r\n\r\nexport default class Orc extends SimpleEnemy {\r\n\tconstructor(x, y, id, empowered = false) {\r\n\t\tlet randomHP = getRandomInt(30, 35)\r\n\t\tlet randomStr = getRandomInt(5, 10)\r\n\t\tsuper(x, y, {\r\n\t\t\tid: id,\r\n\t\t\tname: empowered ? 'Empowered Orc' : 'orc',\r\n\t\t\tdescription: 'All bronze and no brains!',\r\n\t\t\tvisible: true,\r\n\t\t\tblocked: true,\r\n\t\t\tchasing: false,\r\n\t\t\tcombat: {\r\n\t\t\t\t/* options.combat, dedicated to all things related to combat */\r\n\t\t\t\tdescription: [' attacked '],\r\n\t\t\t\t/* max stats */\r\n\t\t\t\tmaxhp: randomHP,\r\n\t\t\t\tmaxmana: 5,\r\n\t\t\t\t/* current stats */\r\n\t\t\t\thp: randomHP,\r\n\t\t\t\tmana: 5,\r\n\t\t\t\tstr: randomStr,\r\n\t\t\t\tdef: 1,\r\n\t\t\t\t/* misc */\r\n\t\t\t\thostile: true,\r\n\t\t\t\trange: 5,\r\n\t\t\t\tinvulnerable: false,\r\n\t\t\t\tempowered: empowered\r\n\t\t\t}\r\n\t\t})\r\n\t\tif (getRandomInt(1, 10) < 5) {\r\n\t\t\tlet items = getItemsFromDropTable({\r\n\t\t\t\tminItems: 0,\r\n\t\t\t\tmaxItems: 2,\r\n\t\t\t\tdropTable: {\r\n\t\t\t\t\tSTRENGTH_POTION: 1,\r\n\t\t\t\t\tHEALTH_POTION: 1,\r\n\t\t\t\t\tSTEEL_ARROW: 1,\r\n\t\t\t\t\tMANA_POTION: 1,\r\n\t\t\t\t\tSWORD: 1\r\n\t\t\t\t},\r\n\t\t\t\tx: this.x,\r\n\t\t\t\ty: this.y\r\n\t\t\t})\r\n\t\t\titems.forEach(item => this.addToInventory(item))\r\n\t\t}\r\n\t}\r\n\r\n\tinteract(actor) {\r\n\t\tif (actor === Game.player) {\r\n\t\t\tlet dmg = this.attack(actor)\r\n\t\t\tif (this.cb.empowered) {\r\n\t\t\t\tlet amtHealed = Math.floor(dmg / 2)\r\n\t\t\t\tGame.log(`The empowered orc steals your health and regenerates ${amtHealed} health!`, 'alert')\r\n\t\t\t\tthis.heal(amtHealed)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tactor.react(this)\r\n\t\t}\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Orc.js","/**\r\n * Created by Larken on 6/22/2017.\r\n */\r\nimport { Game } from '#/Game.js'\r\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\r\n\r\nexport default class Rat extends SimpleEnemy {\r\n\tconstructor(x, y, id) {\r\n\t\tsuper(x, y, {\r\n\t\t\tid: id,\r\n\t\t\tname: 'rat',\r\n\t\t\tdescription: 'A fat rat!',\r\n\t\t\tsymbol: 'r',\r\n\t\t\tfg: 'grey',\r\n\t\t\tbg: 'seagreen',\r\n\t\t\tvisible: true,\r\n\t\t\tblocked: true,\r\n\t\t\tchasing: false,\r\n\t\t\tcombat: {\r\n\t\t\t\t/* options.combat, dedicated to all things related to combat */\r\n\t\t\t\tdescription: [' attacked '],\r\n\t\t\t\t/* max stats */\r\n\t\t\t\tmaxhp: 3,\r\n\t\t\t\tmaxmana: 0,\r\n\t\t\t\t/* current stats */\r\n\t\t\t\thp: 3,\r\n\t\t\t\tmana: 0,\r\n\t\t\t\tstr: 1,\r\n\t\t\t\tdef: 0,\r\n\t\t\t\t/* misc */\r\n\t\t\t\thostile: true,\r\n\t\t\t\trange: 4,\r\n\t\t\t\tinvulnerable: false\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Rat.js","/**\r\n * Created by Larken on 6/22/2017.\r\n */\r\nimport ROT from 'rot-js'\r\nimport { StatelessAI } from '#/entities/actors/enemies/StatelessAI.js'\r\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\r\nimport { createSword, Sword } from '#/entities/items/weapons/Sword.js'\r\nimport HealthPotion from '#/entities/items/potions/HealthPotion.js'\r\nimport StrengthPotion from '#/entities/items/potions/StrengthPotion.js'\r\nimport ManaPotion from '#/entities/items/potions/ManaPotion.js'\r\nimport { Game } from '#/Game.js'\r\nimport { SteelArrow } from '#/entities/items/weapons/ranged/ammo/Arrow.js'\r\n\r\nexport default class Bat extends StatelessAI {\r\n\tconstructor(x, y, id) {\r\n\t\tlet randomHP = getRandomInt(4, 8)\r\n\t\tlet randomStr = getRandomInt(1, 2)\r\n\t\tsuper(\r\n\t\t\tx,\r\n\t\t\ty,\r\n\t\t\t{\r\n\t\t\t\tid: id,\r\n\t\t\t\tname: 'bat',\r\n\t\t\t\tdescription: 'A creature of the night!',\r\n\t\t\t\tvisible: true,\r\n\t\t\t\tblocked: true,\r\n\t\t\t\tchasing: false,\r\n\t\t\t\tcombat: {\r\n\t\t\t\t\t/* options.combat, dedicated to all things related to combat */\r\n\t\t\t\t\tdescription: [' attacked '],\r\n\t\t\t\t\t/* max stats */\r\n\t\t\t\t\tmaxhp: randomHP,\r\n\t\t\t\t\tmaxmana: 5,\r\n\t\t\t\t\t/* current stats */\r\n\t\t\t\t\thp: randomHP,\r\n\t\t\t\t\tmana: 5,\r\n\t\t\t\t\tstr: randomStr,\r\n\t\t\t\t\tdef: 1,\r\n\t\t\t\t\t/* misc */\r\n\t\t\t\t\thostile: true,\r\n\t\t\t\t\trange: 9,\r\n\t\t\t\t\tinvulnerable: false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t/* AI parameters */\r\n\t\t\t\tmorale: 0.4,\r\n\t\t\t\tminPlayerDist: 0,\r\n\t\t\t\tmaxPlayerDist: 0,\r\n\t\t\t\tranged: false,\r\n\t\t\t\tmelee: true,\r\n\t\t\t\tmagic: false\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Bat.js","/**\r\n * Created by Larken on 7/8/2017.\r\n */\r\n\r\nimport { Game } from '#/Game.js'\r\nimport { Entity } from '#/entities/Entity.js'\r\n\r\nexport default class Chest extends Entity {\r\n    constructor(x, y, id) {\r\n        super(x, y, {\r\n            name: 'chest',\r\n            id: id,\r\n            visible: true,\r\n            blocked: true\r\n        })\r\n        this.closed = true\r\n        this.items = []\r\n    }\r\n\r\n    react(actor) {\r\n        if (this.closed) {\r\n            this.open()\r\n        } else {\r\n            // open up an inventory screen of items in the chest?\r\n            if (this.items.length === 0) {\r\n                Game.log(\"There's nothing left in this chest!\", 'information')\r\n            } else {\r\n                Game.log('You collect everything from the chest.', 'information')\r\n                for (let item of this.items) actor.addToInventory(item)\r\n\r\n                this.items = []\r\n            }\r\n        }\r\n    }\r\n\r\n    addToInventory(item) {\r\n        this.items.push(item)\r\n    }\r\n\r\n    open() {\r\n        this.closed = false\r\n        this.id = Game.display.tileset.tileproperties[this.id].activated_id\r\n        this.sprite.texture = Game.display.tilesetMapping[this.id]\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/misc/Chest.js","import Item from '#/entities/items/Item.js'\r\nimport {Game} from '#/Game.js'\r\n\r\nexport default class Key extends Item {\r\n\r\n\tconstructor(x, y, id) {\r\n\t\tsuper(x, y, {\r\n\t\t\tid: id,\r\n\t\t\ttype: 'Key'\r\n\t\t})\r\n\t}\r\n\r\n\thoverInfo() {\r\n\t\treturn ''\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/misc/Key.js","import Item from '#/entities/items/Item.js'\r\nimport * as magic from '#/magic/Spell.js'\r\nimport { Game } from '#/Game.js'\r\n\r\nexport class Spellbook extends Item {\r\n\tconstructor(x, y, id, options) {\r\n\t\tsuper(x, y, {\r\n\t\t\tid: id,\r\n\t\t\taction: 'Read',\r\n\t\t\ttype: 'Spellbook',\r\n\t\t\t...options\r\n\t\t})\r\n\t}\r\n\r\n\tuse() {\r\n\t\tfor (let spell of this.spells) {\r\n\t\t\tif (\r\n\t\t\t\t!Game.player.cb.spells.some(s => {\r\n\t\t\t\t\treturn s.name === spell.name\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\t\tGame.player.cb.spells.push(spell)\r\n\t\t}\r\n\t\tGame.player.removeFromInventory(this)\r\n\t}\r\n\r\n\thoverInfo() {\r\n\t\t// return `${this.type}${this.name}\\n`\r\n\t}\r\n}\r\n\r\nexport class NecromancySpellBook extends Spellbook {\r\n\tconstructor(x, y, id) {\r\n\t\tsuper(x, y, id, {\r\n\t\t\tspells: [\r\n\t\t\t\tnew magic.Pain(),\r\n\t\t\t\tnew magic.VampiricDraining(),\r\n\t\t\t\tnew magic.AnimateDead(),\r\n\t\t\t\tnew magic.Regeneration()\r\n\t\t\t],\r\n\t\t\tname: 'Book of Death'\r\n\t\t})\r\n\t}\r\n\r\n\tuse() {\r\n\t\tsuper.use()\r\n\t\tGame.log(\r\n\t\t\t'You have learned necromancy spells...but at what cost?',\r\n\t\t\t'lightgreen'\r\n\t\t)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/misc/Spellbook.js","import { Game } from '#/Game.js'\r\nimport { Entity } from '#/entities/Entity.js'\r\n\r\nexport default class LevelTransition extends Entity {\r\n    constructor(x, y, id, dir) {\r\n        super(x, y, {\r\n            id: id,\r\n            name: 'path',\r\n            direction: dir,\r\n            description: 'A path leading to a new area!',\r\n            fg: 'brown',\r\n            bg: 'orange',\r\n            blocked: true,\r\n            visible: true\r\n        })\r\n        this.portal = null\r\n    }\r\n\r\n    act() {}\r\n\r\n    react(actor) {\r\n        Game.log(`You leave the ${Game.currentLevel.name} and go to the ${this.portal}.`, 'information')\r\n        Game.changeLevels(this.portal)\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/misc/LevelTransition.js","import { Game, tileset } from '#/Game.js'\r\nimport Tile, { getTileInfo } from '#/map/Tile.js'\r\n// Entities\r\nimport Player from '#/entities/actors/Player.js'\r\nimport NPC from '#/entities/actors/NPC.js'\r\n// Enemies\r\nimport Goblin from '#/entities/actors/enemies/Goblin.js'\r\nimport Kobold from '#/entities/actors/enemies/Kobold.js'\r\nimport Orc from '#/entities/actors/enemies/Orc.js'\r\nimport Rat from '#/entities/actors/enemies/Rat.js'\r\nimport Bat from '#/entities/actors/enemies/Bat.js'\r\nimport Skeleton from '#/entities/actors/enemies/Skeleton.js'\r\nimport Zombie from '#/entities/actors/enemies/Zombie.js'\r\nimport { Corpse, corpseTypes } from '#/entities/items/misc/Corpse.js'\r\n\r\nimport Lich from '#/entities/actors/enemies/boss/Lich.js'\r\n// Items\r\n// Weapons\r\nimport { createSword, Sword } from '#/entities/items/weapons/Sword.js'\r\nimport { Bow, createBow } from '#/entities/items/weapons/ranged/Bow.js'\r\nimport { SteelArrow } from '#/entities/items/weapons/ranged/ammo/Arrow.js'\r\n// Potions\r\nimport HealthPotion from '#/entities/items/potions/HealthPotion.js'\r\nimport StrengthPotion from '#/entities/items/potions/StrengthPotion.js'\r\nimport ManaPotion from '#/entities/items/potions/ManaPotion.js'\r\n// Misc\r\nimport Chest from '#/entities/misc/Chest.js'\r\nimport Door from '#/entities/misc/Door.js'\r\nimport LockedDoor from '#/entities/misc/LockedDoor.js'\r\nimport Key from '#/entities/items/misc/Key.js'\r\nimport { NecromancySpellBook } from '#/entities/items/misc/Spellbook.js'\r\nimport Ladder from '#/entities/misc/Ladder.js'\r\nimport LevelTransition from '#/entities/misc/LevelTransition.js'\r\n\r\nexport const entityShop = {\r\n    0: (x, y, id) => {\r\n        return new Player(x, y, id)\r\n    },\r\n    1: (x, y, id) => {\r\n        return new Goblin(x, y, id)\r\n    },\r\n    2: (x, y, id) => {\r\n        return new Rat(x, y, id)\r\n    },\r\n    3: (x, y, id) => {\r\n        return new Ladder(x, y, id, 'down')\r\n    },\r\n    4: (x, y, id) => {\r\n        return new Ladder(x, y, id, 'up')\r\n    },\r\n    5: (x, y, id) => {\r\n        return createSword(x, y, id)\r\n    },\r\n    6: (x, y, id) => {\r\n        return new NPC(x, y, id)\r\n    },\r\n    7: (x, y, id) => {\r\n        // normal Orc\r\n        return new Orc(x, y, id)\r\n    },\r\n    8: (x, y, id) => {\r\n        // empowered Orc\r\n        return new Orc(x, y, id, true)\r\n    },\r\n    9: (x, y, id) => {\r\n        return new Door(x, y, id)\r\n    },\r\n    10: (x, y, id) => {\r\n        return new Chest(x, y, id)\r\n    },\r\n    11: (x, y, id) => {\r\n        return new HealthPotion(x, y, id)\r\n    },\r\n    12: (x, y, id) => {\r\n        return new StrengthPotion(x, y, id)\r\n    },\r\n    13: (x, y, id) => {\r\n        return new ManaPotion(x, y, id)\r\n    },\r\n    14: (x, y, id) => {\r\n        return new Sword(x, y, 4, 7, 'Orc Purifier', id)\r\n    },\r\n    15: (x, y, id) => {\r\n        return new Key(x, y, id)\r\n    },\r\n    16: (x, y, id) => {\r\n        return new LockedDoor(x, y, id)\r\n    },\r\n    17: (x, y, id) => {\r\n        return createBow(x, y, id)\r\n    },\r\n    18: (x, y, id) => {\r\n        return new SteelArrow(x, y, id, 5)\r\n    },\r\n    19: (x, y, id) => {\r\n        return new Kobold(x, y, id)\r\n    },\r\n    20: (x, y, id) => {\r\n        return new Bat(x, y, id)\r\n    },\r\n    21: (x, y, id) => {\r\n        return new Lich(x, y, id)\r\n    },\r\n    22: (x, y, id) => {\r\n        return new LevelTransition(x, y, id)\r\n    },\r\n    23: (x, y, id) => {\r\n        return new Zombie(x, y, id)\r\n    },\r\n    24: (x, y, id) => {\r\n        return new Skeleton(x, y, id)\r\n    },\r\n    25: (x, y, id) => {\r\n        return new Corpse(x, y, 'zombie', id)\r\n    },\r\n    26: (x, y, id) => {\r\n        return new Corpse(x, y, 'skeleton', id)\r\n    },\r\n    27: (x, y, id) => {\r\n        return new NecromancySpellBook(x, y, id)\r\n    }\r\n}\r\n\r\nexport function createEntity(x, y, entity_id, frame_id) {\r\n    if (entity_id in entityShop) {\r\n        return entityShop[entity_id](x, y, frame_id)\r\n    } else {\r\n        throw `No entity assigned to ID ${entity_id} for frame ${frame_id} at ${x + ',' + y}`\r\n    }\r\n}\r\n\r\nexport function createMapFromJSON(json) {\r\n    let { layers, width, height } = json\r\n    let gameMap = new GameMap(width, height)\r\n    gameMap.createFromJSON(json)\r\n    return gameMap\r\n}\r\n/**\r\n * Created by Larken on 6/28/2017.\r\n */\r\nexport class GameMap {\r\n    constructor(width, height) {\r\n        this.loadedIDS = []\r\n        this.playerLocation = null // this field is used exclusively for saving the player's last location before they change levels\r\n        this.width = width\r\n        this.height = height\r\n        this.actors = [] // store all of the actors in array\r\n        this.data = new Array(this.height) // stores all tiles in the game\r\n        this.visible_tiles = {}\r\n        this.seen_tiles = {}\r\n        // Intialize all of the tiles...\r\n        for (let i = 0; i < this.height; i++) {\r\n            this.data[i] = new Array(this.width)\r\n            for (let j = 0; j < this.width; j++) {\r\n                this.data[i][j] = new Tile(j, i)\r\n            }\r\n        }\r\n        // Process all of the json layers\r\n        // process the group layers last. this is specifically for placing static itemsets into treasure chests in the overworld.\r\n        // process it last so that all of the chest entities have been created already\r\n    }\r\n\r\n    getTile(x, y) {\r\n        return this.data[y][x]\r\n    }\r\n\r\n    createFromJSON({ layers }) {\r\n        let itemLayers = []\r\n        let portalLayers = []\r\n        for (let layer of layers) {\r\n            // Obstacle Layer\r\n            if (layer.properties.obstacles === true) this.processObstacleLayer(layer)\r\n            else if (layer.properties.items === true) itemLayers.push(layer)\r\n            else if (layer.properties.actors === true) this.processActorLayer(layer)\r\n            else if (layer.properties.portal === true) portalLayers.push(layer)\r\n            else throw 'A layer has been added to the map and is invalid'\r\n        }\r\n        // if (this.playerLocation === null) throw \"Error - no player starting position!\";\r\n        // add chest items to chests where appropriate\r\n        for (let layer of itemLayers) {\r\n            this.processItemLayer(layer)\r\n        }\r\n\r\n        for (let layer of portalLayers) {\r\n            this.processPortalLayer(layer)\r\n        }\r\n    }\r\n\r\n    processObstacleLayer(layer) {\r\n        for (let i = 0; i < this.height; i++) {\r\n            for (let j = 0; j < this.width; j++) {\r\n                // Grabs the ID from the layer\r\n                let id = layer.data[i * this.width + j] - 1\r\n                if (id > 1) {\r\n                    Game.loadedIDS.push(id)\r\n                    this.data[i][j].updateTileInfo(id)\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    processActorLayer(layer) {\r\n        // console.log(\"Loading actors...\");\r\n        for (let i = 0; i < this.height; i++) {\r\n            for (let j = 0; j < this.width; j++) {\r\n                let id = layer.data[i * this.width + j] - 1 // grab the id in the json data\r\n                if (id > 1) {\r\n                    // id of zero indicates no actor in this spot\r\n                    Game.loadedIDS.push(id)\r\n                    let properties = getTileInfo(id)\r\n                    if (properties.entity !== true) throw 'Bad entity creation for tile ' + id\r\n                    if (properties.entity_id === 0) {\r\n                        this.playerLocation = [j, i]\r\n                        this.playerID = id\r\n                    } else {\r\n                        let newActor = createEntity(j, i, properties.entity_id, id)\r\n                        this.actors.push(newActor) // add to the list of all actors\r\n                        this.data[i][j].actors.push(newActor) // also push to the tiles' actors\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    processItemLayer(layer) {\r\n        for (let i = 0; i < this.height; i++) {\r\n            for (let j = 0; j < this.width; j++) {\r\n                let id = layer.data[i * this.width + j] - 1 // grab the id in the json data\r\n                if (id > 1) {\r\n                    // id of zero indicates no actor in this spot\r\n                    Game.loadedIDS.push(id)\r\n                    let properties = getTileInfo(id)\r\n                    if (properties.entity !== true) throw 'Bad entity creation for tile ' + id\r\n                    let newActor = createEntity(j, i, properties.entity_id, id)\r\n                    this.actors.push(newActor) // add to the list of all actors\r\n                    this.findActor(j, i).addToInventory(newActor)\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    processPortalLayer(layer) {\r\n        for (let i = 0; i < this.height; i++) {\r\n            for (let j = 0; j < this.width; j++) {\r\n                let id = layer.data[i * this.width + j] - 1 // grab the id in the json data\r\n                if (id > 1) {\r\n                    // id of zero indicates no actor in this spot\r\n                    Game.loadedIDS.push(id)\r\n                    let properties = getTileInfo(id)\r\n                    // now we've got a portal cell that tells us where a ladder should lead\r\n                    // find the ladder at this location\r\n                    let ladders = this.data[i][j].actors.filter(a => {\r\n                        return a instanceof Ladder || a instanceof LevelTransition // throwing in condition that it can also be level transition\r\n                    })\r\n                    if (ladders.length === 0) {\r\n                        throw 'tried to create a portal link for a ladder or level transition but neither was found'\r\n                    } else {\r\n                        ladders[0].portal = properties.level\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    print() {\r\n        let buf = ''\r\n        for (let i = 0; i < this.height; i++) {\r\n            let row = ''\r\n            for (let j = 0; j < this.width; j++) row += this.data[i][j].symbol //+ \" \";\r\n            buf += row + '\\n'\r\n        }\r\n\r\n        for (let i = 0; i < this.actors.length; i++) {\r\n            let actor = this.actors[i]\r\n            /* to calculate where the actor should go, we have to consider\r\n             the new line character in each line of the buffer, which is equal\r\n             to the actor's y coord. */\r\n            let index = actor.y * this.width + actor.x + actor.y\r\n            buf = buf.substr(0, index) + actor.symbol + buf.substr(index + 1)\r\n        }\r\n        console.log(buf)\r\n    }\r\n\r\n    findActor(x, y) {\r\n        let chests = this.data[y][x].actors.filter(a => {\r\n            return a instanceof Chest\r\n        })\r\n        // if there are no chests, then that means we need to find an actor who should have all of the items added to\r\n        if (chests.length === 0) {\r\n            let possibleActors = this.data[y][x].actors\r\n            if (possibleActors.length === 0) throw `There's no actor in which an item can be placed at (${x},${y})`\r\n            return possibleActors[0]\r\n        } else {\r\n            return chests[0]\r\n        }\r\n    }\r\n\r\n    /* Returns the tiles adjacent to the given tile */\r\n    adjTiles(tile) {\r\n        let adjacentTiles = []\r\n        for (let dist of ROT.DIRS[8]) {\r\n            let nx = tile.x + dist[0]\r\n            let ny = tile.y + dist[1]\r\n            if (!(nx < 0 || nx === this.width || ny < 0 || ny === this.height)) adjacentTiles.push(this.data[ny][nx])\r\n        }\r\n        return adjacentTiles\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/map/GameMap.js","/**\r\n * Created by Larken on 7/8/2017.\r\n */\r\nimport {Game, tileset} from '#/Game.js'\r\nimport Door from '#/entities/misc/Door.js'\r\nimport Key from '#/entities/items/misc/Key.js'\r\n\r\nexport default class LockedDoor extends Door {\r\n\tconstructor(x, y, id) {\r\n\t\tsuper(x, y, id)\r\n\t\tthis.name = 'locked door'\r\n\t}\r\n\r\n\treact(actor) {\r\n\t\tif (this.closed && actor === Game.player) {\r\n\t\t\t// if it's closed, then we need to make sure this\r\n\t\t\t// actor who is trying to open the door has a key\r\n\t\t\tlet keys = actor.items().filter((i) => {\r\n\t\t\t\treturn i instanceof Key\r\n\t\t\t})\r\n\t\t\tif (keys.length === 0) {\r\n\t\t\t\tGame.log('You need a key to open this door.', 'alert')\r\n\t\t\t} else {\r\n\t\t\t\tGame.log('You use a key to unlock the door.', 'player_move')\r\n\t\t\t\tactor.removeFromInventory(keys[0])\r\n\t\t\t\tthis.openDoor()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/misc/LockedDoor.js","import { Actor } from '#/entities/actors/Actor.js'\r\nimport { Game } from '#/Game.js'\r\nimport ROT from 'rot-js'\r\n\r\nimport { targetTypes, MagicDart, Regeneration, Pain, VampiricDraining, getNearbyCorpses, AnimateDead } from '#/magic/Spell.js'\r\nimport { getVisibleTiles } from '#/utils/HelperFunctions'\r\nexport default class Lich extends Actor {\r\n    constructor(x, y, id) {\r\n        super(x, y, {\r\n            id: id,\r\n            name: 'Lich',\r\n            description: 'Once a powerful necromancer, now transformed into a lich.',\r\n            visible: true,\r\n            blocked: true,\r\n            chasing: false,\r\n            combat: {\r\n                /* options.combat, dedicated to all things related to combat */\r\n                description: [' attacked '],\r\n                /* max stats */\r\n                maxhp: 40,\r\n                maxmana: 25,\r\n                /* current stats */\r\n                hp: 40,\r\n                mana: 25,\r\n                str: 15,\r\n                def: 5,\r\n                /* misc */\r\n                hostile: true,\r\n                range: 7,\r\n                invulnerable: false\r\n            }\r\n        })\r\n\r\n        this.spells = {\r\n            regeneration: new Regeneration({ cd: 0, maxCD: 5 }),\r\n            pain: new Pain({ cd: 0, maxCD: 2 }),\r\n            vampiricDraining: new VampiricDraining({ cd: 0, maxCD: 5 }),\r\n            animateDead: new AnimateDead({ cd: 0, maxCD: 7 })\r\n        }\r\n    }\r\n\r\n    act() {\r\n        Game.engine.lock()\r\n        // reduce the cooldown of every spell by 1\r\n        for (let spell in this.spells) {\r\n            this.spells[spell].cd = this.spells[spell].cd === 0 ? 0 : this.spells[spell].cd - 1\r\n        }\r\n        // To make these computations more efficient, we can determine whether or not the SimpleEnemy\r\n        // is rendered on the current game screen. If not, we shouldn't really worry about what the enemy can see\r\n        // or its path to the player. So, we can essentially skip their turn.\r\n        let dx = Math.abs(this.x - Game.player.x)\r\n        let dy = Math.abs(this.y - Game.player.y)\r\n        if (dx > Game.width / 2 || dy > Game.height / 2) {\r\n            Game.engine.unlock()\r\n            super.act()\r\n            return\r\n        }\r\n        if (!this.intro) {\r\n            Game.log('You feel a sense of hopelessness and fear come over you.', 'crimson')\r\n            Game.log('Something evil is nearby.', 'crimson')\r\n        }\r\n        this.intro = true\r\n\r\n        Game.player.recalculatePath()\r\n\r\n        let visibleTiles = getVisibleTiles(this)\r\n        let allVisibleActors = visibleTiles.reduce((actors, tile) => {\r\n            return actors.concat(tile.actors)\r\n        }, [])\r\n        let pathToPlayer = []\r\n\r\n        if (\r\n            allVisibleActors.some(a => {\r\n                return a === Game.player\r\n            })\r\n        ) {\r\n            if (!this.chasing) Game.log(`A ${this.name} sees you.`, 'alert')\r\n            this.chasing = true\r\n            Game.player.path.compute(this.x, this.y, function(x, y) {\r\n                pathToPlayer.push([x, y])\r\n            })\r\n\r\n            let lostHP = this.cb.maxhp - this.cb.hp\r\n            let nearbyCorpses = getNearbyCorpses(this)\r\n            const cooldown = spell => {\r\n                spell.cd = spell.maxCD\r\n            }\r\n            // We can see the player\r\n            if (pathToPlayer.length === 2) {\r\n                // player is in melee range. we know we can hit pretty high against the player if he's in melee range, and probably kill them\r\n                if (Game.player.cb.hp <= 15) {\r\n                    // melee attack\r\n                    let newPos = pathToPlayer[1]\r\n                    this.tryMove(newPos[0], newPos[1])\r\n                    // if we can't kill them, but vamp drain is up and we're missing some hp, use it\r\n                } else if (lostHP >= 10 && this.spells.vampiricDraining.cd === 0) {\r\n                    // cast vampiric drain\r\n                    this.spells.vampiricDraining.cast(Game.player, this)\r\n                    cooldown(this.spells.vampiricDraining)\r\n                } else if (lostHP >= 25 && this.spells.regeneration.cd === 0) {\r\n                    // we're badly hurt even though we're at close range\r\n                    // so we cast regenerate to get some hp\r\n                    this.spells.regeneration.cast(this, this)\r\n                    cooldown(this.spells.regeneration)\r\n                } else {\r\n                    // we can't regenerate or drain with vamp, so we need to either raise the undead around us, fight, or flee\r\n                    if (nearbyCorpses.length >= 2 && this.spells.animateDead.cd === 0) {\r\n                        this.spells.animateDead.cast(this, this)\r\n                        cooldown(this.spells.animateDead)\r\n                    } else {\r\n                        // TODO: add logic to run away from the player\r\n                        // melee attack\r\n                        let newPos = pathToPlayer[1]\r\n                        this.tryMove(newPos[0], newPos[1])\r\n                    }\r\n                }\r\n            } else {\r\n                // player is not in melee range (we cast raise undead, regenerate, pain, or attempt to move away from the player)\r\n                if (Game.player.cb.hp <= 9 && this.spells.pain.cd === 0) {\r\n                    this.spells.pain.cast(Game.player, this)\r\n                    cooldown(this.spells.pain)\r\n                } else if (nearbyCorpses.length >= 2 && this.spells.animateDead.cd === 0) {\r\n                    this.spells.animateDead.cast(this, this)\r\n                    cooldown(this.spells.animateDead)\r\n                } else if (lostHP >= 25 && this.spells.regeneration.cd === 0) {\r\n                    // we're badly hurt even though we're at close range\r\n                    // so we cast regenerate to get some hp\r\n                    this.spells.regeneration.cast(this, this)\r\n                    cooldown(this.spells.regeneration)\r\n                } else if (this.spells.pain.cd === 0) {\r\n                    this.spells.pain.cast(Game.player, this)\r\n                    cooldown(this.spells.pain)\r\n                }\r\n            }\r\n        } else {\r\n            // player is not in field of view. if we are low on hp, cast regenerate. if corpses are nearby, raise them\r\n        }\r\n\r\n        Game.engine.unlock()\r\n        super.act()\r\n    }\r\n\r\n    interact(actor) {\r\n        if (actor === Game.player) {\r\n            let dmg = this.attack(actor)\r\n        } else {\r\n            actor.react(this)\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/boss/Lich.js","/**\r\n * Created by larken on 7/4/17.\r\n */\r\nimport ROT from 'rot-js'\r\nimport { Game } from '#/Game.js'\r\nimport { GameMap } from '#/map/GameMap.js'\r\nimport Player from '#/entities/actors/Player.js'\r\nimport NPC from '#/entities/actors/NPC.js'\r\n// Enemies\r\nimport Goblin from '#/entities/actors/enemies/Goblin.js'\r\nimport Kobold from '#/entities/actors/enemies/Kobold.js'\r\nimport Orc from '#/entities/actors/enemies/Orc.js'\r\nimport Rat from '#/entities/actors/enemies/Rat.js'\r\nimport Bat from '#/entities/actors/enemies/Bat.js'\r\nimport Skeleton from '#/entities/actors/enemies/Skeleton.js'\r\nimport Zombie from '#/entities/actors/enemies/Zombie.js'\r\nimport { Corpse, corpseTypes } from '#/entities/items/misc/Corpse.js'\r\n\r\nimport Lich from '#/entities/actors/enemies/boss/Lich.js'\r\n// Items\r\n// Weapons\r\nimport { createSword, Sword } from '#/entities/items/weapons/Sword.js'\r\nimport { Bow, createBow } from '#/entities/items/weapons/ranged/Bow.js'\r\nimport { SteelArrow } from '#/entities/items/weapons/ranged/ammo/Arrow.js'\r\n// Potions\r\nimport HealthPotion from '#/entities/items/potions/HealthPotion.js'\r\nimport StrengthPotion from '#/entities/items/potions/StrengthPotion.js'\r\nimport ManaPotion from '#/entities/items/potions/ManaPotion.js'\r\n// Misc\r\nimport Chest from '#/entities/misc/Chest.js'\r\nimport Door from '#/entities/misc/Door.js'\r\nimport LockedDoor from '#/entities/misc/LockedDoor.js'\r\nimport Key from '#/entities/items/misc/Key.js'\r\nimport { NecromancySpellBook } from '#/entities/items/misc/Spellbook.js'\r\nimport Ladder from '#/entities/misc/Ladder.js'\r\nimport LevelTransition from '#/entities/misc/LevelTransition.js'\r\nimport { getRandomInt, getNormalRandomInt, randomProperty } from '#/utils/HelperFunctions.js'\r\n\r\nconst actorTextures = {\r\n    ORC: [5292, 5293, 5294, 5295, 5296, 5297, 5299],\r\n    EMPOWERED_ORC: [5298],\r\n    GOBLIN: [7440, 7441, 7442, 7443, 7444, 7445, 7446],\r\n    RAT: [2365],\r\n    BAT: [3704, 3706],\r\n    KOBOLD: [5532, 5533, 5534, 5535, 5536, 5537, 5538, 5539]\r\n}\r\n\r\nconst flatten = arr => arr.reduce((acc, val) => acc.concat(Array.isArray(val) ? flatten(val) : val), [])\r\n\r\n// function that will yield a random free space in the room\r\nconst randomTile = validTiles => {\r\n    let index = getRandomInt(0, validTiles.length) // index of a tile\r\n    let tile = validTiles.splice(index, 1)\r\n    if (tile.length === 1) {\r\n        return tile[0].split(',').map(e => Number(e))\r\n    } else {\r\n        return null\r\n    }\r\n}\r\n\r\n/* Returns a randomly generated textured dungeon in GameMap form  */\r\nexport function randomDungeon(width, height, dir, level = 1) {\r\n    let gameMap = new GameMap(width, height)\r\n\r\n    /* Texture IDs */\r\n    const floor = {\r\n        upperLeft: 7735,\r\n        top: 7736,\r\n        upperRight: 7737,\r\n\r\n        left: 7855,\r\n        center: 7856,\r\n        right: 7857,\r\n\r\n        lowerLeft: 7975,\r\n        bottom: 7976,\r\n        lowerRight: 7977,\r\n\r\n        endLeft: 7859,\r\n        middleCorridorHorizontal: 7860,\r\n        endRight: 7861,\r\n\r\n        endTop: 7738,\r\n        middleCorridorVertical: 7858,\r\n        endBottom: 7978,\r\n\r\n        single: 7740\r\n    }\r\n\r\n    const corridorFloor = {\r\n        horizontal: {\r\n            left: 7860,\r\n            middle: 7861,\r\n            right: 7862\r\n        },\r\n        vertical: {\r\n            top: 7739,\r\n            middle: 7859,\r\n            bottom: 7979\r\n        }\r\n    }\r\n\r\n    const walls = {\r\n        upperLeft: 8116,\r\n        top: 8117,\r\n        upperRight: 8118,\r\n        left: 8236,\r\n        center: 8237,\r\n        right: 8236,\r\n        lowerLeft: 8356,\r\n        bottom: 8117,\r\n        lowerRight: 8358,\r\n        endBottom: 8237,\r\n        endTop: 8238,\r\n        island: 8119,\r\n\r\n        leftT: 8241,\r\n        middleT: 8240,\r\n        rightT: 8239,\r\n        topT: 8120,\r\n        bottomT: 8360\r\n    }\r\n\r\n    const doors = {\r\n        vertical: 569,\r\n        horizontal: 568\r\n    }\r\n\r\n    const ladders = {\r\n        up: 477,\r\n        down: 479\r\n    }\r\n\r\n    const mobDistribution = {\r\n        ORC: 1 * ~~(level / 4) + 1,\r\n        EMPOWERED_ORC: ~~(level / 4),\r\n        KOBOLD: ~~(level / 3),\r\n        GOBLIN: 10 - ~~(level / 2),\r\n        BAT: 8 - ~~(level / 4),\r\n        RAT: 8 - ~~(level / 4)\r\n    }\r\n\r\n    const chestTexture = 57\r\n\r\n    const createActor = (actorString, x, y, id) => {\r\n        switch (actorString) {\r\n            case 'ORC':\r\n                return new Orc(x, y, id)\r\n            case 'EMPOWERED_ORC':\r\n                return new Orc(x, y, id, true)\r\n            case 'KOBOLD':\r\n                return new Kobold(x, y, id)\r\n            case 'GOBLIN':\r\n                return new Goblin(x, y, id)\r\n            case 'BAT':\r\n                return new Bat(x, y, id)\r\n            case 'RAT':\r\n                return new Rat(x, y, id)\r\n            default:\r\n                throw 'Unidentified actor given to create actor'\r\n        }\r\n    }\r\n\r\n    let createdLadders = 0\r\n    let freeCells = {}\r\n    // ROT.RNG.setSeed(1513663807130)\r\n    // console.log(ROT.RNG.getSeed());\r\n    let diggerCallback = function(x, y, blocked) {\r\n        if (!blocked) freeCells[x + ',' + y] = true\r\n    }\r\n    let rogueMap = new ROT.Map.Digger(width, height, {\r\n        roomWidth: [6, 20],\r\n        corrdiorLength: [4, 4],\r\n        roomDugPercentage: 0.4\r\n    }).create(diggerCallback)\r\n    // Initialize obstacles and actors\r\n    let sortCorridors = (a, b) => {\r\n        if (a._startX === a._endX && b._startX !== b._endX) {\r\n            return -1\r\n        } else if (b._startX === b._endX && a._startX !== a._endX) {\r\n            return 1\r\n        } else {\r\n            return 0\r\n        }\r\n    }\r\n\r\n    let computeBitmaskFloors = (x, y) => {\r\n        let sum = 0\r\n        let above = `${x},${y - 1}`\r\n        let below = `${x},${y + 1}`\r\n        let left = `${x - 1},${y}`\r\n        let right = `${x + 1},${y}`\r\n\r\n        let ur = `${x + 1},${y - 1}`\r\n        let ll = `${x - 1},${y + 1}`\r\n\r\n        let ul = `${x - 1},${y - 1}`\r\n        let lr = `${x + 1},${y + 1}`\r\n\r\n        let debug = () => {\r\n            console.log(ul in freeCells, above in freeCells)\r\n        }\r\n\r\n        let free = coord => {\r\n            return coord in freeCells\r\n        }\r\n\r\n        if (free(above)) sum += 1\r\n        if (free(right)) sum += 2\r\n        if (free(below)) sum += 4\r\n        if (free(left)) sum += 8\r\n        if (sum == 0) {\r\n            if (free(ul)) {\r\n                return 16\r\n            } else if (free(ur)) {\r\n                return 17\r\n            } else if (free(ll)) {\r\n                return 18\r\n            } else if (free(lr)) {\r\n                return 19\r\n            }\r\n        }\r\n        return sum\r\n    }\r\n\r\n    let computeBitmaskWalls = (x, y) => {\r\n        let sum = 0\r\n        let above = `${x},${y - 1}`\r\n        let below = `${x},${y + 1}`\r\n        let left = `${x - 1},${y}`\r\n        let right = `${x + 1},${y}`\r\n\r\n        let ur = `${x + 1},${y - 1}`\r\n        let ll = `${x - 1},${y + 1}`\r\n\r\n        let ul = `${x - 1},${y - 1}`\r\n        let lr = `${x + 1},${y + 1}`\r\n\r\n        let debug = () => {\r\n            console.log(ul in freeCells, above in freeCells)\r\n        }\r\n\r\n        let free = coord => {\r\n            return coord in freeCells\r\n        }\r\n\r\n        if (free(above)) sum += 1\r\n        if (free(right)) sum += 2\r\n        if (free(below)) sum += 4\r\n        if (free(left)) sum += 8\r\n        if (free(above) && !free(below) && !free(right) && !free(left) && (free(ll) || free(lr))) {\r\n            return 20\r\n        }\r\n        if (sum == 0) {\r\n            if (free(ul)) return 16\r\n            else if (free(ur)) return 17\r\n            else if (free(ll)) return 18\r\n            else if (free(lr)) return 19\r\n        }\r\n        return sum\r\n    }\r\n\r\n    let floorSums = {\r\n        /*\r\n            ? 0 ?\r\n            0 1 0\r\n            ? 0 ?\r\n        */\r\n        0: floor.single, // empty space (black spot)\r\n        /*\r\n            ? 1 ?\r\n            0 1 0\r\n            ? 0 ?\r\n        */\r\n        1: floor.endBottom,\r\n        /*\r\n            ? 0 ?\r\n            0 1 1\r\n            ? 0 ?\r\n        */\r\n        2: floor.endLeft,\r\n        /*\r\n            ? 1 ?\r\n            0 1 1\r\n            ? 0 ?\r\n        */\r\n        3: floor.lowerLeft,\r\n        /*\r\n            ? 0 ?\r\n            0 1 0\r\n            ? 1 ?\r\n        */\r\n        4: floor.endTop,\r\n        /*\r\n            ? 1 ?\r\n            0 1 0\r\n            ? 1 ?\r\n        */\r\n        5: floor.middleCorridorVertical,\r\n        /*\r\n            ? 0 ?\r\n            0 1 1\r\n            ? 1 ?\r\n        */\r\n        6: floor.upperLeft,\r\n        /*\r\n            ? 1 ?\r\n            0 1 1\r\n            ? 1 ?\r\n        */\r\n        7: floor.left, // this case is a hard one. Need a new tile that properly ends a wall in one tile\r\n        /*\r\n            ? 0 ?\r\n            1 1 0\r\n            ? 0 ?\r\n        */\r\n        8: floor.endRight,\r\n        /*\r\n            ? 1 ?\r\n            1 1 0\r\n            ? 0 ?\r\n        */\r\n        9: floor.lowerRight,\r\n        /*\r\n            ? 0 ?\r\n            1 1 1\r\n            ? 0 ?\r\n        */\r\n        10: floor.middleCorridorHorizontal, // vertical\r\n        /*\r\n            ? 1 ?\r\n            1 1 1\r\n            ? 0 ?\r\n        */\r\n        11: floor.bottom,\r\n        /*\r\n            ? 0 ?\r\n            1 1 0\r\n            ? 1 ?\r\n        */\r\n        12: floor.upperRight,\r\n        /*\r\n            ? 1 ?\r\n            1 1 0\r\n            ? 1 ?\r\n        */\r\n        13: floor.right,\r\n        /*\r\n            ? 0 ?\r\n            1 1 1\r\n            ? 1 ?\r\n        */\r\n        14: floor.top,\r\n        /*\r\n            ? 1 ?\r\n            1 1 1\r\n            ? 1 ?\r\n        */\r\n        15: floor.center,\r\n        /*\r\n            1 0 ?\r\n            0 1 0\r\n            ? 0 ?\r\n        */\r\n        16: floor.single,\r\n        /*\r\n            ? 0 1\r\n            0 1 0\r\n            ? 0 ?\r\n        */\r\n        17: floor.single,\r\n        /*\r\n            ? 0 ?\r\n            0 1 0\r\n            1 0 ?\r\n        */\r\n        18: floor.single,\r\n        /*\r\n            ? 0 ?\r\n            0 1 0\r\n            ? 0 1\r\n        */\r\n        19: floor.lowerLeft\r\n    }\r\n    let wallSums = {\r\n        /*\r\n            ? 0 ?\r\n            0 0 0\r\n            ? 0 ?\r\n        */\r\n        0: 7046, // empty space (black spot)\r\n        /*\r\n            ? 1 ?\r\n            0 0 0\r\n            ? 0 ?\r\n        */\r\n        1: walls.bottom,\r\n        /*\r\n            ? 0 ?\r\n            0 0 1\r\n            ? 0 ?\r\n        */\r\n        2: walls.left,\r\n        /*\r\n            ? 1 ?\r\n            0 0 1\r\n            ? 0 ?\r\n        */\r\n        3: walls.upperRight,\r\n        /*\r\n            ? 0 ?\r\n            0 0 0\r\n            ? 1 ?\r\n        */\r\n        4: walls.top,\r\n        /*\r\n            ? 1 ?\r\n            0 0 0\r\n            ? 1 ?\r\n        */\r\n        5: walls.top,\r\n        /*\r\n            ? 0 ?\r\n            0 0 1\r\n            ? 1 ?\r\n        */\r\n        6: walls.lowerRight,\r\n        /*\r\n            ? 1 ?\r\n            0 0 1\r\n            ? 1 ?\r\n        */\r\n        7: walls.bottom, // this case is a hard one. Need a new tile that properly ends a wall in one tile\r\n        /*\r\n            ? 0 ?\r\n            1 0 0\r\n            ? 0 ?\r\n        */\r\n        8: walls.right,\r\n        /*\r\n            ? 1 ?\r\n            1 0 0\r\n            ? 0 ?\r\n        */\r\n        9: walls.upperLeft,\r\n        /*\r\n            ? 0 ?\r\n            1 0 1\r\n            ? 0 ?\r\n        */\r\n        10: walls.left, // vertical\r\n        /*\r\n            ? 1 ?\r\n            1 0 1\r\n            ? 0 ?\r\n        */\r\n        11: walls.endTop,\r\n        /*\r\n            ? 0 ?\r\n            1 0 0\r\n            ? 1 ?\r\n        */\r\n        12: walls.lowerLeft,\r\n        /*\r\n            ? 1 ?\r\n            1 0 0\r\n            ? 1 ?\r\n        */\r\n        13: walls.bottom,\r\n        /*\r\n            ? 0 ?\r\n            1 0 1\r\n            ? 1 ?\r\n        */\r\n        14: walls.endBottom,\r\n        /*\r\n            ? 1 ?\r\n            1 0 1\r\n            ? 1 ?\r\n        */\r\n        15: walls.center,\r\n        /*\r\n            1 0 ?\r\n            0 0 0\r\n            ? 0 ?\r\n        */\r\n        16: walls.lowerRight,\r\n        /*\r\n            ? 0 1\r\n            0 0 0\r\n            ? 0 ?\r\n        */\r\n        17: walls.lowerLeft,\r\n        /*\r\n            ? 0 ?\r\n            0 0 0\r\n            1 0 ?\r\n        */\r\n        18: walls.upperRight,\r\n        /*\r\n            ? 0 ?\r\n            0 0 0\r\n            ? 0 1\r\n        */\r\n        19: walls.upperLeft,\r\n        /*\r\n            0 1 0    0 1 0\r\n            0 0 0 || 0 0 0\r\n            1 0 0    0 0 1\r\n        */\r\n        20: walls.middleT\r\n    }\r\n\r\n    // we want to start +1 from the top and left, and bottom and right -1\r\n    for (let y = 0; y < height; y++) {\r\n        for (let x = 0; x < width; x++) {\r\n            let tile = gameMap.getTile(x, y)\r\n            if (!(`${x},${y}` in freeCells)) {\r\n                // only want to place a wall somewhere if it's not a free cell\r\n                let sum = computeBitmaskWalls(x, y)\r\n                let sym = wallSums[sum] + 1\r\n                tile.updateTileInfo(sym)\r\n            } else {\r\n                let sum = computeBitmaskFloors(x, y)\r\n                let sym = floorSums[sum] + 1\r\n                tile.updateTileInfo(sym)\r\n            }\r\n        }\r\n    }\r\n\r\n    /* For every room in the dungeon, we're going to add\r\n     * textures from the tileset for the walls and the floors */\r\n    for (let room of rogueMap.getRooms()) {\r\n        let left = room.getLeft() - 1\r\n        let right = room.getRight() + 1\r\n        let top = room.getTop() - 1\r\n        let bottom = room.getBottom() + 1\r\n        let wleft = room.getLeft()\r\n        let wright = room.getRight()\r\n        let wtop = room.getTop()\r\n        let wbottom = room.getBottom()\r\n        let center = {\r\n            y: ~~((wtop + wbottom) / 2),\r\n            x: ~~((wright + wleft) / 2)\r\n        }\r\n\r\n        /* Set up the doors of the room */\r\n        room.getDoors((dx, dy) => {\r\n            let floor_ids =\r\n                Object.values(corridorFloor.vertical) +\r\n                Object.values(floor) +\r\n                Object.values(corridorFloor.horizontal) +\r\n                Object.values(floor) // doors?\r\n\r\n            let above = gameMap.getTile(dx, dy - 1).obstacles[0].id\r\n            let below = gameMap.getTile(dx, dy + 1).obstacles[0].id\r\n            let door\r\n            if (floor_ids.includes(above - 1) && floor_ids.includes(below - 1)) {\r\n                // horizontal door frame\r\n                door = new Door(dx, dy, doors.horizontal)\r\n            } else {\r\n                // vertical door frame\r\n                door = new Door(dx, dy, doors.vertical)\r\n            }\r\n            gameMap.getTile(dx, dy).actors.push(door)\r\n            gameMap.actors.push(door)\r\n            // since we want to put a door here, we need to make sure a wall wasn't put here before\r\n            let sum = computeBitmaskFloors(dx, dy)\r\n            let sym = floorSums[sum] + 1\r\n            gameMap.getTile(dx, dy).obstacles = []\r\n            gameMap.getTile(dx, dy).updateTileInfo(sym)\r\n        })\r\n\r\n        // Now, we can mess around with the centers of each room and place items in the dungeons\r\n        // this places a ladder going further into the dungeon (either deeper or higher)\r\n        let roll = getRandomInt(1, rogueMap.getRooms().length)\r\n        if (roll == 1 || createdLadders == 0) {\r\n            let texture = dir === 'down' ? ladders.up : ladders.down\r\n            let ladder = new Ladder(center.x, center.y, texture, 'down')\r\n            gameMap.getTile(center.x, center.y).actors.push(ladder)\r\n            gameMap.actors.push(ladder)\r\n            createdLadders++\r\n        }\r\n\r\n        // now I want to populate some random creatures in each room of the dungeon.\r\n        let validTiles = [] // all the non-wall tiles in the room that don't already a ladder\r\n        let possibleWalls = Object.values(walls)\r\n        for (let y = wtop; y < wbottom; y++) {\r\n            for (let x = wleft; x < wright; x++) {\r\n                if (!gameMap.getTile(x, y).blocked()) validTiles.push(x + ',' + y)\r\n            }\r\n        }\r\n\r\n        roll = getNormalRandomInt(1, 5)\r\n        for (let i = 0; i < roll; i++) {\r\n            let coords = randomTile(validTiles)\r\n            if (coords === null) break\r\n            let [x, y] = coords\r\n            let chosenActor = ROT.RNG.getWeightedValue(mobDistribution)\r\n            let possibleActorTextures = actorTextures[chosenActor]\r\n            let randomTexture = possibleActorTextures[getRandomInt(0, possibleActorTextures.length - 1)]\r\n            let actor = createActor(chosenActor, x, y, randomTexture)\r\n            gameMap.getTile(x, y).actors.push(actor)\r\n            gameMap.actors.push(actor)\r\n        }\r\n        // if there atleast 4 enemies in the room, drop a chest in the room too!\r\n        if (roll >= 4) {\r\n            let coords = randomTile(validTiles)\r\n            if (coords !== null) {\r\n                let [x, y] = coords\r\n                let chest = new Chest(x, y, chestTexture)\r\n                gameMap.getTile(x, y).actors.push(chest)\r\n                gameMap.actors.push(chest)\r\n            }\r\n        }\r\n    }\r\n\r\n    // Randomly select starting position for player\r\n    let start = randomProperty(freeCells).split(',')\r\n    let [x, y] = start.map(s => parseInt(s))\r\n    gameMap.playerLocation = [x, y]\r\n    // gameMap.getTile(x, y).actors.push(new Player(x, y, Game.playerID + 1)) // set random spot to be the player\r\n    let ladder = new Ladder(x, y, ladders.up, 'up')\r\n    gameMap.getTile(x, y).actors.push(ladder)\r\n    gameMap.actors.push(ladder)\r\n    return gameMap\r\n}\r\n\r\nexport function randomCave(width, height, dir, level = 1) {\r\n    let map = {}\r\n    let createdLadders = 0\r\n    map.revealed = true\r\n    map.width = width\r\n    map.height = height\r\n    map.layers = [\r\n        {\r\n            data: [],\r\n            properties: {\r\n                obstacles: true\r\n            }\r\n        },\r\n        {\r\n            data: [],\r\n            properties: {\r\n                obstacles: true\r\n            }\r\n        },\r\n        {\r\n            data: [],\r\n            properties: {\r\n                actors: true\r\n            }\r\n        },\r\n        {\r\n            data: [],\r\n            properties: {\r\n                actors: true\r\n            }\r\n        }\r\n    ]\r\n    let freeCells = {}\r\n    let mapCallback = function(x, y, blocked) {\r\n        if (!blocked) freeCells[x + ',' + y] = true\r\n    }\r\n    let cellularMap = new ROT.Map.Cellular(width, height)\r\n    cellularMap.randomize(0.5)\r\n    for (let i = 0; i < 10; i++) cellularMap.create()\r\n\r\n    cellularMap.connect(mapCallback)\r\n\r\n    // Initialize obstacles and actors\r\n    for (let j = 0; j < height; j++) {\r\n        for (let l = 0; l < map.layers.length; l++) map.layers[l].data.push([])\r\n\r\n        for (let i = 0; i < width; i++) {\r\n            if (i + ',' + j in freeCells) map.layers[0].data[j].push(9297 + 1)\r\n            else map.layers[0].data[j].push(9200 + 1)\r\n\r\n            map.layers[1].data[j].push(0)\r\n            map.layers[2].data[j].push(0)\r\n            map.layers[3].data[j].push(0)\r\n        }\r\n    }\r\n\r\n    let walls = {\r\n        upperLeft: 9197,\r\n        top: 9198,\r\n        upperRight: 9199,\r\n        left: 9317,\r\n        center: 9318,\r\n        right: 9317,\r\n        lowerLeft: 9437,\r\n        bottom: 9198,\r\n        lowerRight: 9439,\r\n        endBottom: 9318,\r\n        endTop: 9319,\r\n\r\n        middleT: 9201,\r\n        middleIntersection: 9321\r\n    }\r\n\r\n    let floors = {\r\n        upperLeft: 9176,\r\n        top: 9177,\r\n        upperRight: 9178,\r\n        left: 9296,\r\n        center: 9297,\r\n        right: 9298,\r\n        lowerLeft: 9416,\r\n        bottom: 9417,\r\n        lowerRight: 9418,\r\n\r\n        endLeft: 9300,\r\n        middleCorridorHorizontal: 9301,\r\n        endRight: 9302,\r\n\r\n        endTop: 9179,\r\n        middleCorridorVertical: 9299,\r\n        endBottom: 9419,\r\n\r\n        single: 9181\r\n    }\r\n\r\n    let computeBitmask = (x, y) => {\r\n        let sum = 0\r\n        let above = `${x},${y - 1}`\r\n        let below = `${x},${y + 1}`\r\n        let left = `${x - 1},${y}`\r\n        let right = `${x + 1},${y}`\r\n\r\n        let ur = `${x + 1},${y - 1}`\r\n        let ll = `${x - 1},${y + 1}`\r\n\r\n        let ul = `${x - 1},${y - 1}`\r\n        let lr = `${x + 1},${y + 1}`\r\n\r\n        let free = coords => {\r\n            return coords in freeCells\r\n        }\r\n\r\n        if (free(above)) sum += 1\r\n        if (free(right)) sum += 2\r\n        if (free(below)) sum += 4\r\n        if (free(left)) sum += 8\r\n\r\n        if (sum == 0) {\r\n            if ((free(ll) && free(ur)) || (free(ul) && free(lr))) return 21\r\n            else if (free(ul) && free(above) && free(lr)) return 20\r\n            else if (free(lr) && free(below) && free(ul)) return 20\r\n            else if (free(ul)) return 16\r\n            else if (free(ur)) return 17\r\n            else if (free(ll)) return 18\r\n            else if (free(lr)) return 19\r\n        }\r\n\r\n        return sum\r\n    }\r\n\r\n    let wallSums = {\r\n        /*\r\n            ? 0 ?\r\n            0 0 0\r\n            ? 0 ?\r\n        */\r\n        0: 7046, // empty space (black spot)\r\n        /*\r\n            ? 1 ?\r\n            0 0 0\r\n            ? 0 ?\r\n        */\r\n        1: walls.bottom,\r\n        /*\r\n            ? 0 ?\r\n            0 0 1\r\n            ? 0 ?\r\n        */\r\n        2: walls.left,\r\n        /*\r\n            ? 1 ?\r\n            0 0 1\r\n            ? 0 ?\r\n        */\r\n        3: walls.upperRight,\r\n        /*\r\n            ? 0 ?\r\n            0 0 0\r\n            ? 1 ?\r\n        */\r\n        4: walls.top,\r\n        /*\r\n            ? 1 ?\r\n            0 0 0\r\n            ? 1 ?\r\n        */\r\n        5: walls.top,\r\n        /*\r\n            ? 0 ?\r\n            0 0 1\r\n            ? 1 ?\r\n        */\r\n        6: walls.lowerRight,\r\n        /*\r\n            ? 1 ?\r\n            0 0 1\r\n            ? 1 ?\r\n        */\r\n        7: walls.bottom, // this case is a hard one. Need a new tile that properly ends a wall in one tile\r\n        /*\r\n            ? 0 ?\r\n            1 0 0\r\n            ? 0 ?\r\n        */\r\n        8: walls.right,\r\n        /*\r\n            ? 1 ?\r\n            1 0 0\r\n            ? 0 ?\r\n        */\r\n        9: walls.upperLeft,\r\n        /*\r\n            ? 0 ?\r\n            1 0 1\r\n            ? 0 ?\r\n        */\r\n        10: walls.left, // vertical\r\n        /*\r\n            ? 1 ?\r\n            1 0 1\r\n            ? 0 ?\r\n        */\r\n        11: walls.endTop,\r\n        /*\r\n            ? 0 ?\r\n            1 0 0\r\n            ? 1 ?\r\n        */\r\n        12: walls.lowerLeft,\r\n        /*\r\n            ? 1 ?\r\n            1 0 0\r\n            ? 1 ?\r\n        */\r\n        13: walls.bottom,\r\n        /*\r\n            ? 0 ?\r\n            1 0 1\r\n            ? 1 ?\r\n        */\r\n        14: walls.endBottom,\r\n        /*\r\n            ? 1 ?\r\n            1 0 1\r\n            ? 1 ?\r\n        */\r\n        15: walls.center,\r\n        /*\r\n            1 0 ?\r\n            0 0 0\r\n            ? 0 ?\r\n        */\r\n        16: walls.lowerRight,\r\n        /*\r\n            ? 0 1\r\n            0 0 0\r\n            ? 0 ?\r\n        */\r\n        17: walls.lowerLeft,\r\n        /*\r\n            ? 0 ?\r\n            0 0 0\r\n            1 0 ?\r\n        */\r\n        18: walls.upperRight,\r\n        /*\r\n            ? 0 ?\r\n            0 0 0\r\n            ? 0 1\r\n        */\r\n        19: walls.upperLeft,\r\n        /*\r\n            1 1 0    1 0 0\r\n            0 0 0 || 0 0 0\r\n            0 0 1    0 1 1\r\n        */\r\n        20: walls.middleT,\r\n        /*\r\n            0 0 1    1 0 0\r\n            0 0 0 || 0 0 0\r\n            1 0 0    0 0 1\r\n        */\r\n        21: walls.middleIntersection\r\n    }\r\n\r\n    let floorSums = {\r\n        /*\r\n            ? 0 ?\r\n            0 1 0\r\n            ? 0 ?\r\n        */\r\n        0: floors.single, // empty space (black spot)\r\n        /*\r\n            ? 1 ?\r\n            0 1 0\r\n            ? 0 ?\r\n        */\r\n        1: floors.endBottom,\r\n        /*\r\n            ? 0 ?\r\n            0 1 1\r\n            ? 0 ?\r\n        */\r\n        2: floors.endLeft,\r\n        /*\r\n            ? 1 ?\r\n            0 1 1\r\n            ? 0 ?\r\n        */\r\n        3: floors.lowerLeft,\r\n        /*\r\n            ? 0 ?\r\n            0 1 0\r\n            ? 1 ?\r\n        */\r\n        4: floors.endTop,\r\n        /*\r\n            ? 1 ?\r\n            0 1 0\r\n            ? 1 ?\r\n        */\r\n        5: floors.middleCorridorVertical,\r\n        /*\r\n            ? 0 ?\r\n            0 1 1\r\n            ? 1 ?\r\n        */\r\n        6: floors.upperLeft,\r\n        /*\r\n            ? 1 ?\r\n            0 1 1\r\n            ? 1 ?\r\n        */\r\n        7: floors.left, // this case is a hard one. Need a new tile that properly ends a wall in one tile\r\n        /*\r\n            ? 0 ?\r\n            1 1 0\r\n            ? 0 ?\r\n        */\r\n        8: floors.endRight,\r\n        /*\r\n            ? 1 ?\r\n            1 1 0\r\n            ? 0 ?\r\n        */\r\n        9: floors.lowerRight,\r\n        /*\r\n            ? 0 ?\r\n            1 1 1\r\n            ? 0 ?\r\n        */\r\n        10: floors.middleCorridorHorizontal, // vertical\r\n        /*\r\n            ? 1 ?\r\n            1 1 1\r\n            ? 0 ?\r\n        */\r\n        11: floors.bottom,\r\n        /*\r\n            ? 0 ?\r\n            1 1 0\r\n            ? 1 ?\r\n        */\r\n        12: floors.upperRight,\r\n        /*\r\n            ? 1 ?\r\n            1 1 0\r\n            ? 1 ?\r\n        */\r\n        13: floors.right,\r\n        /*\r\n            ? 0 ?\r\n            1 1 1\r\n            ? 1 ?\r\n        */\r\n        14: floors.top,\r\n        /*\r\n            ? 1 ?\r\n            1 1 1\r\n            ? 1 ?\r\n        */\r\n        15: floors.center,\r\n        /*\r\n            1 0 ?\r\n            0 1 0\r\n            ? 0 ?\r\n        */\r\n        16: floors.single,\r\n        /*\r\n            ? 0 1\r\n            0 1 0\r\n            ? 0 ?\r\n        */\r\n        17: floors.single,\r\n        /*\r\n            ? 0 ?\r\n            0 1 0\r\n            1 0 ?\r\n        */\r\n        18: floors.single,\r\n        /*\r\n            ? 0 ?\r\n            0 1 0\r\n            ? 0 1\r\n        */\r\n        19: floors.lowerLeft,\r\n        /*\r\n            1 1 0    1 0 0\r\n            0 1 0 || 0 1 0\r\n            0 0 1    0 1 1\r\n        */\r\n        20: floors.middleT\r\n    }\r\n\r\n    // we want to start +1 from the top and left, and bottom and right -1\r\n    for (let y = 0; y < height; y++) {\r\n        for (let x = 0; x < width; x++) {\r\n            if (!(`${x},${y}` in freeCells)) {\r\n                // only want to place a wall somewhere if it's not a free cell\r\n                let sum = computeBitmask(x, y)\r\n                let sym = wallSums[sum] + 1\r\n                map.layers[0].data[y][x] = sym\r\n            } else {\r\n                let sum = computeBitmask(x, y)\r\n                let sym = floorSums[sum] + 1\r\n                map.layers[0].data[y][x] = sym\r\n            }\r\n        }\r\n    }\r\n\r\n    let validTiles = Object.keys(freeCells)\r\n    // Randomly select starting position for player\r\n    let start = randomTile(validTiles)\r\n    if (start === null) throw 'Could not find an open spot on the map to place the player!'\r\n\r\n    map.layers[2].data[start[1]][start[0]] = Game.playerID // set random spot to be the player\r\n    map.layers[3].data[start[1]][start[0]] = dir === 'down' ? 238 : 237 // place a ladder going back up a level underneath the player.\r\n\r\n    let ladderGoingDown = randomTile(validTiles)\r\n    map.layers[2].data[ladderGoingDown[1]][ladderGoingDown[0]] = dir === 'down' ? 237 : 238\r\n    ladderGoingDown = randomTile(validTiles)\r\n    map.layers[2].data[ladderGoingDown[1]][ladderGoingDown[0]] = dir === 'down' ? 237 : 238\r\n\r\n    let roll = getNormalRandomInt(7 + level, 25 + level)\r\n    for (let i = 0; i < roll; i++) {\r\n        let coords = randomTile(validTiles)\r\n        if (coords === null) break\r\n        let chosenMob = ROT.RNG.getWeightedValue(mobDistribution)\r\n        let mobArray = actorTextures[chosenMob]\r\n        let actor = createActor(chosenMob)\r\n        let randomMob = mobArray[getRandomInt(0, mobArray.length - 1)] + 1\r\n        map.layers[2].data[coords[1]][coords[0]] = randomMob\r\n    }\r\n\r\n    // Flatten the layers to mimic Tiled map data\r\n    for (let i = 0; i < map.layers.length; i++) map.layers[i].data = flatten(map.layers[i].data)\r\n\r\n    return map\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/map/RandomMap.js","import ROT from 'rot-js'\r\nimport * as PIXI from 'pixi.js'\r\n\r\nimport { getTilesetCoords, createMapFromJSON } from '#/map/GameMap.js'\r\nimport GameDisplay from '#/GameDisplay.js'\r\nimport { Actor } from '#/entities/actors/Actor.js'\r\nimport { Entity } from '#/entities/Entity.js'\r\nimport { getItemsFromDropTable } from '#/utils/HelperFunctions.js'\r\n\r\nimport Item from '#/entities/items/Item.js'\r\nimport Player from '#/entities/actors/Player.js'\r\nimport { randomDungeon, randomCave } from '#/map/RandomMap.js'\r\nimport Door from '#/entities/misc/Door.js'\r\nimport Ladder from '#/entities/misc/Ladder.js'\r\nimport Chest from '#/entities/misc/Chest.js'\r\n\r\nconst targetingBorders = {\r\n\tid: 7418,\r\n\tvisible: true\r\n}\r\nconst untargetableBorders = {\r\n\tid: 7419,\r\n\tvisible: true\r\n}\r\n\r\nexport let Game = {\r\n\tapp: null,\r\n\toverview: null,\r\n\tdev: false,\r\n\tdisplay: null,\r\n\tHUD: null,\r\n\tconsole: null,\r\n\tplayer: null,\r\n\tplayerLocation: null,\r\n\tplayerID: 4696,\r\n\tloadedIDS: [],\r\n\tscheduler: null,\r\n\tturn: 0,\r\n\tengine: null,\r\n\tloaded: false,\r\n\tlevels: {},\r\n\tcurrentLevel: { name: 'overworld' },\r\n\tmap: null,\r\n\tmessageHistory: [],\r\n\ttempMessages: [],\r\n\tminimap: null,\r\n\tselectedTile: null,\r\n\tpathToTarget: {},\r\n\ttargetReticle: null,\r\n\tenemyCycle: null,\r\n\tenemyCycleIndex: 0,\r\n\tuserSettings: { hpBars: true },\r\n\r\n\tinit(playerSpriteID) {\r\n\t\tthis.playerID = playerSpriteID\r\n\t\tthis.player = new Player(0, 0, playerSpriteID)\r\n\t\tthis.currentLevel.name = 'overworld'\r\n\t\tthis.displayOptions = {\r\n\t\t\twidth: 32,\r\n\t\t\theight: 20,\r\n\t\t\tforceSquareRatio: true,\r\n\t\t\tlayout: 'tile',\r\n\t\t\t// bg: \"transparent\",\r\n\t\t\ttileWidth: 32,\r\n\t\t\ttileHeight: 32\r\n\t\t}\r\n\t\tlet onceLoaded = () => {\r\n\t\t\tthis.levels['graveyard'] = createMapFromJSON(PIXI.loader.resources['graveyard'].data)\r\n\t\t\tthis.levels['Lich Lair'] = createMapFromJSON(PIXI.loader.resources['lichLair'].data)\r\n\t\t\tthis.levels['overworld'] = createMapFromJSON(PIXI.loader.resources['overworld'].data)\r\n\t\t\tthis.levels['Orc Castle'] = createMapFromJSON(PIXI.loader.resources['orcCastle'].data)\r\n\t\t\tthis.map = this.levels[this.currentLevel.name]\r\n\t\t\tthis.levels['graveyard'].revealed = true\r\n\t\t\tthis.levels['Lich Lair'].revealed = true\r\n\t\t\tthis.levels['overworld'].revealed = true\r\n\t\t\tthis.levels['Orc Castle'].revealed = true\r\n\t\t\tthis.width = this.map.width < this.displayOptions.width ? this.map.width : this.displayOptions.width\r\n\t\t\tthis.height = this.map.height < this.displayOptions.height ? this.map.height : this.displayOptions.height\r\n\t\t\tthis.map.actors.push(this.player) // add to the list of all actors\r\n\t\t\tlet [px, py] = this.map.playerLocation\r\n\t\t\tthis.player.placeAt(px, py)\r\n\t\t\tthis.scheduleAllActors()\r\n\t\t\tthis.initializeMinimap()\r\n\t\t\tdocument.getElementById('game_container').appendChild(this.display.getContainer())\r\n\t\t\tdocument.getElementById('minimap_container').appendChild(this.minimap.getContainer())\r\n\r\n\t\t\tthis.engine.start() // Start the engine\r\n\t\t\tthis.renderMap()\r\n\t\t}\r\n\t\tthis.display = new GameDisplay()\r\n\t\tthis.display.loadAssets(onceLoaded)\r\n\t},\r\n\r\n\trenderMap() {\r\n\t\tthis.display.renderMap(this.map)\r\n\t\tthis.targetReticle = new PIXI.Sprite(this.display.tilesetMapping[7418])\r\n\t\tthis.targetReticle.visible = false\r\n\t\tthis.display.background.addChild(this.targetReticle)\r\n\t},\r\n\r\n\tscheduleAllActors() {\r\n\t\t// Set up the ROT engine and scheduler\r\n\t\tthis.scheduler = new ROT.Scheduler.Simple()\r\n\t\tthis.scheduler.add(this.player, true) // Add the player to the scheduler\r\n\t\tthis.scheduler.add(this.display, true)\r\n\t\tfor (let i = 0; i < this.map.actors.length; i++) {\r\n\t\t\t// Some 'actor' objects do not take turns, such as ladders / items\r\n\t\t\tif (this.map.actors[i] !== this.player && this.map.actors[i] instanceof Actor) {\r\n\t\t\t\tthis.scheduler.add(this.map.actors[i], true)\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.engine = new ROT.Engine(this.scheduler) // Create new engine with the newly created scheduler\r\n\t},\r\n\r\n\tinitializeMinimap() {\r\n\t\t/* Create a ROT.JS display for the minimap! */\r\n\t\tthis.minimap = new ROT.Display()\r\n\t\tthis.minimap.setOptions({\r\n\t\t\twidth: this.map.width,\r\n\t\t\theight: this.map.height,\r\n\t\t\tfontSize: 2,\r\n\t\t\tspacing: 2,\r\n\t\t\tforceSquareRatio: true\r\n\t\t})\r\n\t\tthis.drawMiniMap()\r\n\t},\r\n\r\n\tclearTempLog() {\r\n\t\tthis.tempMessages.splice(0, this.tempMessages.length)\r\n\t},\r\n\r\n\tinbounds(x, y) {\r\n\t\treturn !(x < 0 || x >= this.map.width || y < 0 || y >= this.map.height)\r\n\t},\r\n\r\n\tinViewport(x, y) {\r\n\t\tlet cx = Game.player.x - ~~(Game.width / 2)\r\n\t\tlet cy = Game.player.y - ~~(Game.height / 2)\r\n\t\treturn cx <= x && x <= cx + Game.width && cy <= y && y <= cy + Game.height\r\n\t},\r\n\r\n\tchangeLevels(newLevel, dir, level) {\r\n\t\tif (this.levels[newLevel] === undefined) {\r\n\t\t\t// generating a new random room\r\n\t\t\tif (newLevel.toLowerCase().includes('cave')) {\r\n\t\t\t\tthis.levels[newLevel] = randomCave(80, 40, dir, level)\r\n\t\t\t} else {\r\n\t\t\t\tthis.levels[newLevel] = randomDungeon(40, 40, dir, level)\r\n\t\t\t}\r\n\t\t\tthis.levels[newLevel].revealed = false\r\n\t\t\tfor (let actor of this.levels[newLevel].actors) {\r\n\t\t\t\tif (actor instanceof Chest) {\r\n\t\t\t\t\t// console.log(\"filling chest with goodies!\");\r\n\t\t\t\t\t// we want to populate the chests with loot\r\n\t\t\t\t\tlet items = getItemsFromDropTable({\r\n\t\t\t\t\t\tminItems: 1,\r\n\t\t\t\t\t\tmaxItems: 4,\r\n\t\t\t\t\t\tdropTable: {\r\n\t\t\t\t\t\t\tSTRENGTH_POTION: 1,\r\n\t\t\t\t\t\t\tHEALTH_POTION: 1,\r\n\t\t\t\t\t\t\tSTEEL_ARROW: 1,\r\n\t\t\t\t\t\t\tMANA_POTION: 1,\r\n\t\t\t\t\t\t\tSWORD: 3\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tx: actor.x,\r\n\t\t\t\t\t\ty: actor.y\r\n\t\t\t\t\t})\r\n\t\t\t\t\titems.forEach(item => actor.addToInventory(item))\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// console.log(newLevel + \" does not exist, so a new random instance is being created.\");\r\n\t\t}\r\n\t\t// save the player's location on this map\r\n\t\tthis.map.playerLocation = [Game.player.x, Game.player.y]\r\n\t\t// Save the old map\r\n\t\tthis.levels[this.currentLevel.name] = this.map // add the old map to 'levels'\r\n\t\t// Unshift player from ladder position (so that when resurfacing, no player is present)\r\n\t\tthis.getTile(this.player.x, this.player.y).removeActor(this.player)\r\n\t\tthis.map.actors = this.map.actors.filter(a => a !== this.player)\r\n\t\tthis.map = this.levels[newLevel]\r\n\t\tthis.currentLevel.name = newLevel\r\n\t\tthis.playerLocation = this.map.playerLocation\r\n\t\t// before drawing the viewport, we need to clear the screen of whatever was here last\r\n\t\tthis.display.clear()\r\n\t\tthis.width = this.map.width < this.displayOptions.width ? this.map.width : this.displayOptions.width\r\n\t\tthis.height = this.map.height < this.displayOptions.height ? this.map.height : this.displayOptions.height\r\n\t\tthis.player.placeAt(this.playerLocation[0], this.playerLocation[1])\r\n\t\tthis.map.actors.push(this.player)\r\n\t\tthis.scheduleAllActors()\r\n\t\t// Clear the last visible tiles that were available to be seen\r\n\t\tObject.assign(this.map.seen_tiles, this.map.visible_tiles)\r\n\t\tthis.map.visible_tiles = {}\r\n\r\n\t\t// FOV calculations\r\n\t\tlet fov = new ROT.FOV.PreciseShadowcasting((x, y) => {\r\n\t\t\treturn this.inbounds(x, y) && this.getTile(x, y).visible()\r\n\t\t})\r\n\r\n\t\tfov.compute(this.player.x, this.player.y, this.player.cb.range, (x, y, r, visibility) => {\r\n\t\t\tthis.map.visible_tiles[x + ',' + y] = true\r\n\t\t})\r\n\t\tthis.minimap.setOptions({\r\n\t\t\twidth: this.map.width,\r\n\t\t\theight: this.map.height,\r\n\t\t\tfontSize: 2,\r\n\t\t\tspacing: 2,\r\n\t\t\tforceSquareRatio: true\r\n\t\t})\r\n\t\tthis.minimap.clear()\r\n\t\tthis.drawMiniMap()\r\n\t\tthis.renderMap()\r\n\t},\r\n\r\n\tdrawMiniMap() {\r\n\t\tlet otherActors = this.map.actors.filter(a => {\r\n\t\t\treturn a instanceof Ladder || a instanceof Door\r\n\t\t})\r\n\t\tif (this.map.revealed) {\r\n\t\t\tfor (let y = 0; y < this.map.height; y++) {\r\n\t\t\t\tfor (let x = 0; x < this.map.width; x++) {\r\n\t\t\t\t\tlet tile = this.getTile(x, y)\r\n\t\t\t\t\tif (tile.x + ',' + tile.y in this.map.visible_tiles) {\r\n\t\t\t\t\t\tthis.minimap.draw(x, y, ' ', tile.bg(), this.brightenColor(tile.bg()))\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.minimap.draw(x, y, ' ', tile.bg(), tile.bg())\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (let a of otherActors) {\r\n\t\t\t\tthis.minimap.draw(a.x, a.y, ' ', a.fg, a.bg)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor (let y = 0; y < this.map.height; y++) {\r\n\t\t\t\tfor (let x = 0; x < this.map.width; x++) {\r\n\t\t\t\t\tlet tile = this.getTile(x, y)\r\n\t\t\t\t\tif (tile.x + ',' + tile.y in this.map.visible_tiles) {\r\n\t\t\t\t\t\tthis.minimap.draw(x, y, ' ', tile.bg(), this.brightenColor(tile.bg()))\r\n\t\t\t\t\t} else if (tile.x + ',' + tile.y in this.map.seen_tiles) {\r\n\t\t\t\t\t\tthis.minimap.draw(x, y, ' ', tile.bg(), tile.bg())\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (let a of otherActors) {\r\n\t\t\t\tif (a.x + ',' + a.y in this.map.seen_tiles) {\r\n\t\t\t\t\tthis.minimap.draw(a.x, a.y, ' ', a.fg, a.bg)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// Draw the actor in the mini-map\r\n\t\tthis.minimap.draw(this.player.x, this.player.y, ' ', 'yellow', 'yellow')\r\n\t},\r\n\r\n\tbrightenColor(color) {\r\n\t\t// console.log(color);\r\n\t\tlet hsl_color = ROT.Color.rgb2hsl(ROT.Color.fromString(color))\r\n\t\thsl_color[2] *= 1.25\r\n\t\treturn ROT.Color.toRGB(ROT.Color.hsl2rgb(hsl_color))\r\n\t},\r\n\r\n\tgetNearbyEnemies() {\r\n\t\tlet camera = {\r\n\t\t\t// camera x,y resides in the upper left corner\r\n\t\t\tx: this.player.x - ~~(Game.width / 2),\r\n\t\t\ty: this.player.y - ~~(Game.height / 2),\r\n\t\t\twidth: Math.ceil(Game.width),\r\n\t\t\theight: Game.height\r\n\t\t}\r\n\t\tlet startingPos = [camera.x, camera.y]\r\n\t\tif (camera.x < 0) {\r\n\t\t\t// far left\r\n\t\t\tstartingPos[0] = 0\r\n\t\t}\r\n\t\tif (camera.x + camera.width > Game.map.width) {\r\n\t\t\t// far right\r\n\t\t\tstartingPos[0] = Game.map.width - camera.width\r\n\t\t}\r\n\t\tif (camera.y <= 0) {\r\n\t\t\t// at the top of the map\r\n\t\t\tstartingPos[1] = 0\r\n\t\t}\r\n\t\tif (camera.y + camera.height > Game.map.height) {\r\n\t\t\t// at the bottom of the map\r\n\t\t\tstartingPos[1] = Game.map.height - camera.height\r\n\t\t}\r\n\t\tthis.camera = {\r\n\t\t\tx: startingPos[0],\r\n\t\t\ty: startingPos[1]\r\n\t\t}\r\n\t\tlet endingPos = [startingPos[0] + camera.width, startingPos[1] + camera.height]\r\n\t\tlet dx = 0\r\n\t\tlet dy = 0\r\n\t\tlet actors = []\r\n\t\tfor (let x = startingPos[0]; x < endingPos[0]; x++) {\r\n\t\t\tfor (let y = startingPos[1]; y < endingPos[1]; y++) {\r\n\t\t\t\tlet tile = this.getTile(x, y)\r\n\t\t\t\t// if (tile.x + ',' + tile.y in this.map.visible_tiles) {\r\n\t\t\t\tactors = actors.concat(tile.actors)\r\n\t\t\t\t// }\r\n\r\n\t\t\t\t// if (this.map.revealed) {\r\n\t\t\t\t//     actors = actors.concat(tile.actors);\r\n\t\t\t\t// } else {\r\n\t\t\t\t//     if (tile.x + \",\" + tile.y in this.map.visible_tiles)\r\n\t\t\t\t//         actors = actors.concat(tile.actors);\r\n\t\t\t\t// }\r\n\t\t\t}\r\n\t\t\tdx++\r\n\t\t\tdy = 0\r\n\t\t}\r\n\t\tlet enemies = actors.filter(actor => {\r\n\t\t\treturn actor.cb !== undefined && actor.cb.hostile\r\n\t\t})\r\n\r\n\t\t// we sort the enemies closest to farthest away\r\n\t\treturn enemies.sort((a1, a2) => {\r\n\t\t\tif (a1.distanceTo(this.player) < a2.distanceTo(this.player)) {\r\n\t\t\t\treturn -1\r\n\t\t\t} else if (a2.distanceTo(this.player) < a1.distanceTo(this.player)) {\r\n\t\t\t\treturn 1\r\n\t\t\t} else {\r\n\t\t\t\treturn 0\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\r\n\tgetClosestEnemyToPlayer() {\r\n\t\treturn this.getNearbyEnemies()[0]\r\n\t},\r\n\r\n\tclearSelectedTile() {\r\n\t\tthis.selectedTile = null\r\n\t\tthis.pathToTarget = {}\r\n\t\tthis.clearTempLog() // clear the temporary log which describes the tile we're on\r\n\t\tthis.targetReticle.visible = false\r\n\t},\r\n\r\n\tchangeSelectedTile(tile) {\r\n\t\tthis.selectedTile = tile\r\n\t\tlet { x, y } = tile\r\n\t\tlet blockedTile = this.selectedTile.blocked() || this.map.visible_tiles[x + ',' + y] === undefined\r\n\t\t// highlighting the path from the player to the target reticle using bresenham line algorithm\r\n\t\t/* https://rosettacode.org/wiki/Bitmap/Bresenham%27s_line_algorithm#JavaScript */\r\n\t\tthis.pathToTarget = {}\r\n\t\tif (!blockedTile) {\r\n\t\t\tlet x0 = this.player.x,\r\n\t\t\t\tx1 = this.selectedTile.x,\r\n\t\t\t\ty0 = this.player.y,\r\n\t\t\t\ty1 = this.selectedTile.y,\r\n\t\t\t\tdx = Math.abs(x1 - x0),\r\n\t\t\t\tsx = x0 < x1 ? 1 : -1,\r\n\t\t\t\tdy = Math.abs(y1 - y0),\r\n\t\t\t\tsy = y0 < y1 ? 1 : -1,\r\n\t\t\t\terr = (dx > dy ? dx : -dy) / 2\r\n\t\t\twhile (!(x0 === x1 && y0 === y1)) {\r\n\t\t\t\tthis.pathToTarget[x0 + ',' + y0] = true\r\n\t\t\t\tlet e2 = err\r\n\t\t\t\tif (e2 > -dx) {\r\n\t\t\t\t\terr -= dy\r\n\t\t\t\t\tx0 += sx\r\n\t\t\t\t}\r\n\t\t\t\tif (e2 < dy) {\r\n\t\t\t\t\terr += dx\r\n\t\t\t\t\ty0 += sy\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.pathToTarget[x0 + ',' + y0] = true\r\n\t\t\tthis.pathToTarget[this.player.x + ',' + this.player.y] = false\r\n\t\t}\r\n\t\tthis.targetReticle.visible = true\r\n\t\tthis.targetReticle.position.set(tile.x * this.display.tileSize, tile.y * this.display.tileSize)\r\n\t\tthis.describeSelectedTile()\r\n\r\n\t\treturn !blockedTile\r\n\t},\r\n\r\n\tselectNearestEnemyTile() {\r\n\t\tthis.clearSelectedTile()\r\n\t\tlet enemy = this.getClosestEnemyToPlayer()\r\n\t\tif (enemy !== undefined) {\r\n\t\t\tlet { x, y } = enemy\r\n\t\t\treturn this.changeSelectedTile(this.getTile(x, y))\r\n\t\t} else {\r\n\t\t\treturn false\r\n\t\t}\r\n\t},\r\n\r\n\tcycleThroughSelectableEnemies() {\r\n\t\tif (this.enemyCycle === null) {\r\n\t\t\tthis.enemyCycle = this.getNearbyEnemies()\r\n\t\t\tthis.enemyCycleIndex = 0\r\n\t\t}\r\n\t\t// if there's more than one enemy, we can cycle to the next closest enemy\r\n\t\tif (this.enemyCycle.length > 1) {\r\n\t\t\tthis.clearSelectedTile()\r\n\t\t\tthis.enemyCycleIndex += 1\r\n\t\t\tif (this.enemyCycleIndex === this.enemyCycle.length) {\r\n\t\t\t\tthis.enemyCycleIndex = 0\r\n\t\t\t}\r\n\r\n\t\t\tlet newTarget = this.enemyCycle[this.enemyCycleIndex]\r\n\t\t\treturn this.changeSelectedTile(this.getTile(newTarget.x, newTarget.y))\r\n\t\t}\r\n\t},\r\n\r\n\tdescribeSelectedTile() {\r\n\t\t/* Returns an array of strings describing what exists on the currently selected tile.\r\n        this can be obstacles, items, traps, or enemies */\r\n\t\tlet { actors } = this.selectedTile\r\n\t\tlet names = actors\r\n\t\t\t.filter(a => {\r\n\t\t\t\treturn a instanceof Entity && a !== this.player\r\n\t\t\t})\r\n\t\t\t.map(a => {\r\n\t\t\t\treturn a instanceof Item ? a.type.toLowerCase() : a.name.toLowerCase()\r\n\t\t\t})\r\n\t\tlet prettyNames = []\r\n\t\tprettyNames = names.slice(1, -1).reduce((buf, str) => {\r\n\t\t\treturn buf + ', a ' + str\r\n\t\t}, 'a  ' + names.slice(0, 1))\r\n\r\n\t\tif (names.length > 1) {\r\n\t\t\tprettyNames = prettyNames + [` and a ${names.slice(-1)}`]\r\n\t\t} else if (names.length == 0) {\r\n\t\t\tprettyNames = 'nothing'\r\n\t\t}\r\n\r\n\t\tif ((Game.player.targeting || Game.player.casting) && this.selectedTile !== null) {\r\n\t\t\tlet inView = Game.map.data[this.selectedTile.y][this.selectedTile.x].actors.some(obs => {\r\n\t\t\t\treturn obs.id === untargetableBorders.id\r\n\t\t\t})\r\n\t\t\t\t? ' This tile is out of range or blocked.'\r\n\t\t\t\t: ''\r\n\t\t\tthis.log(`[You see ${prettyNames} here.${inView}]`, 'player_move', true)\r\n\t\t} else {\r\n\t\t\tthis.log(`[You see ${prettyNames} here.]`, 'player_move', true)\r\n\t\t}\r\n\t},\r\n\r\n\tgetTile(x, y) {\r\n\t\treturn this.map.data[y][x]\r\n\t},\r\n\r\n\tprintPlayerTile() {\r\n\t\tconsole.log(Game.map.data[this.player.y][this.player.x])\r\n\t},\r\n\r\n\teventToTile() {\r\n\t\tlet { x, y } = this.display.app.renderer.plugins.interaction.mouse.global\r\n\t\tlet camera = {\r\n\t\t\t// camera x,y resides in the upper left corner\r\n\t\t\tx: Game.player.x - ~~(Game.width / 2),\r\n\t\t\ty: Game.player.y - ~~(Game.height / 2) - 1\r\n\t\t}\r\n\t\tlet dx = camera.x + ~~(x / this.display.tileSize)\r\n\t\tlet dy = camera.y + ~~(y / this.display.tileSize)\r\n\t\tif (this.inbounds(dx, dy)) return this.getTile(dx, dy)\r\n\t\telse return null\r\n\t},\r\n\r\n\tlog(message, type, tmp = false) {\r\n\t\tlet message_color = {\r\n\t\t\tdefend: 'lightblue',\r\n\t\t\tmagic: '#3C1CFD',\r\n\t\t\tattack: 'red',\r\n\t\t\tdeath: 'crimson',\r\n\t\t\tinformation: 'yellow',\r\n\t\t\tplayer_move: 'grey',\r\n\t\t\tlevel_up: 'green',\r\n\t\t\talert: 'orange'\r\n\t\t}\r\n\t\tlet color = type in message_color ? message_color[type] : type\r\n\t\tif (tmp) this.tempMessages.splice(0, 1, [message, color])\r\n\t\telse this.messageHistory.push([message, color])\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/Game.js","import ROT from 'rot-js'\r\n\r\nimport { createMapFromJSON } from '#/map/GameMap.js'\r\nimport Player from '#/entities/actors/Player.js'\r\nimport { Actor } from '#/entities/actors/Actor.js'\r\nimport NPC from '#/entities/actors/NPC.js'\r\n\r\nimport { Game } from '#/Game.js'\r\nimport Item from '#/entities/items/Item.js'\r\nimport * as PIXI from 'pixi.js'\r\n\r\nexport default class GameDisplay {\r\n\tconstructor() {\r\n\t\tthis.app = new PIXI.Application({\r\n\t\t\t// forceCanvas: true,\r\n\t\t\twidth: 1024,\r\n\t\t\theight: 640\r\n\t\t})\r\n\t\t// this will be the texture we generate by creating a container, rendering it and generating it from\r\n\t\t// the renderer\r\n\t\t/*\r\n\t\t\tthis.staticBackground = renderer.generateTexture(theContainer)\r\n\t\t*/\r\n\t\tthis.staticBackground = null\r\n\t\tthis.animatedBackground = null\r\n\t\tthis.FOVBackground = null\r\n\t\tthis.HUDBackground = null\r\n\t\tthis.movingSprites = []\r\n\t\tthis.viewPort = null\r\n\t\tthis.tileSize = 32\r\n\t\tthis.tileset = null\r\n\t\tthis.tilesetMapping = {}\r\n\t\tthis.spriteBox = [] // Game.width * Game.height sprites to overlay screen for FOV\r\n\t}\r\n\r\n\tloadAssets(cb) {\r\n\t\tlet { renderer, stage, view } = this.app\r\n\t\tlet { resources } = PIXI.loader\r\n\t\tconst spritesheet = {\r\n\t\t\turl: 'static/images/compiled_tileset_32x32.png',\r\n\t\t\tname: 'spritesheet'\r\n\t\t}\r\n\t\tconst textureAtlas = {\r\n\t\t\turl: 'static/compiled_dawnlike.json',\r\n\t\t\tname: 'textureAtlas'\r\n\t\t}\r\n\t\tconst overworldMap = {\r\n\t\t\turl: 'static/maps/overworld.json',\r\n\t\t\tname: 'overworld'\r\n\t\t}\r\n\t\tconst graveyardMap = {\r\n\t\t\turl: 'static/maps/graveyard.json',\r\n\t\t\tname: 'graveyard'\r\n\t\t}\r\n\t\tconst lichLairMap = {\r\n\t\t\turl: 'static/maps/lichLair.json',\r\n\t\t\tname: 'lichLair'\r\n\t\t}\r\n\t\tconst orcCastleMap = {\r\n\t\t\turl: 'static/maps/orcCastle.json',\r\n\t\t\tname: 'orcCastle'\r\n\t\t}\r\n\r\n\t\tPIXI.loader\r\n\t\t\t.add(textureAtlas)\r\n\t\t\t.add(spritesheet)\r\n\t\t\t.add(overworldMap)\r\n\t\t\t.add(graveyardMap)\r\n\t\t\t.add(lichLairMap)\r\n\t\t\t.add(orcCastleMap)\r\n\t\t\t.on('progress', (l, r) => this.handleAssetLoad(l, r))\r\n\t\t\t.load(() => {\r\n\t\t\t\tthis.tileset = PIXI.loader.resources['textureAtlas'].data\r\n\t\t\t\t// I want to load every 32x32 frame from the tileset image\r\n\t\t\t\tfor (let id = 0; id < this.tileset.tilecount; id++) {\r\n\t\t\t\t\tlet coords = this.getTilesetCoords(id)\r\n\t\t\t\t\tlet frame = new PIXI.Rectangle(coords[0], coords[1], this.tileSize, this.tileSize)\r\n\t\t\t\t\tlet texture = new PIXI.Texture(PIXI.loader.resources['spritesheet'].texture, frame)\r\n\t\t\t\t\tthis.tilesetMapping[id] = texture\r\n\t\t\t\t}\r\n\t\t\t\tthis.clear()\r\n\t\t\t\tlet renderLoop = delta => {\r\n\t\t\t\t\t// maintain a track of all the sprites that should have updated movement on this tick\r\n\t\t\t\t\t// if they are at their location, filter them from the record\r\n\t\t\t\t\tfor (let obj of this.movingSprites)\r\n\t\t\t\t\t\tif (obj.sprite.x === obj.target.x && obj.sprite.y === obj.target.y)\r\n\t\t\t\t\t\t\tthis.movingSprites = this.movingSprites.filter(o => o.sprite !== obj.sprite)\r\n\r\n\t\t\t\t\t// update the location of every sprite\r\n\t\t\t\t\tfor (let obj of this.movingSprites) {\r\n\t\t\t\t\t\tlet { sprite, target } = obj\r\n\t\t\t\t\t\tlet x = 0\r\n\t\t\t\t\t\tlet y = 0\r\n\t\t\t\t\t\tlet distX = Math.abs(sprite.x - target.x)\r\n\t\t\t\t\t\tlet distY = Math.abs(sprite.y - target.y)\r\n\t\t\t\t\t\tlet shouldSlowDown = (distX <= 12 && distX !== 0) || (distY <= 12 && distY !== 0)\r\n\t\t\t\t\t\tlet movementSpeed = shouldSlowDown ? 2.0 : 4.0\r\n\t\t\t\t\t\tif (target.x > sprite.x) x = movementSpeed\r\n\t\t\t\t\t\tif (target.x < sprite.x) x = -movementSpeed\r\n\t\t\t\t\t\tif (target.y > sprite.y) y = movementSpeed\r\n\t\t\t\t\t\tif (target.y < sprite.y) y = -movementSpeed\r\n\t\t\t\t\t\tif (Math.abs(x) > distX) x = distX\r\n\t\t\t\t\t\tif (Math.abs(y) > distY) y = distY\r\n\t\t\t\t\t\tsprite.position.set(sprite.x + x, sprite.y + y)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.app.ticker.add(delta => renderLoop(delta))\r\n\t\t\t\tcb()\r\n\t\t\t})\r\n\t}\r\n\r\n\tgetTilesetCoords(id) {\r\n\t\tlet tileWidth = this.tileset.tilewidth\r\n\t\tlet tileHeight = this.tileset.tileheight\r\n\t\tlet cols = this.tileset.columns\r\n\t\tlet rowNumber = Math.floor(id / cols) * tileHeight\r\n\t\tlet colNumber = (id % cols) * tileHeight\r\n\t\treturn [colNumber, rowNumber]\r\n\t}\r\n\t/*\r\n\t\t\tI want to iterate through every tile in the map that is an obstacle (animated or not).\r\n\t\t\tFor each obstacle:\r\n\t\t\t\tif it is animated, create a new PIXI.extras.AnimatedSprite for it with the proper frames and animation speed\r\n\t\t\t\tif it is not animated, create a normal PIXI.Sprite\r\n\t\t\t\tOnce the obstacle sprite is created, add it to a container\r\n\t\t*/\r\n\trenderMap(map) {\r\n\t\tlet { renderer, stage } = this.app\r\n\t\tstage.removeChildren()\r\n\t\tlet staticBackground = new PIXI.Container()\r\n\t\tthis.animatedBackground = new PIXI.Container()\r\n\t\tfor (let y = 0; y < map.height; y++) {\r\n\t\t\tfor (let x = 0; x < map.width; x++) {\r\n\t\t\t\tlet tile = map.data[y][x]\r\n\t\t\t\tfor (let o of tile.obstacles) {\r\n\t\t\t\t\tif (o.animated === true && o.animated_id !== undefined && this.getTexture(o.animated_id) !== undefined) {\r\n\t\t\t\t\t\tlet frames = [this.getTexture(o.id), this.getTexture(o.animated_id)]\r\n\t\t\t\t\t\tlet sprite = new PIXI.extras.AnimatedSprite(frames)\r\n\t\t\t\t\t\tsprite.position.set(x * this.tileSize, y * this.tileSize)\r\n\t\t\t\t\t\tsprite.animationSpeed = 0.025\r\n\t\t\t\t\t\t// pick a random interval for the animation to play at!\r\n\t\t\t\t\t\tlet randomInterval = ~~(Math.random() * 150)\r\n\t\t\t\t\t\tsetTimeout(() => sprite.play(), randomInterval)\r\n\t\t\t\t\t\tthis.animatedBackground.addChild(sprite)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet sprite = new PIXI.Sprite(this.getTexture(o.id))\r\n\t\t\t\t\t\tsprite.position.set(x * this.tileSize, y * this.tileSize)\r\n\t\t\t\t\t\tstaticBackground.addChild(sprite)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.staticBackground = new PIXI.Sprite(renderer.generateTexture(staticBackground))\r\n\t\tthis.staticBackground.position.set(0, 0)\r\n\t\tthis.animatedBackground.position.set(0, 0)\r\n\t\tthis.background = new PIXI.Container()\r\n\t\tthis.background.addChild(this.staticBackground)\r\n\t\tthis.background.addChild(this.animatedBackground)\r\n\t\tstage.addChild(this.background)\r\n\t\tlet camera = {\r\n\t\t\t// camera x,y resides in the upper left corner\r\n\t\t\tx: Game.player.x - ~~(Game.width / 2),\r\n\t\t\ty: Game.player.y - ~~(Game.height / 2),\r\n\t\t\twidth: Math.ceil(Game.width),\r\n\t\t\theight: Game.height\r\n\t\t}\r\n\t\tlet startingPos = [camera.x, camera.y]\r\n\t\tif (camera.x < 0) {\r\n\t\t\t// far left\r\n\t\t\tstartingPos[0] = 0\r\n\t\t}\r\n\t\tif (camera.x + camera.width > Game.map.width) {\r\n\t\t\t// far right\r\n\t\t\tstartingPos[0] = Game.map.width - camera.width\r\n\t\t}\r\n\t\tif (camera.y <= 0) {\r\n\t\t\t// at the top of the map\r\n\t\t\tstartingPos[1] = 0\r\n\t\t}\r\n\t\tif (camera.y + camera.height > Game.map.height) {\r\n\t\t\t// at the bottom of the map\r\n\t\t\tstartingPos[1] = Game.map.height - camera.height\r\n\t\t}\r\n\t\tlet endingPos = [startingPos[0] + camera.width, startingPos[1] + camera.height]\r\n\t\tthis.background.position.set(-startingPos[0] * this.tileSize, -startingPos[1] * this.tileSize)\r\n\t\t// draw the actors last because they should be on the top-most layer\r\n\t\tfor (let a of map.actors) {\r\n\t\t\tif (!(a instanceof Item)) {\r\n\t\t\t\tthis.assignSprite(a)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// if the map isn't completely revealed, we need to generate some FOV shadowing hiding the\r\n\t\t// unvisited parts of the map\r\n\t\tif (!map.revealed) {\r\n\t\t\tthis.FOVBackground = new PIXI.Container()\r\n\t\t\tthis.spriteBox = [] // Game.width * Game.height sprites to overlay screen for FOV\r\n\t\t\tfor (let i = 0; i < Game.map.height; i++) {\r\n\t\t\t\tthis.spriteBox.push([])\r\n\t\t\t\tfor (let j = 0; j < Game.map.width; j++) {\r\n\t\t\t\t\tlet sprite = new PIXI.Sprite(this.getTexture(7026))\r\n\t\t\t\t\tsprite.position.set(j * this.tileSize, i * this.tileSize)\r\n\t\t\t\t\tthis.spriteBox[i].push(sprite)\r\n\t\t\t\t\tthis.FOVBackground.addChild(sprite)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (let y = 0; y < map.height; y++) {\r\n\t\t\t\tfor (let x = 0; x < map.width; x++) {\r\n\t\t\t\t\tif (!map.visible_tiles[x + ',' + y]) {\r\n\t\t\t\t\t\tif (x + ',' + y in map.seen_tiles) {\r\n\t\t\t\t\t\t\tthis.spriteBox[y][x].alpha = 0.5\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.spriteBox[y][x].alpha = 1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.spriteBox[y][x].visible = false\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.background.addChild(this.FOVBackground)\r\n\t\t}\r\n\t}\r\n\r\n\tupdateMap() {\r\n\t\tlet camera = {\r\n\t\t\t// camera x,y resides in the upper left corner\r\n\t\t\tx: Game.player.x - ~~(Game.width / 2),\r\n\t\t\ty: Game.player.y - ~~(Game.height / 2),\r\n\t\t\twidth: Math.ceil(Game.width),\r\n\t\t\theight: Game.height\r\n\t\t}\r\n\t\tlet startingPos = [camera.x, camera.y]\r\n\t\tif (camera.x < 0) {\r\n\t\t\tstartingPos[0] = 0\r\n\t\t}\r\n\t\tif (camera.x + camera.width > Game.map.width) {\r\n\t\t\tstartingPos[0] = Game.map.width - camera.width\r\n\t\t}\r\n\t\tif (camera.y <= 0) {\r\n\t\t\tstartingPos[1] = 0\r\n\t\t}\r\n\t\tif (camera.y + camera.height > Game.map.height) {\r\n\t\t\tstartingPos[1] = Game.map.height - camera.height\r\n\t\t}\r\n\t\tlet endingPos = [startingPos[0] + camera.width, startingPos[1] + camera.height]\r\n\t\tif (!Game.map.revealed) {\r\n\t\t\tObject.assign(Game.map.seen_tiles, Game.map.visible_tiles)\r\n\t\t\tGame.map.visible_tiles = {}\r\n\r\n\t\t\t// FOV calculations\r\n\t\t\tlet fov = new ROT.FOV.PreciseShadowcasting((x, y) => {\r\n\t\t\t\treturn Game.inbounds(x, y) && Game.getTile(x, y).visible()\r\n\t\t\t})\r\n\r\n\t\t\tfov.compute(Game.player.x, Game.player.y, Game.player.cb.range, (x, y, r, visibility) => {\r\n\t\t\t\tGame.map.visible_tiles[x + ',' + y] = true\r\n\t\t\t})\r\n\t\t\tfor (let y = 0; y < Game.map.height; y++) {\r\n\t\t\t\tfor (let x = 0; x < Game.map.width; x++) {\r\n\t\t\t\t\tif (Game.map.visible_tiles[x + ',' + y]) {\r\n\t\t\t\t\t\tthis.spriteBox[y][x].visible = false\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// tile is not directly visible\r\n\t\t\t\t\t\tthis.spriteBox[y][x].visible = true\r\n\t\t\t\t\t\tif (Game.map.seen_tiles[x + ',' + y]) {\r\n\t\t\t\t\t\t\t// we can do some special transparency to make tiles closest to visible tiles brighter, giving some illusion of\r\n\t\t\t\t\t\t\t// less & less vision as you go farther back\r\n\t\t\t\t\t\t\tlet visible = (...s) => s.some(c => Game.map.visible_tiles[c])\r\n\t\t\t\t\t\t\tlet lighter1 = visible(\r\n\t\t\t\t\t\t\t\t`${x - 1},${y}`,\r\n\t\t\t\t\t\t\t\t`${x + 1},${y}`,\r\n\t\t\t\t\t\t\t\t`${x},${y - 1}`,\r\n\t\t\t\t\t\t\t\t`${x},${y + 1}`,\r\n\t\t\t\t\t\t\t\t`${x - 1},${y - 1}`,\r\n\t\t\t\t\t\t\t\t`${x + 1},${y + 1}`,\r\n\t\t\t\t\t\t\t\t`${x - 1},${y + 1}`,\r\n\t\t\t\t\t\t\t\t`${x + 1},${y - 1}`\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t// let lighter2 = visible(\r\n\t\t\t\t\t\t\t//     `${x - 2},${y}`,\r\n\t\t\t\t\t\t\t//     `${x + 2},${y}`,\r\n\t\t\t\t\t\t\t//     `${x},${y - 2}`,\r\n\t\t\t\t\t\t\t//     `${x},${y + 2}`,\r\n\t\t\t\t\t\t\t//     `${x - 2},${y - 2}`,\r\n\t\t\t\t\t\t\t//     `${x + 2},${y + 2}`,\r\n\t\t\t\t\t\t\t//     `${x - 2},${y + 2}`,\r\n\t\t\t\t\t\t\t//     `${x + 2},${y - 2}`\r\n\t\t\t\t\t\t\t// )\r\n\t\t\t\t\t\t\tthis.spriteBox[y][x].alpha = lighter1 ? 0.5 : 0.7\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.spriteBox[y][x].alpha = 1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!Game.userSettings.hpBars) {\r\n\t\t\tfor (let actor of Game.map.actors) {\r\n\t\t\t\tif (actor.spriteHPBar !== undefined) {\r\n\t\t\t\t\tthis.background.removeChild(actor.spriteHPBar)\r\n\t\t\t\t\tactor.spriteHPBar = undefined\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor (let x = camera.x; x < camera.x + camera.width - 1; x++) {\r\n\t\t\t\tfor (let y = camera.y; y < camera.y + camera.height - 1; y++) {\r\n\t\t\t\t\tif (Game.inbounds(x, y)) {\r\n\t\t\t\t\t\tif (Game.map.revealed || Game.map.visible_tiles[x + ',' + y]) {\r\n\t\t\t\t\t\t\tlet tile = Game.getTile(x, y)\r\n\t\t\t\t\t\t\tlet actors = tile.actors.filter(a => {\r\n\t\t\t\t\t\t\t\treturn a instanceof Actor && !(a instanceof Player) && !(a instanceof NPC)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tif (actors.length >= 1) {\r\n\t\t\t\t\t\t\t\tfor (let a of actors) {\r\n\t\t\t\t\t\t\t\t\tif (a.spriteHPBar !== undefined) {\r\n\t\t\t\t\t\t\t\t\t\tthis.background.removeChild(a.spriteHPBar)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (a.cb.hp < a.cb.maxhp) {\r\n\t\t\t\t\t\t\t\t\t\t// create new PIXI Sprite to be the health bar\r\n\t\t\t\t\t\t\t\t\t\tlet g = new PIXI.Graphics()\r\n\t\t\t\t\t\t\t\t\t\tlet gx = a.x * this.tileSize\r\n\t\t\t\t\t\t\t\t\t\tlet gy = (a.y - 0.5) * this.tileSize\r\n\t\t\t\t\t\t\t\t\t\t// background\r\n\t\t\t\t\t\t\t\t\t\tg.beginFill(0xa22a2a)\r\n\t\t\t\t\t\t\t\t\t\tg.drawRect(gx + 1, gy, this.tileSize - 2, 7)\r\n\t\t\t\t\t\t\t\t\t\t// foreground\r\n\t\t\t\t\t\t\t\t\t\tg.beginFill(0xff5252)\r\n\t\t\t\t\t\t\t\t\t\tlet width = a.cb.hp / a.cb.maxhp * (this.tileSize - 4)\r\n\t\t\t\t\t\t\t\t\t\tg.drawRect(gx + 2, gy + 1, width, 5)\r\n\t\t\t\t\t\t\t\t\t\tg.endFill()\r\n\t\t\t\t\t\t\t\t\t\tlet sprite = new PIXI.Sprite(this.app.renderer.generateTexture(g))\r\n\t\t\t\t\t\t\t\t\t\tsprite.position.set(gx, gy)\r\n\t\t\t\t\t\t\t\t\t\ta.setSpriteHPBar(sprite)\r\n\t\t\t\t\t\t\t\t\t\tthis.background.addChild(sprite)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.moveSprite(this.background, -startingPos[0], -startingPos[1])\r\n\t}\r\n\r\n\tgetTexture(id) {\r\n\t\treturn this.tilesetMapping[id]\r\n\t}\r\n\r\n\tmoveSprite(sprite, x, y, animate = true) {\r\n\t\t// used to smoothly pan the map from its curent location to a new one\r\n\t\t// by adding it to the list of sprites who should smoothly progress towards some location\r\n\t\tlet nx = x * this.tileSize\r\n\t\tlet ny = y * this.tileSize\r\n\t\tif (animate) {\r\n\t\t\tlet existingMovementObject = this.movingSprites.filter(o => {\r\n\t\t\t\treturn o.sprite === sprite\r\n\t\t\t})\r\n\t\t\tif (existingMovementObject.length > 0) {\r\n\t\t\t\t// sprite.position.set(nx, ny)\r\n\t\t\t\tthis.movingSprites = this.movingSprites.filter(o => {\r\n\t\t\t\t\treturn o.sprite !== sprite\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tthis.movingSprites.push({ sprite, target: { x: nx, y: ny } })\r\n\t\t} else {\r\n\t\t\tsprite.position.set(nx, ny)\r\n\t\t}\r\n\t}\r\n\r\n\tassignSprite(actor, belowPlayer = false, index = 1) {\r\n\t\tlet { x, y, id } = actor\r\n\t\tlet props = this.tileset.tileproperties[actor.id + '']\r\n\t\t// if (actor.sprite === null || actor.sprite === undefined) {\r\n\t\tif (\r\n\t\t\tprops.animated === true &&\r\n\t\t\tprops.animated_id !== undefined &&\r\n\t\t\tthis.getTexture(props.animated_id) !== undefined\r\n\t\t) {\r\n\t\t\tlet frames = [this.getTexture(actor.id), this.getTexture(props.animated_id)]\r\n\t\t\tlet sprite = new PIXI.extras.AnimatedSprite(frames)\r\n\t\t\tactor.setSprite(sprite)\r\n\t\t\tsprite.animationSpeed = 0.065\r\n\t\t\tlet randomInterval = ~~(Math.random() * 1000)\r\n\t\t\tsetTimeout(() => sprite.play(), randomInterval)\r\n\t\t\tif (belowPlayer) this.background.addChildAt(sprite, index)\r\n\t\t\telse this.background.addChild(sprite)\r\n\t\t\tsprite.position.set(actor.x * this.tileSize, actor.y * this.tileSize)\r\n\t\t} else {\r\n\t\t\tlet sprite = new PIXI.Sprite(this.getTexture(actor.id))\r\n\t\t\tactor.setSprite(sprite)\r\n\t\t\tif (belowPlayer) this.background.addChildAt(sprite, 1)\r\n\t\t\telse this.background.addChild(sprite)\r\n\t\t\tsprite.position.set(actor.x * this.tileSize, actor.y * this.tileSize)\r\n\t\t}\r\n\t}\r\n\r\n\tclearSprite(actor) {\r\n\t\tthis.background.removeChild(actor.sprite)\r\n\t\tactor.sprite = null\r\n\t}\r\n\r\n\tremoveChild(sprite) {\r\n\t\tthis.background.removeChild(sprite)\r\n\t}\r\n\r\n\tgetContainer() {\r\n\t\treturn this.app.view\r\n\t}\r\n\r\n\thandleAssetLoad(loader, resource) {\r\n\t\tlet { stage, renderer } = this.app\r\n\t\tthis.clear()\r\n\t\tlet graphics = new PIXI.Graphics()\r\n\t\tlet cx = renderer.width / 2\r\n\t\tlet cy = renderer.height / 2\r\n\t\tlet barLength = renderer.width / 2\r\n\t\tlet text = new PIXI.Text(`Loading ${resource.name}... ${Math.floor(loader.progress)}%`, {\r\n\t\t\tfill: 0xffffff,\r\n\t\t\tfontSize: 16,\r\n\t\t\tfontFamily: ['Source Code Pro', 'Menlo', 'Consolas'],\r\n\t\t\tx: cx,\r\n\t\t\ty: cy\r\n\t\t})\r\n\t\t// clear the previous progress bar\r\n\t\t// draw the progress bar outline\r\n\t\tgraphics.lineStyle(50, 0x6f6f6f)\r\n\t\tgraphics.drawRoundedRect(cx - barLength / 2, cy, barLength, 4)\r\n\t\t// draw the progress bar interior\r\n\t\tlet maxInteriorBarLength = barLength - 10\r\n\t\tlet currentBarLength = maxInteriorBarLength * (loader.progress / 100)\r\n\t\tgraphics.lineStyle(30, 0x04ab34)\r\n\t\tgraphics.drawRoundedRect(cx - maxInteriorBarLength / 2, cy, currentBarLength, 4)\r\n\t\tstage.addChild(graphics)\r\n\t\tstage.addChild(text)\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.app.stage.removeChildren()\r\n\t}\r\n\r\n\tact() {\r\n\t\tGame.engine.lock()\r\n\t\tthis.updateMap()\r\n\t\tGame.drawMiniMap()\r\n\t\tGame.engine.unlock()\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/GameDisplay.js","<style>\r\n.ability {\r\n    cursor: pointer;\r\n    border: 2px solid #4f4f4f;\r\n    border-radius: 4px;\r\n}\r\n\r\n.sprite {\r\n    cursor: pointer;\r\n}\r\n\r\n.sprite:hover {\r\n    cursor: pointer;\r\n    background-color: #565656;\r\n    border-radius: 2px;\r\n}\r\n\r\n.spriteIsSelected {\r\n    cursor: pointer;\r\n    background-color: rgb(103, 141, 255);\r\n    border-radius: 2px;\r\n}\r\n</style>\r\n\r\n<template>\r\n\r\n<v-app dark>\r\n    <v-container grid-list-xl>\r\n        <v-layout row>\r\n            <v-flex xs12>\r\n                <h2>Welcome to Rotten Soup</h2>\r\n            </v-flex>\r\n        </v-layout>\r\n        <v-layout row>\r\n            <v-flex>\r\n                <h3>Select your hero by clicking on the character you want to play</h3>\r\n            </v-flex>\r\n        </v-layout>\r\n        <v-layout row wrap>\r\n            <v-flex style=\"padding: 10px\" xs4 v-for=\"(sprite, index) in playerSprites\" :key=\"index\">\r\n                <!-- Card representing player class -->\r\n                <v-card style=\"padding: 25px\">\r\n                    <!-- Class name and short description  -->\r\n                    <v-layout row>\r\n                        <div>\r\n                            <h5>{{sprite.name}}</h5>\r\n                            <p>{{sprite.description}}</p>\r\n                        </div>\r\n                    </v-layout>\r\n                    <!--  Class abilities and stats-->\r\n                    <!-- <v-layout row>\r\n                        <div>\r\n                            <p>\r\n                                Abilities\r\n                            </p>\r\n                            <v-flex xs4 v-for=\"(ability, index) in sprite.abilities\" key=\"index\">\r\n                                <v-layout row>\r\n                                    <v-tooltip bottom align-center>\r\n                                        <p class=\"text-xs-center ma-0\" style=\"max-width: 200px\">\r\n                                            {{ability.description}}\r\n                                        </p>\r\n                                        <img\r\n                                            class=\"ability\"\r\n                                            v-bind:src=\"getSpellSplashArt(ability.school.toLowerCase(), ability.art)\"\r\n                                            slot=\"activator\"\r\n                                        />\r\n                                    </v-tooltip>\r\n                                </v-layout>\r\n                            </v-flex>\r\n                        </div>\r\n                    </v-layout> -->\r\n                    <!-- Possible sprites player can choose to play  -->\r\n                    <v-layout row>\r\n                        Characters\r\n                    </v-layout>\r\n                    <v-layout row>\r\n                        <v-flex style=\"margin-right: 5px\" col xs1 v-for=\"id in sprite.sprites\" :key=\"id\">\r\n                            <v-layout row align-center>\r\n                                <v-flex>\r\n                                    <img v-on:click=\"selectSprite(id)\" v-bind:class=\"{spriteIsSelected : (selectedSprite === id), sprite : (selectedSprite !== id)}\" :src=\"getPlayerSpriteImage(id)\" />\r\n                                </v-flex>\r\n                            </v-layout>\r\n                        </v-flex>\r\n                    </v-layout>\r\n                </v-card>\r\n            </v-flex>\r\n        </v-layout>\r\n    </v-container>\r\n</v-app>\r\n\r\n</template>\r\n\r\n<script>\r\n// import { Game } from '@/assets/js/game/Game.js'\r\n\r\nexport default {\r\n    name: 'start-menu',\r\n    // props: ['Game'],\r\n    data() {\r\n        return {\r\n            selectedSprite: null,\r\n            playerSprites: [\r\n                {\r\n                    name: 'Monk',\r\n                    description: 'A master of martial arts with special healing abilities',\r\n                    abilities: [\r\n                        {\r\n                            name: 'Magic Dart',\r\n                            description: 'A magical dart of energy that deals between 1-8 damage to a target',\r\n                            school: 'conjuration',\r\n                            art: 'magic_dart'\r\n                        }\r\n                    ],\r\n                    stats: {\r\n                        hp: 50,\r\n                        strength: 1,\r\n                        dexterity: 1,\r\n                        wisdom: 1\r\n                    },\r\n                    sprites: [4812, 4453, 3859, 4219]\r\n                },\r\n                {\r\n                    name: 'Ninja',\r\n                    description: 'A sneaky, hidden ninja of a secret order with the ability to stealth',\r\n                    abilities: [\r\n                        {\r\n                            name: 'Magic Dart',\r\n                            description: 'A magical dart of energy that deals between 1-8 damage to a target',\r\n                            school: 'conjuration',\r\n                            art: 'magic_dart'\r\n                        }\r\n                    ],\r\n                    stats: {\r\n                        hp: 50,\r\n                        strength: 1,\r\n                        dexterity: 1,\r\n                        wisdom: 1\r\n                    },\r\n                    sprites: [4334, 4814]\r\n                },\r\n                {\r\n                    name: 'Knight',\r\n                    description: 'A proud knight, sworn to uphold chivalric values',\r\n                    abilities: [\r\n                        {\r\n                            name: 'Magic Dart',\r\n                            description: 'A magical dart of energy that deals between 1-8 damage to a target',\r\n                            school: 'conjuration',\r\n                            art: 'magic_dart'\r\n                        }\r\n                    ],\r\n                    stats: {\r\n                        hp: 50,\r\n                        strength: 1,\r\n                        dexterity: 1,\r\n                        wisdom: 1\r\n                    },\r\n                    sprites: [4213, 4693]\r\n                },\r\n                {\r\n                    name: 'Barbarian',\r\n                    description: 'A wild and vicious savage with extreme strength and rage',\r\n                    abilities: [\r\n                        {\r\n                            name: 'Magic Dart',\r\n                            description: 'A magical dart of energy that deals between 1-8 damage to a target',\r\n                            school: 'conjuration',\r\n                            art: 'magic_dart'\r\n                        }\r\n                    ],\r\n                    stats: {\r\n                        hp: 50,\r\n                        strength: 1,\r\n                        dexterity: 1,\r\n                        wisdom: 1\r\n                    },\r\n                    sprites: [4337, 4336]\r\n                },\r\n                {\r\n                    name: 'Wizard',\r\n                    description: 'A scholar of the arcane and all things magical',\r\n                    abilities: [\r\n                        {\r\n                            name: 'Magic Dart',\r\n                            description: 'A magical dart of energy that deals between 1-8 damage to a target',\r\n                            school: 'conjuration',\r\n                            art: 'magic_dart'\r\n                        }\r\n                    ],\r\n                    stats: {\r\n                        hp: 50,\r\n                        strength: 1,\r\n                        dexterity: 1,\r\n                        wisdom: 1\r\n                    },\r\n                    sprites: [3858, 4218, 4813]\r\n                }\r\n            ]\r\n        }\r\n    },\r\n    created() {},\r\n    methods: {\r\n        getPlayerSpriteImage(id) {\r\n            return `../static/images/player_sprites/${id}.png`\r\n        },\r\n        selectSprite(id) {\r\n            this.$emit('spriteSelected', id)\r\n            // this.selectedSprite = id\r\n            // this.loadGame()\r\n        },\r\n        getSpellSplashArt(school, name) {\r\n            return `../static/images/spells/${school}/${name}.png`\r\n        }\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/StartMenu.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{attrs:{\"dark\":\"\"}},[_c('v-container',{attrs:{\"grid-list-xl\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('h2',[_vm._v(\"Welcome to Rotten Soup\")])])],1),_vm._v(\" \"),_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',[_c('h3',[_vm._v(\"Select your hero by clicking on the character you want to play\")])])],1),_vm._v(\" \"),_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},_vm._l((_vm.playerSprites),function(sprite,index){return _c('v-flex',{key:index,staticStyle:{\"padding\":\"10px\"},attrs:{\"xs4\":\"\"}},[_c('v-card',{staticStyle:{\"padding\":\"25px\"}},[_c('v-layout',{attrs:{\"row\":\"\"}},[_c('div',[_c('h5',[_vm._v(_vm._s(sprite.name))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(sprite.description))])])]),_vm._v(\" \"),_c('v-layout',{attrs:{\"row\":\"\"}},[_vm._v(\"\\r\\n                        Characters\\r\\n                    \")]),_vm._v(\" \"),_c('v-layout',{attrs:{\"row\":\"\"}},_vm._l((sprite.sprites),function(id){return _c('v-flex',{key:id,staticStyle:{\"margin-right\":\"5px\"},attrs:{\"col\":\"\",\"xs1\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"align-center\":\"\"}},[_c('v-flex',[_c('img',{class:{spriteIsSelected : (_vm.selectedSprite === id), sprite : (_vm.selectedSprite !== id)},attrs:{\"src\":_vm.getPlayerSpriteImage(id)},on:{\"click\":function($event){_vm.selectSprite(id)}}})])],1)],1)}))],1)],1)}))],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-38ff1d5b\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/StartMenu.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-38ff1d5b\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./StartMenu.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./StartMenu.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./StartMenu.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-38ff1d5b\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./StartMenu.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/StartMenu.vue\n// module id = null\n// module chunks = ","<template>\r\n    <v-layout row style=\"padding: 5px 0 0 0; margin: 0px\">\r\n        <v-list id=\"console\"\r\n                style=\"overflow:hidden; padding-top: 8px; position: relative;\">\r\n            <li v-for=\"(message, index) in getMessages()\" v-bind:key=\"index\">\r\n                <p><b v-bind:style=\"{color : message[1]}\">{{message[0]}}</b></p>\r\n            </li>\r\n            <!-- Temporary log item for displaying info that isn't stored (examine text, or \"this is blocked\")  -->\r\n            <li v-for=\"(message, index) in getTempMessages()\">\r\n                <p><b v-bind:style=\"{color : message[1]}\">{{message[0]}}</b> </p>\r\n            </li>\r\n        </v-list>\r\n    </v-layout>\r\n</template>\r\n\r\n<script>\r\nimport { Game } from '#/Game.js'\r\n\r\n/* import your actions here */\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tmessages: Game.messageHistory,\r\n\t\t\ttempMessages: Game.tempMessages\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tgetTempMessages() {\r\n\t\t\treturn this.tempMessages\r\n\t\t},\r\n\t\tgetMessages() {\r\n\t\t\treturn this.messages.slice(-10 + this.getTempMessages().length)\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n    #console {\r\n        font-size: 14px;\r\n        font-style: normal;\r\n        font-weight: normal;\r\n        background-color: black;\r\n        height: 175px;\r\n        line-height: 0;\r\n    }\r\n\r\n    ul {\r\n        padding: 0;\r\n        list-style-type: none;\r\n    }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/MessageLog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layout',{staticStyle:{\"padding\":\"5px 0 0 0\",\"margin\":\"0px\"},attrs:{\"row\":\"\"}},[_c('v-list',{staticStyle:{\"overflow\":\"hidden\",\"padding-top\":\"8px\",\"position\":\"relative\"},attrs:{\"id\":\"console\"}},[_vm._l((_vm.getMessages()),function(message,index){return _c('li',{key:index},[_c('p',[_c('b',{style:({color : message[1]})},[_vm._v(_vm._s(message[0]))])])])}),_vm._v(\" \"),_vm._l((_vm.getTempMessages()),function(message,index){return _c('li',[_c('p',[_c('b',{style:({color : message[1]})},[_vm._v(_vm._s(message[0]))])])])})],2)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-20397cee\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MessageLog.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-20397cee\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./MessageLog.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MessageLog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MessageLog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-20397cee\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./MessageLog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/MessageLog.vue\n// module id = null\n// module chunks = ","<template>\r\n    <v-flex column style=\"max-width: 1120px;\">\r\n        <v-layout row style=\"padding: 0px;\">\r\n            <!--<item-transfer-modal></item-transfer-modal>-->\r\n            <div style=\"margin:0; padding:0;\" id=\"game_container\">\r\n            </div>\r\n        </v-layout>\r\n        <message-log></message-log>\r\n    </v-flex>\r\n</template>\r\n\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\nimport messageLog from './MessageLog.vue'\r\n/* import other components here */\r\nexport default {\r\n\tcomponents: {\r\n\t\t'message-log': messageLog\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\t// gameContainer: Game.dispay.getContainer()\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n<style>\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/GameDisplay.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-flex',{staticStyle:{\"max-width\":\"1120px\"},attrs:{\"column\":\"\"}},[_c('v-layout',{staticStyle:{\"padding\":\"0px\"},attrs:{\"row\":\"\"}},[_c('div',{staticStyle:{\"margin\":\"0\",\"padding\":\"0\"},attrs:{\"id\":\"game_container\"}})]),_vm._v(\" \"),_c('message-log')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0fd20502\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/GameDisplay.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0fd20502\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./GameDisplay.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./GameDisplay.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./GameDisplay.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0fd20502\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./GameDisplay.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/GameDisplay.vue\n// module id = null\n// module chunks = ","<style>\r\n.inventory_row {\r\n    /*margin-left: 10px;*/\r\n}\r\n\r\n.inventory_cell {\r\n    margin: 2px;\r\n    border: 2px solid #4f4f4f;\r\n    background-color: #294646;\r\n    border-radius: 4px;\r\n    min-width: 40px;\r\n    min-height: 40px;\r\n    max-width: 40px !important;\r\n    max-height: 40px !important;\r\n}\r\n\r\n.inventory_cell:hover {\r\n    background-color: #698394;\r\n    cursor: pointer;\r\n}\r\n\r\n.selectedItem {\r\n    background-color: green;\r\n    margin: 2px;\r\n    border: 2px solid #3d3d3d;\r\n    border-radius: 4px;\r\n    min-width: 40px;\r\n    min-height: 40px;\r\n    max-width: 40px !important;\r\n    max-height: 40px !important;\r\n}\r\n\r\n.selectedItem:hover {\r\n    background-color: #009e00;\r\n    cursor: pointer;\r\n}\r\n</style>\r\n\r\n<template>\r\n\r\n<v-container fluid style=\"padding-left: 0px\">\r\n    <draggable element=\"v-layout\" v-model=\"inventory\" row wrap class=\"layout inventory_row row\">\r\n        <v-flex xs1 col v-for=\"(cell, i) in getInventory()\" v-bind:key=\"i\" v-bind:class=\"{selectedItem : colorSlot(cell), inventory_cell : ! colorSlot(cell)}\" align-center>\r\n            <v-tooltip open-delay=\"200\" bottom v-if=\"cell.item !== null\" align-center>\r\n                <p class=\"text-xs-center ma-0\">\r\n                    {{cell.item.getAction()}} {{cell.item.type}}\r\n                    <br />\r\n                    <span v-if=\"'name' in cell.item\">{{\"Name: \" + cell.item.name}}<br /></span> {{cell.item.hoverInfo()}}\r\n                </p>\r\n                <v-layout ripple v-on:click=\"useItem(cell, $event)\" v-if=\"cell.item !== null\" slot=\"activator\" @contextmenu=\"show(cell, $event)\" row>\r\n                    <v-menu offset-x :nudge-width=\"200\" :close-on-click=\"true\" v-model=\"cell.menu\" absolute :position-x=\"x\" :position-y=\"y\">\r\n                        <v-card>\r\n                            <v-list>\r\n                                <v-list-tile avatar>\r\n                                    <v-list-tile-avatar>\r\n                                        <img v-bind:src=\"getInventorySprite(cell.item.id)\">\r\n                                    </v-list-tile-avatar>\r\n                                    <v-list-tile-content>\r\n                                        <v-list-tile-title>{{cell.item.type}}</v-list-tile-title>\r\n                                        <v-list-tile-sub-title>{{cell.item.hoverInfo()}}</v-list-tile-sub-title>\r\n                                    </v-list-tile-content>\r\n                                </v-list-tile>\r\n                            </v-list>\r\n                            <v-divider></v-divider>\r\n                            <v-card-actions>\r\n                                <v-btn flat color=\"blue\" @click=\"useItem(cell, $event)\">{{cell.item.getAction()}}</v-btn>\r\n                                <v-btn flat color=\"red\" @click=\"dropItem(cell, $event)\">Drop</v-btn>\r\n                            </v-card-actions>\r\n                        </v-card>\r\n                    </v-menu>\r\n                    <v-badge overlay bottom color=\"grey\" overlap>\r\n                        <span v-if=\"cell.item.quantity !== undefined\" slot=\"badge\" dark>\r\n                                    <b>{{cell.item.quantity}}</b>\r\n                                </span>\r\n                        <img v-bind:src=\"getInventorySprite(cell.item.id)\" />\r\n                    </v-badge>\r\n                </v-layout>\r\n            </v-tooltip>\r\n        </v-flex>\r\n    </draggable>\r\n</v-container>\r\n\r\n</template>\r\n\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\nimport draggable from 'vuedraggable'\r\n\r\n/* import other components here */\r\nexport default {\r\n    components: {\r\n        draggable\r\n    },\r\n    data() {\r\n        return {\r\n            inventory: [],\r\n            length: Game.player.inventory,\r\n            rows: [1, 2, 3, 4],\r\n            x: 0,\r\n            y: 0\r\n        }\r\n    },\r\n    created() {},\r\n    methods: {\r\n        getInventorySprite(id) {\r\n            return `../static/images/inventory_sprites/${id}.png`\r\n        },\r\n        colorSlot(cell) {\r\n            if (cell.item !== null && 'cb' in cell.item) {\r\n                return cell.item.cb.equipped\r\n            } else {\r\n                return false\r\n            }\r\n        },\r\n        getInventoryRow(n) {\r\n            // let inventory = Game.player.inventory\r\n            let offset = n * (Game.player.inventory.length / this.rows.length)\r\n            return Game.player.inventory.slice(offset, offset + Game.player.inventory.length / this.rows.length)\r\n        },\r\n        useItem(cell, evt) {\r\n            // drop cell.item\r\n            if (evt.shiftKey) {\r\n                cell.item.drop()\r\n            } else {\r\n                // use cell.item\r\n                cell.item.use()\r\n            }\r\n        },\r\n        dropItem(cell, evt) {\r\n            // drop cell.item\r\n            cell.item.drop()\r\n        },\r\n        getInventory() {\r\n            return Game.player.inventory\r\n        },\r\n        show(cell, e) {\r\n            e.preventDefault()\r\n            Game.player.inventory.forEach(slot => {\r\n                slot.menu = false\r\n            })\r\n            this.x = e.clientX\r\n            this.y = e.clientY\r\n            this.$nextTick(() => {\r\n                cell.menu = true\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Inventory.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticStyle:{\"padding-left\":\"0px\"},attrs:{\"fluid\":\"\"}},[_c('draggable',{staticClass:\"layout inventory_row row\",attrs:{\"element\":\"v-layout\",\"row\":\"\",\"wrap\":\"\"},model:{value:(_vm.inventory),callback:function ($$v) {_vm.inventory=$$v},expression:\"inventory\"}},_vm._l((_vm.getInventory()),function(cell,i){return _c('v-flex',{key:i,class:{selectedItem : _vm.colorSlot(cell), inventory_cell : ! _vm.colorSlot(cell)},attrs:{\"xs1\":\"\",\"col\":\"\",\"align-center\":\"\"}},[(cell.item !== null)?_c('v-tooltip',{attrs:{\"open-delay\":\"200\",\"bottom\":\"\",\"align-center\":\"\"}},[_c('p',{staticClass:\"text-xs-center ma-0\"},[_vm._v(\"\\r\\n                    \"+_vm._s(cell.item.getAction())+\" \"+_vm._s(cell.item.type)+\"\\r\\n                    \"),_c('br'),_vm._v(\" \"),('name' in cell.item)?_c('span',[_vm._v(_vm._s(\"Name: \" + cell.item.name)),_c('br')]):_vm._e(),_vm._v(\" \"+_vm._s(cell.item.hoverInfo())+\"\\r\\n                \")]),_vm._v(\" \"),(cell.item !== null)?_c('v-layout',{attrs:{\"slot\":\"activator\",\"ripple\":\"\",\"row\":\"\"},on:{\"click\":function($event){_vm.useItem(cell, $event)},\"contextmenu\":function($event){_vm.show(cell, $event)}},slot:\"activator\"},[_c('v-menu',{attrs:{\"offset-x\":\"\",\"nudge-width\":200,\"close-on-click\":true,\"absolute\":\"\",\"position-x\":_vm.x,\"position-y\":_vm.y},model:{value:(cell.menu),callback:function ($$v) {_vm.$set(cell, \"menu\", $$v)},expression:\"cell.menu\"}},[_c('v-card',[_c('v-list',[_c('v-list-tile',{attrs:{\"avatar\":\"\"}},[_c('v-list-tile-avatar',[_c('img',{attrs:{\"src\":_vm.getInventorySprite(cell.item.id)}})]),_vm._v(\" \"),_c('v-list-tile-content',[_c('v-list-tile-title',[_vm._v(_vm._s(cell.item.type))]),_vm._v(\" \"),_c('v-list-tile-sub-title',[_vm._v(_vm._s(cell.item.hoverInfo()))])],1)],1)],1),_vm._v(\" \"),_c('v-divider'),_vm._v(\" \"),_c('v-card-actions',[_c('v-btn',{attrs:{\"flat\":\"\",\"color\":\"blue\"},on:{\"click\":function($event){_vm.useItem(cell, $event)}}},[_vm._v(_vm._s(cell.item.getAction()))]),_vm._v(\" \"),_c('v-btn',{attrs:{\"flat\":\"\",\"color\":\"red\"},on:{\"click\":function($event){_vm.dropItem(cell, $event)}}},[_vm._v(\"Drop\")])],1)],1)],1),_vm._v(\" \"),_c('v-badge',{attrs:{\"overlay\":\"\",\"bottom\":\"\",\"color\":\"grey\",\"overlap\":\"\"}},[(cell.item.quantity !== undefined)?_c('span',{attrs:{\"slot\":\"badge\",\"dark\":\"\"},slot:\"badge\"},[_c('b',[_vm._v(_vm._s(cell.item.quantity))])]):_vm._e(),_vm._v(\" \"),_c('img',{attrs:{\"src\":_vm.getInventorySprite(cell.item.id)}})])],1):_vm._e()],1):_vm._e()],1)}))],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4a7461b6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Inventory.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4a7461b6\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Inventory.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Inventory.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Inventory.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4a7461b6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Inventory.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Inventory.vue\n// module id = null\n// module chunks = ","<template>\r\n    <v-container class=\"modal elevation-24\" v-if=\"inventoryModalOpened\">\r\n        <v-layout row>\r\n            <!-- Non-player inventory items -->\r\n            <v-flex xs5 col>\r\n                <h3>Bob the NPC</h3>\r\n                <inventory></inventory>\r\n            </v-flex>\r\n            <!-- Middle functionality (?) -->\r\n            <v-flex xs2 col></v-flex>\r\n            <!-- Player Inventory -->\r\n            <v-flex xs5 col>\r\n                <h3>Your Items</h3>\r\n\r\n                <inventory></inventory>\r\n            </v-flex>\r\n        </v-layout>\r\n    </v-container>\r\n</template>\r\n\r\n<script>\r\n    /* import other components here */\r\n    import inventory from './Inventory.vue'\r\n    export default {\r\n        components: {\r\n            'inventory': inventory\r\n        },\r\n        data() {\r\n            return {\r\n                inventoryModalOpened: false,\r\n            };\r\n        },\r\n        methods: {},\r\n    }\r\n\r\n</script>\r\n<style>\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/ItemTransferModal.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.inventoryModalOpened)?_c('v-container',{staticClass:\"modal elevation-24\"},[_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs5\":\"\",\"col\":\"\"}},[_c('h3',[_vm._v(\"Bob the NPC\")]),_vm._v(\" \"),_c('inventory')],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs2\":\"\",\"col\":\"\"}}),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs5\":\"\",\"col\":\"\"}},[_c('h3',[_vm._v(\"Your Items\")]),_vm._v(\" \"),_c('inventory')],1)],1)],1):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0770a95c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ItemTransferModal.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0770a95c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ItemTransferModal.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ItemTransferModal.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ItemTransferModal.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0770a95c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ItemTransferModal.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ItemTransferModal.vue\n// module id = null\n// module chunks = ","<template>\r\n    <v-container fluid style=\"min-height: 50px;\">\r\n        <v-layout row wrap v-if=\"getNearbyEnemies().length > 0\">\r\n            <v-flex\r\n\r\n                    md4\r\n                    col\r\n                    v-for=\"(enemy, index) in getNearbyEnemies()\"\r\n                    v-bind:key=\"index\"\r\n            >\r\n                <v-tooltip bottom>\r\n                    <span align-center>\r\n                        HP : {{enemy.cb.hp}} / {{enemy.cb.maxhp}}<br />\r\n                        \"{{enemy.description}}\"<br />\r\n                    </span>\r\n                    <div class=\"enemy_col\" fluid slot=\"activator\">\r\n                            <v-layout class=\"text-xs-center\" align-center row style=\"font-size: 10px; margin: 0px auto -10px 0px;\" >\r\n                                <v-flex xs12>{{enemy.name.capitalize()}}</v-flex>\r\n                            </v-layout>\r\n                            <v-layout row style=\"margin: 0px;\">\r\n                                <v-flex xs12>\r\n                                    <v-progress-linear :value=\"(enemy.cb.hp / enemy.cb.maxhp) * 100\"\r\n                                                       height=\"4\"\r\n                                                       color=\"error\"\r\n                                    ></v-progress-linear>\r\n                                </v-flex>\r\n                            </v-layout>\r\n                    </div >\r\n                </v-tooltip>\r\n            </v-flex>\r\n        </v-layout>\r\n        <v-layout v-else row>\r\n            <v-container fluid>\r\n                No enemies in view\r\n            </v-container>\r\n        </v-layout>\r\n    </v-container>\r\n\r\n</template>\r\n\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\n\r\n/* import other components here */\r\nexport default {\r\n    data() {\r\n        return {\r\n            enemies: Game.player.nearbyEnemies\r\n        }\r\n    },\r\n    methods: {\r\n        getNearbyEnemies() {\r\n            return Game.player.nearbyEnemies\r\n        }\r\n    },\r\n    created() {}\r\n}\r\n</script>\r\n<style>\r\n.enemy_col {\r\n    cursor: pointer;\r\n    border: 2px solid #4f4f4f;\r\n    background-color: #142929;\r\n    border-radius: 4px;\r\n    /* margin: 2px; */\r\n    max-height: 35px;\r\n}\r\n\r\n.enemy_col:hover {\r\n    cursor: pointer;\r\n    border: 2px solid #4f4f4f;\r\n    background-color: #557081;\r\n    border-radius: 4px;\r\n    /* margin: 2px; */\r\n    max-height: 32px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/EnemyOverview.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticStyle:{\"min-height\":\"50px\"},attrs:{\"fluid\":\"\"}},[(_vm.getNearbyEnemies().length > 0)?_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},_vm._l((_vm.getNearbyEnemies()),function(enemy,index){return _c('v-flex',{key:index,attrs:{\"md4\":\"\",\"col\":\"\"}},[_c('v-tooltip',{attrs:{\"bottom\":\"\"}},[_c('span',{attrs:{\"align-center\":\"\"}},[_vm._v(\"\\n                    HP : \"+_vm._s(enemy.cb.hp)+\" / \"+_vm._s(enemy.cb.maxhp)),_c('br'),_vm._v(\"\\n                    \\\"\"+_vm._s(enemy.description)+\"\\\"\"),_c('br')]),_vm._v(\" \"),_c('div',{staticClass:\"enemy_col\",attrs:{\"slot\":\"activator\",\"fluid\":\"\"},slot:\"activator\"},[_c('v-layout',{staticClass:\"text-xs-center\",staticStyle:{\"font-size\":\"10px\",\"margin\":\"0px auto -10px 0px\"},attrs:{\"align-center\":\"\",\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_vm._v(_vm._s(enemy.name.capitalize()))])],1),_vm._v(\" \"),_c('v-layout',{staticStyle:{\"margin\":\"0px\"},attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-progress-linear',{attrs:{\"value\":(enemy.cb.hp / enemy.cb.maxhp) * 100,\"height\":\"4\",\"color\":\"error\"}})],1)],1)],1)])],1)})):_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-container',{attrs:{\"fluid\":\"\"}},[_vm._v(\"\\n            No enemies in view\\n        \")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-696021bb\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/EnemyOverview.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-696021bb\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./EnemyOverview.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./EnemyOverview.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./EnemyOverview.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-696021bb\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./EnemyOverview.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/EnemyOverview.vue\n// module id = null\n// module chunks = ","<template>\r\n        <v-layout row class=\"text-xs-center\">\r\n            <v-flex xs10 fluid id=\"minimap_container\"></v-flex>\r\n        </v-layout>\r\n</template>\r\n\r\n<script>\r\n/* import other components here */\r\nexport default {\r\n\tdata() {\r\n\t\treturn {}\r\n\t},\r\n\tmethods: {}\r\n}\r\n</script>\r\n<style>\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Minimap.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layout',{staticClass:\"text-xs-center\",attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs10\":\"\",\"fluid\":\"\",\"id\":\"minimap_container\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4821da06\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Minimap.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4821da06\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Minimap.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Minimap.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Minimap.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4821da06\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Minimap.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Minimap.vue\n// module id = null\n// module chunks = ","<template>\r\n    <v-container>\r\n        <!-- Level -->\r\n        <v-flex class=\"stat-row\">\r\n            <v-layout  row align-center>\r\n                <v-flex md1 style=\"min-width: 70px;\" col><b>Level</b></v-flex>\r\n                <v-flex md2 col style=\"padding-left: 5px;\">{{getLevel()}}</v-flex>\r\n                <v-flex md6 col>{{Math.floor(getRemainingXP())}}XP until level {{getLevel()+1}}</v-flex>\r\n                <v-flex md2 col>\r\n                    <v-progress-circular\r\n                        :rotate=\"270\"\r\n                        style=\"xpCircleFont\"\r\n                        color=\"success\"\r\n                        fill=\"success\"\r\n                        size=\"18\"\r\n                        :value=\"Math.floor(getPercentToLevel() * 100)\"\r\n                    >\r\n                    <!-- {{Math.floor(getPercentToLevel() * 100)}}% -->\r\n                    </v-progress-circular>\r\n                </v-flex>\r\n            </v-layout>\r\n        </v-flex>\r\n        <!-- Damage -->\r\n        <v-flex class=\"stat-row\">\r\n            <v-layout  row align-center>\r\n                <v-flex md1 style=\"min-width: 70px;\" col><b>Damage</b></v-flex>\r\n                <v-flex md2 col style=\"padding-left: 5px;\">{{getDamageRange()}}</v-flex>\r\n                <v-flex\r\n                    v-if=\"getCurrentWeapon() !== null && getCurrentWeaponEnchantments() !== null\"\r\n                    md6\r\n                    col\r\n                >\r\n                    Weapon Enchantments: {{getCurrentWeaponEnchantments()}}\r\n                </v-flex>\r\n            </v-layout>\r\n        </v-flex>\r\n        <!-- Strength -->\r\n        <v-flex class=\"stat-row\">\r\n            <v-layout  row align-center>\r\n                <v-flex md1 style=\"min-width: 70px;\" col><b>Strength</b></v-flex>\r\n                <v-flex md3 col style=\"padding-left: 5px;\">{{getStrength()}}</v-flex>\r\n            </v-layout>\r\n        </v-flex>\r\n        <!-- Defence -->\r\n        <!-- <v-flex class=\"stat-row\">\r\n            <v-layout   row align-center>\r\n                <v-flex md1 style=\"min-width: 70px;\" col><b>Defence</b></v-flex>\r\n                <v-flex md3 col style=\"padding-left: 5px;\">{{getDefence()}}</v-flex>\r\n            </v-layout>\r\n        </v-flex> -->\r\n    </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\nimport { xp_levels } from '#/entities/Entity.js'\r\n\r\nexport default {\r\n    data() {\r\n        return {}\r\n    },\r\n    methods: {\r\n        getHP() {\r\n            return Game.player.cb.hp\r\n        },\r\n        getMaxHP() {\r\n            return Game.player.cb.maxhp\r\n        },\r\n        getMana() {\r\n            return Game.player.cb.mana\r\n        },\r\n        getMaxMana() {\r\n            return Game.player.cb.maxmana\r\n        },\r\n        getStrength() {\r\n            return Game.player.cb.str\r\n        },\r\n        getDefence() {\r\n            return Game.player.cb.def\r\n        },\r\n        getDamageRange() {\r\n            if (Game.player.getMinDmg() === Game.player.getMaxDmg()) return Game.player.getMinDmg()\r\n\r\n            return Game.player.getMinDmg() + '-' + Game.player.getMaxDmg()\r\n        },\r\n        getLevel() {\r\n            return Game.player.cb.level\r\n        },\r\n        getRemainingXP() {\r\n            return Game.player.remainingXP()\r\n        },\r\n        getPercentToLevel() {\r\n            let costOfLevel = xp_levels[this.getLevel()] - xp_levels[this.getLevel() - 1]\r\n            let expTowards = Game.player.cb.xp - xp_levels[this.getLevel() - 1]\r\n            return expTowards / costOfLevel\r\n        },\r\n        getCurrentWeapon() {\r\n            return Game.player.cb.equipment.weapon\r\n        },\r\n        getCurrentWeaponEnchantments() {\r\n            if (this.getCurrentWeapon() !== null) {\r\n                let enchantments = this.getCurrentWeapon().cb.enchantments\r\n                if (enchantments.length === 0) return null\r\n                else if (enchantments.length === 1) return enchantments[0].name\r\n                else\r\n                    return enchantments.reduce((str, enchantment) => {\r\n                        return str + ', ' + enchantment.name\r\n                    }, '')\r\n            } else {\r\n                return null\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style>\r\n.stat-row {\r\n    cursor: pointer;\r\n}\r\n\r\n.stat-row:hover {\r\n    background-color: #4e4e4e;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/HUD/StatsTabContent.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[_c('v-flex',{staticClass:\"stat-row\"},[_c('v-layout',{attrs:{\"row\":\"\",\"align-center\":\"\"}},[_c('v-flex',{staticStyle:{\"min-width\":\"70px\"},attrs:{\"md1\":\"\",\"col\":\"\"}},[_c('b',[_vm._v(\"Level\")])]),_vm._v(\" \"),_c('v-flex',{staticStyle:{\"padding-left\":\"5px\"},attrs:{\"md2\":\"\",\"col\":\"\"}},[_vm._v(_vm._s(_vm.getLevel()))]),_vm._v(\" \"),_c('v-flex',{attrs:{\"md6\":\"\",\"col\":\"\"}},[_vm._v(_vm._s(Math.floor(_vm.getRemainingXP()))+\"XP until level \"+_vm._s(_vm.getLevel()+1))]),_vm._v(\" \"),_c('v-flex',{attrs:{\"md2\":\"\",\"col\":\"\"}},[_c('v-progress-circular',{staticStyle:{},attrs:{\"rotate\":270,\"color\":\"success\",\"fill\":\"success\",\"size\":\"18\",\"value\":Math.floor(_vm.getPercentToLevel() * 100)}})],1)],1)],1),_vm._v(\" \"),_c('v-flex',{staticClass:\"stat-row\"},[_c('v-layout',{attrs:{\"row\":\"\",\"align-center\":\"\"}},[_c('v-flex',{staticStyle:{\"min-width\":\"70px\"},attrs:{\"md1\":\"\",\"col\":\"\"}},[_c('b',[_vm._v(\"Damage\")])]),_vm._v(\" \"),_c('v-flex',{staticStyle:{\"padding-left\":\"5px\"},attrs:{\"md2\":\"\",\"col\":\"\"}},[_vm._v(_vm._s(_vm.getDamageRange()))]),_vm._v(\" \"),(_vm.getCurrentWeapon() !== null && _vm.getCurrentWeaponEnchantments() !== null)?_c('v-flex',{attrs:{\"md6\":\"\",\"col\":\"\"}},[_vm._v(\"\\n                Weapon Enchantments: \"+_vm._s(_vm.getCurrentWeaponEnchantments())+\"\\n            \")]):_vm._e()],1)],1),_vm._v(\" \"),_c('v-flex',{staticClass:\"stat-row\"},[_c('v-layout',{attrs:{\"row\":\"\",\"align-center\":\"\"}},[_c('v-flex',{staticStyle:{\"min-width\":\"70px\"},attrs:{\"md1\":\"\",\"col\":\"\"}},[_c('b',[_vm._v(\"Strength\")])]),_vm._v(\" \"),_c('v-flex',{staticStyle:{\"padding-left\":\"5px\"},attrs:{\"md3\":\"\",\"col\":\"\"}},[_vm._v(_vm._s(_vm.getStrength()))])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2b544ac6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/HUD/StatsTabContent.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2b544ac6\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./StatsTabContent.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./StatsTabContent.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./StatsTabContent.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2b544ac6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./StatsTabContent.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/HUD/StatsTabContent.vue\n// module id = null\n// module chunks = ","<template>\r\n    <v-container>\r\n        <v-layout row>\r\n            <v-flex xs4><b>Learned Spells</b></v-flex>\r\n        </v-layout>\r\n        <v-layout row wrap style=\"margin-top: 5px;\">\r\n            <v-flex\r\n                xs1\r\n                col\r\n                v-for=\"(spell, i) in getSpells()\"\r\n                v-on:click=\"selectSpell(spell)\"\r\n                v-bind:key=\"i\"\r\n                style=\"margin: 4px;\"\r\n            >\r\n                <v-tooltip bottom align-center>\r\n                    <p class=\"text-xs-center ma-0\" style=\"max-width: 200px\">\r\n                        Cast {{spell.name}} <br/>\r\n                        Costs <b style=\"color: blue;\">{{spell.manaCost}} Mana</b><br/>\r\n                        {{spell.hoverInfo}}\r\n                    </p>\r\n                    <img\r\n                        v-bind:class=\"{selectedSpell : highlightSpell(spell), spell : ! highlightSpell(spell)}\"\r\n                        v-bind:src=\"getSpellSplashArt(spell.type.toLowerCase(), spell.splashArt)\"\r\n                        slot=\"activator\"\r\n                    />\r\n                </v-tooltip>\r\n            </v-flex>\r\n        </v-layout>\r\n    </v-container>\r\n</template>\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tspells: Game.player.cb.spells\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\thighlightSpell(spell) {\r\n\t\t\treturn Game.player.cb.currentSpell === spell\r\n\t\t},\r\n\t\tgetSpellSplashArt(school, name) {\r\n\t\t\treturn `../static/images/spells/${school}/${name}.png`\r\n\t\t},\r\n\t\tgetSpells() {\r\n\t\t\treturn this.spells\r\n\t\t},\r\n\t\tselectSpell(spell) {\r\n\t\t\tGame.player.selectSpell(spell)\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n<style>\r\n    .spell {\r\n        cursor: pointer;\r\n        border: 2px solid #4f4f4f;\r\n        border-radius: 4px;\r\n    }\r\n\r\n    .selectedSpell {\r\n        cursor: pointer;\r\n        border: 2px solid #113BA7;\r\n        border-radius: 4px;\r\n    }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/HUD/Spellbook.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs4\":\"\"}},[_c('b',[_vm._v(\"Learned Spells\")])])],1),_vm._v(\" \"),_c('v-layout',{staticStyle:{\"margin-top\":\"5px\"},attrs:{\"row\":\"\",\"wrap\":\"\"}},_vm._l((_vm.getSpells()),function(spell,i){return _c('v-flex',{key:i,staticStyle:{\"margin\":\"4px\"},attrs:{\"xs1\":\"\",\"col\":\"\"},on:{\"click\":function($event){_vm.selectSpell(spell)}}},[_c('v-tooltip',{attrs:{\"bottom\":\"\",\"align-center\":\"\"}},[_c('p',{staticClass:\"text-xs-center ma-0\",staticStyle:{\"max-width\":\"200px\"}},[_vm._v(\"\\n                    Cast \"+_vm._s(spell.name)+\" \"),_c('br'),_vm._v(\"\\n                    Costs \"),_c('b',{staticStyle:{\"color\":\"blue\"}},[_vm._v(_vm._s(spell.manaCost)+\" Mana\")]),_c('br'),_vm._v(\"\\n                    \"+_vm._s(spell.hoverInfo)+\"\\n                \")]),_vm._v(\" \"),_c('img',{class:{selectedSpell : _vm.highlightSpell(spell), spell : ! _vm.highlightSpell(spell)},attrs:{\"slot\":\"activator\",\"src\":_vm.getSpellSplashArt(spell.type.toLowerCase(), spell.splashArt)},slot:\"activator\"})])],1)}))],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-a9fb28b2\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/HUD/Spellbook.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a9fb28b2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Spellbook.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Spellbook.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Spellbook.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a9fb28b2\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Spellbook.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/HUD/Spellbook.vue\n// module id = null\n// module chunks = ","<template>\r\n    <div id=\"help\">\r\n        <v-tooltip right align-center>\r\n            <span>Controls</span>\r\n            <v-btn flat icon color=\"yellow darken-4\" slot=\"activator\" @click.stop=\"helpDialog=true\">\r\n              <v-icon>help</v-icon>\r\n            </v-btn>\r\n        </v-tooltip>\r\n        <v-dialog v-model=\"helpDialog\" max-width=\"600px\" >\r\n            <v-card>\r\n                <v-card-text class=\"text-xs-center\">\r\n                    <h2 class=\"pa-1\">Controls</h2>\r\n                </v-card-text>\r\n                <v-card-text>\r\n                    <v-expansion-panel>\r\n                        <v-expansion-panel-content>\r\n                            <div slot=\"header\">All Keybinds</div>\r\n                            <v-card flat>\r\n                                <v-card-text class=\"pb-0 pt-0\">\r\n                                    <v-container>\r\n                                        <v-layout row class=\"pb-2\">\r\n                                            <v-flex xs6><b>Keys</b></v-flex>\r\n                                            <v-flex xs6><b>Description</b></v-flex>\r\n                                        </v-layout>\r\n                                        <v-layout row wrap v-for=\"(cheat, index) in cheatSheet\" :key=\"index\">\r\n                                            <v-flex xs6>\r\n                                                <code>{{cheat.code}}</code>\r\n                                            </v-flex>\r\n                                            <v-flex xs6>\r\n                                                <p>{{cheat.description}}</p>\r\n                                            </v-flex>\r\n                                        </v-layout>\r\n                                        </v-container>\r\n                                    </v-container>\r\n                                </v-card-text>\r\n                            </v-card>\r\n                        </v-expansion-panel-content>\r\n                        <v-expansion-panel-content>\r\n                            <div slot=\"header\">Magic and Ranged Combat</div>\r\n                            <v-card flat>\r\n                                <v-card-text class=\"pt-0\">\r\n                                    <v-container fluid>\r\n                                        <p><b>Magic</b></p>\r\n                                        <p>To cast a spell, first select a spell from your spellbook by <code>clicking</code> on it. Then, you can press <code>z</code> to cast the selected spell. If your spell is targeted, you will enter targeting mode.\r\n\r\n                                        <p><b>Ranged</b></p>\r\n\r\n                                        <p>If you have a ranged weapon and proper ammunition equipped, press <code>f</code> to enter targeting mode to fire your ranged weapon.\r\n                                        </p>\r\n\r\n                                        <p><b>Targeting</b></p>\r\n                                        In targeting mode, you can select a tile to cast a spell or shoot a projectile so long as it's within range. By default, targeting will select the nearest enemy. You can change the selected tile with the standard <code>movement</code> keys. You can also cycle through enemies in view with <code>tab</code>, <code>=</code>, and <code>/</code>. You cannot select a tile that is blocked or out of your line of sight. Pressing <code>escape</code> will cancel your spell or ranged attack. You can also press <code>f</code> or <code>z</code> for ranged or magic respectively.\r\n                                        </v-container>\r\n                                </v-card-text>\r\n                            </v-card>\r\n                        </v-expansion-panel-content>\r\n                        <v-expansion-panel-content>\r\n                            <div slot=\"header\">Movement and Examining</div>\r\n                            <v-card flat>\r\n                                <v-card-text class=\"pb-0 pt-0\">\r\n                                    <v-container>\r\n                                        <p>You can move with arrow keys, the numpad, or vi keys. You can move in all 8 directions. </p>\r\n                                        <v-container class=\"text-xs-center\">\r\n                                          <pre>y  k  u      7  8  9  </pre>\r\n                                          <pre> \\ | /        \\ | /   </pre>\r\n                                          <pre> h-+-l        4-5-6   </pre>\r\n                                          <pre> / | \\        / | \\   </pre>\r\n                                          <pre>b  j  n      1  2  3  </pre>\r\n                                          <pre>vi-keys     numberpad </pre>\r\n                                        </v-container>\r\n                                        <p>\r\n                                            When in targeting mode, you can use these keys to switch to different tiles. Press <code>x</code> to examine your surroundings. Press <code>x</code> or <code>escape</code> to leave the examine mode.\r\n                                        </p>\r\n                                    </v-container>\r\n                                </v-card-text>\r\n                            </v-card>\r\n                        </v-expansion-panel-content>\r\n                        <v-expansion-panel-content>\r\n                            <div slot=\"header\">Melee Combat</div>\r\n                            <v-card flat>\r\n                                <v-card-text class=\"pt-0\">\r\n                                    <v-container fluid>\r\n                                        <p>To fight an enemy with your fists or melee weapon, simply <code>move</code> into a tile where they are standing.</p>\r\n                                    </v-container>\r\n                                </v-card-text>\r\n                            </v-card>\r\n                        </v-expansion-panel-content>\r\n\r\n\r\n                        <v-expansion-panel-content>\r\n                        <v-card flat>\r\n                            <div slot=\"header\">Ladders, Resting, and Picking up Items</div>\r\n                            <v-card-text class=\"pt-0\">\r\n                                <v-container fluid>\r\n                                    <p>To pick up items off the ground, press <code>,</code> or <code>g</code>.</p>\r\n                                    <p>To rest for a turn and restore a little health, press <code>.</code> or <code>5</code> on the numpad.</p>\r\n                                    <p>To climb ladders, press <code><</code> to go up and press <code>></code> to go down.</p>\r\n                                </v-container>\r\n                            </v-card-text>\r\n                        </v-card>\r\n                    </v-expansion-panel-content>\r\n\r\n                        <v-expansion-panel-content>\r\n                            <div slot=\"header\">Inventory Management</div>\r\n                            <v-card flat>\r\n                                <v-card-text class=\"pt-0\">\r\n                                    <v-container fluid>\r\n                                        <p>\r\n                                            To equip a weapon or drink a potion, <code>click</code> the item in your inventory. To drop an item, <code>shift+click</code> the item in your inventory. Alternatively, you can either equip or drop items by right-clicking an item to bring up its context menu and selecting one of the actions from there.\r\n                                        </p>\r\n                                        <p>\r\n                                            You can rearrange inventory items by dragging and dropping items where you want them to be.\r\n                                        </p>\r\n                                        <p>\r\n                                            To view details about items, simply <code>hover</code> over the item in your inventory and view the tooltip.\r\n                                        </p>\r\n                                    </v-container>\r\n                                </v-card-text>\r\n                            </v-card>\r\n                        </v-expansion-panel-content>\r\n                </v-expansion-panel>\r\n            </v-card-text>\r\n              <v-card-actions>\r\n                  <v-spacer></v-spacer>\r\n                  <v-btn color=\"yellow darken-4\" flat @click.stop=\"helpDialog=false\">Close</v-btn>\r\n              </v-card-actions>\r\n            </v-card>\r\n        </v-dialog>\r\n    </div>\r\n\r\n</template>\r\n<script>\r\nexport default {\r\n    name: 'help-dialog',\r\n    data() {\r\n        return {\r\n            helpDialog: false,\r\n            cheatSheet: [\r\n                { code: '. | 5', description: 'Rest for a turn' },\r\n                { code: ', | g', description: 'Pick up an item' },\r\n                { code: '<', description: 'Climb up a ladder' },\r\n                { code: '>', description: 'Climb down a ladder' },\r\n                { code: 'f', description: 'Fire a ranged weapon' },\r\n                { code: 'z', description: 'Cast a spell' },\r\n                { code: 'x', description: 'Examine the area' }\r\n            ]\r\n        }\r\n    },\r\n    mounted() {\r\n        window.addEventListener('keydown', evt => {\r\n            if ((evt.getModifierState('Shift') && evt.keyCode === 191) || (evt.keyCode === 27 && this.helpDialog)) {\r\n                this.helpDialog = !this.helpDialog\r\n            }\r\n        })\r\n    }\r\n}\r\n</script>\r\n<style>\r\ncode {\r\n    background-color: #2f3136;\r\n    color: white;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/HelpDialog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"help\"}},[_c('v-tooltip',{attrs:{\"right\":\"\",\"align-center\":\"\"}},[_c('span',[_vm._v(\"Controls\")]),_vm._v(\" \"),_c('v-btn',{attrs:{\"slot\":\"activator\",\"flat\":\"\",\"icon\":\"\",\"color\":\"yellow darken-4\"},on:{\"click\":function($event){$event.stopPropagation();_vm.helpDialog=true}},slot:\"activator\"},[_c('v-icon',[_vm._v(\"help\")])],1)],1),_vm._v(\" \"),_c('v-dialog',{attrs:{\"max-width\":\"600px\"},model:{value:(_vm.helpDialog),callback:function ($$v) {_vm.helpDialog=$$v},expression:\"helpDialog\"}},[_c('v-card',[_c('v-card-text',{staticClass:\"text-xs-center\"},[_c('h2',{staticClass:\"pa-1\"},[_vm._v(\"Controls\")])]),_vm._v(\" \"),_c('v-card-text',[_c('v-expansion-panel',[_c('v-expansion-panel-content',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"All Keybinds\")]),_vm._v(\" \"),_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-text',{staticClass:\"pb-0 pt-0\"},[_c('v-container',[_c('v-layout',{staticClass:\"pb-2\",attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs6\":\"\"}},[_c('b',[_vm._v(\"Keys\")])]),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs6\":\"\"}},[_c('b',[_vm._v(\"Description\")])])],1),_vm._v(\" \"),_vm._l((_vm.cheatSheet),function(cheat,index){return _c('v-layout',{key:index,attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs6\":\"\"}},[_c('code',[_vm._v(_vm._s(cheat.code))])]),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs6\":\"\"}},[_c('p',[_vm._v(_vm._s(cheat.description))])])],1)})],2)],1)],1)],1),_vm._v(\" \"),_c('v-expansion-panel-content',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"Magic and Ranged Combat\")]),_vm._v(\" \"),_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-text',{staticClass:\"pt-0\"},[_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('p',[_c('b',[_vm._v(\"Magic\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"To cast a spell, first select a spell from your spellbook by \"),_c('code',[_vm._v(\"clicking\")]),_vm._v(\" on it. Then, you can press \"),_c('code',[_vm._v(\"z\")]),_vm._v(\" to cast the selected spell. If your spell is targeted, you will enter targeting mode.\\n\\n                                    \")]),_c('p',[_c('b',[_vm._v(\"Ranged\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"If you have a ranged weapon and proper ammunition equipped, press \"),_c('code',[_vm._v(\"f\")]),_vm._v(\" to enter targeting mode to fire your ranged weapon.\\n                                    \")]),_vm._v(\" \"),_c('p',[_c('b',[_vm._v(\"Targeting\")])]),_vm._v(\"\\n                                    In targeting mode, you can select a tile to cast a spell or shoot a projectile so long as it's within range. By default, targeting will select the nearest enemy. You can change the selected tile with the standard \"),_c('code',[_vm._v(\"movement\")]),_vm._v(\" keys. You can also cycle through enemies in view with \"),_c('code',[_vm._v(\"tab\")]),_vm._v(\", \"),_c('code',[_vm._v(\"=\")]),_vm._v(\", and \"),_c('code',[_vm._v(\"/\")]),_vm._v(\". You cannot select a tile that is blocked or out of your line of sight. Pressing \"),_c('code',[_vm._v(\"escape\")]),_vm._v(\" will cancel your spell or ranged attack. You can also press \"),_c('code',[_vm._v(\"f\")]),_vm._v(\" or \"),_c('code',[_vm._v(\"z\")]),_vm._v(\" for ranged or magic respectively.\\n                                    \")])],1)],1)],1),_vm._v(\" \"),_c('v-expansion-panel-content',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"Movement and Examining\")]),_vm._v(\" \"),_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-text',{staticClass:\"pb-0 pt-0\"},[_c('v-container',[_c('p',[_vm._v(\"You can move with arrow keys, the numpad, or vi keys. You can move in all 8 directions. \")]),_vm._v(\" \"),_c('v-container',{staticClass:\"text-xs-center\"},[_c('pre',[_vm._v(\"y  k  u      7  8  9  \")]),_vm._v(\" \"),_c('pre',[_vm._v(\" \\\\ | /        \\\\ | /   \")]),_vm._v(\" \"),_c('pre',[_vm._v(\" h-+-l        4-5-6   \")]),_vm._v(\" \"),_c('pre',[_vm._v(\" / | \\\\        / | \\\\   \")]),_vm._v(\" \"),_c('pre',[_vm._v(\"b  j  n      1  2  3  \")]),_vm._v(\" \"),_c('pre',[_vm._v(\"vi-keys     numberpad \")])]),_vm._v(\" \"),_c('p',[_vm._v(\"\\n                                        When in targeting mode, you can use these keys to switch to different tiles. Press \"),_c('code',[_vm._v(\"x\")]),_vm._v(\" to examine your surroundings. Press \"),_c('code',[_vm._v(\"x\")]),_vm._v(\" or \"),_c('code',[_vm._v(\"escape\")]),_vm._v(\" to leave the examine mode.\\n                                    \")])],1)],1)],1)],1),_vm._v(\" \"),_c('v-expansion-panel-content',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"Melee Combat\")]),_vm._v(\" \"),_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-text',{staticClass:\"pt-0\"},[_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('p',[_vm._v(\"To fight an enemy with your fists or melee weapon, simply \"),_c('code',[_vm._v(\"move\")]),_vm._v(\" into a tile where they are standing.\")])])],1)],1)],1),_vm._v(\" \"),_c('v-expansion-panel-content',[_c('v-card',{attrs:{\"flat\":\"\"}},[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"Ladders, Resting, and Picking up Items\")]),_vm._v(\" \"),_c('v-card-text',{staticClass:\"pt-0\"},[_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('p',[_vm._v(\"To pick up items off the ground, press \"),_c('code',[_vm._v(\",\")]),_vm._v(\" or \"),_c('code',[_vm._v(\"g\")]),_vm._v(\".\")]),_vm._v(\" \"),_c('p',[_vm._v(\"To rest for a turn and restore a little health, press \"),_c('code',[_vm._v(\".\")]),_vm._v(\" or \"),_c('code',[_vm._v(\"5\")]),_vm._v(\" on the numpad.\")]),_vm._v(\" \"),_c('p',[_vm._v(\"To climb ladders, press \"),_c('code',[_vm._v(\"<\")]),_vm._v(\" to go up and press \"),_c('code',[_vm._v(\">\")]),_vm._v(\" to go down.\")])])],1)],1)],1),_vm._v(\" \"),_c('v-expansion-panel-content',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"Inventory Management\")]),_vm._v(\" \"),_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-text',{staticClass:\"pt-0\"},[_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('p',[_vm._v(\"\\n                                        To equip a weapon or drink a potion, \"),_c('code',[_vm._v(\"click\")]),_vm._v(\" the item in your inventory. To drop an item, \"),_c('code',[_vm._v(\"shift+click\")]),_vm._v(\" the item in your inventory. Alternatively, you can either equip or drop items by right-clicking an item to bring up its context menu and selecting one of the actions from there.\\n                                    \")]),_vm._v(\" \"),_c('p',[_vm._v(\"\\n                                        You can rearrange inventory items by dragging and dropping items where you want them to be.\\n                                    \")]),_vm._v(\" \"),_c('p',[_vm._v(\"\\n                                        To view details about items, simply \"),_c('code',[_vm._v(\"hover\")]),_vm._v(\" over the item in your inventory and view the tooltip.\\n                                    \")])])],1)],1)],1)],1)],1),_vm._v(\" \"),_c('v-card-actions',[_c('v-spacer'),_vm._v(\" \"),_c('v-btn',{attrs:{\"color\":\"yellow darken-4\",\"flat\":\"\"},on:{\"click\":function($event){$event.stopPropagation();_vm.helpDialog=false}}},[_vm._v(\"Close\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-598be376\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/HelpDialog.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-598be376\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./HelpDialog.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./HelpDialog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./HelpDialog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-598be376\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./HelpDialog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/HelpDialog.vue\n// module id = null\n// module chunks = ","<template>\r\n    <div>\r\n        <v-tooltip right align-center>\r\n            <span>Settings</span>\r\n            <v-btn flat icon color=\"yellow darken-4\" slot=\"activator\" @click.stop=\"toolDialog=true\">\r\n                <v-icon>settings</v-icon>\r\n            </v-btn>\r\n        </v-tooltip>\r\n        <v-dialog v-model=\"toolDialog\" max-width=\"400px\" >\r\n            <v-card>\r\n                <v-card-text class=\"text-xs-center\">\r\n                    <h2>Settings</h2>\r\n                </v-card-text>\r\n                <v-card-text>\r\n                    <v-layout row>\r\n                        <v-flex xs6>Enable Mouse Controls</v-flex>\r\n                        <v-flex xs4 offset-xs2>\r\n                            <v-switch color=\"yellow darken-4\" v-model=\"mouseEnabled\"></v-switch>\r\n                        </v-flex>\r\n                    </v-layout>\r\n\r\n                    <v-layout row>\r\n                        <v-flex xs6>Show HP Bars</v-flex>\r\n                        <v-flex xs4 offset-xs2>\r\n                            <v-switch color=\"yellow darken-4\" @click.stop=\"toggleHPBars\" v-model=\"userSettings.hpBars\"></v-switch>\r\n                        </v-flex>\r\n                    </v-layout>\r\n                    \r\n                </v-card-text>\r\n                <v-card-actions>\r\n                    <v-spacer></v-spacer>\r\n                    <v-btn color=\"yellow darken-4\" flat @click.stop=\"toolDialog=false\">Close</v-btn>\r\n                </v-card-actions>\r\n            </v-card>\r\n        </v-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\n\r\nexport default {\r\n\tname: 'help-dialog',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tuserSettings: Game.userSettings,\r\n\t\t\ttoolDialog: false,\r\n\t\t\tmouseEnabled: false,\r\n\t\t\tshowHPBars: Game.userSettings.hpBars,\r\n\t\t\tturnOffAnimation: false\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tmouseEnabled(newState, oldState) {\r\n\t\t\tGame.player.mouseEnabled = newState\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\ttoggleHPBars() {\r\n\t\t\tGame.userSettings.hpBars = !Game.userSettings.hpBars\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/ToolDialog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-tooltip',{attrs:{\"right\":\"\",\"align-center\":\"\"}},[_c('span',[_vm._v(\"Settings\")]),_vm._v(\" \"),_c('v-btn',{attrs:{\"slot\":\"activator\",\"flat\":\"\",\"icon\":\"\",\"color\":\"yellow darken-4\"},on:{\"click\":function($event){$event.stopPropagation();_vm.toolDialog=true}},slot:\"activator\"},[_c('v-icon',[_vm._v(\"settings\")])],1)],1),_vm._v(\" \"),_c('v-dialog',{attrs:{\"max-width\":\"400px\"},model:{value:(_vm.toolDialog),callback:function ($$v) {_vm.toolDialog=$$v},expression:\"toolDialog\"}},[_c('v-card',[_c('v-card-text',{staticClass:\"text-xs-center\"},[_c('h2',[_vm._v(\"Settings\")])]),_vm._v(\" \"),_c('v-card-text',[_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs6\":\"\"}},[_vm._v(\"Enable Mouse Controls\")]),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs4\":\"\",\"offset-xs2\":\"\"}},[_c('v-switch',{attrs:{\"color\":\"yellow darken-4\"},model:{value:(_vm.mouseEnabled),callback:function ($$v) {_vm.mouseEnabled=$$v},expression:\"mouseEnabled\"}})],1)],1),_vm._v(\" \"),_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs6\":\"\"}},[_vm._v(\"Show HP Bars\")]),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs4\":\"\",\"offset-xs2\":\"\"}},[_c('v-switch',{attrs:{\"color\":\"yellow darken-4\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.toggleHPBars($event)}},model:{value:(_vm.userSettings.hpBars),callback:function ($$v) {_vm.$set(_vm.userSettings, \"hpBars\", $$v)},expression:\"userSettings.hpBars\"}})],1)],1)],1),_vm._v(\" \"),_c('v-card-actions',[_c('v-spacer'),_vm._v(\" \"),_c('v-btn',{attrs:{\"color\":\"yellow darken-4\",\"flat\":\"\"},on:{\"click\":function($event){$event.stopPropagation();_vm.toolDialog=false}}},[_vm._v(\"Close\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-09e6a352\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ToolDialog.vue\n// module id = null\n// module chunks = ","<style>\r\n.hud_tabs_card {\r\n\tbackground-color: #4f4f4f;\r\n}\r\n\r\n.hud_tab {\r\n\tbackground-color: #294646;\r\n}\r\n\r\n.hud {\r\n\tcolor: white;\r\n\tfont-size: 13px;\r\n\t/* margin-left: 20px; */\r\n}\r\n\r\n#hpBar {\r\n\tborder: solid 2px hsl(0, 59%, 40%);\r\n\tborder-radius: 2px;\r\n}\r\n\r\n#manaBar {\r\n\tborder: solid 2px rgb(20, 99, 177);\r\n\tborder-radius: 2px;\r\n}\r\n\r\n.statsBar {\r\n\t/*border : solid 2px goldenrod;*/\r\n\t/*border-radius: 2px;*/\r\n}\r\n\r\n.xpCircleFont {\r\n\tfont-size: 5px;\r\n}\r\n\r\n/* .v-tab-card {\r\n\tmin-height: 103px;\r\n} */\r\n</style>\r\n\r\n<template>\r\n\r\n<v-flex class=\"hud elevation-0\" column style=\"max-width: 450px;\">\r\n\r\n\r\n    <v-container fluid class=\"pa-0\">\r\n\r\n          <!-- Health Bar -->\r\n          <v-layout row align-center style=\"margin-bottom: -20px; margin-top: -10px\">\r\n              <v-flex style=\"min-width: 75px;\" md1 col><b>Health </b></v-flex>\r\n              <v-flex md4 col>\r\n                  <v-progress-linear id=\"hpBar\" color=\"error\" :value=\"(getHP() / getMaxHP()) * 100\" height=\"13\"></v-progress-linear>\r\n              </v-flex>\r\n              <v-flex md3 col style=\"padding-left: 5px;\">{{getHP()}} / {{getMaxHP()}}</v-flex>\r\n      \t\t<v-flex md1 >\r\n      \t\t\t<help-dialog></help-dialog>\r\n      \t\t</v-flex>\r\n          </v-layout>\r\n\r\n          <!-- Magic Bar -->\r\n          <v-layout row align-center style=\"margin-bottom: -5px\">\r\n              <v-flex md1 style=\"min-width: 75px;\" col><b>Magic</b></v-flex>\r\n              <v-flex md4 col>\r\n                  <v-progress-linear id=\"manaBar\" :value=\"(getMana() / getMaxMana()) * 100\" height=\"13\" info></v-progress-linear>\r\n              </v-flex>\r\n              <v-flex md3 col style=\"padding-left: 5px;\">{{getMana()}} / {{getMaxMana()}}</v-flex>\r\n              <v-flex md1 >\r\n      \t\t\t<tool-dialog></tool-dialog>\r\n      \t\t</v-flex>\r\n          </v-layout>\r\n\r\n\r\n        <!-- Current World -->\r\n        <v-layout row align-center>\r\n            <v-flex xs5 col><b>Location: {{getCurrentLevel().capitalize()}}</b></v-flex>\r\n            <v-flex v-if=\"getCurrentLevelDepth() > 0\" col><b>Level: {{getCurrentLevelDepth()}}</b></v-flex>\r\n        </v-layout>\r\n\r\n        <!-- Mini-map -->\r\n        <v-layout row class=\"text-xs-center\" style=\"pa-1\">\r\n            <v-flex xs10 fluid id=\"minimap_container\"></v-flex>\r\n        </v-layout>\r\n\r\n        <!-- Tabbed Menu (Stats, Enemies, Spellbook) -->\r\n        <v-layout row>\r\n            <v-tabs slider-color=\"yellow\" :scrollable=\"false\" grow v-model=\"activeTab\" style=\"min-width: 400px; font-size: 11px;\">\r\n                <v-tab class=\"hud_tab\" key=\"stats\" href=\"#stats\">\r\n                    Stats\r\n                </v-tab>\r\n                <!-- <v-tab class=\"hud_tab\" key=\"enemyOverview\" href=\"#enemyOverview\">\r\n                    Enemies\r\n                </v-tab> -->\r\n                <v-tab class=\"hud_tab\" key=\"spellBook\" href=\"#spellBook\">\r\n                    Spellbook\r\n                </v-tab>\r\n                <v-tab-item key=\"stats\" id=\"stats\">\r\n                    <v-card class=\"hud_tabs_card\" style=\"\" flat height=\"120px\">\r\n                        <stats-tab-content></stats-tab-content>\r\n                    </v-card>\r\n                </v-tab-item>\r\n                <!-- <v-tab-item key=\"enemyOverview\" id=\"enemyOverview\">\r\n                    <v-card class=\"hud_tabs_card\" flat height=\"120px\">\r\n                        <enemy-overview></enemy-overview>\r\n                    </v-card>\r\n                </v-tab-item> -->\r\n                <v-tab-item key=\"spellBook\" id=\"spellBook\">\r\n                    <v-card class=\"hud_tabs_card\" flat height=\"120px\">\r\n                        <spellbook></spellbook>\r\n                    </v-card>\r\n                </v-tab-item>\r\n            </v-tabs>\r\n        </v-layout>\r\n        <!-- Inventory -->\r\n        <inventory></inventory>\r\n\r\n    </v-container>\r\n</v-flex>\r\n\r\n</template>\r\n\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\nimport inventory from './Inventory.vue'\r\nimport enemyOverview from './EnemyOverview.vue'\r\nimport minimap from './Minimap.vue'\r\nimport statsTabContent from './HUD/StatsTabContent.vue'\r\nimport spellBook from './HUD/Spellbook.vue'\r\nimport helpDialog from '@/components/HelpDialog.vue'\r\nimport toolDialog from '@/components/ToolDialog.vue'\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tactiveTab: null,\r\n\t\t\tcurrentLevel: Game.currentLevel,\r\n\t\t\tcb: Game.player.cb\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tgetHP() {\r\n\t\t\treturn Game.player.cb.hp\r\n\t\t},\r\n\t\tgetMaxHP() {\r\n\t\t\treturn Game.player.cb.maxhp\r\n\t\t},\r\n\t\tgetMana() {\r\n\t\t\treturn Game.player.cb.mana\r\n\t\t},\r\n\t\tgetMaxMana() {\r\n\t\t\treturn Game.player.cb.maxmana\r\n\t\t},\r\n\t\tgetCurrentLevel() {\r\n\t\t\tlet levelName = Game.currentLevel.name.replace(/[0-9]/g, '')\r\n\t\t\treturn levelName\r\n\t\t},\r\n\t\tgetCurrentLevelDepth() {\r\n\t\t\treturn parseInt(Game.currentLevel.name.replace(/[^0-9]/g, ''))\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t\tinventory: inventory,\r\n\t\t'enemy-overview': enemyOverview,\r\n\t\t'mini-map': minimap,\r\n\t\t'stats-tab-content': statsTabContent,\r\n\t\tspellbook: spellBook,\r\n\t\t'help-dialog': helpDialog,\r\n\t\t'tool-dialog': toolDialog\r\n\t},\r\n\tcreated() {}\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/HUD.vue","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ToolDialog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ToolDialog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-09e6a352\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ToolDialog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ToolDialog.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-flex',{staticClass:\"hud elevation-0\",staticStyle:{\"max-width\":\"450px\"},attrs:{\"column\":\"\"}},[_c('v-container',{staticClass:\"pa-0\",attrs:{\"fluid\":\"\"}},[_c('v-layout',{staticStyle:{\"margin-bottom\":\"-20px\",\"margin-top\":\"-10px\"},attrs:{\"row\":\"\",\"align-center\":\"\"}},[_c('v-flex',{staticStyle:{\"min-width\":\"75px\"},attrs:{\"md1\":\"\",\"col\":\"\"}},[_c('b',[_vm._v(\"Health \")])]),_vm._v(\" \"),_c('v-flex',{attrs:{\"md4\":\"\",\"col\":\"\"}},[_c('v-progress-linear',{attrs:{\"id\":\"hpBar\",\"color\":\"error\",\"value\":(_vm.getHP() / _vm.getMaxHP()) * 100,\"height\":\"13\"}})],1),_vm._v(\" \"),_c('v-flex',{staticStyle:{\"padding-left\":\"5px\"},attrs:{\"md3\":\"\",\"col\":\"\"}},[_vm._v(_vm._s(_vm.getHP())+\" / \"+_vm._s(_vm.getMaxHP()))]),_vm._v(\" \"),_c('v-flex',{attrs:{\"md1\":\"\"}},[_c('help-dialog')],1)],1),_vm._v(\" \"),_c('v-layout',{staticStyle:{\"margin-bottom\":\"-5px\"},attrs:{\"row\":\"\",\"align-center\":\"\"}},[_c('v-flex',{staticStyle:{\"min-width\":\"75px\"},attrs:{\"md1\":\"\",\"col\":\"\"}},[_c('b',[_vm._v(\"Magic\")])]),_vm._v(\" \"),_c('v-flex',{attrs:{\"md4\":\"\",\"col\":\"\"}},[_c('v-progress-linear',{attrs:{\"id\":\"manaBar\",\"value\":(_vm.getMana() / _vm.getMaxMana()) * 100,\"height\":\"13\",\"info\":\"\"}})],1),_vm._v(\" \"),_c('v-flex',{staticStyle:{\"padding-left\":\"5px\"},attrs:{\"md3\":\"\",\"col\":\"\"}},[_vm._v(_vm._s(_vm.getMana())+\" / \"+_vm._s(_vm.getMaxMana()))]),_vm._v(\" \"),_c('v-flex',{attrs:{\"md1\":\"\"}},[_c('tool-dialog')],1)],1),_vm._v(\" \"),_c('v-layout',{attrs:{\"row\":\"\",\"align-center\":\"\"}},[_c('v-flex',{attrs:{\"xs5\":\"\",\"col\":\"\"}},[_c('b',[_vm._v(\"Location: \"+_vm._s(_vm.getCurrentLevel().capitalize()))])]),_vm._v(\" \"),(_vm.getCurrentLevelDepth() > 0)?_c('v-flex',{attrs:{\"col\":\"\"}},[_c('b',[_vm._v(\"Level: \"+_vm._s(_vm.getCurrentLevelDepth()))])]):_vm._e()],1),_vm._v(\" \"),_c('v-layout',{staticClass:\"text-xs-center\",staticStyle:{},attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs10\":\"\",\"fluid\":\"\",\"id\":\"minimap_container\"}})],1),_vm._v(\" \"),_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-tabs',{staticStyle:{\"min-width\":\"400px\",\"font-size\":\"11px\"},attrs:{\"slider-color\":\"yellow\",\"scrollable\":false,\"grow\":\"\"},model:{value:(_vm.activeTab),callback:function ($$v) {_vm.activeTab=$$v},expression:\"activeTab\"}},[_c('v-tab',{key:\"stats\",staticClass:\"hud_tab\",attrs:{\"href\":\"#stats\"}},[_vm._v(\"\\r\\n                    Stats\\r\\n                \")]),_vm._v(\" \"),_c('v-tab',{key:\"spellBook\",staticClass:\"hud_tab\",attrs:{\"href\":\"#spellBook\"}},[_vm._v(\"\\r\\n                    Spellbook\\r\\n                \")]),_vm._v(\" \"),_c('v-tab-item',{key:\"stats\",attrs:{\"id\":\"stats\"}},[_c('v-card',{staticClass:\"hud_tabs_card\",attrs:{\"flat\":\"\",\"height\":\"120px\"}},[_c('stats-tab-content')],1)],1),_vm._v(\" \"),_c('v-tab-item',{key:\"spellBook\",attrs:{\"id\":\"spellBook\"}},[_c('v-card',{staticClass:\"hud_tabs_card\",attrs:{\"flat\":\"\",\"height\":\"120px\"}},[_c('spellbook')],1)],1)],1)],1),_vm._v(\" \"),_c('inventory')],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-a431432a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/HUD.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a431432a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./HUD.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./HUD.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./HUD.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a431432a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./HUD.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/HUD.vue\n// module id = null\n// module chunks = ","<template>\r\n    <!-- Death Modal -->\r\n    <v-container class=\"modal elevation-24\" v-if=\"playerIsDead()\">\r\n        <v-layout class=\"text-xs-center\" row>\r\n            <v-flex xs12><h2 class=\"red--text\">You died</h2></v-flex>\r\n        </v-layout>\r\n        <v-layout>\r\n            <v-flex class=\"text-xs-center\" xs12>\r\n                <v-btn raised color=\"success\" dark class=\"flat\" v-on:click.native=\"startNewGame()\"\r\n                       style=\"margin: 0 auto;\">Play Again?</v-btn>\r\n            </v-flex>\r\n        </v-layout>\r\n    </v-container>\r\n</template>\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\n/* import other components here */\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tplayer: Game.player.cb\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tstartNewGame() {\r\n\t\t\tlocation.reload()\r\n\t\t},\r\n\t\tplayerIsDead() {\r\n\t\t\tif (Game.player) return Game.player.isDead()\r\n\t\t\telse return false\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n<style>\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/DeathModal.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.playerIsDead())?_c('v-container',{staticClass:\"modal elevation-24\"},[_c('v-layout',{staticClass:\"text-xs-center\",attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('h2',{staticClass:\"red--text\"},[_vm._v(\"You died\")])])],1),_vm._v(\" \"),_c('v-layout',[_c('v-flex',{staticClass:\"text-xs-center\",attrs:{\"xs12\":\"\"}},[_c('v-btn',{staticClass:\"flat\",staticStyle:{\"margin\":\"0 auto\"},attrs:{\"raised\":\"\",\"color\":\"success\",\"dark\":\"\"},nativeOn:{\"click\":function($event){_vm.startNewGame()}}},[_vm._v(\"Play Again?\")])],1)],1)],1):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-538a867e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/DeathModal.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-538a867e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./DeathModal.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./DeathModal.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./DeathModal.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-538a867e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./DeathModal.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/DeathModal.vue\n// module id = null\n// module chunks = ","<template>\r\n\r\n<v-app dark class=\"black\">\r\n    <v-container class=\"mx-auto\" v-show=\"playerSelected\" fluid id=\"main_container\">\r\n      <v-layout row v-if=\"unstableBuildMessage\">\r\n        <v-flex xs7>\r\n          <v-alert color=\"yellow darken-4\" type=\"warning\" dismissible v-model=\"unstableBuildMessage\">\r\n            This build is unstable. A lot of working is going on under the hood! Expect lots of broken, weird things\r\n          </v-alert>\r\n        </v-flex>\r\n      </v-layout>\r\n        <!-- Game Display and HUD-->\r\n        <v-layout row>\r\n            <v-flex column style=\"max-width: 1050px;\">\r\n                <v-layout row style=\"padding: 0px;\">\r\n                    <!--<item-transfer-modal></item-transfer-modal>-->\r\n                    <div style=\"margin:0; padding:0;\" id=\"game_container\">\r\n                    </div>\r\n                </v-layout>\r\n                <message-log v-if=\"playerSelected\"></message-log>\r\n            </v-flex>\r\n            <hud v-if=\"playerSelected\"></hud>\r\n        </v-layout>\r\n        <!-- Inventory / Shop Modal -->\r\n        <item-transfer-modal></item-transfer-modal>\r\n        <!-- Death Modal-->\r\n        <death-modal v-if=\"playerSelected\"></death-modal>\r\n        <!-- Github Logo -->\r\n        <a id=\"git_logo\" style=\"text-decoration: none;\" target=\"_blank\" href=\"https://github.com/Larkenx/Rotten-Soup\">\r\n            <v-btn icon ripple>\r\n                <i i style=\"color: white; margin: auto;\" class=\"fa fa-3x fa-github\" aria-hidden=\"true\"></i>\r\n            </v-btn>\r\n        </a>\r\n    </v-container>\r\n    <start-menu v-show=\"!playerSelected\" v-on:spriteSelected=\"loadGame\"></start-menu>\r\n</v-app>\r\n</template>\r\n\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\n// components\r\nimport startMenu from './components/StartMenu.vue'\r\nimport gameDisplay from './components/GameDisplay.vue'\r\nimport itemTransferModal from './components/ItemTransferModal.vue'\r\nimport hud from './components/HUD.vue'\r\nimport deathModal from './components/DeathModal.vue'\r\nimport helpDialog from './components/HelpDialog.vue'\r\nimport messageLog from './components/MessageLog.vue'\r\nwindow.Game = Game\r\n\r\nexport default {\r\n\tname: 'app',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tmouseControls: false,\r\n\t\t\tloading: true,\r\n\t\t\tplayerSelected: false,\r\n\t\t\tunstableBuildMessage: false\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t\t'start-menu': startMenu,\r\n\t\t'game-display': gameDisplay,\r\n\t\thud: hud,\r\n\t\t'item-transfer-modal': itemTransferModal,\r\n\t\t'death-modal': deathModal,\r\n\t\t'help-dialog': helpDialog,\r\n\t\t'message-log': messageLog\r\n\t},\r\n\tcreated() {\r\n\t\t// this.loadGame(4219)\r\n\t},\r\n\tmounted() {},\r\n\tmethods: {\r\n\t\tloadGame(id) {\r\n\t\t\tthis.playerSelected = true\r\n\t\t\tGame.init(id)\r\n\t\t\tGame.log('Welcome to Rotten Soup!', 'information')\r\n\t\t\tGame.log('Press ? to view the controls.', 'player_move')\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n@import url('https://fonts.googleapis.com/css?family=Droid+Sans+Mono|PT+Mono');\r\n.black {\r\n\tbackground-color: black;\r\n}\r\n\r\n* {\r\n\tfont-family: 'Droid Sans Mono', monospace;\r\n\t-webkit-touch-callout: none;\r\n\t/* iOS Safari */\r\n\t-webkit-user-select: none;\r\n\t/* Safari */\r\n\t-khtml-user-select: none;\r\n\t/* Konqueror HTML */\r\n\t-moz-user-select: none;\r\n\t/* Firefox */\r\n\t-ms-user-select: none;\r\n\t/* Internet Explorer/Edge */\r\n\tuser-select: none;\r\n\t/* Non-prefixed version, currently\r\n    }\r\n\r\n    #main_container {\r\n        /*padding: 10px;*/\r\n\t/*height: 100%;*/\r\n}\r\n\r\n#git_logo {\r\n\tposition: absolute;\r\n\tpadding: 20px;\r\n\tbottom: 0px;\r\n\tright: 0px;\r\n}\r\n\r\n.mouse_controls {\r\n\tposition: absolute;\r\n\t/* min-width: 200px; */\r\n\tbottom: 0px;\r\n\tleft: 90%;\r\n}\r\n\r\n.loading {\r\n\tposition: absolute;\r\n\tpadding: 20px;\r\n\t/* min-width: 200px; */\r\n\tbottom: 50%;\r\n\tleft: 25%;\r\n}\r\n\r\n.test {\r\n\tbackground-color: #824d03;\r\n}\r\n\r\ncanvas {\r\n\tpadding: 0;\r\n\tmargin: 0;\r\n}\r\n\r\n/* Overriding Vuetify's tool tip so that it is centered :) */\r\n\r\n[data-tooltip] {\r\n\tposition: relative;\r\n\ttext-align: center;\r\n}\r\n\r\n.modal {\r\n\tborder: 2px solid #3d3d3d;\r\n\tborder-radius: 4px;\r\n\tbackground-color: black;\r\n\tcolor: white;\r\n\twidth: 400px;\r\n\tpadding: 10px;\r\n\t/*height: 600px;*/\r\n\tposition: absolute;\r\n\tleft: 20%;\r\n\ttop: 25%;\r\n\t/*margin-left: -150px;*/\r\n\tz-index: 2;\r\n\t/*margin-top: -150px;*/\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{staticClass:\"black\",attrs:{\"dark\":\"\"}},[_c('v-container',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.playerSelected),expression:\"playerSelected\"}],staticClass:\"mx-auto\",attrs:{\"fluid\":\"\",\"id\":\"main_container\"}},[(_vm.unstableBuildMessage)?_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs7\":\"\"}},[_c('v-alert',{attrs:{\"color\":\"yellow darken-4\",\"type\":\"warning\",\"dismissible\":\"\"},model:{value:(_vm.unstableBuildMessage),callback:function ($$v) {_vm.unstableBuildMessage=$$v},expression:\"unstableBuildMessage\"}},[_vm._v(\"\\r\\n            This build is unstable. A lot of working is going on under the hood! Expect lots of broken, weird things\\r\\n          \")])],1)],1):_vm._e(),_vm._v(\" \"),_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',{staticStyle:{\"max-width\":\"1050px\"},attrs:{\"column\":\"\"}},[_c('v-layout',{staticStyle:{\"padding\":\"0px\"},attrs:{\"row\":\"\"}},[_c('div',{staticStyle:{\"margin\":\"0\",\"padding\":\"0\"},attrs:{\"id\":\"game_container\"}})]),_vm._v(\" \"),(_vm.playerSelected)?_c('message-log'):_vm._e()],1),_vm._v(\" \"),(_vm.playerSelected)?_c('hud'):_vm._e()],1),_vm._v(\" \"),_c('item-transfer-modal'),_vm._v(\" \"),(_vm.playerSelected)?_c('death-modal'):_vm._e(),_vm._v(\" \"),_c('a',{staticStyle:{\"text-decoration\":\"none\"},attrs:{\"id\":\"git_logo\",\"target\":\"_blank\",\"href\":\"https://github.com/Larkenx/Rotten-Soup\"}},[_c('v-btn',{attrs:{\"icon\":\"\",\"ripple\":\"\"}},[_c('i',{staticClass:\"fa fa-3x fa-github\",staticStyle:{\"color\":\"white\",\"margin\":\"auto\"},attrs:{\"i\":\"\",\"aria-hidden\":\"true\"}})])],1)],1),_vm._v(\" \"),_c('start-menu',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.playerSelected),expression:\"!playerSelected\"}],on:{\"spriteSelected\":_vm.loadGame}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-42eaab1a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-42eaab1a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-42eaab1a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\r\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\r\n\r\nimport Vue from 'vue'\r\nimport App from './App'\r\nimport Vuetify from 'vuetify'\r\nimport 'vuetify/dist/vuetify.min.css'\r\n\r\nVue.use(Vuetify)\r\n\r\nVue.config.productionTip = false\r\n\r\n/* eslint-disable no-new */\r\nnew Vue({\r\n\tel: '#app',\r\n\tcomponents: { App },\r\n\ttemplate: '<App/>'\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}