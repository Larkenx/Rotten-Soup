{"version":3,"sources":["webpack:///./src/assets/js/game/entities/Entity.js","webpack:///./src/assets/js/game/entities/items/Item.js","webpack:///./src/assets/js/game/entities/items/potions/Potion.js","webpack:///./src/assets/js/game/entities/items/potions/HealthPotion.js","webpack:///./src/assets/js/game/modifiers/Effect.js","webpack:///./src/assets/js/game/modifiers/Buff.js","webpack:///./src/assets/js/game/entities/items/potions/StrengthPotion.js","webpack:///./src/assets/js/game/entities/items/potions/ManaPotion.js","webpack:///./src/assets/js/game/entities/items/weapons/Weapon.js","webpack:///./src/assets/js/game/entities/items/weapons/Sword.js","webpack:///./src/assets/js/game/entities/items/weapons/ranged/ammo/Ammo.js","webpack:///./src/assets/js/game/entities/items/weapons/ranged/ammo/Arrow.js","webpack:///./src/assets/js/game/utils/HelperFunctions.js","webpack:///./src/assets/js/game/entities/misc/Door.js","webpack:///./src/assets/js/game/entities/misc/Chest.js","webpack:///./src/assets/js/game/entities/misc/Ladder.js","webpack:///./src/assets/js/game/entities/items/misc/Corpse.js","webpack:///./src/assets/js/game/entities/actors/Actor.js","webpack:///./src/assets/js/game/entities/items/weapons/ranged/RangedWeapon.js","webpack:///./src/assets/js/game/entities/items/weapons/ranged/Bow.js","webpack:///./src/assets/js/game/entities/actors/enemies/StatelessAI.js","webpack:///./src/assets/js/game/entities/actors/enemies/SimpleEnemy.js","webpack:///./src/assets/js/game/entities/actors/enemies/Skeleton.js","webpack:///./src/assets/js/game/entities/actors/enemies/Zombie.js","webpack:///./src/assets/js/game/magic/Spell.js","webpack:///./src/assets/js/game/entities/actors/Player.js","webpack:///./src/assets/js/game/map/Tile.js","webpack:///./src/assets/js/game/entities/items/misc/Key.js","webpack:///./src/assets/js/game/entities/misc/LevelTransition.js","webpack:///./src/assets/js/game/entities/items/misc/Spellbook.js","webpack:///./src/assets/js/game/entities/actors/NPC.js","webpack:///./src/assets/js/game/entities/actors/enemies/Orc.js","webpack:///./src/assets/js/game/entities/actors/enemies/Kobold.js","webpack:///./src/assets/js/game/entities/actors/enemies/Goblin.js","webpack:///./src/assets/js/game/entities/actors/enemies/Bat.js","webpack:///./src/assets/js/game/entities/actors/enemies/Rat.js","webpack:///./src/assets/js/game/entities/actors/enemies/Snake.js","webpack:///./src/assets/js/game/utils/EntityFactory.js","webpack:///./src/assets/js/game/entities/misc/LockedDoor.js","webpack:///./src/assets/js/game/entities/actors/enemies/Troll.js","webpack:///./src/assets/js/game/entities/actors/enemies/Mummy.js","webpack:///./src/assets/js/game/entities/actors/enemies/Ghost.js","webpack:///./src/assets/js/game/entities/actors/enemies/IceElemental.js","webpack:///./src/assets/js/game/entities/actors/enemies/Golem.js","webpack:///./src/assets/js/game/entities/actors/enemies/Imp.js","webpack:///./src/assets/js/game/entities/actors/enemies/Siren.js","webpack:///./src/assets/js/game/entities/actors/enemies/Banshee.js","webpack:///./src/assets/js/game/entities/actors/enemies/Vampire.js","webpack:///./src/assets/js/game/entities/actors/enemies/Minotaur.js","webpack:///./src/assets/js/game/entities/actors/enemies/Cyclops.js","webpack:///./src/assets/js/game/entities/actors/enemies/Demon.js","webpack:///./src/assets/js/game/entities/actors/enemies/BoneMan.js","webpack:///./src/assets/js/game/entities/actors/enemies/boss/Lich.js","webpack:///./src/assets/js/game/map/GameMap.js","webpack:///./src/assets/js/game/map/generation/RandomCave.js","webpack:///./src/assets/js/game/map/generation/RandomDungeon.js","webpack:///./src/assets/js/game/entities/actors/enemies/WildGoat.js","webpack:///./src/assets/js/game/map/generation/RandomSimplex.js","webpack:///./src/assets/js/game/map/generation/index.js","webpack:///./src/assets/js/game/Game.js","webpack:///./src/assets/js/game/GameDisplay.js","webpack:///src/components/StartMenu.vue","webpack:///./src/components/StartMenu.vue?ca82","webpack:///./src/components/StartMenu.vue","webpack:///src/components/MessageLog.vue","webpack:///./src/components/MessageLog.vue?5254","webpack:///./src/components/MessageLog.vue","webpack:///src/components/GameDisplay.vue","webpack:///./src/components/GameDisplay.vue?4ee0","webpack:///./src/components/GameDisplay.vue","webpack:///src/components/Inventory.vue","webpack:///./src/components/Inventory.vue?6e28","webpack:///./src/components/Inventory.vue","webpack:///src/components/ItemTransferModal.vue","webpack:///./src/components/ItemTransferModal.vue?2fd8","webpack:///./src/components/ItemTransferModal.vue","webpack:///src/components/EnemyOverview.vue","webpack:///./src/components/EnemyOverview.vue?ade5","webpack:///./src/components/EnemyOverview.vue","webpack:///src/components/Minimap.vue","webpack:///./src/components/Minimap.vue?5922","webpack:///./src/components/Minimap.vue","webpack:///src/components/HUD/Stats.vue","webpack:///./src/components/HUD/Stats.vue?54be","webpack:///./src/components/HUD/Stats.vue","webpack:///src/components/HUD/Spellbook.vue","webpack:///./src/components/HUD/Spellbook.vue?6c2f","webpack:///./src/components/HUD/Spellbook.vue","webpack:///src/components/HUD/ItemSlot.vue","webpack:///./src/components/HUD/ItemSlot.vue?6abd","webpack:///./src/components/HUD/ItemSlot.vue","webpack:///src/components/HUD/Equipment.vue","webpack:///./src/components/HUD/Equipment.vue?25f5","webpack:///./src/components/HUD/Equipment.vue","webpack:///src/components/HelpDialog.vue","webpack:///./src/components/HelpDialog.vue?1328","webpack:///./src/components/HelpDialog.vue","webpack:///src/components/ToolDialog.vue","webpack:///./src/components/ToolDialog.vue?e49f","webpack:///src/components/HUD.vue","webpack:///./src/components/ToolDialog.vue","webpack:///./src/components/HUD.vue?060f","webpack:///./src/components/HUD.vue","webpack:///src/components/DeathModal.vue","webpack:///./src/components/DeathModal.vue?a863","webpack:///./src/components/DeathModal.vue","webpack:///src/App.vue","webpack:///./src/App.vue?a9c6","webpack:///./src/App.vue","webpack:///./src/main.js"],"names":["xp_levels","i","push","Entity_Entity","constructor","x","y","options","this","Object","assign","undefined","id","setSprite","sprite","setSpriteHPBar","spriteHPBar","move","nx","ny","ntile","Game_Game","map","data","removeActor","actors","display","moveSprite","scale","anchor","set","placeAt","getTile","Item_Item","visible","inInventory","super","hoverInfo","type","name","clipLocation","getTilesetCoords","use","getAction","action","drop","player","dropItem","Potion_Potion","cb","potionsConsumed","HealthPotion_HealthPotion","log","heal","removeFromInventory","Effect","description","duration","applyEffect","entity","Effect_RegenerationEffect","capitalize","Buff_Buff","undoAction","initialDuration","StrengthBuff","amt","str","amount","StrengthPotion_StrengthPotion","buff","addNewBuff","ManaPotion_ManaPotion","restore","Weapon_Weapon","combat","blocked","equippable","equipped","enchantments","equipment","weapon","unequipWeapon","equipWeapon","roll","dmg","rolls","getRandomInt","sides","addNewEnchantment","enchantment","Sword","fg","attackVerbs","swordNames","createSword","length","AMMO_TYPES","ARROW","Ammo_Ammo","ammo","unequipAmmo","equipAmmo","quantity","Arrow_Arrow","ammoType","SteelArrow","damage","min","max","Math","ceil","floor","random","getNormalRandomInt","rand","gaussianRand","between","a","n","b","addPrefix","word","vowels","includes","toLowerCase","HelperFunctions_itemTypes","STRENGTH_POTION","MANA_POTION","HEALTH_POTION","SWORD","STEEL_ARROW","getDiceRoll","getItemsFromDropTable","dropTable","minItems","maxItems","items","chosenItem","rot_default","RNG","getWeightedValue","console","getVisibleTiles","actor","visibleTiles","FOV","PreciseShadowcasting","inbounds","compute","range","r","visibility","Door_Door","bg","closed","react","openDoor","tileset","tileproperties","activated_id","texture","tilesetMapping","closeDoor","Chest_Chest","isPlayer","open","item","addToInventory","chestsOpened","Ladder_Ladder","dir","portal","createDungeon","direction","act","changeLevels","error","corpseTypes","SKELETON","HUMANOID","Corpse_Corpse","rotten","turns","engine","lock","tint","idx","_scheduler","remove","indexOf","splice","removeChild","unlock","Actor_Actor","routine","corpseType","effects","head","torso","legs","ring","inventory","menu","filter","e","effect","addNewEffect","memberOfInventory","findIndex","cell","is","newItem","nextFreeIndex","placeEntityBelow","assignSprite","removeItem","distanceTo","sqrt","pow","interact","userSettings","animationsEnabled","setTimeout","tryMove","width","height","isDead","attack","ranged","verb","message","damageDealt","getEffect","some","hp","invulnerable","damageTaken","gain_xp","maxhp","death","healthRestored","mana","maxmana","fireRangedWeapon","diff","DIRS","tx","ty","tile","enemies","hostile","enemy","evtdamage","ctile","background","children","corpse","unshift","scheduler","add","blood","bloodSprite","lib","position","tileSize","addChildAt","enemiesKilled","getHoverInfo","getMinDmg","wep","minWeaponDmg","getMaxDmg","maxWeaponDmg","RangedWeapon","Bow_createBow","StatelessAI_StatelessAI","config","ai","endTurn","dx","abs","dy","recalculatePath","playerInView","reduce","concat","wanders","morale","minPlayerDist","maxPlayerDist","melee","magic","chasing","pathToPlayer","path","findNearbyTiles","nearbyTiles","playerDistToTile","maxDist","farthestTile","currentDist","getFarthestAwayTile","fleeing","newPos","len","SimpleEnemy","Skeleton_Skeleton","randomHP","randomStr","def","Zombie_Zombie","spellTypes","CONJURATION","RESTORATION","CHARMS","ICE","AIR","EARTH","FIRE","POISON","NECROMANCY","TRANSLOCATION","TRANSMUTATION","HEXES","targetTypes","SELF","TARGET","Spell","manaCost","targetType","cast","Spell_MinorHeal","splashArt","target","caster","Spell_MagicDart","hit","Spell_Pain","adjective","Spell_Regeneration","Spell_VampiricDraining","reanimate","undeadActor","getNearbyCorpses","cartOfCorpses","corpses","Spell_AnimateDead","forEach","Player_pathfinding","Player_Player","targeting","casting","examining","leveled_up","mouseEnabled","xp","level","hpRecovery","manaRecovery","validTarget","currentSpell","spells","turnsTaken","spellsCast","dungeonsExplored","dead","keyTimer","Path","AStar","nearbyEnemies","currentLevel","sword","selectSpell","commandQueue","spell","level_up","remainingXP","getNearbyEnemies","fn","pop","window","addEventListener","handleEvent","evt","seen_tiles","visible_tiles","waitUntilPlayerReleases","removeEventListener","clearTempLog","confirmRangedFire","selectedTile","clearSelectedTile","confirmSpellcasting","eventToTile","changeSelectedTile","mouseMoved","code","keyCode","shift_pressed","getModifierState","movementKeys","cycleKeys","confirmKeys","exitKeys","preventDefault","keyMap","39","37","38","40","104","105","102","99","98","97","100","103","68","65","87","83","101","75","85","76","78","74","66","72","89","70","90","69","188","71","190","88","Date","start","getTime","msg","inViewport","cycleThroughSelectableEnemies","climb","selectNearestEnemyTile","pickup","tileItems","el","clearSprite","itemTypes","prettyItemTypes","slice","buffer","buf","ladder","clear","Tile_Tile","obstacles","updateTileInfo","obstacle","getTileInfo","blocks_vision","obs","Key","LevelTransition_LevelTransition","Spellbook_Spellbook","_extends","s","NPC_NPC","Game","Orc_Orc","empowered","amtHealed","Kobold_Kobold","Goblin_Goblin","Bat_Bat","Rat","symbol","Snake","itemShop","t","BOW","createBow","KEY","NECROMANCY_SPELLBOOK","createItem","itemString","actorTextures","ORC","EMPOWERED_ORC","GOBLIN","RAT","BAT","KOBOLD","ZOMBIE","TROLL","MUMMY","GHOST","ICE_ELEMENTAL","GOLEM","IMP","SNAKE","SIREN","VAMPIRE","MINOTAUR","CYCLOPS","BANSHEE","DEMON","BONE_MAN","entityShop","NPC","LEVEL_TRANSITION","CHEST","DOOR","LOCKED_DOOR","keys","LADDER","ZOMBIE_CORPSE","SKELETON_CORPSE","LICH","regeneration","cd","maxCD","pain","vampiricDraining","animateDead","intro","lostHP","nearbyCorpses","cooldown","EntityFactory_createActor","actorString","possibleActorTextures","createMapFromJSON","json","layers","gameMap","GameMap_GameMap","createFromJSON","revealed","loadedIDS","playerLocation","Array","visited","j","layer","processTileLayer","processObjectGroupLayer","createActorFromObject","object","gid","properties","entity_type","split","trim","portalID","objects","RandomCave_actorTextures","flatten","arr","acc","val","isArray","randomTile","validTiles","index","Number","dungeonThemes","RUINS","mobDistribution","textures","upperLeft","top","upperRight","left","center","right","lowerLeft","bottom","lowerRight","endLeft","middleCorridorHorizontal","endRight","endTop","middleCorridorVertical","endBottom","single","corridorFloor","horizontal","middle","vertical","walls","island","leftT","middleT","rightT","topT","bottomT","doors","CATACOMBS","MINE","HELL","RandomDungeon_ladders","up","down","chestTexture","computeBitmaskFloors","freeCells","sum","above","below","ur","ll","ul","lr","free","coord","computeBitmaskWalls","RandomDungeon_randomTile","getFloorTexture","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","getWallTexture","20","dungeonFromTheme","theme","mapGenerator","hasDoors","dungeonName","lastDungeon","fromPortal","toPortal","createdLadders","rotMap","create","room","getRooms","getDoors","sym","getLeft","getRight","getTop","getBottom","wleft","wright","wtop","wbottom","door","floor_ids","values","levelTransition","roomWidth","roomHeight","coords","chest","randomProperty","parseInt","depth","WildGoat_WildGoat","RandomSimplex_textures","OLD_BEACH","BEACH","OCEAN_WATER","COASTAL_WATER","altUpperRight","FOREST","hasCorridors","MOUNTAIN","middleIntersection","SNOW","RandomSimplex_actorTextures","WILD_GOAT","wildGrass1","wildGrass2","wildGrass3","wildGrass4","shrub1","shrub3","mushroom1","tree","flower1","flower2","flower3","flower4","generation","randomCave","cellularMap","Map","Cellular","randomize","connect","l","floors","computeBitmask","wallSums","21","floorSums","playerID","ladderGoingDown","chosenMob","mobArray","randomMob","createActor","randomDungeon","dc","corridorLength","roomDugPercentage","Uniform","Digger","randomSimplexMap","zoom","w","h","rng1","pm_prng_default","rng2","gen1","simplex_noise_default","nextDouble","bind","noise1","noise2D","getElevation","frequency","biome","elevation","textureType","sumToTexture","warn","tileOptions","getTexture","floraFaunaProbability","[object Object]","chosenActor","skipHello","Game_randomSimplexMap","Game_randomDungeon","Game_randomCave","untargetableBorders","app","overview","dev","HUD","turn","loaded","levels","messageHistory","tempMessages","minimap","pathToTarget","targetReticle","enemyCycle","enemyCycleIndex","hpBars","init","playerSpriteID","displayOptions","forceSquareRatio","layout","tileWidth","tileHeight","smallerScreen","innerHeight","innerWidth","staticBackground","animatedBackground","FOVBackground","HUDBackground","movingSprites","viewPort","objectTemplates","spriteBox","resize","scaleRatio","newWidth","newHeight","renderer","stage","loadAssets","view","resources","url","on","handleAssetLoad","load","tilecount","frame","renderLoop","delta","obj","o","distX","distY","movementSpeed","ticker","tilewidth","tileheight","cols","columns","renderMap","removeChildren","animated","animated_id","frames","AnimatedSprite","animationSpeed","interval","play","addChild","generateTexture","camera","startingPos","alpha","drawMiniMap","updateMap","lighter1","c","g","gx","gy","beginFill","drawRect","endFill","animate","belowPlayer","props","randomInterval","getContainer","loader","resource","cx","cy","text","progress","fill","fontSize","fontFamily","px","py","scheduleAllActors","initializeMinimap","document","getElementById","appendChild","Scheduler","Simple","Engine","Display","setOptions","spacing","createDungeonFloors","origin","numberOfFloors","mapID","dungeon","nextMap","otherActors","draw","brightenColor","color","hsl_color","Color","rgb2hsl","fromString","toRGB","hsl2rgb","endingPos","sort","a1","a2","getClosestEnemyToPlayer","blockedTile","x0","x1","y0","y1","sx","sy","err","e2","describeSelectedTile","newTarget","names","obstacleDescriptions","prettyNames","inView","printPlayerTile","plugins","interaction","mouse","global","tmp","message_color","defend","information","player_move","alert","getNearestLadder","ladders","getNearestLevelTransition","levelTransitions","StartMenu","components_StartMenu","render","_vm","_h","$createElement","_c","_self","attrs","dark","fluid","grid-list-xl","row","xs12","_v","wrap","_l","key","staticStyle","padding","xs4","_s","staticClass","xs1","class","spriteIsSelected","selectedSprite","src","getPlayerSpriteImage","click","$event","selectSprite","staticRenderFns","src_components_StartMenu","__webpack_require__","normalizeComponent","ssrContext","MessageLog","offset","components_MessageLog","column","align-start","getMessages","style","getTempMessages","max-width","small","resetOffset","src_components_MessageLog","MessageLog_normalizeComponent","components_GameDisplay","selectortype_template_index_0_src_components_GameDisplay","margin","src_components_GameDisplay","GameDisplay_normalizeComponent","Inventory","draggable","clientX","clientY","components_Inventory","element","model","value","callback","$$v","expression","getInventory","selectedItem","colorSlot","inventory_cell","col","align-center","open-delay","_e","slot","ripple","useItem","contextmenu","show","offset-x","nudge-width","close-on-click","absolute","position-x","position-y","$set","avatar","getInventorySprite","flat","overlay","overlap","src_components_Inventory","Inventory_normalizeComponent","ItemTransferModal","components_ItemTransferModal","xs5","xs2","src_components_ItemTransferModal","ItemTransferModal_normalizeComponent","EnemyOverview","components_EnemyOverview","min-height","md4","font-size","src_components_EnemyOverview","EnemyOverview_normalizeComponent","Minimap","components_Minimap","xs10","src_components_Minimap","Minimap_normalizeComponent","Stats","costOfLevel","HUD_Stats","min-width","md1","padding-left","md2","getLevel","md5","getRemainingXP","md3","getStrength","getDamageRange","getCurrentWeapon","getCurrentWeaponEnchantments","md6","getCurrentSpell","components_HUD_Stats","Stats_normalizeComponent","HUD_Spellbook","components_HUD_Spellbook","getSpells","selectedSpell","highlightSpell","getSpellSplashArt","fillerSpellSlots","opacity","src_components_HUD_Spellbook","Spellbook_normalizeComponent","ItemSlot","HUD_ItemSlot","altSprite","Equipment","ItemSlot_normalizeComponent","HUD_Equipment","margin-top","components_HUD_Equipment","Equipment_normalizeComponent","HelpDialog","helpDialog","components_HelpDialog","icon","stopPropagation","xs6","cheat","src_components_HelpDialog","HelpDialog_normalizeComponent","ToolDialog","newState","components_ToolDialog","toolDialog","toggleHPBars","toggleAnimations","ToolDialog_normalizeComponent","components_HUD","margin-bottom","md8","getHP","getMaxHP","getMana","getMaxMana","info","getCurrentLevel","getCurrentLevelDepth","src_components_HUD","HUD_normalizeComponent","DeathModal","reload","components_DeathModal","playerIsDead","persistent","deathDialog","formatNoOrMultiple","raised","startNewGame","src_components_DeathModal","DeathModal_normalizeComponent","App_innerWidth","App_innerHeight","uiWidth","uiHeight","showFooter","gameDisplayWidth","gameDisplayHeight","App","recomputeSize","selectortype_template_index_0_src_App","directives","rawName","max-height","dismissible","unstableBuildMessage","showEquipment","playerSelected","spriteSelected","loadGame","href","src_App","App_normalizeComponent","vue_esm","vuetify_default","productionTip","components","template"],"mappings":"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,EAAGC,GACRM,GAAIA,EACJ2B,KAAMA,EACND,KAAM,QACNsD,GAAI,SACJjB,QACCW,MAAOA,EACPE,MAAOA,GAERK,aAAc,UAAW,UAAW,SAAU,aAKjD,IAAIC,GACH,aACA,YACA,eACA,YACA,SACA,UACA,mBACA,oBACA,wBACA,mBACA,eACA,WACA,UACA,cACA,cACA,cACA,kBACA,uBACA,UACA,YACA,SACA,YACA,QACA,8BACA,+BACA,QACA,qBACA,mBACA,kBACA,aACA,oBACA,YACA,mBACA,WACA,UACA,UACA,YACA,aACA,aACA,OACA,aACA,aACA,eACA,MACA,eACA,WACA,WACA,SACA,SACA,kBACA,aACA,aACA,WACA,UACA,aACA,UACA,eACA,YACA,WACA,YACA,gBACA,cACA,SACA,eACA,aACA,eACA,YACA,UACA,cACA,YACA,0BACA,YACA,YACA,eACA,WACA,YACA,UACA,WACA,eACA,cACA,QACA,UACA,YACA,YACA,SACA,gBACA,iBACA,WACA,aACA,WACA,eACA,SACA,aACA,WACA,YACA,QACA,gBACA,UACA,WACA,aACA,WACA,WACA,wBACA,eACA,aACA,uBACA,UACA,WACA,OACA,WACA,SACA,gBACA,iBACA,gBACA,iBACA,cACA,cACA,SACA,WACA,WACA,YACA,SAGM,SAASC,EAAY1F,EAAGC,EAAGM,GAGjC,OAFY,IAAI+E,EAAMtF,EAAGC,EAAGiF,EAAa,EAAG,GAAIA,EAAa,EAAG,GAAIO,EAAWP,EAAa,EAAGO,EAAWE,OAAS,IAAKpF,GChJlH,MAAMqF,GACZC,MAAO,eAGKC,UAAalE,EACzB7B,YAAYC,EAAGC,EAAGC,GACjBA,EAAQ2B,SAAU,EAClB3B,EAAQqE,SAAU,EAClBrE,EAAQoE,OAAOE,YAAa,EAC5BtE,EAAQoE,OAAOG,UAAW,EAC1BvE,EAAQqC,OAAS,QACjBR,MAAM/B,EAAGC,EAAGC,GACZE,OAAOC,OAAOF,KAAMD,GACpBC,KAAKyC,GAAKzC,KAAKmE,OAGhBjC,MACKrB,GAAKyB,OAAOG,GAAG+B,UAAUoB,OAAS5F,KACr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","file":"static/js/app.755d44f1f2a367e7025d.js","sourcesContent":["import { Game } from '#/Game.js'\r\n\r\nexport let xp_levels = [50]\r\nfor (let i = 1; i < 100; i++) xp_levels.push(1.5 * xp_levels[i - 1])\r\n\r\n/* Entities are in-game objects that exist in the map. They have symbols,\r\n * foregrounds, backgrounds, descriptions, names, visibility, and blocked properties. */\r\nexport class Entity {\r\n\tconstructor(x, y, options) {\r\n\t\tthis.x = x\r\n\t\tthis.y = y\r\n\t\tObject.assign(this, options)\r\n\t\tif (options.id === undefined) throw 'Error - entity created without valid id'\r\n\t}\r\n\r\n\tsetSprite(sprite) {\r\n\t\tthis.sprite = sprite\r\n\t}\r\n\r\n\tsetSpriteHPBar(sprite) {\r\n\t\tthis.spriteHPBar = sprite\r\n\t}\r\n\r\n\tmove(nx, ny) {\r\n\t\tlet ntile = Game.map.data[ny][nx] // new tile to move to\r\n\t\tlet ctile = Game.map.data[this.y][this.x] // current tile\r\n\t\tctile.removeActor(this) // remove this actor from this tile\r\n\t\tntile.actors.push(this) // add this actor to the new tile\r\n\t\tGame.display.moveSprite(this.sprite, nx, ny)\r\n\t\tif (this.x < nx) {\r\n\t\t\tthis.sprite.scale.x = -1\r\n\t\t\tthis.sprite.anchor.set(1, 0)\r\n\t\t} else if (this.x > nx) {\r\n\t\t\tthis.sprite.scale.x = 1\r\n\t\t\tthis.sprite.anchor.set(0, 0)\r\n\t\t}\r\n\t\tthis.x = nx // update x,y coords to new coords\r\n\t\tthis.y = ny\r\n\t\tif (this.spriteHPBar !== undefined) {\r\n\t\t\tGame.display.moveSprite(this.spriteHPBar, nx, ny - 0.5)\r\n\t\t}\r\n\t\t// this.sprite.position.set(this.x * 32, this.y * 32)\r\n\t\t// Game.drawActor(this); // draw the actor at the new spot\r\n\t\t// Game.drawViewPort();\r\n\t\t// Game.drawMiniMap();\r\n\t}\r\n\r\n\tplaceAt(nx, ny) {\r\n\t\tlet ntile = Game.getTile(nx, ny) // new tile to move to\r\n\t\tntile.actors.push(this) // add this actor to the new tile\r\n\t\tthis.x = nx // update x,y coords to new coords\r\n\t\tthis.y = ny\r\n\t\t// Place the sprite directly at the new location\r\n\t\tif (this.sprite !== undefined) Game.display.moveSprite(this.sprite, nx, ny, false)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/Entity.js","/**\n * Created by larken on 7/12/17.\n */\n\nimport { Game } from '#/Game.js'\nimport { Entity } from '#/entities/Entity.js'\n\nexport default class Item extends Entity {\n\tconstructor(x, y, options) {\n\t\toptions.visible = true\n\t\toptions.inInventory = true\n\t\tsuper(x, y, options)\n\t}\n\n\t/* UI / Front End functions */\n\thoverInfo() {\n\t\treturn `${this.type}${this.name}\\n`\n\t}\n\n\tclipLocation() {\n\t\tlet c = getTilesetCoords(this.id)\n\t\t// let css = `rect(${c[1]}px 32px 32px ${c[0]}px)`;\n\t\tlet css = 'rect(0,32,32,0)'\n\t\treturn css\n\t}\n\n\tuse() {\n\t\t// to be overwritten\n\t}\n\n\tgetAction() {\n\t\treturn this.action\n\t}\n\n\t// making a major assumption that the player is the only thing that drops things.\n\t// might change if some enemy type needs to do so\n\tdrop() {\n\t\tGame.player.dropItem(this)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/Item.js","import Item from '#/entities/items/Item.js'\nimport { Game } from '#/Game.js'\nexport default class Potion extends Item {\n\tconstructor(x, y, options) {\n\t\toptions.action = 'Drink'\n\t\tsuper(x, y, options)\n\t}\n\n\tuse() {\n\t\tGame.player.cb.potionsConsumed++\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/potions/Potion.js","import Potion from '#/entities/items/potions/Potion.js'\nimport { Game } from '#/Game.js'\n\nexport default class HealthPotion extends Potion {\n\tconstructor(x, y, id) {\n\t\tsuper(x, y, {\n\t\t\tid: id,\n\t\t\ttype: 'Health Potion'\n\t\t})\n\t}\n\n\tuse() {\n\t\tsuper.use()\n\t\tGame.log('You drink a health potion. It restores a little HP.', 'defend')\n\t\tGame.player.heal(25)\n\t\tGame.player.removeFromInventory(this)\n\t}\n\n\thoverInfo() {\n\t\treturn 'Effect: Heals for 25 HP'\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/potions/HealthPotion.js","/*\n An effect is exclusively carried out to manipulate an Entity in some way (typically an actor, but we might carry\n it out against other entities like weapons (e.g. imbue a sword with fire damage for 5 turns)). We can divide up effects\n in different types of effects:\n - Effects that are immediate versus Effects that exist over multiple turns/ticks in the game.\n ~ examples include a health potion that restores HP immediately vs a strength potion which might increase str for 5 turns\n */\n\nimport { Game } from '#/Game.js'\n\nexport class Effect {\n\tconstructor(options) {\n\t\tObject.assign(this, options)\n\t\tif (this.name === undefined || this.description === undefined || this.action === undefined || this.duration === undefined)\n\t\t\tthrow 'Effect missing critical fields'\n\t}\n\n\tapplyEffect(entity) {\n\t\tif (this.duration == 0) {\n\t\t\treturn\n\t\t}\n\t\tthis.action(entity)\n\t\tthis.duration--\n\t}\n}\n\nexport class BleedEffect extends Effect {\n\tconstructor() {\n\t\tsuper({\n\t\t\tname: 'Bleed',\n\t\t\taction: entity => {\n\t\t\t\tlet dmg = ~~(entity.cb.maxhp * 0.1)\n\t\t\t\tif (dmg === 0) dmg = 1\n\t\t\t\tentity.damage(dmg)\n\t\t\t},\n\t\t\tdescription: entity => {\n\t\t\t\tlet dmg = ~~(entity.cb.maxhp * 0.1)\n\t\t\t\tif (dmg === 0) dmg = 1\n\t\t\t\tif (entity === Game.player) return `You bleed for ${dmg} damage.`\n\t\t\t\telse return `${entity.name.capitalize()} took ${dmg} bleed damage.`\n\t\t\t},\n\t\t\tduration: 3\n\t\t})\n\t}\n}\n\nexport class RegenerationEffect extends Effect {\n\tconstructor() {\n\t\tsuper({\n\t\t\tname: 'Regeneration',\n\t\t\taction: entity => {\n\t\t\t\tentity.heal(5)\n\t\t\t},\n\t\t\tdescription: entity => {\n\t\t\t\tif (entity === Game.player) return 'You regenerate 5 health.'\n\t\t\t\telse return `${entity.name.capitalize()} regenerated 5 health.`\n\t\t\t},\n\t\t\tduration: 5\n\t\t})\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/modifiers/Effect.js","import {Game} from '#/Game.js'\r\nimport {Effect} from '#/modifiers/Effect.js'\r\n/* Very similar class to Effect; however, instead of performing an action each turn, this will perform\r\n it once during the initial proc of the effect, then it will remove the effect after the buff wears off. It will\r\n still be added as an effect under the Actor effects array */\r\nexport class Buff extends Effect {\r\n\tconstructor(options) {\r\n\t\t// buffs must specify a way to 'undo' the temporary effect it has on the entity\r\n\t\tif (options.undoAction === undefined)\r\n\t\t\tthrow 'Buffs must declare a way to undo temporary effects'\r\n\r\n\t\tsuper(options)\r\n\t\tthis.initialDuration = this.duration // 'remember' the initial duration\r\n\t}\r\n\r\n\t// overriding super method\r\n\tapplyEffect(entity) {\r\n\t\tif (this.duration === this.initialDuration) {\r\n\t\t\tthis.action(entity)\r\n\t\t\tthis.duration--\r\n\t\t} else if (this.duration === 1) {\r\n\t\t\tGame.log(`Your ${this.name} has expired.`, 'alert')\r\n\t\t\tthis.undoAction(entity)\r\n\t\t\tthis.duration--\r\n\t\t} else {\r\n\t\t\tthis.duration--\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class StrengthBuff extends Buff {\r\n\tconstructor(amt) {\r\n\t\tsuper({\r\n\t\t\tname: 'Strength Buff',\r\n\t\t\taction: (entity) => {\r\n\t\t\t\tentity.cb.str += amt\r\n\t\t\t},\r\n\t\t\tundoAction: (entity) => {\r\n\t\t\t\tentity.cb.str -= amt\r\n\t\t\t},\r\n\t\t\tdescription: (entity) => {\r\n\t\t\t\treturn `${entity.name} has +${amt} Strength for ${this.duration} turns`\r\n\t\t\t},\r\n\t\t\tduration: 5,\r\n\t\t\tamount: amt\r\n\t\t})\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/modifiers/Buff.js","import Potion from '#/entities/items/potions/Potion.js'\nimport { Game } from '#/Game.js'\nimport { StrengthBuff } from '#/modifiers/Buff.js'\n\nexport default class StrengthPotion extends Potion {\n\tconstructor(x, y, id) {\n\t\tsuper(x, y, {\n\t\t\tid: id,\n\t\t\ttype: 'Strength Potion'\n\t\t})\n\t\tthis.buff = new StrengthBuff(3)\n\t}\n\n\tuse() {\n\t\tsuper.use()\n\t\tGame.player.addNewBuff(this.buff)\n\t\tGame.log(`You drink a strength potion. It boosts your strength for the next ${this.buff.duration + 1} moves.`, 'defend')\n\t\tGame.player.removeFromInventory(this)\n\t}\n\n\thoverInfo() {\n\t\treturn `Effect: +${this.buff.amount} STR for ${this.buff.duration} moves`\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/potions/StrengthPotion.js","import Potion from '#/entities/items/potions/Potion.js'\n\nimport { Game } from '#/Game.js'\n\nexport default class ManaPotion extends Potion {\n\tconstructor(x, y, id) {\n\t\tsuper(x, y, {\n\t\t\tid: id,\n\t\t\ttype: 'Mana Potion'\n\t\t})\n\t}\n\n\tuse() {\n\t\tsuper.use()\n\n\t\tGame.log('You drink a mana potion. It restores a little mana.', 'defend')\n\t\tGame.player.restore(10)\n\t\tGame.player.removeFromInventory(this)\n\t}\n\n\thoverInfo() {\n\t\treturn 'Effect: Restores 10 mana'\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/potions/ManaPotion.js","/**\n * Created by Larken on 6/22/2017.\n */\nimport { Game } from '#/Game.js'\nimport Item from '#/entities/items/Item.js'\nimport { getRandomInt } from '#/utils/HelperFunctions.js'\n\nexport default class Weapon extends Item {\n\tconstructor(x, y, options) {\n\t\tif (options.combat === null)\n\t\t\tthrow `Error - no options.combat property defined. Bad weapon creation for ${options.name}`\n\t\toptions.visible = true\n\t\toptions.blocked = false\n\t\toptions.combat.equippable = true\n\t\toptions.combat.equipped = false\n\t\tsuper(x, y, options)\n\t\tthis.cb = this.combat\n\t\tthis.cb.enchantments = []\n\t\tthis.action = 'Equip'\n\t}\n\n\tuse() {\n\t\tif (Game.player.cb.equipment.weapon === this) {\n\t\t\tGame.player.unequipWeapon()\n\t\t} else {\n\t\t\tGame.player.equipWeapon(this)\n\t\t}\n\t}\n\n\troll() {\n\t\tlet dmg = 0\n\t\tfor (let i = 0; i < this.cb.rolls; i++) {\n\t\t\tdmg += getRandomInt(1, this.cb.sides)\n\t\t}\n\t\treturn dmg\n\t}\n\n\tgetAction() {\n\t\tif (this.cb.equipped) return 'Unequip'\n\t\treturn this.action\n\t}\n\n\t/* Effects are equivalent to enchantments, in a way...\n     * Might need to do some work on editing how these are displayed in the UI\n     */\n\taddNewEnchantment(enchantment) {\n\t\tthis.cb.enchantments.push(enchantment)\n\t}\n\n\thoverInfo() {\n\t\treturn `Damage: ${this.cb.rolls}-${this.cb.sides * this.cb.rolls}`\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/weapons/Weapon.js","/**\n * Created by Larken on 6/22/2017.\n */\n\nimport Weapon from '#/entities/items/weapons/Weapon.js'\nimport { getRandomInt } from '#/utils/HelperFunctions.js'\nimport { BleedEnchantment } from '#/modifiers/Enchantment.js'\n\nexport class Sword extends Weapon {\n\tconstructor(x, y, sides, rolls, name, id) {\n\t\tsuper(x, y, {\n\t\t\tid: id,\n\t\t\tname: name,\n\t\t\ttype: 'Sword',\n\t\t\tfg: 'orange',\n\t\t\tcombat: {\n\t\t\t\trolls: rolls,\n\t\t\t\tsides: sides\n\t\t\t},\n\t\t\tattackVerbs: ['slashed', 'stabbed', 'gutted', 'sliced']\n\t\t})\n\t}\n}\n\nlet swordNames = [\n\t'Caledfwlch',\n\t'Hywelbane',\n\t'Brightkiller',\n\t'Excalibur',\n\t'Joyeux',\n\t'Dyrnwyn',\n\t'Johnny Corkscrew',\n\t'The Sword of Leah',\n\t'The Sword of Shannara',\n\t'The Vorpal Sword',\n\t'Seraph Blade',\n\t'Glorious',\n\t'Cortana',\n\t'Heosphorous',\n\t'Phaesphoros',\n\t'Maellartach',\n\t'The Rivan Sword',\n\t'The Sword of Shadows',\n\t'Sikanda',\n\t'Dragnipur',\n\t'Chance',\n\t'Vengeance',\n\t'Grief',\n\t'The Swords of Night and Day',\n\t'The Swords of Blood and Fire',\n\t'Snaga',\n\t'The Sword of Truth',\n\t'The Lady Vivamus',\n\t'Sword of Martin',\n\t'Verminfate',\n\t'Rapscallion sword',\n\t'Callandor',\n\t'Heron Mark Sword',\n\t'Graywand',\n\t'Scalpel',\n\t'Rhindon',\n\t'Blackfyre',\n\t'Brightroar',\n\t'Dark Siste',\n\t'Dawn',\n\t'Hearteater',\n\t'Heartsbane',\n\t\"Widow's Wail\",\n\t'Ice',\n\t'Lady Forlorn',\n\t'Longclaw',\n\t'Red Rain',\n\t'Albitr',\n\t'Needle',\n\t'The Black Blade',\n\t'Mournblade',\n\t'Oathkeeper',\n\t'Naegling',\n\t'Arvindr',\n\t'Ravenbrand',\n\t\"Zar'roc\",\n\t\"Lion's Tooth\",\n\t'Doomgiver',\n\t'Kanajana',\n\t'Tmerlein',\n\t'Shieldbreaker',\n\t'Woundhealer',\n\t'Narsil',\n\t'Lightbringer',\n\t'Soulcutter',\n\t'Sightblinder',\n\t'Wayfinder',\n\t'Orcrist',\n\t'Stonecutter',\n\t'Townsaver',\n\t'The Sword of Gryffindor',\n\t'Farslayer',\n\t'Mindsword',\n\t'Dragonslicer',\n\t'Katopris',\n\t'Backbiter',\n\t'Undbitr',\n\t'Brisingr',\n\t'Barrow-blade',\n\t'Coinspinner',\n\t'Lhang',\n\t'Traitor',\n\t'Anglachel',\n\t'Hadhafang',\n\t'Vrangr',\n\t'The Darksword',\n\t'The Lightsword',\n\t'Herugrim',\n\t'Anaklusmos',\n\t'Gthwin',\n\t'Terminus Est',\n\t'Memory',\n\t\"Khazid'hea\",\n\t'Clamorer',\n\t'Backbiter',\n\t'Thorn',\n\t\"Charon's Claw\",\n\t'Twinkle',\n\t'Godsbane',\n\t'Icingdeath',\n\t'Hrunting',\n\t'Naegling',\n\t'The Sword of the Dawn',\n\t'Hill Cleaver',\n\t'Werewindle',\n\t'Kijin-marukuni-shige',\n\t'Balaraw',\n\t'Keyblade',\n\t'Hina',\n\t'Tessaiga',\n\t'Sorrow',\n\t'Singing Sword',\n\t'Sword of Chaos',\n\t'The Starsword',\n\t'Biggoron Sword',\n\t'Grayswandir',\n\t'Rain Dragon',\n\t'Shisui',\n\t'Gurthang',\n\t'Aranrth',\n\t'Nightfall',\n\t'Sting'\n]\n\nexport function createSword(x, y, id) {\n\tlet sword = new Sword(x, y, getRandomInt(2, 4), getRandomInt(1, 2), swordNames[getRandomInt(0, swordNames.length - 1)], id)\n\t// sword.addNewEnchantment(new BleedEnchantment())\n\treturn sword\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/weapons/Sword.js","/**\n * Created by Larken on 6/22/2017.\n */\nimport Item from '#/entities/items/Item.js'\nimport { Game } from '#/Game.js'\n\nexport const AMMO_TYPES = {\n\tARROW: 'Arrow'\n}\n\nexport class Ammo extends Item {\n\tconstructor(x, y, options) {\n\t\toptions.visible = true\n\t\toptions.blocked = false\n\t\toptions.combat.equippable = true\n\t\toptions.combat.equipped = false\n\t\toptions.action = 'Equip'\n\t\tsuper(x, y, options)\n\t\tObject.assign(this, options)\n\t\tthis.cb = this.combat\n\t}\n\n\tuse() {\n\t\tif (Game.player.cb.equipment.ammo === this) {\n\t\t\tGame.player.unequipAmmo()\n\t\t} else {\n\t\t\tGame.player.equipAmmo(this)\n\t\t}\n\t}\n\n\tgetAction() {\n\t\tif (this.cb.equipped) return 'Unequip'\n\t\treturn this.action\n\t}\n\n\thoverInfo() {\n\t\treturn `Quantity: ${this.quantity}`\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/weapons/ranged/ammo/Ammo.js","import { Ammo, AMMO_TYPES } from '#/entities/items/weapons/ranged/ammo/Ammo.js'\n\nexport class Arrow extends Ammo {\n\tconstructor(x, y, options) {\n\t\toptions.combat.ammoType = AMMO_TYPES.ARROW\n\t\tsuper(x, y, options)\n\t}\n}\n\nexport class SteelArrow extends Arrow {\n\tconstructor(x, y, id, quantity) {\n\t\tsuper(x, y, {\n\t\t\tid: id,\n\t\t\ttype: 'Steel Arrows',\n\t\t\tcombat: {\n\t\t\t\tdamage: 0\n\t\t\t},\n\t\t\tquantity: quantity\n\t\t})\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/weapons/ranged/ammo/Arrow.js","import ROT from 'rot-js'\n\nimport { Game } from '#/Game.js'\nimport HealthPotion from '#/entities/items/potions/HealthPotion.js'\nimport StrengthPotion from '#/entities/items/potions/StrengthPotion.js'\nimport ManaPotion from '#/entities/items/potions/ManaPotion.js'\nimport { createSword } from '#/entities/items/weapons/Sword.js'\nimport { SteelArrow } from '#/entities/items/weapons/ranged/ammo/Arrow.js'\n\nexport function getRandomInt(min, max) {\n\tmin = Math.ceil(min)\n\tmax = Math.floor(max)\n\treturn Math.floor(Math.random() * (max - min + 1)) + min\n}\n\nexport function getNormalRandomInt(min, max) {\n\tlet gaussianRand = () => {\n\t\tlet rand = 0\n\t\tfor (let i = 0; i < 6; i++) rand += Math.random()\n\n\t\treturn rand / 6\n\t}\n\treturn Math.floor(min + gaussianRand() * (max - min + 1))\n}\n\nexport function randomProperty(object) {\n\tlet keys = Object.keys(object)\n\treturn keys[Math.floor(keys.length * Math.random())]\n}\n\nexport function between(a, n, b) {\n\t// console.log(a, n, b)\n\t// console.log(a <= n && n <= b)\n\treturn a <= n && n <= b\n}\n\nexport function addPrefix(word) {\n\tconst vowels = ['a', 'e', 'i', 'o', 'u']\n\tif (word !== 'you') {\n\t\tconst someWords = [\n\t\t\t'trees',\n\t\t\t'flowers',\n\t\t\t'grass',\n\t\t\t'wild grass',\n\t\t\t'water',\n\t\t\t'steel arrows',\n\t\t\t'carpet',\n\t\t\t'logs',\n\t\t\t'cobwebs',\n\t\t\t'dirt',\n\t\t\t'bones'\n\t\t]\n\t\tif (someWords.includes(word)) {\n\t\t\treturn 'some ' + word\n\t\t}\n\t\tif (vowels.includes(word[0].toLowerCase())) return 'an ' + word\n\t\telse return 'a ' + word\n\t} else {\n\t\treturn word\n\t}\n}\n\nexport let itemTypes = {\n\tSTRENGTH_POTION: 'STRENGTH_POTION',\n\tMANA_POTION: 'MANA_POTION',\n\tHEALTH_POTION: 'HEALTH_POTION',\n\tSWORD: 'SWORD',\n\tSTEEL_ARROW: 'STEEL_ARROW'\n}\n\nexport function getDiceRoll(rolls, sides) {\n\tlet n = 0\n\tfor (let i = 0; i < rolls; i++) {\n\t\tn += getRandomInt(1, sides)\n\t}\n\treturn n\n}\n\n// TODO: make this use the EntityFactory\nexport function getItemsFromDropTable(options) {\n\tif (\n\t\toptions.dropTable == undefined ||\n\t\toptions.minItems == undefined ||\n\t\toptions.maxItems == undefined ||\n\t\toptions.x == undefined ||\n\t\toptions.y == undefined\n\t)\n\t\tthrow 'Not enough arguments given. Expected drop table object, min and max number of items to produce, and x,y location'\n\n\tlet { dropTable, minItems, maxItems, x, y } = options\n\tlet items = []\n\tlet roll = getRandomInt(minItems, maxItems)\n\tfor (let i = 0; i < roll; i++) {\n\t\tlet chosenItem = ROT.RNG.getWeightedValue(dropTable)\n\t\tswitch (chosenItem) {\n\t\t\tcase itemTypes.STRENGTH_POTION:\n\t\t\t\titems.push(new StrengthPotion(x, y, 969))\n\t\t\t\tbreak\n\t\t\tcase itemTypes.HEALTH_POTION:\n\t\t\t\titems.push(new HealthPotion(x, y, 488))\n\t\t\t\tbreak\n\t\t\tcase itemTypes.MANA_POTION:\n\t\t\t\titems.push(new ManaPotion(x, y, 608))\n\t\t\t\tbreak\n\t\t\tcase itemTypes.SWORD:\n\t\t\t\titems.push(createSword(x, y, 35))\n\t\t\t\tbreak\n\t\t\tcase itemTypes.STEEL_ARROW:\n\t\t\t\titems.push(new SteelArrow(x, y, 784, 5))\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tconsole.log(\"tried to add some item that doesn't exist to an inventroy from drop table\")\n\t\t\t\tconsole.log(chosenItem)\n\t\t}\n\t}\n\t// console.log(\"Generated drop table\", items)\n\treturn items\n}\n\nexport function getVisibleTiles(actor) {\n\tlet fov = new ROT.FOV.PreciseShadowcasting(function(x, y) {\n\t\treturn Game.inbounds(x, y) && Game.map.data[y][x].visible()\n\t})\n\n\tlet visibleTiles = []\n\tfov.compute(actor.x, actor.y, actor.cb.range, (x, y, r, visibility) => {\n\t\tif (Game.inbounds(x, y)) visibleTiles.push(Game.map.data[y][x])\n\t})\n\treturn visibleTiles\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/utils/HelperFunctions.js","/**\r\n * Created by Larken on 7/8/2017.\r\n */\r\nimport { Game } from '#/Game.js'\r\nimport { Entity } from '#/entities/Entity.js'\r\n\r\nexport default class Door extends Entity {\r\n\tconstructor(x, y, id) {\r\n\t\tsuper(x, y, {\r\n\t\t\tname: 'door',\r\n\t\t\tid: id,\r\n\t\t\tbg: 'rgb(140, 80, 0)',\r\n\t\t\tfg: 'red',\r\n\t\t\tvisible: false,\r\n\t\t\tblocked: true\r\n\t\t})\r\n\t\tthis.closed = true\r\n\t}\r\n\r\n\treact() {\r\n\t\tif (this.closed) {\r\n\t\t\tthis.openDoor()\r\n\t\t}\r\n\t}\r\n\r\n\topenDoor() {\r\n\t\tthis.closed = false\r\n\t\tthis.blocked = false\r\n\t\tthis.visible = true\r\n\t\tthis.id = Game.display.tileset.tileproperties[this.id].activated_id\r\n\t\tthis.sprite.texture = Game.display.tilesetMapping[this.id]\r\n\t}\r\n\r\n\tcloseDoor() {\r\n\t\tthis.closed = false\r\n\t\tthis.blocked = false\r\n\t\tthis.visible = true\r\n\t\tthis.id = this.id\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/misc/Door.js","/**\n * Created by Larken on 7/8/2017.\n */\n\nimport { Game } from '#/Game.js'\nimport { Entity } from '#/entities/Entity.js'\n\nexport default class Chest extends Entity {\n\tconstructor(x, y, id) {\n\t\tsuper(x, y, {\n\t\t\tname: 'chest',\n\t\t\tid: id,\n\t\t\tvisible: true,\n\t\t\tblocked: true\n\t\t})\n\t\tthis.closed = true\n\t\tthis.items = []\n\t}\n\n\treact(actor) {\n\t\tlet isPlayer = actor === Game.player\n\t\tif (this.closed) {\n\t\t\tthis.open()\n\t\t} else {\n\t\t\t// open up an inventory screen of items in the chest?\n\t\t\tif (this.items.length === 0 && isPlayer) {\n\t\t\t\tGame.log(\"There's nothing left in this chest!\", 'information')\n\t\t\t} else {\n\t\t\t\tif (isPlayer) Game.log('You collect everything from the chest.', 'information')\n\t\t\t\tfor (let item of this.items) actor.addToInventory(item)\n\n\t\t\t\tif (isPlayer) Game.player.cb.chestsOpened++\n\t\t\t\tthis.items = []\n\t\t\t}\n\t\t}\n\t}\n\n\taddToInventory(item) {\n\t\tthis.items.push(item)\n\t}\n\n\topen() {\n\t\tthis.closed = false\n\t\tthis.id = Game.display.tileset.tileproperties[this.id].activated_id\n\t\tthis.sprite.texture = Game.display.tilesetMapping[this.id]\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/misc/Chest.js","/**\n * Created by Larken on 6/22/2017.\n */\nimport { Game } from '#/Game.js'\nimport { Entity } from '#/entities/Entity.js'\n\nexport default class Ladder extends Entity {\n\tconstructor(x, y, id, dir, portal, createDungeon = false) {\n\t\tsuper(x, y, {\n\t\t\tid: id,\n\t\t\tname: 'ladder',\n\t\t\tdirection: dir,\n\t\t\tdescription: 'A ladder leading ' + dir,\n\t\t\tfg: 'brown',\n\t\t\tbg: 'orange',\n\t\t\tblocked: false,\n\t\t\tvisible: true\n\t\t})\n\t\tthis.portal = portal\n\t\tthis.createDungeon = createDungeon\n\t}\n\n\tact() {}\n\n\treact(actor) {\n\t\tif (this.direction === null) {\n\t\t\tconsole.error('Ladder does not have a direction!')\n\t\t\treturn\n\t\t}\n\n\t\tif (this.direction === 'down') Game.log('You climb down the ladder...', 'player_move')\n\t\tif (this.direction === 'up') Game.log('You climb up the ladder...', 'player_move')\n\t\tGame.changeLevels(this.portal, this.createDungeon)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/misc/Ladder.js","import { Entity } from '#/entities/Entity.js'\r\nimport { Game } from '#/Game.js'\r\n// import Skeleton from \"#/entities/actors/enemies/Skeleton.js\";\r\n// import Zombie from \"#/entities/actors/enemies/Zombie.js\";\r\n\r\nexport const corpseTypes = {\r\n    SKELETON: 5489,\r\n    HUMANOID: 2647\r\n}\r\n\r\nexport class Corpse extends Entity {\r\n    constructor(x, y, name, id) {\r\n        super(x, y, {\r\n            id,\r\n            name: name.toLowerCase() === 'skeleton' ? 'pile of bones' : `${name.capitalize()} Corpse`,\r\n            blocked: false,\r\n            visible: true\r\n        })\r\n        this.rotten = false\r\n        this.turns = 0\r\n    }\r\n\r\n    act() {\r\n        Game.engine.lock()\r\n        this.turns++\r\n        // corpse has rotted after 40 turns\r\n        if (this.turns === 30) this.sprite.tint = 0x31af48\r\n        if (this.turns === 35) this.sprite.tint = 0x267735\r\n\r\n        if (this.turns >= 40) {\r\n            let idx = Game.engine._scheduler.remove(this)\r\n            let ctile = Game.map.data[this.y][this.x]\r\n            // remove this actor from the global actors list and the occupied tile\r\n            ctile.removeActor(this)\r\n            idx = Game.map.actors.indexOf(this)\r\n            Game.map.actors.splice(idx, 1)\r\n            Game.display.removeChild(this.sprite)\r\n        }\r\n        Game.engine.unlock()\r\n    }\r\n\r\n    hoverInfo() {\r\n        return ''\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/misc/Corpse.js","/**\n * Created by larken on 7/12/17.\n */\nimport ROT from 'rot-js'\nimport * as PIXI from 'pixi.js'\n\nimport { Game } from '#/Game.js'\nimport { Entity } from '#/entities/Entity.js'\nimport { getRandomInt, addPrefix } from '#/utils/HelperFunctions.js'\nimport Door from '#/entities/misc/Door.js'\nimport Chest from '#/entities/misc/Chest.js'\nimport Ladder from '#/entities/misc/Ladder.js'\nimport Weapon from '#/entities/items/weapons/Weapon.js'\nimport { Ammo } from '#/entities/items/weapons/ranged/ammo/Ammo.js'\nimport { Buff } from '#/modifiers/Buff.js'\nimport { Corpse, corpseTypes } from '#/entities/items/misc/Corpse.js'\nimport Item from '#/entities/items/Item.js'\n\nexport class Actor extends Entity {\n\tconstructor(x, y, options, routine = null) {\n\t\tsuper(x, y, options)\n\t\tthis.cb = this.combat\n\t\tif (this.corpseType === undefined) this.corpseType = corpseTypes.HUMANOID\n\n\t\tthis.cb.effects = []\n\t\tthis.cb.equipment = {\n\t\t\thead: null,\n\t\t\ttorso: null,\n\t\t\tlegs: null,\n\t\t\tweapon: null,\n\t\t\tammo: null,\n\t\t\tring: null\n\t\t}\n\t\tthis.inventory = []\n\t\tfor (let i = 0; i < 27; i++) {\n\t\t\tthis.inventory.push({\n\t\t\t\titem: null,\n\t\t\t\tmenu: false\n\t\t\t})\n\t\t}\n\t}\n\n\t/* Called by the ROT.js game scheduler to indicate a turn */\n\tact() {\n\t\tthis.cb.effects = this.cb.effects.filter(e => {\n\t\t\treturn e.duration > 0\n\t\t})\n\t\t// apply all of the effects on this Actor at the beginning of their turn\n\t\tfor (let effect of this.cb.effects) {\n\t\t\tif (!(effect instanceof Buff)) Game.log(effect.description(this), 'alert')\n\n\t\t\teffect.applyEffect(this)\n\t\t}\n\t\t// if any effects have expired, we remove them\n\t}\n\n\taddNewEffect(effect) {\n\t\tthis.cb.effects.push(effect)\n\t}\n\n\taddNewBuff(buff) {\n\t\tbuff.applyEffect(this)\n\t\tthis.cb.effects.push(buff)\n\t}\n\n\tmemberOfInventory(item) {\n\t\treturn (\n\t\t\t-1 <\n\t\t\tthis.inventory.findIndex(cell => {\n\t\t\t\treturn Object.is(item, cell.item)\n\t\t\t})\n\t\t)\n\t}\n\n\taddToInventory(newItem) {\n\t\tif ('quantity' in newItem) {\n\t\t\tfor (let i = 0; i < this.inventory.length; i++) {\n\t\t\t\tlet item = this.inventory[i].item\n\t\t\t\tif (item !== null && item.type === newItem.type) {\n\t\t\t\t\titem.quantity += newItem.quantity\n\t\t\t\t\treturn item\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet nextFreeIndex = null\n\t\tfor (let i = 0; i < this.inventory.length; i++) {\n\t\t\tif (this.inventory[i].item == null) {\n\t\t\t\tnextFreeIndex = i\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\tif (nextFreeIndex === null) {\n\t\t\tGame.log('Your inventory is full! Drop something in order to pick this up.')\n\t\t\t// if your item is in a chest and you try to pick it up, but your inventory is full,\n\t\t\t// it will drop the item below you.\n\t\t\tthis.placeEntityBelow(newItem)\n\t\t\treturn newItem\n\t\t}\n\n\t\tthis.inventory[nextFreeIndex].item = newItem\n\t\t// this.inventory[nextFreeIndex].action = newItem.use;\n\t\treturn this.inventory[nextFreeIndex].item\n\t}\n\n\tplaceEntityBelow(entity) {\n\t\tif (entity instanceof Item) {\n\t\t\tentity.placeAt(this.x, this.y)\n\t\t\tGame.display.assignSprite(item)\n\t\t} else {\n\t\t\tGame.map.data[this.y][this.x].actors.push(entity)\n\t\t}\n\t}\n\n\t// expressly want to just remove the item from the inventory.\n\t// no actions are taken to mutate the item (like unequipping it from the player - this is done in those classes)\n\tremoveFromInventory(removeItem) {\n\t\tlet idx = this.inventory.findIndex(cell => {\n\t\t\treturn Object.is(removeItem, cell.item)\n\t\t})\n\t\tif (idx != -1) {\n\t\t\tthis.inventory[idx].item = null\n\t\t} else {\n\t\t\tthrow 'invalid item removal - trying to remove an item that cannot be found in inventory!'\n\t\t}\n\t}\n\n\tdropItem(item) {\n\t\tif (!this.memberOfInventory(item)) throw \"Error - trying to drop an item you don't have in your inventory\"\n\t\tif (item !== null && 'cb' in item) {\n\t\t\titem.cb.equipped = false\n\t\t\tif (this.cb.equipment.weapon == item) this.cb.equipment.weapon = null\n\t\t}\n\t\titem.placeAt(this.x, this.y)\n\t\tGame.display.assignSprite(item, true, 2)\n\t\tthis.removeFromInventory(item)\n\t}\n\n\t/* The inventory property of actors is an array of object 'slots'. This function\n     * returns the actual items that are held at any given time */\n\titems() {\n\t\treturn this.inventory.filter(e => e.item !== null).map(e => e.item)\n\t}\n\n\tdistanceTo(actor) {\n\t\t// linear distance, no obstacles factored in\n\t\treturn Math.sqrt(Math.pow(this.x - actor.x, 2) + Math.pow(this.y - actor.y, 2))\n\t}\n\n\t/* Used to perform an action against another actor. This always involves \"bumper car interaction\", so\n\tit makes sense to have an animation following that concept */\n\tinteract(actor) {\n\t\tlet nx = actor.x - this.x\n\t\tlet ny = actor.y - this.y\n\t\tif ((this === Game.player || actor === Game.player) && Game.userSettings.animationsEnabled) {\n\t\t\tGame.display.moveSprite(this.sprite, this.x + nx / 2, this.y + ny / 2)\n\t\t\tsetTimeout(() => {\n\t\t\t\tGame.display.moveSprite(this.sprite, this.x, this.y)\n\t\t\t}, 100)\n\t\t}\n\t\treturn null\n\t}\n\n\t/* Used to react to the interaction of another actor */\n\treact(actor) {\n\t\treturn null\n\t}\n\n\ttryMove(nx, ny) {\n\t\t// returns true if the turn should end here\n\t\tif (nx < 0 || nx === Game.map.width || ny < 0 || ny === Game.map.height) return false\n\t\tlet ntile = Game.map.data[ny][nx] // new tile to move to\n\t\tif (ntile.actors.length === 0 && !ntile.blocked()) {\n\t\t\tthis.move(nx, ny)\n\t\t\treturn true\n\t\t} else if (ntile.actors.length > 0) {\n\t\t\tfor (let i = 0; i < ntile.actors.length; i++) {\n\t\t\t\tlet actor = ntile.actors[i]\n\t\t\t\t// this actor has stumbled upon another actor\n\t\t\t\tif (actor instanceof Actor && actor.blocked && actor.visible) {\n\t\t\t\t\tif (!actor.isDead()) {\n\t\t\t\t\t\tthis.interact(actor)\n\t\t\t\t\t}\n\t\t\t\t\treturn true\n\t\t\t\t}\n\n\t\t\t\t// actor has stumbled upon a non-Actor entity (an item or miscellaneous entity like a door)\n\t\t\t\tif (actor instanceof Door) {\n\t\t\t\t\tactor.react()\n\t\t\t\t\tif (actor.closed === true) return true\n\t\t\t\t} else if (actor instanceof Chest) {\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!ntile.blocked()) {\n\t\t\tthis.move(nx, ny)\n\t\t\treturn true\n\t\t}\n\n\t\treturn false\n\t}\n\n\t/* attacks another actor with a melee attack */\n\tattack(actor) {\n\t\tlet { weapon } = this.cb.equipment\n\t\tlet dmg = weapon !== null ? this.cb.str + weapon.roll() : this.cb.str\n\t\tif (weapon && weapon.cb.ranged) dmg = this.cb.str\n\t\tlet verb,\n\t\t\tmessage = ''\n\t\tif (weapon !== null) {\n\t\t\tlet { attackVerbs, type } = weapon\n\t\t\tverb = attackVerbs[~~(Math.random() * attackVerbs.length)]\n\t\t\tmessage = `${addPrefix(this.name).capitalize()} ${verb} ${addPrefix(actor.name)} with ${addPrefix(\n\t\t\t\ttype.toLowerCase()\n\t\t\t)} and dealt ${dmg} damage.`\n\t\t} else {\n\t\t\tmessage = `${addPrefix(this.name).capitalize()} attacked ${addPrefix(actor.name)} and dealt ${dmg} damage.`\n\t\t}\n\n\t\tif (Game.player === this) Game.log(message, 'player_move')\n\t\telse Game.log(message, 'attack')\n\n\t\tif (dmg > 0) actor.damage(dmg)\n\t\tthis.cb.damageDealt += dmg\n\n\t\tif (weapon && weapon.cb.enchantments.length > 0) {\n\t\t\tfor (let enchantment of weapon.cb.enchantments) {\n\t\t\t\tlet effect = enchantment.getEffect()\n\t\t\t\tif (\n\t\t\t\t\t!actor.cb.effects.some(e => {\n\t\t\t\t\t\te.name === effect.name\n\t\t\t\t\t})\n\t\t\t\t) {\n\t\t\t\t\tactor.addNewEffect(effect)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn dmg\n\t}\n\n\tequipWeapon(item) {\n\t\tif (!(item instanceof Weapon) || !('cb' in item)) throw 'Error - equipped invalid item - ' + this.item.type\n\n\t\t// already wielding a weapon\n\t\tif (this.cb.equipment.weapon !== null) {\n\t\t\tthis.cb.equipment.weapon.cb.equipped = false\n\t\t}\n\t\tthis.cb.equipment.weapon = item\n\t\titem.cb.equipped = true\n\t}\n\n\tequipAmmo(item) {\n\t\tif (!(item instanceof Ammo) || !('cb' in item)) throw 'Error - equipped invalid item - ' + this.item.type\n\n\t\t// already wielding a weapon\n\t\tif (this.cb.equipment.ammo !== null) {\n\t\t\tthis.cb.equipment.ammo.cb.equipped = false\n\t\t}\n\t\tthis.cb.equipment.ammo = item\n\t\tthis.cb.equipment.ammo.cb.equipped = true\n\t}\n\n\t/* Reduce hp. If less than 0, causes death */\n\tdamage(hp) {\n\t\tif (this.cb.invulnerable) return\n\t\tthis.cb.damageTaken += hp\n\n\t\tif (this.cb.hp <= hp) this.cb.hp = 0\n\t\telse this.cb.hp -= hp\n\n\t\tif (this.isDead()) {\n\t\t\tif (this !== Game.player) Game.player.gain_xp(Math.floor(this.cb.maxhp * 0.5))\n\n\t\t\tthis.death()\n\t\t}\n\t\tif (this.sprite !== null && !this.isDead) {\n\t\t\tthis.sprite.tint = '0xba1b21'\n\t\t\tsetTimeout(() => (this.sprite.tint = '0xFFFFFF'), 200)\n\t\t}\n\t}\n\n\t/* Restore HP up to maxhp */\n\theal(hp) {\n\t\tthis.cb.healthRestored += hp\n\t\tif (this.cb.hp + hp > this.cb.maxhp) this.cb.hp = this.cb.maxhp\n\t\telse this.cb.hp += hp\n\t}\n\n\t/* Restores mana up to max */\n\trestore(mana) {\n\t\tif (this.cb.mana + mana > this.cb.maxmana) this.cb.mana = this.cb.maxmana\n\t\telse this.cb.mana += mana\n\t}\n\n\t/* Starting out with basic 8 dir firing */\n\tfireRangedWeapon(ammo, dir) {\n\t\t// assuming we have a ranged weapon and ammunition to fire\n\t\tlet weapon = this.cb.equipment.weapon\n\t\tlet range = weapon.cb.range\n\t\tlet dmg = weapon.roll() + ammo.cb.damage + this.cb.str\n\t\tlet diff = ROT.DIRS[8][dir]\n\t\t// iterate from the first to last tile in the given direction\n\t\tfor (let i = 1; i < range; i++) {\n\t\t\tlet tx = this.x + diff[0] * i\n\t\t\tlet ty = this.y + diff[1] * i\n\t\t\tlet tile = Game.map.data[ty][tx]\n\t\t\t// if the tile is a blocked obstacle, then we want to cancel the projectile's motion\n\t\t\t// since water and some other special obstacles are \"blocked\", need to use the \"blocks vision\"\n\t\t\t// attribute to determine if a projectile can pass through\n\t\t\t// (e.g if light can pass through, so can an arrow or crossbow bolt)\n\t\t\tif (!tile.visible()) {\n\t\t\t\tif (Game.player === this) Game.log(`Your ${ammo.type.toLowerCase()} hit an obstacle!`, 'alert')\n\t\t\t\treturn\n\t\t\t}\n\t\t\t// if we find an enemy on the tile, we damage it and the projectile stops moving\n\t\t\tlet enemies = tile.actors.filter(function(e) {\n\t\t\t\treturn e.combat && e.cb.hostile\n\t\t\t})\n\t\t\tif (enemies.length > 0) {\n\t\t\t\tlet enemy = enemies[0]\n\t\t\t\tlet evtdamage = `${addPrefix(this.name).capitalize()} hit ${addPrefix(enemy.name)} with ${addPrefix(\n\t\t\t\t\tammo.type.toLowerCase()\n\t\t\t\t)} and dealt ${dmg} damage.`\n\t\t\t\tif (Game.player === this) Game.log(evtdamage, 'player_move')\n\t\t\t\telse Game.log(evtdamage, 'attack')\n\t\t\t\tenemy.damage(dmg)\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\t\tGame.log(`Your ${ammo.type.toLowerCase()} didn't hit anything!`, 'alert')\n\t\t// place the ammo down at\n\t\t/*\n         let tx = this.x + diff[0]*range;\n         let ty = this.y + diff[1]*range;\n         let tile = Game.map.data[ty][tx];\n         */\n\t}\n\n\tdeath() {\n\t\tlet idx = Game.engine._scheduler.remove(this)\n\t\tlet ctile = Game.map.data[this.y][this.x]\n\t\t// remove this actor from the global actors list and the occupied tile\n\t\tctile.removeActor(this)\n\t\tidx = Game.map.actors.indexOf(this)\n\t\tGame.map.actors.splice(idx, 1)\n\t\t// dump the contents of the actor's inventory (items) onto the ground.\n\t\tconst numberOfEntities = Game.display.background.children.length\n\n\t\t// redraw the tile, either with an appropriate actor or the tile symbol\n\t\t/* On death, we want to spray some blood on the tile.\n         * We also want to place a corpse corresponding to the actor as well\n        */\n\n\t\tif (this.inventory.length > 0) {\n\t\t\tlet items = this.items()\n\t\t\tfor (let item of items) {\n\t\t\t\t// if the item was previously equipped, it needs to be 'unequipped'\n\t\t\t\tthis.dropItem(item)\n\t\t\t}\n\t\t}\n\n\t\tif (getRandomInt(0, 1) === 0) {\n\t\t\tif (this.corpseType !== undefined && this.corpseType !== null) {\n\t\t\t\tlet corpse = new Corpse(this.x, this.y, this.name, this.corpseType)\n\t\t\t\tctile.actors.unshift(corpse)\n\t\t\t\tGame.scheduler.add(corpse, true)\n\t\t\t\tGame.display.assignSprite(corpse, true)\n\t\t\t}\n\t\t}\n\n\t\tlet blood = 2644 - getRandomInt(0, 1)\n\t\t// specifically don't want to add blood if it's a skeleton...\n\t\tif (this.corpseType === corpseTypes.HUMANOID) {\n\t\t\tlet bloodSprite = new PIXI.Sprite(Game.display.tilesetMapping[blood])\n\t\t\tbloodSprite.position.set(this.x * Game.display.tileSize, this.y * Game.display.tileSize)\n\t\t\tGame.display.background.addChildAt(bloodSprite, 1)\n\t\t}\n\n\t\tGame.display.background.removeChild(this.sprite)\n\t\tif (this.spriteHPBar !== undefined) Game.display.background.removeChild(this.spriteHPBar)\n\n\t\tif (this === Game.player) {\n\t\t\tGame.log('You died!', 'death')\n\t\t} else {\n\t\t\tGame.log(`You killed the ${this.name}.`, 'death')\n\t\t\tGame.player.cb.enemiesKilled++\n\t\t}\n\t}\n\n\tisDead() {\n\t\treturn this.cb.hp <= 0\n\t}\n\n\tgetHoverInfo() {\n\t\treturn `HP: ${this.cb.hp} / ${this.cb.maxhp}<br />\\\"${this.description}\\\"`\n\t}\n\n\tgetMinDmg() {\n\t\tlet wep = this.cb.equipment.weapon\n\t\tlet minWeaponDmg = wep !== null ? wep.cb.rolls : 0\n\t\treturn this.cb.str + minWeaponDmg\n\t}\n\n\tgetMaxDmg() {\n\t\tlet wep = this.cb.equipment.weapon\n\t\tlet maxWeaponDmg = wep !== null ? wep.cb.rolls * wep.cb.sides : 0\n\t\treturn this.cb.str + maxWeaponDmg\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/Actor.js","/**\r\n * Created by Larken on 6/22/2017.\r\n */\r\nimport Weapon from '#/entities/items/weapons/Weapon.js'\r\n// import {AMMO_TYPES} from '#/entities/items/weapons/ranged/ammo/Ammo.js'\r\n\r\nexport default class RangedWeapon extends Weapon {\r\n\r\n\tconstructor(x, y, options) {\r\n\t\tsuper(x, y, options)\r\n\t\tthis.cb.ranged = true\r\n\t}\r\n\r\n\r\n\thoverInfo() {\r\n\t\treturn `Damage: ${this.cb.rolls}-${this.cb.sides * this.cb.rolls} Range: ${this.cb.range}`\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/weapons/ranged/RangedWeapon.js","import RangedWeapon from '#/entities/items/weapons/ranged/RangedWeapon.js'\nimport { AMMO_TYPES } from '#/entities/items/weapons/ranged/ammo/Ammo.js'\n\nexport class Bow extends RangedWeapon {\n\tconstructor(x, y, id, name, rolls, sides, range) {\n\t\tsuper(x, y, {\n\t\t\tid: id,\n\t\t\tname: name,\n\t\t\ttype: 'Bow',\n\t\t\tcombat: {\n\t\t\t\trolls: rolls,\n\t\t\t\tsides: sides,\n\t\t\t\trange: range,\n\t\t\t\tammoType: AMMO_TYPES.ARROW\n\t\t\t},\n\t\t\tattackVerbs: ['slapped', 'smacked', 'whacked']\n\t\t})\n\t}\n}\n\nexport const createBow = (x, y, id) => {\n\treturn new Bow(x, y, id, 'Bow of the Sunwalker', 3, 2, 7)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/weapons/ranged/Bow.js","import { Actor } from '#/entities/actors/Actor.js'\r\nimport { Game } from '#/Game.js'\r\nimport { getVisibleTiles, getDiceRoll, addPrefix, getRandomInt } from '#/utils/HelperFunctions'\r\n\r\nimport ROT from 'rot-js'\r\n\r\n/* StatelessAI class to encapsulate all enemies with simple AI that will move towards the player,\r\n   run away from the player, attempt to stay within maximum range (if ranged) by using a limited set\r\n   of parameters:\r\n   - morale, distance to the player (how far, how close it should be), ranged?, magic caster?\r\n   * based on http://www.roguebasin.com/index.php?title=Roguelike_Intelligence_-_Stateless_AIs\r\n*/\r\nexport class StatelessAI extends Actor {\r\n\tconstructor(x, y, options, config) {\r\n\t\tsuper(x, y, options)\r\n\t\tthis.ai = config\r\n\t}\r\n\r\n\tact() {\r\n\t\tGame.engine.lock()\r\n\t\tconst endTurn = () => {\r\n\t\t\tsuper.act()\r\n\t\t\tGame.engine.unlock()\r\n\t\t}\r\n\t\tlet dx = Math.abs(this.x - Game.player.x)\r\n\t\tlet dy = Math.abs(this.y - Game.player.y)\r\n\t\tif (dx > Game.width / 2 || dy > Game.height / 2) {\r\n\t\t\tendTurn()\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tGame.player.recalculatePath()\r\n\t\tlet visibleTiles = getVisibleTiles(this)\r\n\t\tlet allVisibleActors = visibleTiles.reduce((actors, tile) => {\r\n\t\t\treturn actors.concat(tile.actors)\r\n\t\t}, [])\r\n\r\n\t\tlet playerInView = allVisibleActors.some(a => {\r\n\t\t\treturn a === Game.player\r\n\t\t})\r\n\r\n\t\tlet { wanders, morale, minPlayerDist, maxPlayerDist, ranged, melee, magic } = this.ai\r\n\t\tif (playerInView) {\r\n\t\t\tif (!this.chasing) {\r\n\t\t\t\tGame.log(`A ${this.name} sees you.`, 'alert')\r\n\t\t\t}\r\n\r\n\t\t\tthis.chasing = true\r\n\t\t\tlet pathToPlayer = []\r\n\t\t\tGame.player.path.compute(this.x, this.y, (x, y) => {\r\n\t\t\t\tpathToPlayer.push([x, y])\r\n\t\t\t})\r\n\r\n\t\t\tlet healthRemainingPercentage = this.cb.hp / this.cb.maxhp\r\n\r\n\t\t\tconst findNearbyTiles = () => {\r\n\t\t\t\tlet nearbyTiles = []\r\n\t\t\t\tfor (let i = 0; i < 7; i++) {\r\n\t\t\t\t\tlet diff = ROT.DIRS[8][i]\r\n\t\t\t\t\tlet x = this.x + diff[0]\r\n\t\t\t\t\tlet y = this.y + diff[1]\r\n\t\t\t\t\tif (Game.inbounds(x, y)) {\r\n\t\t\t\t\t\tlet ctile = Game.getTile(x, y)\r\n\t\t\t\t\t\tif (!ctile.blocked() && ctile.actors.length === 0) nearbyTiles.push(ctile)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tnearbyTiles.push(Game.getTile(this.x, this.y))\r\n\t\t\t\treturn nearbyTiles\r\n\t\t\t}\r\n\r\n\t\t\tconst playerDistToTile = tile => {\r\n\t\t\t\treturn Math.sqrt(Math.pow(Game.player.x - tile.x, 2) + Math.pow(Game.player.y - tile.y, 2))\r\n\t\t\t}\r\n\r\n\t\t\tconst getFarthestAwayTile = () => {\r\n\t\t\t\tlet nearbyTiles = findNearbyTiles()\r\n\t\t\t\tlet maxDist = playerDistToTile(nearbyTiles[0])\r\n\t\t\t\tlet farthestTile = nearbyTiles[0]\r\n\t\t\t\tfor (let tile of nearbyTiles) {\r\n\t\t\t\t\tlet currentDist = playerDistToTile(tile)\r\n\t\t\t\t\tif (currentDist >= maxDist) {\r\n\t\t\t\t\t\tmaxDist = currentDist\r\n\t\t\t\t\t\tfarthestTile = tile\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn farthestTile\r\n\t\t\t}\r\n\r\n\t\t\t// if morale is greater than the health remaining, we need to flee!\r\n\t\t\tif (morale >= healthRemainingPercentage) {\r\n\t\t\t\tlet tile = getFarthestAwayTile()\r\n\t\t\t\tif (tile.x !== this.x || tile.y !== this.y) {\r\n\t\t\t\t\tif (!this.fleeing)\r\n\t\t\t\t\t\tGame.log(`The ${this.name.toLowerCase()} trembles at your might and attempts to escape death.`, 'purple')\r\n\t\t\t\t\tthis.fleeing = true\r\n\t\t\t\t\t// if we can run away\r\n\t\t\t\t\tthis.tryMove(tile.x, tile.y)\r\n\t\t\t\t\tendTurn()\r\n\t\t\t\t\treturn\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// we can't flee, so we might as well fight\r\n\t\t\t\t\tif (pathToPlayer.length <= 2) {\r\n\t\t\t\t\t\tlet newPos = pathToPlayer[1]\r\n\t\t\t\t\t\tthis.tryMove(newPos[0], newPos[1])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (pathToPlayer.length >= 2) {\r\n\t\t\t\t\tlet newPos = pathToPlayer[1] // 1 past the current position\r\n\t\t\t\t\tthis.tryMove(newPos[0], newPos[1])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n                              TYPICAL AI\r\n                     If damage > morale\r\n                        if can-run-away-from-player\r\n                           run-away-from-player\r\n                        else if can-attack-player\r\n                           attack-player\r\n                     else if too-far-from-player\r\n                        AND can-attack-player\r\n                        AND can-move-toward-player\r\n                            if  random < charge-probability\r\n                                move-toward-player\r\n                            else attack-player\r\n                     else if too-close-to-character\r\n                        AND can-attack-player\r\n                        AND can-move-away-from-player\r\n                            if random < retreat-probability\r\n                               move-away-from-player\r\n                            else attack-player\r\n                     else if can-attack-player\r\n                        attack-player\r\n                     else if too-far-from-player\r\n                        AND can-move-toward-player\r\n                  move-toward-player\r\n                     else if too-close-to-player\r\n                        AND can-move-away-from-player\r\n                            move-away-from-player\r\n                     else stand-still\r\n                  */\r\n\t\t} else {\r\n\t\t\tif (wanders) {\r\n\t\t\t\tlet dx = this.x + getRandomInt(-1, 1)\r\n\t\t\t\tlet dy = this.y + getRandomInt(-1, 1)\r\n\t\t\t\tthis.tryMove(dx, dy)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tendTurn()\r\n\t}\r\n\r\n\tinteract(actor) {\r\n\t\tsuper.interact(actor)\r\n\t\tif (actor === Game.player) {\r\n\t\t\tthis.attack(actor)\r\n\t\t} else {\r\n\t\t\tactor.react(this)\r\n\t\t}\r\n\t}\r\n\r\n\tattack(actor) {\r\n\t\tlet dmg = getDiceRoll(2, this.cb.str)\r\n\r\n\t\tlet len = this.cb.description.length\r\n\t\tlet evtdamage = `${addPrefix(this.name).capitalize()}${this.cb.description[Math.floor(Math.random() * len)]}${addPrefix(\r\n\t\t\tactor.name\r\n\t\t)} and dealt ${dmg} damage.`\r\n\r\n\t\tif (Game.player === this) Game.log(evtdamage, 'player_move')\r\n\t\telse Game.log(evtdamage, 'attack')\r\n\r\n\t\tif (dmg > 0) actor.damage(dmg)\r\n\t\treturn dmg\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/StatelessAI.js","import { StatelessAI } from '#/entities/actors/enemies/StatelessAI.js'\r\nimport { Game } from '#/Game.js'\r\nimport ROT from 'rot-js'\r\n\r\n/* Simple enemy class to encapsulate all enemies with very simple AI.\r\n Essentially, these enemies have a range that they can see the player from, and if the player\r\n enters within the distance between the enemy and player */\r\nexport default class SimpleEnemy extends StatelessAI {\r\n\tconstructor(x, y, options, wanders = true) {\r\n\t\tsuper(x, y, options, {\r\n\t\t\t/* AI parameters */\r\n\t\t\tmorale: 0,\r\n\t\t\tminPlayerDist: 0,\r\n\t\t\tmaxPlayerDist: 0,\r\n\t\t\tranged: false,\r\n\t\t\tmelee: true,\r\n\t\t\tmagic: false,\r\n\t\t\twanders\r\n\t\t})\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/SimpleEnemy.js","/**\n * Created by Larken on 6/22/2017.\n */\nimport { Game } from '#/Game.js'\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\nimport { corpseTypes } from '#/entities/items/misc/Corpse.js'\n\nexport default class Skeleton extends SimpleEnemy {\n\tconstructor(x, y, id) {\n\t\tlet randomHP = getRandomInt(10, 17)\n\t\tlet randomStr = getRandomInt(3, 6)\n\t\tsuper(x, y, {\n\t\t\tid: id,\n\t\t\tname: 'skeleton',\n\t\t\tdescription: 'A skeleton raised from the dead!',\n\t\t\tcorpseType: corpseTypes.SKELETON,\n\t\t\tvisible: true,\n\t\t\tblocked: true,\n\t\t\tchasing: false,\n\t\t\tcombat: {\n\t\t\t\t/* options.combat, dedicated to all things related to combat */\n\t\t\t\tdescription: [' attacked '],\n\t\t\t\t/* max stats */\n\t\t\t\tmaxhp: randomHP,\n\t\t\t\tmaxmana: 5,\n\t\t\t\t/* current stats */\n\t\t\t\thp: randomHP,\n\t\t\t\tmana: 5,\n\t\t\t\tstr: randomStr,\n\t\t\t\tdef: 1,\n\t\t\t\t/* misc */\n\t\t\t\thostile: true,\n\t\t\t\trange: 7,\n\t\t\t\tinvulnerable: false\n\t\t\t}\n\t\t})\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Skeleton.js","/**\n * Created by Larken on 6/22/2017.\n */\nimport { Game } from '#/Game.js'\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\n\nexport default class Zombie extends SimpleEnemy {\n\tconstructor(x, y, id) {\n\t\tlet randomHP = getRandomInt(10, 15)\n\t\tlet randomStr = getRandomInt(1, 3)\n\t\tsuper(x, y, {\n\t\t\tid: id,\n\t\t\tname: 'zombie',\n\t\t\tdescription: 'A zombie raised from the dead!',\n\t\t\tvisible: true,\n\t\t\tblocked: true,\n\t\t\tchasing: false,\n\t\t\tcombat: {\n\t\t\t\t/* options.combat, dedicated to all things related to combat */\n\t\t\t\tdescription: [' attacked '],\n\t\t\t\t/* max stats */\n\t\t\t\tmaxhp: randomHP,\n\t\t\t\tmaxmana: 5,\n\t\t\t\t/* current stats */\n\t\t\t\thp: randomHP,\n\t\t\t\tmana: 5,\n\t\t\t\tstr: randomStr,\n\t\t\t\tdef: 1,\n\t\t\t\t/* misc */\n\t\t\t\thostile: true,\n\t\t\t\trange: 7,\n\t\t\t\tinvulnerable: false\n\t\t\t}\n\t\t})\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Zombie.js","/* Class to hold spells. Spells can be self-casted or targeted. Some special cases can be considered,\n such as 'reanimate the nearest dead character'. */\nimport ROT from 'rot-js'\nimport { getRandomInt, getDiceRoll } from '#/utils/HelperFunctions.js'\nimport { RegenerationEffect } from '#/modifiers/Effect.js'\nimport { Game } from '#/Game.js'\nimport { Corpse, corpseTypes } from '#/entities/items/misc/Corpse.js'\nimport Skeleton from '#/entities/actors/enemies/Skeleton.js'\nimport Zombie from '#/entities/actors/enemies/Zombie.js'\n\nexport const spellTypes = {\n\tCONJURATION: 'CONJURATION',\n\tRESTORATION: 'RESTORATION',\n\tCHARMS: 'CHARMS',\n\tICE: 'ICE',\n\tAIR: 'AIR',\n\tEARTH: 'EARTH',\n\tFIRE: 'FIRE',\n\tPOISON: 'POISON',\n\tNECROMANCY: 'NECROMANCY',\n\tTRANSLOCATION: 'TRANSLOCATION',\n\tTRANSMUTATION: 'TRANSMUTATION',\n\tHEXES: 'HEXES'\n}\n\nexport const targetTypes = {\n\tSELF: 'SELF', // applies spell to self\n\tTARGET: 'TARGET' // applies to a target\n}\n\nexport class Spell {\n\tconstructor(options) {\n\t\t// any characteristics of the spell we get from extensions can just be properties on the class\n\t\tif (\n\t\t\toptions.name === undefined ||\n\t\t\toptions.hoverInfo === undefined ||\n\t\t\toptions.action === undefined ||\n\t\t\toptions.type === undefined ||\n\t\t\toptions.manaCost === undefined ||\n\t\t\toptions.targetType === undefined\n\t\t)\n\t\t\tthrow 'Spell creation failed - insufficient information provided'\n\n\t\tObject.assign(this, options)\n\t}\n\n\tcast() {} // to be overwritten\n}\n\n/* Restoration Spells */\nexport class MinorHeal extends Spell {\n\tconstructor(options) {\n\t\tsuper({\n\t\t\tname: 'Minor Heal',\n\t\t\thoverInfo: 'Regenerates 20 health.',\n\t\t\taction: entity => {\n\t\t\t\tentity.heal(20)\n\t\t\t},\n\t\t\tsplashArt: 'minor_heal',\n\t\t\ttype: spellTypes.RESTORATION,\n\t\t\ttargetType: targetTypes.SELF,\n\t\t\tmanaCost: 5\n\t\t})\n\t\tObject.assign(this, options)\n\t}\n\n\tcast(target, caster) {\n\t\tif (caster === Game.player) Game.log('You heal yourself for 20 health points.', '#e3c91c')\n\t\telse Game.log(`${caster.name.capitalize()} used minor heal to regenerate 20 health points.`, 'plum')\n\n\t\tthis.action(target)\n\t}\n}\n\n/* Conjuration Spellls */\n\nexport class MagicDart extends Spell {\n\tconstructor(options) {\n\t\tsuper({\n\t\t\tname: 'Magic Dart',\n\t\t\thoverInfo: 'Deals 1-5 damage to a target',\n\t\t\taction: (entity, hit) => {\n\t\t\t\tentity.damage(hit)\n\t\t\t},\n\t\t\tsplashArt: 'magic_dart',\n\t\t\ttype: spellTypes.CONJURATION,\n\t\t\ttargetType: targetTypes.TARGET,\n\t\t\tmanaCost: 3\n\t\t})\n\t\tObject.assign(this, options)\n\t}\n\n\tcast(target, caster) {\n\t\tlet dmg = getRandomInt(1, 5) // remember to update hover info if this changes!\n\t\tif (target === Game.player) Game.log(`You took ${dmg} damage from a Magic Dart spell!`, 'attack')\n\t\telse Game.log(`Magic Dart blasts the ${target.name} for ${dmg} magical damage.`, 'player_move')\n\n\t\tthis.action(target, dmg)\n\t}\n}\n\n/* Necromancy Spells */\n\nexport class Pain extends Spell {\n\tconstructor(options) {\n\t\tsuper({\n\t\t\tname: 'Pain',\n\t\t\thoverInfo: 'Deals 3-9 negative energy to a target',\n\t\t\taction: (entity, hit) => {\n\t\t\t\tentity.damage(hit)\n\t\t\t},\n\t\t\tsplashArt: 'pain',\n\t\t\ttype: spellTypes.NECROMANCY,\n\t\t\ttargetType: targetTypes.TARGET,\n\t\t\tmanaCost: 3\n\t\t})\n\t\tObject.assign(this, options)\n\t}\n\n\tcast(target, caster) {\n\t\tlet dmg = getDiceRoll(3, 3) // remember to update hover info if this changes!\n\t\tlet adjective = dmg >= 7 ? 'extreme' : 'some'\n\t\tif (target === Game.player) {\n\t\t\tGame.log(`The ${caster.name.capitalize()} casts ${this.name} on ${target.name.toLowerCase()}.`, 'plum')\n\t\t\tGame.log(`You feel ${adjective} pain and take ${dmg} damage.`, 'attack')\n\t\t} else {\n\t\t\tGame.log(`Pain causes ${adjective} trauma the ${target.name} for ${dmg} magical damage.`, 'player_move')\n\t\t}\n\n\t\tthis.action(target, dmg)\n\t}\n}\n\nexport class Regeneration extends Spell {\n\tconstructor(options) {\n\t\tsuper({\n\t\t\tname: 'Regeneration',\n\t\t\thoverInfo: 'Regenerates 5 health per turn by reanimating wounds with necromancy.',\n\t\t\taction: entity => {\n\t\t\t\tentity.addNewEffect(new RegenerationEffect())\n\t\t\t},\n\t\t\tsplashArt: 'regeneration',\n\t\t\ttype: spellTypes.NECROMANCY,\n\t\t\ttargetType: targetTypes.SELF,\n\t\t\tmanaCost: 3\n\t\t})\n\t\tObject.assign(this, options)\n\t}\n\n\tcast(target, caster) {\n\t\tif (caster === Game.player) Game.log('You begin regenerating your wounds with dark magic.', 'player_move')\n\t\telse Game.log(`${caster.name.capitalize()} begins regenerating its wounds.`, 'plum')\n\n\t\tthis.action(target)\n\t}\n}\n\nexport class VampiricDraining extends Spell {\n\tconstructor(options) {\n\t\tsuper({\n\t\t\tname: 'Vampiric Draining',\n\t\t\thoverInfo: 'Drains the health of an enemy for 6-12 damage, healing the caster half of the damage dealt',\n\t\t\taction: (entity, dmg) => {\n\t\t\t\tentity.damage(dmg)\n\t\t\t},\n\t\t\tsplashArt: 'vampiric_draining',\n\t\t\ttype: spellTypes.NECROMANCY,\n\t\t\ttargetType: targetTypes.TARGET,\n\t\t\tmanaCost: 3\n\t\t})\n\t\tObject.assign(this, options)\n\t}\n\n\tcast(target, caster) {\n\t\tlet dmg = getDiceRoll(2, 6) // remember to update hover info if this changes!\n\t\tif (caster === Game.player) {\n\t\t\tGame.log(`You suck the life energy out of the ${target.name.toLowerCase()}, damaging it for ${dmg} hp.`, 'player_move')\n\t\t\tGame.log(`You siphon ${~~(dmg / 2)} hp from the enemy and gain it as health.`, 'lightgreen')\n\t\t} else {\n\t\t\tGame.log(`The ${caster.name.capitalize()} casts ${this.name} on ${target.name.toLowerCase()}.`, 'plum')\n\t\t\tGame.log(`You feel your life energy slipping away and take ${dmg} damage.`, 'alert')\n\t\t\tGame.log(`The ${caster.name.capitalize()} gains ${~~(dmg / 2)} health.`, 'plum')\n\t\t}\n\t\tthis.action(target, dmg)\n\t\tcaster.heal(~~(dmg / 2))\n\t}\n}\n\nexport const reanimate = corpse => {\n\tlet ctile = Game.map.data[corpse.y][corpse.x]\n\t// remove the corpse from the ground\n\tctile.removeActor(corpse)\n\tlet idx = Game.map.actors.indexOf(corpse)\n\tGame.map.actors.splice(idx, 1)\n\tGame.display.removeChild(corpse)\n\tlet undeadActor =\n\t\tcorpse.id === corpseTypes.HUMANOID ? new Zombie(corpse.x, corpse.y, 2317) : new Skeleton(corpse.x, corpse.y, 2552)\n\n\tundeadActor.chasing = true\n\tctile.actors.push(undeadActor)\n\tGame.display.assignSprite(undeadActor)\n\tGame.map.actors.push(undeadActor)\n\tGame.scheduler.add(undeadActor, true)\n}\n\n/* returns an array of corpses :) */\nexport const getNearbyCorpses = actor => {\n\tlet fov = new ROT.FOV.PreciseShadowcasting(function(x, y) {\n\t\treturn Game.inbounds(x, y) && Game.map.data[y][x].visible()\n\t})\n\n\tlet visibleTiles = []\n\tfov.compute(actor.x, actor.y, actor.cb.range, function(x, y, r, visibility) {\n\t\tif (Game.inbounds(x, y)) visibleTiles.push(Game.map.data[y][x])\n\t})\n\n\tlet cartOfCorpses = []\n\tfor (let tile of visibleTiles) {\n\t\tlet corpses = tile.actors.filter(e => {\n\t\t\treturn e instanceof Corpse\n\t\t})\n\t\tif (corpses.length > 0) cartOfCorpses.push(corpses[0])\n\t}\n\treturn cartOfCorpses\n}\n\nexport class AnimateDead extends Spell {\n\tconstructor(options) {\n\t\tsuper({\n\t\t\tname: 'Animate Dead',\n\t\t\thoverInfo: \"Raises all skeletons and corpses within caster's line of sight as undead.\",\n\t\t\taction: caster => {\n\t\t\t\tgetNearbyCorpses(caster).forEach(corpse => {\n\t\t\t\t\treanimate(corpse)\n\t\t\t\t})\n\t\t\t},\n\t\t\tsplashArt: 'animate_dead',\n\t\t\ttype: spellTypes.NECROMANCY,\n\t\t\ttargetType: targetTypes.SELF,\n\t\t\tmanaCost: 7\n\t\t})\n\t\tObject.assign(this, options)\n\t}\n\n\tcast(target, caster) {\n\t\tthis.action(caster)\n\t\tif (caster === Game.player) {\n\t\t\tGame.log('You raise nearby dead corpses around you into undead zombies and skeletons.', 'lightgreen')\n\t\t} else {\n\t\t\tGame.log(`The ${caster.name.capitalize()} raises nearby corpses as undead minions.`, 'plum')\n\t\t\tGame.log('The undead begin marching towards you.', 'plum')\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/magic/Spell.js","/**\n * Created by Larken on 6/22/2017.\n */\nimport ROT from 'rot-js'\nimport { Game } from '#/Game.js'\nimport { Actor } from '#/entities/actors/Actor.js'\nimport { addPrefix } from '#/utils/HelperFunctions.js'\nimport Item from '#/entities/items/Item.js'\n// Weapons\nimport { Sword } from '#/entities/items/weapons/Sword.js'\n\nimport { createBow } from '#/entities/items/weapons/ranged/Bow.js'\nimport { SteelArrow } from '#/entities/items/weapons/ranged/ammo/Arrow.js'\n// Potions\nimport HealthPotion from '#/entities/items/potions/HealthPotion.js'\nimport StrengthPotion from '#/entities/items/potions/StrengthPotion.js'\nimport ManaPotion from '#/entities/items/potions/ManaPotion.js'\n// Spells\nimport { targetTypes, MagicDart, Regeneration, Pain, VampiricDraining, AnimateDead, MinorHeal } from '#/magic/Spell.js'\n// effects\nimport { BleedEnchantment } from '#/modifiers/Enchantment.js'\n// Misc\nimport Ladder from '#/entities/misc/Ladder.js'\nimport { xp_levels } from '#/entities/Entity.js'\n\nfunction pathfinding(x, y) {\n\tif (x <= 0 || x >= Game.map.width || y <= 0 || y >= Game.map.height) return false\n\treturn !Game.getTile(x, y).blocked()\n}\n\nexport default class Player extends Actor {\n\tconstructor(x, y, id) {\n\t\tsuper(x, y, {\n\t\t\tid: id,\n\t\t\tname: 'you',\n\t\t\tdescription: \"It's you!\",\n\t\t\tfg: 'yellow',\n\t\t\tbg: 'black',\n\t\t\tvisible: true,\n\t\t\ttargeting: false,\n\t\t\tcasting: false,\n\t\t\texamining: false,\n\t\t\tblocked: true,\n\t\t\tleveled_up: true,\n\t\t\tmouseEnabled: false,\n\t\t\tcombat: {\n\t\t\t\t/* options.combat, dedicated to all things related to combat */\n\t\t\t\tdescription: [' attacked ', ' stabbed ', ' jabbed ', ' smashed '],\n\t\t\t\t/* stat caps */\n\t\t\t\tmaxhp: 50,\n\t\t\t\tmaxmana: 18,\n\t\t\t\t/* current stats */\n\t\t\t\txp: 50,\n\t\t\t\tlevel: 1,\n\t\t\t\thp: 50,\n\t\t\t\tmana: 18,\n\t\t\t\tstr: 1,\n\t\t\t\tdef: 1,\n\t\t\t\t/* Per-turn effects */\n\t\t\t\thpRecovery: 1,\n\t\t\t\tmanaRecovery: 2.5,\n\t\t\t\tinvulnerable: false,\n\t\t\t\t/* Magic & Ranged */\n\t\t\t\tvalidTarget: null,\n\t\t\t\tcurrentSpell: null,\n\t\t\t\tspells: [],\n\t\t\t\trange: 7, // how far we can see\n\t\t\t\t/* End Game data */\n\t\t\t\tturnsTaken: 0,\n\t\t\t\tenemiesKilled: 0,\n\t\t\t\tdamageDealt: 0,\n\t\t\t\tdamageTaken: 0,\n\t\t\t\tspellsCast: 0,\n\t\t\t\tpotionsConsumed: 0,\n\t\t\t\thealthRestored: 0,\n\t\t\t\tdungeonsExplored: 0,\n\t\t\t\tchestsOpened: 0,\n\t\t\t\tdead: false\n\t\t\t},\n\t\t\tkeyTimer: null\n\t\t})\n\t\tthis.path = new ROT.Path.AStar(this.x, this.y, pathfinding)\n\t\tthis.nearbyEnemies = []\n\t\tthis.currentLevel = Game.currentLevel\n\t\t// Inventory is an array of objects that contain items and an action that can be done with that item.\n\t\t// You can think of the objects as individual 'slots' to store the item with actions like 'use' or 'equip'.\n\t\t// Give the player a few starting items:\n\t\t// - a health potion\n\t\t// - a random sword (equip the sword)\n\t\tlet sword = new Sword(this.x, this.y, 3, 1, 'Training Sword', 32)\n\t\t// sword.addNewEnchantment(new BleedEnchantment())\n\t\tthis.addToInventory(sword)\n\t\tsuper.equipWeapon(this.inventory[0].item)\n\t\tthis.addToInventory(createBow(this.x, this.y, 664))\n\t\tthis.addToInventory(new SteelArrow(this.x, this.y, 784, 7))\n\t\tthis.addToInventory(new HealthPotion(this.x, this.y, 488))\n\t\tthis.addToInventory(new ManaPotion(this.x, this.y, 608))\n\n\t\t// this.addToInventory(new ManaPotion(this.x,this.y, 495));\n\t\tthis.cb.spells.push(new MagicDart())\n\t\tthis.cb.spells.push(new MinorHeal())\n\n\t\t// this.cb.spells.push(new Pain())\n\t\t// this.cb.spells.push(new Regeneration())\n\t\t// this.cb.spells.push(new VampiricDraining())\n\t\t// this.cb.spells.push(new AnimateDead())\n\n\t\tthis.selectSpell(this.cb.spells[0])\n\t\tthis.mouseEnabled = false\n\t\tthis.commandQueue = []\n\t}\n\n\tselectSpell(spell) {\n\t\tif (this.cb.spells.includes(spell)) {\n\t\t\tthis.cb.currentSpell = spell\n\t\t}\n\t}\n\n\trecalculatePath() {\n\t\tthis.path = new ROT.Path.AStar(this.x, this.y, pathfinding)\n\t}\n\n\tinteract(actor) {\n\t\tsuper.interact(actor)\n\t\t// returns true if we can continue to move to the tile\n\t\tif ('cb' in actor && actor.cb.hostile) {\n\t\t\tthis.attack(actor)\n\t\t\tif (!actor.isDead()) actor.react(this)\n\t\t\telse return true // we can move\n\t\t} else {\n\t\t\t// non-combat interaction which leties from each actor to another,\n\t\t\t// so we will design non-combat based actors to simply perform actions\n\t\t\t// in a reactionary manner so that it offloads player code blocks.\n\t\t\tactor.react(this)\n\t\t\treturn false\n\t\t}\n\t}\n\n\tgain_xp(xp) {\n\t\tthis.cb.xp += xp\n\t\tif (xp_levels[this.cb.level] <= this.cb.xp && !this.isDead()) {\n\t\t\tthis.level_up()\n\t\t}\n\t}\n\n\tremainingXP() {\n\t\treturn xp_levels[this.cb.level] - this.cb.xp\n\t}\n\n\tlevel_up() {\n\t\tthis.cb.level += 1\n\t\tGame.log(`You leveled up! You are now Level ${this.cb.level}.`, 'level_up')\n\t\tif (this.cb.level % 2 === 0) {\n\t\t\tGame.log('Your strength and health have improved.', 'level_up')\n\t\t\tthis.cb.maxhp += 5\n\t\t\tthis.cb.str += 1\n\t\t}\n\t\tthis.cb.hp = this.cb.maxhp\n\t\tthis.cb.mana = this.cb.maxmana\n\t}\n\n\tact() {\n\t\tsuper.act()\n\t\tthis.path = new ROT.Path.AStar(this.x, this.y, pathfinding)\n\t\tthis.nearbyEnemies = Game.getNearbyEnemies()\n\t\tthis.currentLevel = Game.currentLevel\n\n\t\tGame.engine.lock()\n\t\tthis.cb.turnsTaken++\n\t\tif (this.cb.turnsTaken % 5 === 0) this.heal(this.cb.hpRecovery)\n\t\tif (this.cb.turnsTaken % 10 === 0) this.restore(this.cb.manaRecovery)\n\t\tif (this.commandQueue.length > 0) {\n\t\t\t// perform player commands and unlock\n\t\t\tlet { fn } = this.commandQueue.pop()\n\t\t\tfn()\n\t\t\tGame.engine.unlock()\n\t\t\treturn\n\t\t}\n\t\twindow.addEventListener('keydown', this)\n\t\tif (this.mouseEnabled) {\n\t\t\twindow.addEventListener('mousemove', this)\n\t\t\twindow.addEventListener('click', this)\n\t\t}\n\t}\n\n\thandleEvent(evt) {\n\t\t// updating our vision with the most up to date information\n\t\tObject.assign(Game.map.seen_tiles, Game.map.visible_tiles)\n\t\tGame.map.visible_tiles = {}\n\n\t\t// FOV calculations\n\t\tlet fov = new ROT.FOV.PreciseShadowcasting((x, y) => {\n\t\t\treturn Game.inbounds(x, y) && Game.getTile(x, y).visible()\n\t\t})\n\n\t\tfov.compute(Game.player.x, Game.player.y, Game.player.cb.range, (x, y, r, visibility) => {\n\t\t\tGame.map.visible_tiles[x + ',' + y] = true\n\t\t})\n\n\t\tlet endTurn = () => {\n\t\t\tlet waitUntilPlayerReleases = evt => {\n\t\t\t\tthis.keyTimer = null\n\t\t\t}\n\t\t\t// setTimeout(() => Game.engine.unlock(), 18)\n\t\t\twindow.removeEventListener('keyup', waitUntilPlayerReleases)\n\n\t\t\twindow.removeEventListener('keydown', this)\n\t\t\twindow.removeEventListener('mousemove', this)\n\t\t\twindow.removeEventListener('click', this)\n\t\t\twindow.addEventListener('keyup', waitUntilPlayerReleases)\n\t\t\tGame.clearTempLog()\n\t\t\tGame.engine.unlock()\n\t\t}\n\n\t\tconst confirmRangedFire = () => {\n\t\t\tlet tile = Game.selectedTile\n\t\t\tlet ammo = this.cb.equipment.ammo\n\t\t\tlet weapon = this.cb.equipment.weapon\n\t\t\tlet dmg = weapon.roll() + ammo.cb.damage + this.cb.str\n\t\t\tammo.quantity--\n\t\t\tif (ammo.quantity === 0) {\n\t\t\t\tGame.log(`You fire your last ${ammo.type.toLowerCase()}!`, 'alert')\n\t\t\t}\n\t\t\t// find actors on this tile\n\t\t\tlet enemies = tile.actors.filter(e => {\n\t\t\t\treturn e.cb !== undefined && e.cb.hostile\n\t\t\t})\n\t\t\tif (enemies.length > 0) {\n\t\t\t\tlet enemy = enemies[0]\n\t\t\t\tlet evtdamage = `${addPrefix(this.name).capitalize()} hit ${addPrefix(enemy.name)} with ${addPrefix(\n\t\t\t\t\tammo.type.toLowerCase()\n\t\t\t\t)} and dealt ${dmg} damage.`\n\t\t\t\tGame.log(evtdamage, 'player_move')\n\t\t\t\tenemy.damage(dmg)\n\t\t\t} else {\n\t\t\t\tGame.log(`Your ${ammo.type.toLowerCase()} didn't hit anything!`, 'alert')\n\t\t\t}\n\t\t\tif (ammo.quantity == 0) {\n\t\t\t\tthis.unequipAmmo()\n\t\t\t\tthis.removeFromInventory(ammo)\n\t\t\t}\n\t\t\tthis.targeting = false\n\t\t\tthis.validTarget = null\n\t\t\t// create an arrow sprite and move it to the fired location\n\t\t\t// let ammoSprite = new PIXI.Sprite(Game.display.getTexture(ammo.id))\n\t\t\t// Game.display.background.addChild(ammoSprite)\n\t\t\t// ammoSprite.position.set(this.x * Game.display.tileSize, this.y * Game.display.tileSize)\n\t\t\t// // ammoSprite.scale.y = -1\n\t\t\t// ammoSprite.anchor.set(0.5)\n\t\t\t// // Math.atan2(tile.x - this.x, tile.y - this.y)\n\t\t\t// ammoSprite.rotation = 2.356\n\t\t\t// let x = 0\n\t\t\t// let y = 0\n\t\t\t// if (tile.x < this.x) x = tile.x - this.x\n\t\t\t// if (this.x < tile.x) x = this.x - tile.x\n\t\t\t// if (tile.y > this.y) y = tile.y - this.y\n\t\t\t// if (this.y < tile.y) y = this.y - tile.y\n\t\t\t// ammoSprite.rotation += Math.atan2(x, y)\n\t\t\t// Game.display.moveSprite(ammoSprite, tile.x, tile.y)\n\t\t\tGame.clearSelectedTile()\n\t\t\tendTurn()\n\t\t}\n\n\t\tconst confirmSpellcasting = () => {\n\t\t\tlet tile = Game.selectedTile\n\t\t\t// find actors on this tile\n\t\t\tlet enemies = tile.actors.filter(e => {\n\t\t\t\treturn e.cb !== undefined && e.cb.hostile\n\t\t\t})\n\t\t\tif (enemies.length > 0) {\n\t\t\t\tlet enemy = enemies[0]\n\t\t\t\tGame.log(`You cast ${this.cb.currentSpell.name} at the ${enemies[0].name}.`, 'magic')\n\t\t\t\tthis.cb.currentSpell.cast(enemies[0], this)\n\t\t\t} else {\n\t\t\t\tGame.log(`You cast ${this.cb.currentSpell.name} but it hits nothing!`, 'magic')\n\t\t\t}\n\t\t\tthis.cb.mana -= this.cb.currentSpell.manaCost\n\t\t\tthis.casting = false\n\t\t\tthis.validTarget = null\n\t\t\tthis.cb.spellsCast++\n\t\t\tGame.clearSelectedTile()\n\t\t\tendTurn()\n\t\t}\n\n\t\t/* Mouse controls to hover over tiles for info (describe) */\n\t\tif (evt.type === 'click') {\n\t\t\tif (this.targeting) {\n\t\t\t\tif (this.validTarget) {\n\t\t\t\t\tconfirmRangedFire()\n\t\t\t\t} else {\n\t\t\t\t\tGame.log(\"You cannot shoot this tile because it's blocked or out of range!\", 'alert')\n\t\t\t\t}\n\t\t\t} else if (this.casting) {\n\t\t\t\tif (this.validTarget) {\n\t\t\t\t\tconfirmSpellcasting()\n\t\t\t\t} else {\n\t\t\t\t\tGame.log(`You cannot cast ${this.cb.currentSpell.name} at this tile because it's blocked or too far away.`, 'alert')\n\t\t\t\t}\n\t\t\t}\n\t\t\t// else, if the tile is within one square of the player, they can move to that tile by clicking\n\t\t\treturn\n\t\t}\n\n\t\tif (evt.type === 'mousemove') {\n\t\t\tlet tile = Game.eventToTile()\n\t\t\tif (tile !== null) {\n\t\t\t\tthis.validTarget = Game.changeSelectedTile(tile)\n\t\t\t}\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.mouseMoved = true\n\t\t\t}, 18)\n\t\t\tif (this.mouseMoved) {\n\t\t\t\tthis.mouseMoved = false\n\t\t\t}\n\t\t\treturn\n\t\t}\n\n\t\tlet code = evt.keyCode\n\t\tlet shift_pressed = evt.getModifierState('Shift')\n\t\tlet movementKeys = [0, 1, 2, 3, 4, 5, 6, 7]\n\t\tlet cycleKeys = [9, 61, 187, 191]\n\t\tlet confirmKeys = [101, 13, 190]\n\t\tlet exitKeys = [70, 27, 90, 88]\n\t\tif (cycleKeys.includes(code)) {\n\t\t\tevt.preventDefault()\n\t\t}\n\n\t\tlet keyMap = {\n\t\t\t/* Arrow Key movement */\n\t\t\t39: 2,\n\t\t\t37: 6,\n\t\t\t38: 0,\n\t\t\t40: 4,\n\t\t\t/* Num Pad Movement */\n\t\t\t104: 0,\n\t\t\t105: 1,\n\t\t\t102: 2,\n\t\t\t99: 3,\n\t\t\t98: 4,\n\t\t\t97: 5,\n\t\t\t100: 6,\n\t\t\t103: 7,\n\t\t\t/* AWSD Movement */\n\t\t\t68: 2,\n\t\t\t65: 6,\n\t\t\t87: 0,\n\t\t\t83: 4,\n\t\t\t/* Rest using '5' in numpad */\n\t\t\t101: 'rest',\n\t\t\t/* vi movement */\n\t\t\t75: 0,\n\t\t\t85: 1,\n\t\t\t76: 2,\n\t\t\t78: 3,\n\t\t\t74: 4,\n\t\t\t66: 5,\n\t\t\t72: 6,\n\t\t\t89: 7,\n\t\t\t/* Fire a weapon */\n\t\t\t70: 'fire',\n\t\t\t/* Cast a spell */\n\t\t\t90: 'cast',\n\t\t\t/* Interact */\n\t\t\t69: 'interact',\n\t\t\t/* Misc */\n\t\t\t188: 'pickup',\n\t\t\t71: 'pickup',\n\t\t\t190: 'rest',\n\t\t\t88: 'examine'\n\t\t}\n\n\t\tif (evt.type === 'keydown' && movementKeys.includes(keyMap[code])) {\n\t\t\tif (this.keyTimer === null) {\n\t\t\t\tthis.keyTimer = new Date()\n\t\t\t} else {\n\t\t\t\tlet start = this.keyTimer.getTime()\n\t\t\t\tlet now = new Date().getTime()\n\t\t\t\tif (!(now - start >= 160)) {\n\t\t\t\t\treturn\n\t\t\t\t} else {\n\t\t\t\t\t// we've waited long enough, but add another timer just in case\n\t\t\t\t\tthis.keyTimer = new Date()\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.targeting || this.casting || this.examining) {\n\t\t\tlet msg = ''\n\t\t\tif (exitKeys.includes(code)) {\n\t\t\t\tif (this.targeting) msg = `You put away your ${this.cb.equipment.weapon.type.toLowerCase()}.`\n\t\t\t\tif (this.casting) msg = 'You stop casting the spell.'\n\t\t\t\tif (this.examining) msg = 'You quit examining the area.'\n\t\t\t\tGame.log(msg, 'information')\n\t\t\t\tthis.casting = this.targeting = this.examining = false\n\t\t\t\tGame.clearTempLog()\n\t\t\t\tGame.clearSelectedTile()\n\t\t\t} else if (confirmKeys.includes(code)) {\n\t\t\t\tif (this.validTarget) {\n\t\t\t\t\tif (this.casting) confirmSpellcasting()\n\t\t\t\t\tif (this.targeting) confirmRangedFire()\n\t\t\t\t} else {\n\t\t\t\t\tif (this.casting)\n\t\t\t\t\t\tmsg = `You cannot cast ${this.cb.currentSpell.name} at this tile because it's blocked or too far away.`\n\t\t\t\t\tif (this.targeting) msg = \"You cannot shoot this tile because it's blocked or out of range!\"\n\t\t\t\t\tif (this.examining) return\n\t\t\t\t\tGame.log(msg, 'alert')\n\t\t\t\t}\n\t\t\t} else if (movementKeys.includes(keyMap[code])) {\n\t\t\t\tlet diff = ROT.DIRS[8][keyMap[code]]\n\t\t\t\tlet x = Game.selectedTile.x + diff[0]\n\t\t\t\tlet y = Game.selectedTile.y + diff[1]\n\t\t\t\tif (Game.inbounds(x, y) && Game.inViewport(x, y)) {\n\t\t\t\t\tGame.changeSelectedTile(Game.getTile(x, y))\n\t\t\t\t\tthis.validTarget = !Game.selectedTile.blocked() && Game.map.visible_tiles[x + ',' + y] !== undefined\n\t\t\t\t}\n\t\t\t} else if (cycleKeys.includes(code)) {\n\t\t\t\tthis.validTarget = Game.cycleThroughSelectableEnemies()\n\t\t\t}\n\t\t\treturn\n\t\t}\n\n\t\tif (!(code in keyMap)) {\n\t\t\t// invalid key press, retry turn\n\n\t\t\treturn\n\t\t}\n\n\t\tconst action = keyMap[code]\n\t\tif (action === 'rest' && !shift_pressed) {\n\t\t\t// Rest\n\t\t\t// this.heal(this.cb.hpRecovery);\n\t\t\t// this.restore(this.cb.manaRecovery);\n\t\t\tGame.log('You rest for a turn.', 'player_move')\n\t\t} else if (action === 'pickup' && !shift_pressed) {\n\t\t\tthis.pickup()\n\t\t} else if ((action === 'rest' && shift_pressed) || (action === 'pickup' && shift_pressed) || action === 'interact') {\n\t\t\tthis.climb()\n\t\t} else if (action === 'fire' && !shift_pressed) {\n\t\t\tlet weapon = this.cb.equipment.weapon\n\t\t\tlet ammo = this.cb.equipment.ammo\n\t\t\tif (weapon !== null && ammo !== null && weapon.cb.ranged && ammo.cb.ammoType === weapon.cb.ammoType && ammo.quantity > 0) {\n\t\t\t\tGame.log(`You take aim with your ${weapon.type.toLowerCase()}.`, 'information')\n\t\t\t\tGame.log(\n\t\t\t\t\t`Select a target with the movement keys and press [enter] or [.] to fire your ${weapon.type.toLowerCase()}.`,\n\t\t\t\t\t'player_move'\n\t\t\t\t)\n\t\t\t\tthis.validTarget = Game.selectNearestEnemyTile()\n\t\t\t\tif (!this.validTarget) Game.changeSelectedTile(Game.getTile(this.x, this.y))\n\t\t\t\tthis.targeting = true\n\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\tif (weapon === null || !weapon.cb.ranged) {\n\t\t\t\t\tGame.log(\"You don't have a ranged weapon equipped!\", 'information')\n\t\t\t\t} else if (ammo === null) {\n\t\t\t\t\tGame.log(\"You don't have any ammunition equipped.\", 'information')\n\t\t\t\t} else if (ammo.cb.ammoType !== weapon.cb.ammoType) {\n\t\t\t\t\tGame.log(\"You don't have the right ammunition equipped for this weapon.\", 'information')\n\t\t\t\t}\n\n\t\t\t\treturn\n\t\t\t}\n\t\t} else if (action === 'cast') {\n\t\t\tlet currentSpell = this.cb.currentSpell\n\t\t\tif (currentSpell === null) {\n\t\t\t\tGame.log('You must select a spell to cast. Select one from the spellbook!', 'information')\n\n\t\t\t\treturn\n\t\t\t} else if (currentSpell.manaCost > this.cb.mana) {\n\t\t\t\tGame.log(`You don't have enough mana to cast ${currentSpell.name}!`, 'alert')\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (currentSpell.targetType === targetTypes.SELF) {\n\t\t\t\tGame.log(`You cast ${currentSpell.name}.`, 'magic')\n\t\t\t\tcurrentSpell.cast(this, this)\n\t\t\t\tthis.cb.mana -= currentSpell.manaCost\n\t\t\t} else if (currentSpell.targetType === targetTypes.TARGET) {\n\t\t\t\tGame.log('You begin casting a spell.', 'defend')\n\t\t\t\tGame.log('Select a target with the movement keys and press [enter] or [.] to cast the spell.', 'player_move')\n\n\t\t\t\tthis.validTarget = Game.selectNearestEnemyTile()\n\t\t\t\tif (!this.validTarget) Game.changeSelectedTile(Game.getTile(this.x, this.y))\n\t\t\t\tthis.casting = true\n\t\t\t\t// our first selected tile can be the nearest enemy\n\n\t\t\t\treturn\n\t\t\t}\n\t\t} else if (action === 'examine') {\n\t\t\tGame.log('You begin examining the area.', 'information')\n\t\t\tthis.examining = true\n\t\t\tGame.changeSelectedTile(Game.getTile(this.x, this.y))\n\t\t\treturn\n\t\t} else {\n\t\t\tlet diff = ROT.DIRS[8][action]\n\t\t\tlet nx = this.x + diff[0]\n\t\t\tlet ny = this.y + diff[1]\n\t\t\tif (!this.tryMove(nx, ny)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\t\tendTurn()\n\t}\n\n\tpickup() {\n\t\tlet ctile = Game.map.data[this.y][this.x]\n\t\tlet tileItems = ctile.actors.filter(el => {\n\t\t\treturn el instanceof Item\n\t\t})\n\t\tif (tileItems.length === 1) {\n\t\t\tGame.log(`You picked up a ${tileItems[0].type.toLowerCase()}.`, 'information')\n\t\t\tGame.display.clearSprite(tileItems[0])\n\t\t\tthis.addToInventory(tileItems[0])\n\t\t\tctile.removeActor(tileItems[0])\n\t\t} else if (tileItems.length > 1) {\n\t\t\tlet itemTypes = []\n\t\t\tfor (let item of tileItems) {\n\t\t\t\titemTypes.push(item.type.toLowerCase())\n\t\t\t\tGame.display.clearSprite(item)\n\t\t\t\tthis.addToInventory(item)\n\t\t\t\tctile.removeActor(item)\n\t\t\t}\n\t\t\tlet prettyItemTypes = itemTypes.slice(1, itemTypes.length - 1)\n\t\t\tprettyItemTypes = prettyItemTypes.reduce((buf, str) => {\n\t\t\t\treturn buf + ', a ' + str\n\t\t\t}, 'a  ' + itemTypes.slice(0, 1))\n\t\t\tlet lastItem = ` and a ${itemTypes.slice(-1)}.`\n\t\t\tlet buffer = `You picked up ${prettyItemTypes + lastItem}`\n\t\t\tGame.log(buffer, 'information')\n\t\t} else {\n\t\t\tGame.log(\"There's nothing to pick up.\", 'information')\n\t\t}\n\t}\n\n\t// Overriding the actor\n\tequipWeapon(item) {\n\t\tsuper.equipWeapon(item)\n\t\tGame.log(`You wield the ${item.type.toLowerCase()}.`, 'information')\n\t}\n\n\tunequipWeapon() {\n\t\tif (this.cb.equipment.weapon !== null) {\n\t\t\tthis.cb.equipment.weapon.cb.equipped = false\n\t\t\tthis.cb.equipment.weapon = null\n\t\t} else {\n\t\t\tthrow 'Tried to uneqip weapon but no item was equipped.'\n\t\t}\n\t}\n\n\tunequipAmmo() {\n\t\tif (this.cb.equipment.ammo !== null) {\n\t\t\tthis.cb.equipment.ammo.cb.equipped = false\n\t\t\tthis.cb.equipment.ammo = null\n\t\t} else {\n\t\t\tthrow 'Tried to uneqip ammo but no item was equipped.'\n\t\t}\n\t}\n\n\tclimb() {\n\t\tlet ctile = Game.map.data[this.y][this.x]\n\t\tlet ladder = ctile.actors.filter(a => {\n\t\t\treturn a instanceof Ladder\n\t\t})[0]\n\n\t\tif (ladder === undefined) {\n\t\t\tGame.log('There are no steps or ladders here to use!', 'information')\n\t\t} else {\n\t\t\tladder.react(this)\n\t\t}\n\t}\n\n\ttryMove(nx, ny) {\n\t\t// returns true if the turn should end here\n\t\tif (!Game.inbounds(nx, ny)) return\n\t\tlet ntile = Game.getTile(nx, ny) // new tile to move to\n\t\tif (ntile.actors.length === 0 && !ntile.blocked()) {\n\t\t\tthis.move(nx, ny)\n\t\t\tGame.clearSelectedTile()\n\t\t\treturn true\n\t\t} else if (ntile.actors.length > 0) {\n\t\t\tfor (let i = 0; i < ntile.actors.length; i++) {\n\t\t\t\tlet actor = ntile.actors[i]\n\t\t\t\tif (actor.blocked) {\n\t\t\t\t\tthis.interact(actor)\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!ntile.blocked()) {\n\t\t\tthis.move(nx, ny)\n\t\t\tGame.clearSelectedTile()\n\t\t\treturn true\n\t\t}\n\n\t\treturn false\n\t}\n\n\tattack(actor) {\n\t\tlet dmg = super.attack(actor)\n\t}\n\n\tdeath() {\n\t\tsuper.death()\n\t\twindow.removeEventListener('keydown', this)\n\t\tthis.cb.hp = 0\n\t\tthis.cb.dead = true\n\t\t// Game.scheduler.remove(Game.player);\n\t\tGame.scheduler.clear()\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/Player.js","/**\n * Created by Larken on 6/28/2017.\n */\nimport * as PIXI from 'pixi.js'\nimport { Game } from '#/Game.js'\nimport Player from '#/entities/actors/Player.js'\nexport function getTileInfo(id) {\n\t/*\n     \"FOV\": boolean,\n     \"FOV_id\": int,\n     \"animated\": boolean,\n     \"animated_id\": int,\n     \"bg\": color,\n     \"blocked\":boolean,\n     \"blocks_vision\": boolean,\n     \"entity\": boolean,\n     */\n\t// console.log(tileset.tileproperties[id]);\n\treturn Game.display.tileset.tileproperties[id + '']\n}\n\nexport default class Tile {\n\tconstructor(x, y) {\n\t\tthis.x = x\n\t\tthis.y = y\n\t\tthis.actors = []\n\t\tthis.obstacles = []\n\t}\n\n\tupdateTileInfo(id, tint = null) {\n\t\tlet obstacle = {}\n\t\tif (id in Game.display.tileset.tileproperties) {\n\t\t\t// just means there are no tile properties for this guy\n\t\t\tobstacle = getTileInfo(id)\n\t\t}\n\t\tobstacle.id = id\n\t\tobstacle.tint = tint\n\t\tthis.obstacles.push(obstacle) // add to the end of the obstacles to be drawn on top\n\t}\n\n\t/* Indicates whether or not a tile is blocked; however, this excludes the player for AI purposes. */\n\tblocked() {\n\t\t// TODO: fix it so that this actually fires off properly without blocking enemies from moving\n\t\t/*\n        for (let actor of this.actors) {\n            if (actor.blocked)\n                return true;\n        }\n        */\n\t\tif (this.obstacles.length > 0) return this.obstacles[this.obstacles.length - 1].blocked\n\t\treturn false\n\t}\n\n\tvisible() {\n\t\treturn !(\n\t\t\tthis.obstacles.some(el => {\n\t\t\t\treturn el.blocks_vision\n\t\t\t}) ||\n\t\t\tthis.actors.some(el => {\n\t\t\t\treturn !el.visible\n\t\t\t})\n\t\t)\n\t}\n\n\tremoveActor(a) {\n\t\tlet idx = this.actors.findIndex(actor => {\n\t\t\treturn Object.is(a, actor)\n\t\t})\n\t\tthis.actors.splice(idx, 1)\n\t}\n\n\tbg() {\n\t\tlet obstacles = this.obstacles\n\t\tif (\n\t\t\t!obstacles.some(e => {\n\t\t\t\treturn 'bg' in e\n\t\t\t})\n\t\t) {\n\t\t\treturn 'black'\n\t\t} else {\n\t\t\tfor (let i = obstacles.length - 1; i >= 0; i--) {\n\t\t\t\tlet obs = obstacles[i]\n\t\t\t\tif ('bg' in obs) return obs.bg\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/map/Tile.js","import Item from '#/entities/items/Item.js'\r\nimport {Game} from '#/Game.js'\r\n\r\nexport default class Key extends Item {\r\n\r\n\tconstructor(x, y, id) {\r\n\t\tsuper(x, y, {\r\n\t\t\tid: id,\r\n\t\t\ttype: 'Key'\r\n\t\t})\r\n\t}\r\n\r\n\thoverInfo() {\r\n\t\treturn ''\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/misc/Key.js","import { Game } from '#/Game.js'\nimport { Entity } from '#/entities/Entity.js'\n\nexport default class LevelTransition extends Entity {\n\tconstructor(x, y, id) {\n\t\tsuper(x, y, {\n\t\t\tid: id,\n\t\t\tname: 'path',\n\t\t\tdescription: 'A path leading to a new area!',\n\t\t\tfg: 'brown',\n\t\t\tbg: 'orange',\n\t\t\tblocked: true,\n\t\t\tvisible: true\n\t\t})\n\t\tthis.portal = null\n\t}\n\n\tact() {}\n\n\treact(actor) {\n\t\tGame.log(`You leave the ${Game.currentLevel.name} and go to the ${this.portal}.`, 'information')\n\t\tGame.changeLevels(this.portal)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/misc/LevelTransition.js","import Item from '#/entities/items/Item.js'\r\nimport * as magic from '#/magic/Spell.js'\r\nimport { Game } from '#/Game.js'\r\n\r\nexport class Spellbook extends Item {\r\n\tconstructor(x, y, id, options) {\r\n\t\tsuper(x, y, {\r\n\t\t\tid: id,\r\n\t\t\taction: 'Read',\r\n\t\t\ttype: 'Spellbook',\r\n\t\t\t...options\r\n\t\t})\r\n\t}\r\n\r\n\tuse() {\r\n\t\tfor (let spell of this.spells) {\r\n\t\t\tif (\r\n\t\t\t\t!Game.player.cb.spells.some(s => {\r\n\t\t\t\t\treturn s.name === spell.name\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\t\tGame.player.cb.spells.push(spell)\r\n\t\t}\r\n\t\tGame.player.removeFromInventory(this)\r\n\t}\r\n\r\n\thoverInfo() {\r\n\t\t// return `${this.type}${this.name}\\n`\r\n\t}\r\n}\r\n\r\nexport class NecromancySpellBook extends Spellbook {\r\n\tconstructor(x, y, id) {\r\n\t\tsuper(x, y, id, {\r\n\t\t\tspells: [\r\n\t\t\t\tnew magic.Pain(),\r\n\t\t\t\tnew magic.VampiricDraining(),\r\n\t\t\t\tnew magic.AnimateDead(),\r\n\t\t\t\tnew magic.Regeneration()\r\n\t\t\t],\r\n\t\t\tname: 'Book of Death'\r\n\t\t})\r\n\t}\r\n\r\n\tuse() {\r\n\t\tsuper.use()\r\n\t\tGame.log(\r\n\t\t\t'You have learned necromancy spells...but at what cost?',\r\n\t\t\t'lightgreen'\r\n\t\t)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/items/misc/Spellbook.js","/**\n * Created by larken on 7/12/17.\n */\n\nimport { Actor } from '#/entities/actors/Actor.js'\nimport { getRandomInt } from '#/utils/HelperFunctions'\n\nimport ROT from 'rot-js'\n\nexport default class NPC extends Actor {\n\tconstructor(x, y, id) {\n\t\tsuper(x, y, {\n\t\t\tid: id,\n\t\t\tname: 'non-player character',\n\t\t\tvisible: true,\n\t\t\tblocked: true,\n\t\t\tcombat: {\n\t\t\t\thostile: false\n\t\t\t}\n\t\t})\n\t\tthis.wanders = false\n\t}\n\n\tact() {\n\t\tGame.engine.lock()\n\t\tif (this.wanders && getRandomInt(1, 2) === 1) {\n\t\t\tlet dx = this.x + getRandomInt(-1, 1)\n\t\t\tlet dy = this.y + getRandomInt(-1, 1)\n\t\t\tthis.tryMove(dx, dy)\n\t\t}\n\t\tGame.engine.unlock()\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/NPC.js","/**\n * Created by Larken on 7/5/2017.\n */\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\nimport HealthPotion from '#/entities/items/potions/HealthPotion.js'\nimport StrengthPotion from '#/entities/items/potions/StrengthPotion.js'\nimport ManaPotion from '#/entities/items/potions/ManaPotion.js'\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\nimport { Sword } from '#/entities/items/weapons/Sword.js'\nimport { Game } from '#/Game.js'\nimport ROT from 'rot-js'\nimport { SteelArrow } from '#/entities/items/weapons/ranged/ammo/Arrow.js'\n\nexport default class Orc extends SimpleEnemy {\n\tconstructor(x, y, id, empowered = false) {\n\t\tlet randomHP = getRandomInt(30, 35)\n\t\tlet randomStr = getRandomInt(5, 10)\n\t\tsuper(\n\t\t\tx,\n\t\t\ty,\n\t\t\t{\n\t\t\t\tid: id,\n\t\t\t\tname: empowered ? 'Empowered Orc' : 'orc',\n\t\t\t\tdescription: 'All bronze and no brains!',\n\t\t\t\tvisible: true,\n\t\t\t\tblocked: true,\n\t\t\t\tchasing: false,\n\t\t\t\tcombat: {\n\t\t\t\t\t/* options.combat, dedicated to all things related to combat */\n\t\t\t\t\tdescription: [' attacked '],\n\t\t\t\t\t/* max stats */\n\t\t\t\t\tmaxhp: randomHP,\n\t\t\t\t\tmaxmana: 5,\n\t\t\t\t\t/* current stats */\n\t\t\t\t\thp: randomHP,\n\t\t\t\t\tmana: 5,\n\t\t\t\t\tstr: randomStr,\n\t\t\t\t\tdef: 1,\n\t\t\t\t\t/* misc */\n\t\t\t\t\thostile: true,\n\t\t\t\t\trange: 9,\n\t\t\t\t\tinvulnerable: false,\n\t\t\t\t\tempowered: empowered\n\t\t\t\t}\n\t\t\t},\n\t\t\tfalse\n\t\t)\n\t\tif (getRandomInt(1, 10) < 5) {\n\t\t\tlet items = getItemsFromDropTable({\n\t\t\t\tminItems: 0,\n\t\t\t\tmaxItems: 2,\n\t\t\t\tdropTable: {\n\t\t\t\t\tSTRENGTH_POTION: 1,\n\t\t\t\t\tHEALTH_POTION: 1,\n\t\t\t\t\tSTEEL_ARROW: 1,\n\t\t\t\t\tMANA_POTION: 1,\n\t\t\t\t\tSWORD: 1\n\t\t\t\t},\n\t\t\t\tx: this.x,\n\t\t\t\ty: this.y\n\t\t\t})\n\t\t\titems.forEach(item => this.addToInventory(item))\n\t\t}\n\t}\n\n\tinteract(actor) {\n\t\tif (actor === Game.player) {\n\t\t\tlet dmg = this.attack(actor)\n\t\t\tif (this.cb.empowered) {\n\t\t\t\tlet amtHealed = Math.floor(dmg / 2)\n\t\t\t\tGame.log(`The empowered orc steals your health and regenerates ${amtHealed} health!`, 'alert')\n\t\t\t\tthis.heal(amtHealed)\n\t\t\t}\n\t\t} else {\n\t\t\tactor.react(this)\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Orc.js","/**\r\n * Created by Larken on 6/22/2017.\r\n */\r\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\r\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\r\nimport { createSword, Sword } from '#/entities/items/weapons/Sword.js'\r\nimport HealthPotion from '#/entities/items/potions/HealthPotion.js'\r\nimport StrengthPotion from '#/entities/items/potions/StrengthPotion.js'\r\nimport { Game } from '#/Game.js'\r\nimport { SteelArrow } from '#/entities/items/weapons/ranged/ammo/Arrow.js'\r\n\r\nexport default class Kobold extends SimpleEnemy {\r\n\tconstructor(x, y, id, ranged = false) {\r\n\t\tlet randomHP = getRandomInt(20, 25)\r\n\t\tlet randomStr = getRandomInt(5, 7)\r\n\t\tsuper(x, y, {\r\n\t\t\tid: id,\r\n\t\t\tname: 'Kobold',\r\n\t\t\tdescription: 'A cold-blooded kobold!',\r\n\t\t\tvisible: true,\r\n\t\t\tblocked: true,\r\n\t\t\tchasing: false,\r\n\t\t\tcombat: {\r\n\t\t\t\t/* options.combat, dedicated to all things related to combat */\r\n\t\t\t\tdescription: [' attacked '],\r\n\t\t\t\t/* max stats */\r\n\t\t\t\tmaxhp: randomHP,\r\n\t\t\t\tmaxmana: 5,\r\n\t\t\t\t/* current stats */\r\n\t\t\t\thp: randomHP,\r\n\t\t\t\tmana: 5,\r\n\t\t\t\tstr: randomStr,\r\n\t\t\t\tdef: 1,\r\n\t\t\t\t/* misc */\r\n\t\t\t\thostile: true,\r\n\t\t\t\trange: 9,\r\n\t\t\t\tinvulnerable: false\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tlet items = getItemsFromDropTable({\r\n\t\t\tminItems: 0,\r\n\t\t\tmaxItems: 2,\r\n\t\t\tdropTable: {\r\n\t\t\t\tSTRENGTH_POTION: 1,\r\n\t\t\t\tHEALTH_POTION: 1,\r\n\t\t\t\tSTEEL_ARROW: 2,\r\n\t\t\t\tSWORD: 1\r\n\t\t\t},\r\n\t\t\tx: this.x,\r\n\t\t\ty: this.y\r\n\t\t})\r\n\t\titems.forEach(item => this.addToInventory(item))\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Kobold.js","/**\r\n * Created by Larken on 6/22/2017.\r\n */\r\nimport ROT from 'rot-js'\r\nimport { StatelessAI } from '#/entities/actors/enemies/StatelessAI.js'\r\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\r\nimport { createSword, Sword } from '#/entities/items/weapons/Sword.js'\r\nimport HealthPotion from '#/entities/items/potions/HealthPotion.js'\r\nimport StrengthPotion from '#/entities/items/potions/StrengthPotion.js'\r\nimport ManaPotion from '#/entities/items/potions/ManaPotion.js'\r\nimport { Game } from '#/Game.js'\r\nimport { SteelArrow } from '#/entities/items/weapons/ranged/ammo/Arrow.js'\r\n\r\nexport default class Goblin extends StatelessAI {\r\n\tconstructor(x, y, id) {\r\n\t\tlet randomHP = getRandomInt(6, 9)\r\n\t\tlet randomStr = getRandomInt(1, 3)\r\n\t\tsuper(\r\n\t\t\tx,\r\n\t\t\ty,\r\n\t\t\t{\r\n\t\t\t\tid: id,\r\n\t\t\t\tname: 'goblin',\r\n\t\t\t\tdescription: 'A mean, green goblin!',\r\n\t\t\t\tvisible: true,\r\n\t\t\t\tblocked: true,\r\n\t\t\t\tchasing: false,\r\n\t\t\t\tcombat: {\r\n\t\t\t\t\t/* options.combat, dedicated to all things related to combat */\r\n\t\t\t\t\tdescription: [' attacked '],\r\n\t\t\t\t\t/* max stats */\r\n\t\t\t\t\tmaxhp: randomHP,\r\n\t\t\t\t\tmaxmana: 5,\r\n\t\t\t\t\t/* current stats */\r\n\t\t\t\t\thp: randomHP,\r\n\t\t\t\t\tmana: 5,\r\n\t\t\t\t\tstr: randomStr,\r\n\t\t\t\t\tdef: 1,\r\n\t\t\t\t\t/* misc */\r\n\t\t\t\t\thostile: true,\r\n\t\t\t\t\trange: 9,\r\n\t\t\t\t\tinvulnerable: false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t/* AI parameters */\r\n\t\t\t\tmorale: 0.2,\r\n\t\t\t\tminPlayerDist: 0,\r\n\t\t\t\tmaxPlayerDist: 0,\r\n\t\t\t\tranged: false,\r\n\t\t\t\tmelee: true,\r\n\t\t\t\tmagic: false,\r\n\t\t\t\twanders: true\r\n\t\t\t}\r\n\t\t)\r\n\r\n\t\tif (getRandomInt(1, 10) < 2) {\r\n\t\t\tlet items = getItemsFromDropTable({\r\n\t\t\t\tminItems: 0,\r\n\t\t\t\tmaxItems: 1,\r\n\t\t\t\tdropTable: {\r\n\t\t\t\t\tSTRENGTH_POTION: 3,\r\n\t\t\t\t\tHEALTH_POTION: 2,\r\n\t\t\t\t\tMANA_POTION: 2,\r\n\t\t\t\t\tSTEEL_ARROW: 2,\r\n\t\t\t\t\tSWORD: 0\r\n\t\t\t\t},\r\n\t\t\t\tx: this.x,\r\n\t\t\t\ty: this.y\r\n\t\t\t})\r\n\t\t\titems.forEach(item => this.addToInventory(item))\r\n\t\t}\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Goblin.js","/**\r\n * Created by Larken on 6/22/2017.\r\n */\r\nimport ROT from 'rot-js'\r\nimport { StatelessAI } from '#/entities/actors/enemies/StatelessAI.js'\r\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\r\nimport { Game } from '#/Game.js'\r\n\r\nexport default class Bat extends StatelessAI {\r\n\tconstructor(x, y, id) {\r\n\t\tlet randomHP = getRandomInt(4, 8)\r\n\t\tlet randomStr = getRandomInt(1, 2)\r\n\t\tsuper(\r\n\t\t\tx,\r\n\t\t\ty,\r\n\t\t\t{\r\n\t\t\t\tid: id,\r\n\t\t\t\tname: 'bat',\r\n\t\t\t\tdescription: 'A creature of the night!',\r\n\t\t\t\tvisible: true,\r\n\t\t\t\tblocked: true,\r\n\t\t\t\tchasing: false,\r\n\t\t\t\tcombat: {\r\n\t\t\t\t\t/* options.combat, dedicated to all things related to combat */\r\n\t\t\t\t\tdescription: [' attacked '],\r\n\t\t\t\t\t/* max stats */\r\n\t\t\t\t\tmaxhp: randomHP,\r\n\t\t\t\t\tmaxmana: 5,\r\n\t\t\t\t\t/* current stats */\r\n\t\t\t\t\thp: randomHP,\r\n\t\t\t\t\tmana: 5,\r\n\t\t\t\t\tstr: randomStr,\r\n\t\t\t\t\tdef: 1,\r\n\t\t\t\t\t/* misc */\r\n\t\t\t\t\thostile: true,\r\n\t\t\t\t\trange: 9,\r\n\t\t\t\t\tinvulnerable: false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t/* AI parameters */\r\n\t\t\t\tmorale: 0.4,\r\n\t\t\t\tminPlayerDist: 0,\r\n\t\t\t\tmaxPlayerDist: 0,\r\n\t\t\t\tranged: false,\r\n\t\t\t\tmelee: true,\r\n\t\t\t\tmagic: false,\r\n\t\t\t\twanders: true\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Bat.js","/**\r\n * Created by Larken on 6/22/2017.\r\n */\r\nimport { Game } from '#/Game.js'\r\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\r\n\r\nexport default class Rat extends SimpleEnemy {\r\n\tconstructor(x, y, id) {\r\n\t\tsuper(x, y, {\r\n\t\t\tid: id,\r\n\t\t\tname: 'rat',\r\n\t\t\tdescription: 'A fat rat!',\r\n\t\t\tsymbol: 'r',\r\n\t\t\tfg: 'grey',\r\n\t\t\tbg: 'seagreen',\r\n\t\t\tvisible: true,\r\n\t\t\tblocked: true,\r\n\t\t\tchasing: false,\r\n\t\t\tcombat: {\r\n\t\t\t\t/* options.combat, dedicated to all things related to combat */\r\n\t\t\t\tdescription: [' attacked '],\r\n\t\t\t\t/* max stats */\r\n\t\t\t\tmaxhp: 3,\r\n\t\t\t\tmaxmana: 0,\r\n\t\t\t\t/* current stats */\r\n\t\t\t\thp: 3,\r\n\t\t\t\tmana: 0,\r\n\t\t\t\tstr: 1,\r\n\t\t\t\tdef: 0,\r\n\t\t\t\t/* misc */\r\n\t\t\t\thostile: true,\r\n\t\t\t\trange: 4,\r\n\t\t\t\tinvulnerable: false\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Rat.js","/**\n * Created by Larken on 6/22/2017.\n */\nimport ROT from 'rot-js'\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\nimport { Game } from '#/Game.js'\n\nexport default class Snake extends SimpleEnemy {\n\tconstructor(x, y, id) {\n\t\tsuper(\n\t\t\tx,\n\t\t\ty,\n\t\t\t{\n\t\t\t\tid: id,\n\t\t\t\tname: 'snake',\n\t\t\t\tdescription: 'A sneaky snake!',\n\t\t\t\tvisible: true,\n\t\t\t\tblocked: true,\n\t\t\t\tchasing: false,\n\t\t\t\tcombat: {\n\t\t\t\t\t/* options.combat, dedicated to all things related to combat */\n\t\t\t\t\tdescription: [' attacked '],\n\t\t\t\t\t/* max stats */\n\t\t\t\t\tmaxhp: 7,\n\t\t\t\t\tmaxmana: 5,\n\t\t\t\t\t/* current stats */\n\t\t\t\t\thp: 7,\n\t\t\t\t\tmana: 5,\n\t\t\t\t\tstr: 4,\n\t\t\t\t\tdef: 1,\n\t\t\t\t\t/* misc */\n\t\t\t\t\thostile: true,\n\t\t\t\t\trange: 9,\n\t\t\t\t\tinvulnerable: false\n\t\t\t\t}\n\t\t\t},\n\t\t\ttrue\n\t\t)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Snake.js","// Miscellaneous\nimport Chest from '#/entities/misc/Chest.js'\nimport Door from '#/entities/misc/Door.js'\nimport LockedDoor from '#/entities/misc/LockedDoor.js'\nimport LevelTransition from '#/entities/misc/LevelTransition.js'\nimport Ladder from '#/entities/misc/Ladder.js'\nimport Key from '#/entities/items/misc/Key.js'\nimport { NecromancySpellBook } from '#/entities/items/misc/Spellbook.js'\n\nimport NPC from '#/entities/actors/NPC.js'\nimport { Corpse, corpseTypes } from '#/entities/items/misc/Corpse.js'\n// Items\nimport HealthPotion from '#/entities/items/potions/HealthPotion.js'\nimport StrengthPotion from '#/entities/items/potions/StrengthPotion.js'\nimport ManaPotion from '#/entities/items/potions/ManaPotion.js'\nimport { createSword } from '#/entities/items/weapons/Sword.js'\nimport { SteelArrow } from '#/entities/items/weapons/ranged/ammo/Arrow.js'\n// Enemies\nimport Orc from '#/entities/actors/enemies/Orc.js'\nimport Kobold from '#/entities/actors/enemies/Kobold.js'\nimport Goblin from '#/entities/actors/enemies/Goblin.js'\nimport Bat from '#/entities/actors/enemies/Bat.js'\nimport Rat from '#/entities/actors/enemies/Rat.js'\nimport Skeleton from '#/entities/actors/enemies/Skeleton.js'\nimport Zombie from '#/entities/actors/enemies/Zombie.js'\nimport Troll from '#/entities/actors/enemies/Troll.js'\nimport Mummy from '#/entities/actors/enemies/Mummy.js'\nimport Ghost from '#/entities/actors/enemies/Ghost.js'\nimport IceElemental from '#/entities/actors/enemies/IceElemental.js'\nimport Golem from '#/entities/actors/enemies/Golem.js'\nimport Imp from '#/entities/actors/enemies/Imp.js'\nimport Snake from '#/entities/actors/enemies/Snake.js'\nimport Siren from '#/entities/actors/enemies/Siren.js'\nimport Vampire from '#/entities/actors/enemies/Vampire.js'\nimport Banshee from '#/entities/actors/enemies/Banshee.js'\nimport Minotaur from '#/entities/actors/enemies/Minotaur.js'\nimport Cyclops from '#/entities/actors/enemies/Cyclops.js'\nimport Demon from '#/entities/actors/enemies/Demon.js'\nimport BoneMan from '#/entities/actors/enemies/BoneMan.js'\nimport Lich from '#/entities/actors/enemies/boss/Lich.js'\n\nimport { getRandomInt, getNormalRandomInt, randomProperty } from '#/utils/HelperFunctions.js'\n\nconst itemShop = {\n\tHEALTH_POTION: (x, y, t) => new HealthPotion(x, y, t),\n\tSTRENGTH_POTION: (x, y, t) => new StrengthPotion(x, y, t),\n\tMANA_POTION: (x, y, t) => new ManaPotion(x, y, t),\n\tSWORD: (x, y, t) => createSword(x, y, t),\n\tBOW: (x, y, t) => createBow(x, y, t),\n\tSTEEL_ARROW: (x, y, t) => new SteelArrow(x, y, t, 5),\n\tKEY: (x, y, t) => new Key(x, y, t),\n\tNECROMANCY_SPELLBOOK: (x, y, t) => new NecromancySpellBook(x, y, t)\n}\n\nexport function createItem(itemString, x, y, id = null) {\n\tconst defaultItemTextures = {\n\t\tKEY: 24,\n\t\tHEALTH_POTION: 488,\n\t\tMANA_POTION: 608,\n\t\tSTRENGTH_POTION: 969,\n\t\tSWORD: 35,\n\t\tBOW: 664,\n\t\tSTEEL_ARROW: 784,\n\t\tNECROMANCY_SPELLBOOK: 3264\n\t}\n\tconst texture = id === null ? defaultItemTextures[itemString] : id\n\n\tif (!(itemString in itemShop)) {\n\t\tconsole.error(`Tried to create an item without an entry: ${itemString} with ID: ${id}`)\n\t\treturn null\n\t}\n\n\treturn itemShop[itemString](x, y, texture)\n}\n\nexport const actorTextures = {\n\tORC: [5292, 5293, 5294, 5295, 5296, 5297, 5299],\n\tEMPOWERED_ORC: [5298],\n\tGOBLIN: [7440, 7441, 7442, 7443, 7444, 7445, 7446],\n\tRAT: [2365],\n\tBAT: [3704, 3706],\n\tKOBOLD: [5532, 5533, 5534, 5535, 5536, 5537, 5538, 5539],\n\tSKELETON: [2552, 2553, 2554, 2555],\n\tZOMBIE: [2314, 2317],\n\tTROLL: [9481, 9480],\n\tMUMMY: [2432, 2433, 2434, 2435, 2436, 2437, 2438, 2439],\n\tGHOST: [2792, 2793, 2794],\n\tICE_ELEMENTAL: [2460, 2461],\n\tGOLEM: [2457],\n\tIMP: [5412, 5413],\n\tSNAKE: [4360, 4361, 4362, 4363, 4364, 4365, 4366, 4367],\n\tSIREN: [2289, 2295],\n\tVAMPIRE: [2672],\n\tMINOTAUR: [7080],\n\tCYCLOPS: [7081],\n\tBANSHEE: [3154],\n\tDEMON: [2409, 2410, 2411, 2412, 2413, 2414, 2415],\n\tBONE_MAN: [3392, 3393]\n}\n\nconst entityShop = {\n\tNPC: (x, y, t) => new NPC(x, y, t),\n\tLEVEL_TRANSITION: (x, y, t) => new LevelTransition(x, y, t),\n\tCHEST: (x, y, t) => new Chest(x, y, t),\n\tDOOR: (x, y, t) => new Door(x, y, t),\n\tLOCKED_DOOR: (x, y, t) => new LockedDoor(x, y, t),\n\tLADDER: (x, y, t) => new Ladder(x, y, t),\n\tORC: (x, y, t) => new Orc(x, y, t),\n\tEMPOWERED_ORC: (x, y, t) => new Orc(x, y, t, true),\n\tKOBOLD: (x, y, t) => new Kobold(x, y, t),\n\tGOBLIN: (x, y, t) => new Goblin(x, y, t),\n\tBAT: (x, y, t) => new Bat(x, y, t),\n\tRAT: (x, y, t) => new Rat(x, y, t),\n\tSNAKE: (x, y, t) => new Snake(x, y, t),\n\tSKELETON: (x, y, t) => new Skeleton(x, y, t),\n\tZOMBIE: (x, y, t) => new Zombie(x, y, t),\n\tTROLL: (x, y, t) => new Troll(x, y, t),\n\tMUMMY: (x, y, t) => new Mummy(x, y, t),\n\tGHOST: (x, y, t) => new Ghost(x, y, t),\n\tICE_ELEMENTAL: (x, y, t) => new IceElemental(x, y, t),\n\tGOLEM: (x, y, t) => new Golem(x, y, t),\n\tIMP: (x, y, t) => new Imp(x, y, t),\n\tSNAKE: (x, y, t) => new Snake(x, y, t),\n\tSIREN: (x, y, t) => new Siren(x, y, t),\n\tBANSHEE: (x, y, t) => new Banshee(x, y, t),\n\tVAMPIRE: (x, y, t) => new Vampire(x, y, t),\n\tMINOTAUR: (x, y, t) => new Minotaur(x, y, t),\n\tCYCLOPS: (x, y, t) => new Cyclops(x, y, t),\n\tDEMON: (x, y, t) => new Demon(x, y, t),\n\tBONE_MAN: (x, y, t) => new BoneMan(x, y, t),\n\tZOMBIE_CORPSE: (x, y, t) => new Corpse(x, y, 'undead', t),\n\tSKELETON_CORPSE: (x, y, t) => new Corpse(x, y, 'Skeleton', t),\n\tLICH: (x, y, t) => new Lich(x, y, t)\n}\n\nexport function createActor(actorString, x, y, id = null) {\n\tlet texture = id\n\tif (id === null) {\n\t\tlet possibleActorTextures = actorTextures[actorString]\n\t\ttexture = possibleActorTextures[getRandomInt(0, possibleActorTextures.length - 1)]\n\t}\n\tif (!(actorString in entityShop)) {\n\t\tconsole.error(`Tried to create entity without an entry: ${actorString} with ID: ${id}`)\n\t\treturn null\n\t}\n\treturn entityShop[actorString](x, y, texture)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/utils/EntityFactory.js","/**\r\n * Created by Larken on 7/8/2017.\r\n */\r\nimport {Game, tileset} from '#/Game.js'\r\nimport Door from '#/entities/misc/Door.js'\r\nimport Key from '#/entities/items/misc/Key.js'\r\n\r\nexport default class LockedDoor extends Door {\r\n\tconstructor(x, y, id) {\r\n\t\tsuper(x, y, id)\r\n\t\tthis.name = 'locked door'\r\n\t}\r\n\r\n\treact(actor) {\r\n\t\tif (this.closed && actor === Game.player) {\r\n\t\t\t// if it's closed, then we need to make sure this\r\n\t\t\t// actor who is trying to open the door has a key\r\n\t\t\tlet keys = actor.items().filter((i) => {\r\n\t\t\t\treturn i instanceof Key\r\n\t\t\t})\r\n\t\t\tif (keys.length === 0) {\r\n\t\t\t\tGame.log('You need a key to open this door.', 'alert')\r\n\t\t\t} else {\r\n\t\t\t\tGame.log('You use a key to unlock the door.', 'player_move')\r\n\t\t\t\tactor.removeFromInventory(keys[0])\r\n\t\t\t\tthis.openDoor()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/misc/LockedDoor.js","/**\n * Created by Larken on 6/22/2017.\n */\nimport ROT from 'rot-js'\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\nimport { Game } from '#/Game.js'\n\nexport default class Troll extends SimpleEnemy {\n\tconstructor(x, y, id) {\n\t\tsuper(\n\t\t\tx,\n\t\t\ty,\n\t\t\t{\n\t\t\t\tid: id,\n\t\t\t\tname: 'troll',\n\t\t\t\tdescription: 'A large, strong and stupid creature.',\n\t\t\t\tvisible: true,\n\t\t\t\tblocked: true,\n\t\t\t\tchasing: false,\n\t\t\t\tcombat: {\n\t\t\t\t\t/* options.combat, dedicated to all things related to combat */\n\t\t\t\t\tdescription: [' attacked '],\n\t\t\t\t\t/* max stats */\n\t\t\t\t\tmaxhp: 45,\n\t\t\t\t\tmaxmana: 5,\n\t\t\t\t\t/* current stats */\n\t\t\t\t\thp: 45,\n\t\t\t\t\tmana: 5,\n\t\t\t\t\tstr: 12,\n\t\t\t\t\tdef: 1,\n\t\t\t\t\t/* misc */\n\t\t\t\t\thostile: true,\n\t\t\t\t\trange: 9,\n\t\t\t\t\tinvulnerable: false\n\t\t\t\t}\n\t\t\t},\n\t\t\ttrue\n\t\t)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Troll.js","/**\n * Created by Larken on 6/22/2017.\n */\nimport ROT from 'rot-js'\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\nimport { Game } from '#/Game.js'\n\nexport default class Mummy extends SimpleEnemy {\n\tconstructor(x, y, id) {\n\t\tsuper(\n\t\t\tx,\n\t\t\ty,\n\t\t\t{\n\t\t\t\tid: id,\n\t\t\t\tname: 'mummy',\n\t\t\t\tdescription: 'A mummified undead, wrapped in linen!',\n\t\t\t\tvisible: true,\n\t\t\t\tblocked: true,\n\t\t\t\tchasing: false,\n\t\t\t\tcombat: {\n\t\t\t\t\t/* options.combat, dedicated to all things related to combat */\n\t\t\t\t\tdescription: [' attacked '],\n\t\t\t\t\t/* max stats */\n\t\t\t\t\tmaxhp: 40,\n\t\t\t\t\tmaxmana: 5,\n\t\t\t\t\t/* current stats */\n\t\t\t\t\thp: 40,\n\t\t\t\t\tmana: 5,\n\t\t\t\t\tstr: 5,\n\t\t\t\t\tdef: 1,\n\t\t\t\t\t/* misc */\n\t\t\t\t\thostile: true,\n\t\t\t\t\trange: 9,\n\t\t\t\t\tinvulnerable: false\n\t\t\t\t}\n\t\t\t},\n\t\t\ttrue\n\t\t)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Mummy.js","/**\n * Created by Larken on 6/22/2017.\n */\nimport ROT from 'rot-js'\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\nimport { Game } from '#/Game.js'\n\nexport default class Ghost extends SimpleEnemy {\n\tconstructor(x, y, id) {\n\t\tsuper(\n\t\t\tx,\n\t\t\ty,\n\t\t\t{\n\t\t\t\tid: id,\n\t\t\t\tname: 'ghost',\n\t\t\t\tdescription: 'A dead soul trapped in this coporeal realm.',\n\t\t\t\tvisible: true,\n\t\t\t\tblocked: true,\n\t\t\t\tchasing: false,\n\t\t\t\tcorpseType: null,\n\t\t\t\tcombat: {\n\t\t\t\t\t/* options.combat, dedicated to all things related to combat */\n\t\t\t\t\tdescription: [' attacked '],\n\t\t\t\t\t/* max stats */\n\t\t\t\t\tmaxhp: 35,\n\t\t\t\t\tmaxmana: 5,\n\t\t\t\t\t/* current stats */\n\t\t\t\t\thp: 35,\n\t\t\t\t\tmana: 5,\n\t\t\t\t\tstr: 3,\n\t\t\t\t\tdef: 1,\n\t\t\t\t\t/* misc */\n\t\t\t\t\thostile: true,\n\t\t\t\t\trange: 9,\n\t\t\t\t\tinvulnerable: false\n\t\t\t\t}\n\t\t\t},\n\t\t\ttrue\n\t\t)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Ghost.js","/**\n * Created by Larken on 6/22/2017.\n */\nimport ROT from 'rot-js'\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\nimport { Game } from '#/Game.js'\n\nexport default class IceElemental extends SimpleEnemy {\n\tconstructor(x, y, id) {\n\t\tsuper(\n\t\t\tx,\n\t\t\ty,\n\t\t\t{\n\t\t\t\tid: id,\n\t\t\t\tname: 'Ice Elemental',\n\t\t\t\tdescription: 'A living icicle!',\n\t\t\t\tvisible: true,\n\t\t\t\tblocked: true,\n\t\t\t\tchasing: false,\n\t\t\t\tcombat: {\n\t\t\t\t\t/* options.combat, dedicated to all things related to combat */\n\t\t\t\t\tdescription: [' attacked '],\n\t\t\t\t\t/* max stats */\n\t\t\t\t\tmaxhp: 25,\n\t\t\t\t\tmaxmana: 5,\n\t\t\t\t\t/* current stats */\n\t\t\t\t\thp: 25,\n\t\t\t\t\tmana: 5,\n\t\t\t\t\tstr: 15,\n\t\t\t\t\tdef: 1,\n\t\t\t\t\t/* misc */\n\t\t\t\t\thostile: true,\n\t\t\t\t\trange: 9,\n\t\t\t\t\tinvulnerable: false\n\t\t\t\t}\n\t\t\t},\n\t\t\ttrue\n\t\t)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/IceElemental.js","/**\n * Created by Larken on 6/22/2017.\n */\nimport ROT from 'rot-js'\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\nimport { Game } from '#/Game.js'\n\nexport default class Golem extends SimpleEnemy {\n\tconstructor(x, y, id) {\n\t\tsuper(\n\t\t\tx,\n\t\t\ty,\n\t\t\t{\n\t\t\t\tid: id,\n\t\t\t\tname: 'golem',\n\t\t\t\tdescription: 'A towering being made of magical minerals.',\n\t\t\t\tvisible: true,\n\t\t\t\tblocked: true,\n\t\t\t\tchasing: false,\n\t\t\t\tcombat: {\n\t\t\t\t\t/* options.combat, dedicated to all things related to combat */\n\t\t\t\t\tdescription: [' attacked '],\n\t\t\t\t\t/* max stats */\n\t\t\t\t\tmaxhp: 55,\n\t\t\t\t\tmaxmana: 5,\n\t\t\t\t\t/* current stats */\n\t\t\t\t\thp: 55,\n\t\t\t\t\tmana: 5,\n\t\t\t\t\tstr: 15,\n\t\t\t\t\tdef: 1,\n\t\t\t\t\t/* misc */\n\t\t\t\t\thostile: true,\n\t\t\t\t\trange: 9,\n\t\t\t\t\tinvulnerable: false\n\t\t\t\t}\n\t\t\t},\n\t\t\ttrue\n\t\t)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Golem.js","/**\n * Created by Larken on 6/22/2017.\n */\nimport ROT from 'rot-js'\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\nimport { Game } from '#/Game.js'\n\nexport default class Imp extends SimpleEnemy {\n\tconstructor(x, y, id) {\n\t\tsuper(\n\t\t\tx,\n\t\t\ty,\n\t\t\t{\n\t\t\t\tid: id,\n\t\t\t\tname: 'imp',\n\t\t\t\tdescription: 'A small, mischevious demon.',\n\t\t\t\tvisible: true,\n\t\t\t\tblocked: true,\n\t\t\t\tchasing: false,\n\t\t\t\tcombat: {\n\t\t\t\t\t/* options.combat, dedicated to all things related to combat */\n\t\t\t\t\tdescription: [' attacked '],\n\t\t\t\t\t/* max stats */\n\t\t\t\t\tmaxhp: 15,\n\t\t\t\t\tmaxmana: 5,\n\t\t\t\t\t/* current stats */\n\t\t\t\t\thp: 15,\n\t\t\t\t\tmana: 5,\n\t\t\t\t\tstr: 5,\n\t\t\t\t\tdef: 1,\n\t\t\t\t\t/* misc */\n\t\t\t\t\thostile: true,\n\t\t\t\t\trange: 9,\n\t\t\t\t\tinvulnerable: false\n\t\t\t\t}\n\t\t\t},\n\t\t\ttrue\n\t\t)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Imp.js","/**\n * Created by Larken on 6/22/2017.\n */\nimport ROT from 'rot-js'\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\nimport { Game } from '#/Game.js'\n\nexport default class Siren extends SimpleEnemy {\n\tconstructor(x, y, id) {\n\t\tsuper(\n\t\t\tx,\n\t\t\ty,\n\t\t\t{\n\t\t\t\tid: id,\n\t\t\t\tname: 'siren',\n\t\t\t\tdescription: 'A beautiful woman...serpent with wings',\n\t\t\t\tvisible: true,\n\t\t\t\tblocked: true,\n\t\t\t\tchasing: false,\n\t\t\t\tcombat: {\n\t\t\t\t\t/* options.combat, dedicated to all things related to combat */\n\t\t\t\t\tdescription: [' attacked '],\n\t\t\t\t\t/* max stats */\n\t\t\t\t\tmaxhp: 40,\n\t\t\t\t\tmaxmana: 5,\n\t\t\t\t\t/* current stats */\n\t\t\t\t\thp: 40,\n\t\t\t\t\tmana: 5,\n\t\t\t\t\tstr: 8,\n\t\t\t\t\tdef: 1,\n\t\t\t\t\t/* misc */\n\t\t\t\t\thostile: true,\n\t\t\t\t\trange: 9,\n\t\t\t\t\tinvulnerable: false\n\t\t\t\t}\n\t\t\t},\n\t\t\ttrue\n\t\t)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Siren.js","/**\n * Created by Larken on 6/22/2017.\n */\nimport ROT from 'rot-js'\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\nimport { Game } from '#/Game.js'\n\nexport default class Banshee extends SimpleEnemy {\n\tconstructor(x, y, id) {\n\t\tsuper(x, y, {\n\t\t\tid: id,\n\t\t\tname: 'banshee',\n\t\t\tdescription: 'A cursed female spirit.',\n\t\t\tvisible: true,\n\t\t\tblocked: true,\n\t\t\tchasing: false,\n\t\t\tcombat: {\n\t\t\t\t/* options.combat, dedicated to all things related to combat */\n\t\t\t\tdescription: [' attacked '],\n\t\t\t\t/* max stats */\n\t\t\t\tmaxhp: 50,\n\t\t\t\tmaxmana: 5,\n\t\t\t\t/* current stats */\n\t\t\t\thp: 50,\n\t\t\t\tmana: 5,\n\t\t\t\tstr: 8,\n\t\t\t\tdef: 1,\n\t\t\t\t/* misc */\n\t\t\t\thostile: true,\n\t\t\t\trange: 9,\n\t\t\t\tinvulnerable: false\n\t\t\t}\n\t\t})\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Banshee.js","/**\n * Created by Larken on 6/22/2017.\n */\nimport ROT from 'rot-js'\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\nimport { Game } from '#/Game.js'\n\nexport default class Vampire extends SimpleEnemy {\n\tconstructor(x, y, id) {\n\t\tsuper(\n\t\t\tx,\n\t\t\ty,\n\t\t\t{\n\t\t\t\tid: id,\n\t\t\t\tname: 'vampire',\n\t\t\t\tdescription: 'A powerful sorcerer of blood magicks.',\n\t\t\t\tvisible: true,\n\t\t\t\tblocked: true,\n\t\t\t\tchasing: false,\n\t\t\t\tcombat: {\n\t\t\t\t\t/* options.combat, dedicated to all things related to combat */\n\t\t\t\t\tdescription: [' attacked '],\n\t\t\t\t\t/* max stats */\n\t\t\t\t\tmaxhp: 70,\n\t\t\t\t\tmaxmana: 5,\n\t\t\t\t\t/* current stats */\n\t\t\t\t\thp: 70,\n\t\t\t\t\tmana: 5,\n\t\t\t\t\tstr: 22,\n\t\t\t\t\tdef: 1,\n\t\t\t\t\t/* misc */\n\t\t\t\t\thostile: true,\n\t\t\t\t\trange: 9,\n\t\t\t\t\tinvulnerable: false\n\t\t\t\t}\n\t\t\t},\n\t\t\ttrue\n\t\t)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Vampire.js","/**\n * Created by Larken on 6/22/2017.\n */\nimport ROT from 'rot-js'\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\nimport { Game } from '#/Game.js'\n\nexport default class Minotaur extends SimpleEnemy {\n\tconstructor(x, y, id) {\n\t\tsuper(\n\t\t\tx,\n\t\t\ty,\n\t\t\t{\n\t\t\t\tid: id,\n\t\t\t\tname: 'minotaur',\n\t\t\t\tdescription: 'A hateful beast with the head of a bull and body of a man!',\n\t\t\t\tvisible: true,\n\t\t\t\tblocked: true,\n\t\t\t\tchasing: false,\n\t\t\t\tcombat: {\n\t\t\t\t\t/* options.combat, dedicated to all things related to combat */\n\t\t\t\t\tdescription: [' attacked '],\n\t\t\t\t\t/* max stats */\n\t\t\t\t\tmaxhp: 60,\n\t\t\t\t\tmaxmana: 5,\n\t\t\t\t\t/* current stats */\n\t\t\t\t\thp: 60,\n\t\t\t\t\tmana: 5,\n\t\t\t\t\tstr: 16,\n\t\t\t\t\tdef: 1,\n\t\t\t\t\t/* misc */\n\t\t\t\t\thostile: true,\n\t\t\t\t\trange: 9,\n\t\t\t\t\tinvulnerable: false\n\t\t\t\t}\n\t\t\t},\n\t\t\ttrue\n\t\t)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Minotaur.js","/**\n * Created by Larken on 6/22/2017.\n */\nimport ROT from 'rot-js'\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\nimport { Game } from '#/Game.js'\n\nexport default class Cyclops extends SimpleEnemy {\n\tconstructor(x, y, id) {\n\t\tsuper(x, y, {\n\t\t\tid: id,\n\t\t\tname: 'cyclops',\n\t\t\tdescription: 'A massive beast with one eye!',\n\t\t\tvisible: true,\n\t\t\tblocked: true,\n\t\t\tchasing: false,\n\t\t\tcombat: {\n\t\t\t\t/* options.combat, dedicated to all things related to combat */\n\t\t\t\tdescription: [' attacked '],\n\t\t\t\t/* max stats */\n\t\t\t\tmaxhp: 55,\n\t\t\t\tmaxmana: 5,\n\t\t\t\t/* current stats */\n\t\t\t\thp: 55,\n\t\t\t\tmana: 5,\n\t\t\t\tstr: 14,\n\t\t\t\tdef: 1,\n\t\t\t\t/* misc */\n\t\t\t\thostile: true,\n\t\t\t\trange: 9,\n\t\t\t\tinvulnerable: false\n\t\t\t}\n\t\t})\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Cyclops.js","/**\n * Created by Larken on 6/22/2017.\n */\nimport ROT from 'rot-js'\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\nimport { Game } from '#/Game.js'\n\nexport default class Demon extends SimpleEnemy {\n\tconstructor(x, y, id) {\n\t\tsuper(\n\t\t\tx,\n\t\t\ty,\n\t\t\t{\n\t\t\t\tid: id,\n\t\t\t\tname: 'demon',\n\t\t\t\tdescription: 'A spiritual being from an evil plane.',\n\t\t\t\tvisible: true,\n\t\t\t\tblocked: true,\n\t\t\t\tchasing: false,\n\t\t\t\tcombat: {\n\t\t\t\t\t/* options.combat, dedicated to all things related to combat */\n\t\t\t\t\tdescription: [' attacked '],\n\t\t\t\t\t/* max stats */\n\t\t\t\t\tmaxhp: 35,\n\t\t\t\t\tmaxmana: 5,\n\t\t\t\t\t/* current stats */\n\t\t\t\t\thp: 35,\n\t\t\t\t\tmana: 5,\n\t\t\t\t\tstr: 6,\n\t\t\t\t\tdef: 1,\n\t\t\t\t\t/* misc */\n\t\t\t\t\thostile: true,\n\t\t\t\t\trange: 9,\n\t\t\t\t\tinvulnerable: false\n\t\t\t\t}\n\t\t\t},\n\t\t\ttrue\n\t\t)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/Demon.js","/**\n * Created by Larken on 6/22/2017.\n */\nimport ROT from 'rot-js'\nimport SimpleEnemy from '#/entities/actors/enemies/SimpleEnemy.js'\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\nimport { Game } from '#/Game.js'\n\nexport default class BoneMan extends SimpleEnemy {\n\tconstructor(x, y, id) {\n\t\tsuper(\n\t\t\tx,\n\t\t\ty,\n\t\t\t{\n\t\t\t\tid: id,\n\t\t\t\tname: 'bone man',\n\t\t\t\tdescription: 'A mysterious creature with a skull for a head.',\n\t\t\t\tvisible: true,\n\t\t\t\tblocked: true,\n\t\t\t\tchasing: false,\n\t\t\t\tcombat: {\n\t\t\t\t\t/* options.combat, dedicated to all things related to combat */\n\t\t\t\t\tdescription: [' attacked '],\n\t\t\t\t\t/* max stats */\n\t\t\t\t\tmaxhp: 70,\n\t\t\t\t\tmaxmana: 5,\n\t\t\t\t\t/* current stats */\n\t\t\t\t\thp: 15,\n\t\t\t\t\tmana: 5,\n\t\t\t\t\tstr: 7,\n\t\t\t\t\tdef: 1,\n\t\t\t\t\t/* misc */\n\t\t\t\t\thostile: true,\n\t\t\t\t\trange: 9,\n\t\t\t\t\tinvulnerable: false\n\t\t\t\t}\n\t\t\t},\n\t\t\ttrue\n\t\t)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/BoneMan.js","import { Actor } from '#/entities/actors/Actor.js'\nimport { Game } from '#/Game.js'\nimport ROT from 'rot-js'\n\nimport { targetTypes, MagicDart, Regeneration, Pain, VampiricDraining, getNearbyCorpses, AnimateDead } from '#/magic/Spell.js'\nimport { getVisibleTiles, getRandomInt } from '#/utils/HelperFunctions'\nexport default class Lich extends Actor {\n\tconstructor(x, y, id) {\n\t\tsuper(x, y, {\n\t\t\tid: id,\n\t\t\tname: 'Lich',\n\t\t\tdescription: 'Once a powerful necromancer, now transformed into a lich.',\n\t\t\tvisible: true,\n\t\t\tblocked: true,\n\t\t\tchasing: false,\n\t\t\tcombat: {\n\t\t\t\t/* options.combat, dedicated to all things related to combat */\n\t\t\t\tdescription: [' attacked '],\n\t\t\t\t/* max stats */\n\t\t\t\tmaxhp: 40,\n\t\t\t\tmaxmana: 25,\n\t\t\t\t/* current stats */\n\t\t\t\thp: 40,\n\t\t\t\tmana: 25,\n\t\t\t\tstr: 15,\n\t\t\t\tdef: 5,\n\t\t\t\t/* misc */\n\t\t\t\thostile: true,\n\t\t\t\trange: 7,\n\t\t\t\tinvulnerable: false\n\t\t\t}\n\t\t})\n\n\t\tthis.spells = {\n\t\t\tregeneration: new Regeneration({ cd: 0, maxCD: 15 }),\n\t\t\tpain: new Pain({ cd: 0, maxCD: 2 }),\n\t\t\tvampiricDraining: new VampiricDraining({ cd: 0, maxCD: 5 }),\n\t\t\tanimateDead: new AnimateDead({ cd: 0, maxCD: 7 })\n\t\t}\n\t}\n\n\tact() {\n\t\tGame.engine.lock()\n\t\t// reduce the cooldown of every spell by 1\n\t\tfor (let spell in this.spells) {\n\t\t\tthis.spells[spell].cd = this.spells[spell].cd === 0 ? 0 : this.spells[spell].cd - 1\n\t\t}\n\t\t// To make these computations more efficient, we can determine whether or not the SimpleEnemy\n\t\t// is rendered on the current game screen. If not, we shouldn't really worry about what the enemy can see\n\t\t// or its path to the player. So, we can essentially skip their turn.\n\t\tlet dx = Math.abs(this.x - Game.player.x)\n\t\tlet dy = Math.abs(this.y - Game.player.y)\n\t\tif (dx > Game.width / 2 || dy > Game.height / 2) {\n\t\t\tGame.engine.unlock()\n\t\t\tsuper.act()\n\t\t\treturn\n\t\t}\n\t\tif (!this.intro) {\n\t\t\tGame.log('You feel a sense of hopelessness and fear come over you.', 'crimson')\n\t\t\tGame.log('Something evil is nearby.', 'crimson')\n\t\t}\n\t\tthis.intro = true\n\n\t\tGame.player.recalculatePath()\n\n\t\tlet visibleTiles = getVisibleTiles(this)\n\t\tlet allVisibleActors = visibleTiles.reduce((actors, tile) => {\n\t\t\treturn actors.concat(tile.actors)\n\t\t}, [])\n\t\tlet pathToPlayer = []\n\n\t\tif (\n\t\t\tallVisibleActors.some(a => {\n\t\t\t\treturn a === Game.player\n\t\t\t})\n\t\t) {\n\t\t\tif (!this.chasing) Game.log(`A ${this.name} sees you.`, 'alert')\n\t\t\tthis.chasing = true\n\t\t\tGame.player.path.compute(this.x, this.y, function(x, y) {\n\t\t\t\tpathToPlayer.push([x, y])\n\t\t\t})\n\n\t\t\tlet lostHP = this.cb.maxhp - this.cb.hp\n\t\t\tlet nearbyCorpses = getNearbyCorpses(this)\n\t\t\tconst cooldown = spell => {\n\t\t\t\tspell.cd = spell.maxCD\n\t\t\t}\n\n\t\t\tconst getFarthestAwayTile = () => {\n\t\t\t\tlet nearbyTiles = findNearbyTiles()\n\t\t\t\tlet maxDist = playerDistToTile(nearbyTiles[0])\n\t\t\t\tlet farthestTile = nearbyTiles[0]\n\t\t\t\tfor (let tile of nearbyTiles) {\n\t\t\t\t\tlet currentDist = playerDistToTile(tile)\n\t\t\t\t\tif (currentDist >= maxDist) {\n\t\t\t\t\t\tmaxDist = currentDist\n\t\t\t\t\t\tfarthestTile = tile\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn farthestTile\n\t\t\t}\n\n\t\t\t// We can see the player\n\t\t\tif (pathToPlayer.length === 2) {\n\t\t\t\t// player is in melee range. we know we can hit pretty high against the player if he's in melee range, and probably kill them\n\t\t\t\tif (Game.player.cb.hp <= 15) {\n\t\t\t\t\t// melee attack\n\t\t\t\t\tlet newPos = pathToPlayer[1]\n\t\t\t\t\tthis.tryMove(newPos[0], newPos[1])\n\t\t\t\t\t// if we can't kill them, but vamp drain is up and we're missing some hp, use it\n\t\t\t\t} else if (lostHP >= 10 && this.spells.vampiricDraining.cd === 0) {\n\t\t\t\t\t// cast vampiric drain\n\t\t\t\t\tthis.spells.vampiricDraining.cast(Game.player, this)\n\t\t\t\t\tcooldown(this.spells.vampiricDraining)\n\t\t\t\t} else if (lostHP >= 25 && this.spells.regeneration.cd === 0) {\n\t\t\t\t\t// we're badly hurt even though we're at close range\n\t\t\t\t\t// so we cast regenerate to get some hp\n\t\t\t\t\tthis.spells.regeneration.cast(this, this)\n\t\t\t\t\tcooldown(this.spells.regeneration)\n\t\t\t\t} else {\n\t\t\t\t\t// we can't regenerate or drain with vamp, so we need to either raise the undead around us, fight, or flee\n\t\t\t\t\tif (nearbyCorpses.length >= 2 && this.spells.animateDead.cd === 0) {\n\t\t\t\t\t\tthis.spells.animateDead.cast(this, this)\n\t\t\t\t\t\tcooldown(this.spells.animateDead)\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// TODO: add logic to run away from the player\n\t\t\t\t\t\t// melee attack\n\t\t\t\t\t\tlet newPos = pathToPlayer[1]\n\t\t\t\t\t\tthis.tryMove(newPos[0], newPos[1])\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// player is not in melee range (we cast raise undead, regenerate, pain, or attempt to move away from the player)\n\t\t\t\tif (Game.player.cb.hp <= 9 && this.spells.pain.cd === 0) {\n\t\t\t\t\tthis.spells.pain.cast(Game.player, this)\n\t\t\t\t\tcooldown(this.spells.pain)\n\t\t\t\t} else if (nearbyCorpses.length >= 2 && this.spells.animateDead.cd === 0) {\n\t\t\t\t\tthis.spells.animateDead.cast(this, this)\n\t\t\t\t\tcooldown(this.spells.animateDead)\n\t\t\t\t} else if (lostHP >= 25 && this.spells.regeneration.cd === 0) {\n\t\t\t\t\t// we're badly hurt even though we're at close range\n\t\t\t\t\t// so we cast regenerate to get some hp\n\t\t\t\t\tthis.spells.regeneration.cast(this, this)\n\t\t\t\t\tcooldown(this.spells.regeneration)\n\t\t\t\t} else if (this.spells.pain.cd === 0) {\n\t\t\t\t\tthis.spells.pain.cast(Game.player, this)\n\t\t\t\t\tcooldown(this.spells.pain)\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t// player is not in field of view. if we are low on hp, cast regenerate. if corpses are nearby, raise them\n\t\t\tlet dx = this.x + getRandomInt(-1, 1)\n\t\t\tlet dy = this.y + getRandomInt(-1, 1)\n\t\t\tthis.tryMove(dx, dy)\n\t\t}\n\n\t\tGame.engine.unlock()\n\t\tsuper.act()\n\t}\n\n\tinteract(actor) {\n\t\tif (actor === Game.player) {\n\t\t\tlet dmg = this.attack(actor)\n\t\t} else {\n\t\t\tactor.react(this)\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/boss/Lich.js","import { Game, tileset } from '#/Game.js'\nimport Tile, { getTileInfo } from '#/map/Tile.js'\nimport { createActor, createItem } from '#/utils/EntityFactory.js'\n\nexport function createMapFromJSON(json, name) {\n\tlet { layers, width, height } = json\n\tlet gameMap = new GameMap(width, height, name)\n\tgameMap.createFromJSON(json)\n\tgameMap.revealed = true\n\tgameMap.type = 'static'\n\treturn gameMap\n}\n\n/**\n * Created by Larken on 6/28/2017.\n */\nexport class GameMap {\n\tconstructor(width, height, name) {\n\t\tthis.name = name\n\t\tthis.loadedIDS = []\n\t\tthis.playerLocation = null // this field is used exclusively for saving the player's last location before they change levels\n\t\tthis.width = width\n\t\tthis.height = height\n\t\tthis.actors = [] // store all of the actors in array\n\t\tthis.data = new Array(this.height) // stores all tiles in the game\n\t\tthis.visible_tiles = {}\n\t\tthis.seen_tiles = {}\n\t\tthis.visited = false\n\t\t// Intialize all of the tiles...\n\t\tfor (let i = 0; i < this.height; i++) {\n\t\t\tthis.data[i] = new Array(this.width)\n\t\t\tfor (let j = 0; j < this.width; j++) {\n\t\t\t\tthis.data[i][j] = new Tile(j, i)\n\t\t\t}\n\t\t}\n\t\t// Process all of the json layers\n\t\t// process the group layers last. this is specifically for placing static itemsets into treasure chests in the overworld.\n\t\t// process it last so that all of the chest entities have been created already\n\t}\n\n\tgetTile(x, y) {\n\t\treturn this.data[y][x]\n\t}\n\n\tcreateFromJSON({ layers }) {\n\t\tlet itemLayers = []\n\t\tlet portalLayers = []\n\t\tfor (let layer of layers) {\n\t\t\tif (layer.type === 'tilelayer') this.processTileLayer(layer)\n\t\t\telse if (layer.type === 'objectgroup') this.processObjectGroupLayer(layer)\n\t\t\telse throw 'A layer has been added to the map and is invalid'\n\t\t}\n\t}\n\n\tprocessTileLayer(layer) {\n\t\tfor (let i = 0; i < this.height; i++) {\n\t\t\tfor (let j = 0; j < this.width; j++) {\n\t\t\t\t// Grabs the ID from the layer\n\t\t\t\tlet id = layer.data[i * this.width + j] - 1\n\t\t\t\tif (id > 1) {\n\t\t\t\t\tGame.loadedIDS.push(id)\n\t\t\t\t\tthis.data[i][j].updateTileInfo(id)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcreateActorFromObject(object) {\n\t\tconst { gid, x, y, properties } = object\n\t\tif (properties.entity_type === undefined) {\n\t\t\tconsole.error(`No entity type given in properties for object ${object}`)\n\t\t\treturn\n\t\t}\n\t\tconst { entity_type } = properties\n\t\tlet nx = x / 32\n\t\tlet ny = y / 32 - 1 // for some reason, TILED objects y position are 1-indexed..?\n\t\tlet entity = properties.item ? createItem(entity_type, nx, ny, gid - 1) : createActor(entity_type, nx, ny, gid - 1)\n\t\tif (properties.item) entity.inInventory = false\n\t\tif (properties.items !== undefined) {\n\t\t\tlet items = properties.items.split(',').map(i => createItem(i.trim(), nx, ny))\n\t\t\titems.forEach(item => entity.addToInventory(item))\n\t\t}\n\t\t/* Post entity creation clean up... */\n\t\tif (entity_type === 'NPC') {\n\t\t\t// add NPC routines if any exist...\n\t\t\t// NPCs may have items too!\n\t\t\tentity.wanders = properties.wanders\n\t\t} else if (entity_type === 'LADDER' || entity_type === 'LEVEL_TRANSITION') {\n\t\t\t// ladders & level transitions have portal ID's\n\t\t\tentity.portal = properties.portalID\n\t\t\tentity.createDungeon = properties.createDungeon\n\t\t\tif (entity_type === 'LADDER') entity.direction = properties.direction\n\t\t}\n\t\tthis.actors.push(entity)\n\t\tthis.getTile(nx, ny).actors.push(entity)\n\t}\n\n\tprocessObjectGroupLayer(layer) {\n\t\t// for each object, there is one entity to add to the map\n\t\tfor (let object of layer.objects) {\n\t\t\tif (object.properties.entity_type === 'PLAYER') {\n\t\t\t\tthis.playerLocation = [object.x / 32, object.y / 32 - 1] // for some reason, TILED objects y position are 1-indexed..?\n\t\t\t} else {\n\t\t\t\tthis.createActorFromObject(object)\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/map/GameMap.js","/**\r\n * Created by larken on 7/4/17.\r\n */\r\nimport ROT from 'rot-js'\r\nimport { Game } from '#/Game.js'\r\nimport { GameMap } from '#/map/GameMap.js'\r\nimport Player from '#/entities/actors/Player.js'\r\nimport NPC from '#/entities/actors/NPC.js'\r\n// Enemies\r\nimport Goblin from '#/entities/actors/enemies/Goblin.js'\r\nimport Kobold from '#/entities/actors/enemies/Kobold.js'\r\nimport Orc from '#/entities/actors/enemies/Orc.js'\r\nimport Rat from '#/entities/actors/enemies/Rat.js'\r\nimport Bat from '#/entities/actors/enemies/Bat.js'\r\nimport Skeleton from '#/entities/actors/enemies/Skeleton.js'\r\nimport Zombie from '#/entities/actors/enemies/Zombie.js'\r\nimport { Corpse, corpseTypes } from '#/entities/items/misc/Corpse.js'\r\n\r\nimport Lich from '#/entities/actors/enemies/boss/Lich.js'\r\n// Items\r\n// Weapons\r\nimport { createSword, Sword } from '#/entities/items/weapons/Sword.js'\r\nimport { Bow, createBow } from '#/entities/items/weapons/ranged/Bow.js'\r\nimport { SteelArrow } from '#/entities/items/weapons/ranged/ammo/Arrow.js'\r\n// Potions\r\nimport HealthPotion from '#/entities/items/potions/HealthPotion.js'\r\nimport StrengthPotion from '#/entities/items/potions/StrengthPotion.js'\r\nimport ManaPotion from '#/entities/items/potions/ManaPotion.js'\r\n// Misc\r\nimport Chest from '#/entities/misc/Chest.js'\r\nimport Door from '#/entities/misc/Door.js'\r\nimport LockedDoor from '#/entities/misc/LockedDoor.js'\r\nimport Key from '#/entities/items/misc/Key.js'\r\nimport { NecromancySpellBook } from '#/entities/items/misc/Spellbook.js'\r\nimport Ladder from '#/entities/misc/Ladder.js'\r\nimport LevelTransition from '#/entities/misc/LevelTransition.js'\r\nimport { getRandomInt, getNormalRandomInt, randomProperty } from '#/utils/HelperFunctions.js'\r\n\r\nconst actorTextures = {\r\n\tORC: [5292, 5293, 5294, 5295, 5296, 5297, 5299],\r\n\tEMPOWERED_ORC: [5298],\r\n\tGOBLIN: [7440, 7441, 7442, 7443, 7444, 7445, 7446],\r\n\tRAT: [2365],\r\n\tBAT: [3704, 3706],\r\n\tKOBOLD: [5532, 5533, 5534, 5535, 5536, 5537, 5538, 5539]\r\n}\r\n\r\nconst flatten = arr => arr.reduce((acc, val) => acc.concat(Array.isArray(val) ? flatten(val) : val), [])\r\n\r\n// function that will yield a random free space in the room\r\nconst randomTile = validTiles => {\r\n\tlet index = getRandomInt(0, validTiles.length) // index of a tile\r\n\tlet tile = validTiles.splice(index, 1)\r\n\tif (tile.length === 1) {\r\n\t\treturn tile[0].split(',').map(e => Number(e))\r\n\t} else {\r\n\t\treturn null\r\n\t}\r\n}\r\n\r\nexport function randomCave(width, height, dir, level = 1) {\r\n\tlet map = {}\r\n\tlet createdLadders = 0\r\n\tmap.revealed = true\r\n\tmap.width = width\r\n\tmap.height = height\r\n\tmap.layers = [\r\n\t\t{\r\n\t\t\tdata: [],\r\n\t\t\tproperties: {\r\n\t\t\t\tobstacles: true\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tdata: [],\r\n\t\t\tproperties: {\r\n\t\t\t\tobstacles: true\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tdata: [],\r\n\t\t\tproperties: {\r\n\t\t\t\tactors: true\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tdata: [],\r\n\t\t\tproperties: {\r\n\t\t\t\tactors: true\r\n\t\t\t}\r\n\t\t}\r\n\t]\r\n\tlet freeCells = {}\r\n\tlet mapCallback = function(x, y, blocked) {\r\n\t\tif (!blocked) freeCells[x + ',' + y] = true\r\n\t}\r\n\tlet cellularMap = new ROT.Map.Cellular(width, height)\r\n\tcellularMap.randomize(0.5)\r\n\tfor (let i = 0; i < 10; i++) cellularMap.create()\r\n\r\n\tcellularMap.connect(mapCallback)\r\n\r\n\t// Initialize obstacles and actors\r\n\tfor (let j = 0; j < height; j++) {\r\n\t\tfor (let l = 0; l < map.layers.length; l++) map.layers[l].data.push([])\r\n\r\n\t\tfor (let i = 0; i < width; i++) {\r\n\t\t\tif (i + ',' + j in freeCells) map.layers[0].data[j].push(9297 + 1)\r\n\t\t\telse map.layers[0].data[j].push(9200 + 1)\r\n\r\n\t\t\tmap.layers[1].data[j].push(0)\r\n\t\t\tmap.layers[2].data[j].push(0)\r\n\t\t\tmap.layers[3].data[j].push(0)\r\n\t\t}\r\n\t}\r\n\r\n\tlet walls = {\r\n\t\tupperLeft: 9197,\r\n\t\ttop: 9198,\r\n\t\tupperRight: 9199,\r\n\t\tleft: 9317,\r\n\t\tcenter: 9318,\r\n\t\tright: 9317,\r\n\t\tlowerLeft: 9437,\r\n\t\tbottom: 9198,\r\n\t\tlowerRight: 9439,\r\n\t\tendBottom: 9318,\r\n\t\tendTop: 9319,\r\n\r\n\t\tmiddleT: 9201,\r\n\t\tmiddleIntersection: 9321\r\n\t}\r\n\r\n\tlet floors = {\r\n\t\tupperLeft: 9176,\r\n\t\ttop: 9177,\r\n\t\tupperRight: 9178,\r\n\t\tleft: 9296,\r\n\t\tcenter: 9297,\r\n\t\tright: 9298,\r\n\t\tlowerLeft: 9416,\r\n\t\tbottom: 9417,\r\n\t\tlowerRight: 9418,\r\n\r\n\t\tendLeft: 9300,\r\n\t\tmiddleCorridorHorizontal: 9301,\r\n\t\tendRight: 9302,\r\n\r\n\t\tendTop: 9179,\r\n\t\tmiddleCorridorVertical: 9299,\r\n\t\tendBottom: 9419,\r\n\r\n\t\tsingle: 9181\r\n\t}\r\n\r\n\tlet computeBitmask = (x, y) => {\r\n\t\tlet sum = 0\r\n\t\tlet above = `${x},${y - 1}`\r\n\t\tlet below = `${x},${y + 1}`\r\n\t\tlet left = `${x - 1},${y}`\r\n\t\tlet right = `${x + 1},${y}`\r\n\r\n\t\tlet ur = `${x + 1},${y - 1}`\r\n\t\tlet ll = `${x - 1},${y + 1}`\r\n\r\n\t\tlet ul = `${x - 1},${y - 1}`\r\n\t\tlet lr = `${x + 1},${y + 1}`\r\n\r\n\t\tlet free = coords => {\r\n\t\t\treturn coords in freeCells\r\n\t\t}\r\n\r\n\t\tif (free(above)) sum += 1\r\n\t\tif (free(right)) sum += 2\r\n\t\tif (free(below)) sum += 4\r\n\t\tif (free(left)) sum += 8\r\n\r\n\t\tif (sum == 0) {\r\n\t\t\tif ((free(ll) && free(ur)) || (free(ul) && free(lr))) return 21\r\n\t\t\telse if (free(ul) && free(above) && free(lr)) return 20\r\n\t\t\telse if (free(lr) && free(below) && free(ul)) return 20\r\n\t\t\telse if (free(ul)) return 16\r\n\t\t\telse if (free(ur)) return 17\r\n\t\t\telse if (free(ll)) return 18\r\n\t\t\telse if (free(lr)) return 19\r\n\t\t}\r\n\r\n\t\treturn sum\r\n\t}\r\n\r\n\tlet wallSums = {\r\n\t\t/*\r\n            ? 0 ?\r\n            0 0 0\r\n            ? 0 ?\r\n        */\r\n\t\t0: 7046, // empty space (black spot)\r\n\t\t/*\r\n            ? 1 ?\r\n            0 0 0\r\n            ? 0 ?\r\n        */\r\n\t\t1: walls.bottom,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 0 1\r\n            ? 0 ?\r\n        */\r\n\t\t2: walls.left,\r\n\t\t/*\r\n            ? 1 ?\r\n            0 0 1\r\n            ? 0 ?\r\n        */\r\n\t\t3: walls.upperRight,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 0 0\r\n            ? 1 ?\r\n        */\r\n\t\t4: walls.top,\r\n\t\t/*\r\n            ? 1 ?\r\n            0 0 0\r\n            ? 1 ?\r\n        */\r\n\t\t5: walls.top,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 0 1\r\n            ? 1 ?\r\n        */\r\n\t\t6: walls.lowerRight,\r\n\t\t/*\r\n            ? 1 ?\r\n            0 0 1\r\n            ? 1 ?\r\n        */\r\n\t\t7: walls.bottom, // this case is a hard one. Need a new tile that properly ends a wall in one tile\r\n\t\t/*\r\n            ? 0 ?\r\n            1 0 0\r\n            ? 0 ?\r\n        */\r\n\t\t8: walls.right,\r\n\t\t/*\r\n            ? 1 ?\r\n            1 0 0\r\n            ? 0 ?\r\n        */\r\n\t\t9: walls.upperLeft,\r\n\t\t/*\r\n            ? 0 ?\r\n            1 0 1\r\n            ? 0 ?\r\n        */\r\n\t\t10: walls.left, // vertical\r\n\t\t/*\r\n            ? 1 ?\r\n            1 0 1\r\n            ? 0 ?\r\n        */\r\n\t\t11: walls.endTop,\r\n\t\t/*\r\n            ? 0 ?\r\n            1 0 0\r\n            ? 1 ?\r\n        */\r\n\t\t12: walls.lowerLeft,\r\n\t\t/*\r\n            ? 1 ?\r\n            1 0 0\r\n            ? 1 ?\r\n        */\r\n\t\t13: walls.bottom,\r\n\t\t/*\r\n            ? 0 ?\r\n            1 0 1\r\n            ? 1 ?\r\n        */\r\n\t\t14: walls.endBottom,\r\n\t\t/*\r\n            ? 1 ?\r\n            1 0 1\r\n            ? 1 ?\r\n        */\r\n\t\t15: walls.center,\r\n\t\t/*\r\n            1 0 ?\r\n            0 0 0\r\n            ? 0 ?\r\n        */\r\n\t\t16: walls.lowerRight,\r\n\t\t/*\r\n            ? 0 1\r\n            0 0 0\r\n            ? 0 ?\r\n        */\r\n\t\t17: walls.lowerLeft,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 0 0\r\n            1 0 ?\r\n        */\r\n\t\t18: walls.upperRight,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 0 0\r\n            ? 0 1\r\n        */\r\n\t\t19: walls.upperLeft,\r\n\t\t/*\r\n            1 1 0    1 0 0\r\n            0 0 0 || 0 0 0\r\n            0 0 1    0 1 1\r\n        */\r\n\t\t20: walls.middleT,\r\n\t\t/*\r\n            0 0 1    1 0 0\r\n            0 0 0 || 0 0 0\r\n            1 0 0    0 0 1\r\n        */\r\n\t\t21: walls.middleIntersection\r\n\t}\r\n\r\n\tlet floorSums = {\r\n\t\t/*\r\n            ? 0 ?\r\n            0 1 0\r\n            ? 0 ?\r\n        */\r\n\t\t0: floors.single, // empty space (black spot)\r\n\t\t/*\r\n            ? 1 ?\r\n            0 1 0\r\n            ? 0 ?\r\n        */\r\n\t\t1: floors.endBottom,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 1 1\r\n            ? 0 ?\r\n        */\r\n\t\t2: floors.endLeft,\r\n\t\t/*\r\n            ? 1 ?\r\n            0 1 1\r\n            ? 0 ?\r\n        */\r\n\t\t3: floors.lowerLeft,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 1 0\r\n            ? 1 ?\r\n        */\r\n\t\t4: floors.endTop,\r\n\t\t/*\r\n            ? 1 ?\r\n            0 1 0\r\n            ? 1 ?\r\n        */\r\n\t\t5: floors.middleCorridorVertical,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 1 1\r\n            ? 1 ?\r\n        */\r\n\t\t6: floors.upperLeft,\r\n\t\t/*\r\n            ? 1 ?\r\n            0 1 1\r\n            ? 1 ?\r\n        */\r\n\t\t7: floors.left, // this case is a hard one. Need a new tile that properly ends a wall in one tile\r\n\t\t/*\r\n            ? 0 ?\r\n            1 1 0\r\n            ? 0 ?\r\n        */\r\n\t\t8: floors.endRight,\r\n\t\t/*\r\n            ? 1 ?\r\n            1 1 0\r\n            ? 0 ?\r\n        */\r\n\t\t9: floors.lowerRight,\r\n\t\t/*\r\n            ? 0 ?\r\n            1 1 1\r\n            ? 0 ?\r\n        */\r\n\t\t10: floors.middleCorridorHorizontal, // vertical\r\n\t\t/*\r\n            ? 1 ?\r\n            1 1 1\r\n            ? 0 ?\r\n        */\r\n\t\t11: floors.bottom,\r\n\t\t/*\r\n            ? 0 ?\r\n            1 1 0\r\n            ? 1 ?\r\n        */\r\n\t\t12: floors.upperRight,\r\n\t\t/*\r\n            ? 1 ?\r\n            1 1 0\r\n            ? 1 ?\r\n        */\r\n\t\t13: floors.right,\r\n\t\t/*\r\n            ? 0 ?\r\n            1 1 1\r\n            ? 1 ?\r\n        */\r\n\t\t14: floors.top,\r\n\t\t/*\r\n            ? 1 ?\r\n            1 1 1\r\n            ? 1 ?\r\n        */\r\n\t\t15: floors.center,\r\n\t\t/*\r\n            1 0 ?\r\n            0 1 0\r\n            ? 0 ?\r\n        */\r\n\t\t16: floors.single,\r\n\t\t/*\r\n            ? 0 1\r\n            0 1 0\r\n            ? 0 ?\r\n        */\r\n\t\t17: floors.single,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 1 0\r\n            1 0 ?\r\n        */\r\n\t\t18: floors.single,\r\n\t\t/*\r\n            ? 0 ?\r\n            0 1 0\r\n            ? 0 1\r\n        */\r\n\t\t19: floors.lowerLeft,\r\n\t\t/*\r\n            1 1 0    1 0 0\r\n            0 1 0 || 0 1 0\r\n            0 0 1    0 1 1\r\n        */\r\n\t\t20: floors.middleT\r\n\t}\r\n\r\n\t// we want to start +1 from the top and left, and bottom and right -1\r\n\tfor (let y = 0; y < height; y++) {\r\n\t\tfor (let x = 0; x < width; x++) {\r\n\t\t\tif (!(`${x},${y}` in freeCells)) {\r\n\t\t\t\t// only want to place a wall somewhere if it's not a free cell\r\n\t\t\t\tlet sum = computeBitmask(x, y)\r\n\t\t\t\tlet sym = wallSums[sum] + 1\r\n\t\t\t\tmap.layers[0].data[y][x] = sym\r\n\t\t\t} else {\r\n\t\t\t\tlet sum = computeBitmask(x, y)\r\n\t\t\t\tlet sym = floorSums[sum] + 1\r\n\t\t\t\tmap.layers[0].data[y][x] = sym\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tlet validTiles = Object.keys(freeCells)\r\n\t// Randomly select starting position for player\r\n\tlet start = randomTile(validTiles)\r\n\tif (start === null) throw 'Could not find an open spot on the map to place the player!'\r\n\r\n\tmap.layers[2].data[start[1]][start[0]] = Game.playerID // set random spot to be the player\r\n\tmap.layers[3].data[start[1]][start[0]] = dir === 'down' ? 238 : 237 // place a ladder going back up a level underneath the player.\r\n\r\n\tlet ladderGoingDown = randomTile(validTiles)\r\n\tmap.layers[2].data[ladderGoingDown[1]][ladderGoingDown[0]] = dir === 'down' ? 237 : 238\r\n\tladderGoingDown = randomTile(validTiles)\r\n\tmap.layers[2].data[ladderGoingDown[1]][ladderGoingDown[0]] = dir === 'down' ? 237 : 238\r\n\r\n\tlet roll = getNormalRandomInt(7 + level, 25 + level)\r\n\tfor (let i = 0; i < roll; i++) {\r\n\t\tlet coords = randomTile(validTiles)\r\n\t\tif (coords === null) break\r\n\t\tlet chosenMob = ROT.RNG.getWeightedValue(mobDistribution)\r\n\t\tlet mobArray = actorTextures[chosenMob]\r\n\t\tlet actor = createActor(chosenMob)\r\n\t\tlet randomMob = mobArray[getRandomInt(0, mobArray.length - 1)] + 1\r\n\t\tmap.layers[2].data[coords[1]][coords[0]] = randomMob\r\n\t}\r\n\r\n\t// Flatten the layers to mimic Tiled map data\r\n\tfor (let i = 0; i < map.layers.length; i++) map.layers[i].data = flatten(map.layers[i].data)\r\n\r\n\treturn map\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/map/generation/RandomCave.js","/**\n * Created by larken on 7/4/17.\n */\nimport ROT from 'rot-js'\nimport { Game } from '#/Game.js'\nimport { GameMap } from '#/map/GameMap.js'\nimport Player from '#/entities/actors/Player.js'\n\n// Misc\nimport Chest from '#/entities/misc/Chest.js'\nimport Door from '#/entities/misc/Door.js'\nimport LockedDoor from '#/entities/misc/LockedDoor.js'\nimport Key from '#/entities/items/misc/Key.js'\nimport { NecromancySpellBook } from '#/entities/items/misc/Spellbook.js'\nimport Ladder from '#/entities/misc/Ladder.js'\nimport LevelTransition from '#/entities/misc/LevelTransition.js'\nimport { getRandomInt, getNormalRandomInt, randomProperty, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\nimport { createActor } from '#/utils/EntityFactory.js'\n\nconst dungeonTypes = {\n\tRUINS: 'RUINS',\n\tCATACOMBS: 'CATACOMBS',\n\tMINE: 'MINE',\n\tICE: 'ICE',\n\tHELL: 'HELL'\n}\n\nconst dungeonThemes = {\n\tRUINS: {\n\t\ttint: null,\n\t\tmobDistribution: {\n\t\t\t// TROLL: 1,\n\t\t\t// MUMMY: 1,\n\t\t\t// GHOST: 1,\n\t\t\t// ICE_ELEMENTAL: 1,\n\t\t\t// GOLEM: 1,\n\t\t\t// IMP: 1,\n\t\t\t// SNAKE: 1,\n\t\t\t// SIREN: 1,\n\t\t\t// VAMPIRE: 1,\n\t\t\t// MINOTAUR: 1,\n\t\t\t// CYCLOPS: 1,\n\t\t\t// BANSHEE: 1,\n\t\t\t// DEMON: 1,\n\t\t\t// BONE_MAN: 1\n\t\t\tORC: 1,\n\t\t\tGOBLIN: 15,\n\t\t\tBAT: 10,\n\t\t\tRAT: 15,\n\t\t\tSNAKE: 10\n\t\t},\n\t\ttype: dungeonTypes.RUINS,\n\t\ttextures: {\n\t\t\tfloor: {\n\t\t\t\tupperLeft: 7736,\n\t\t\t\ttop: 7737,\n\t\t\t\tupperRight: 7738,\n\n\t\t\t\tleft: 7856,\n\t\t\t\tcenter: 7857,\n\t\t\t\tright: 7858,\n\n\t\t\t\tlowerLeft: 7976,\n\t\t\t\tbottom: 7977,\n\t\t\t\tlowerRight: 7978,\n\n\t\t\t\tendLeft: 7860,\n\t\t\t\tmiddleCorridorHorizontal: 7861,\n\t\t\t\tendRight: 7862,\n\n\t\t\t\tendTop: 7739,\n\t\t\t\tmiddleCorridorVertical: 7859,\n\t\t\t\tendBottom: 7979,\n\n\t\t\t\tsingle: 7740\n\t\t\t},\n\t\t\tcorridorFloor: {\n\t\t\t\thorizontal: {\n\t\t\t\t\tleft: 7861,\n\t\t\t\t\tmiddle: 7862,\n\t\t\t\t\tright: 7863\n\t\t\t\t},\n\t\t\t\tvertical: {\n\t\t\t\t\ttop: 7740,\n\t\t\t\t\tmiddle: 7860,\n\t\t\t\t\tbottom: 7980\n\t\t\t\t}\n\t\t\t},\n\t\t\twalls: {\n\t\t\t\tupperLeft: 8117,\n\t\t\t\ttop: 8118,\n\t\t\t\tupperRight: 8119,\n\t\t\t\tleft: 8237,\n\t\t\t\tcenter: 8238,\n\t\t\t\tright: 8237,\n\t\t\t\tlowerLeft: 8357,\n\t\t\t\tbottom: 8118,\n\t\t\t\tlowerRight: 8359,\n\t\t\t\tendBottom: 8238,\n\t\t\t\tendTop: 8239,\n\t\t\t\tisland: 8120,\n\n\t\t\t\tleftT: 8242,\n\t\t\t\tmiddleT: 8241,\n\t\t\t\trightT: 8240,\n\t\t\t\ttopT: 8121,\n\t\t\t\tbottomT: 8361\n\t\t\t},\n\t\t\tdoors: {\n\t\t\t\tvertical: 569,\n\t\t\t\thorizontal: 568\n\t\t\t}\n\t\t}\n\t},\n\tCATACOMBS: {\n\t\ttype: dungeonTypes.CATACOMBS,\n\t\ttint: null,\n\t\tmobDistribution: {\n\t\t\tZOMBIE: 30,\n\t\t\tSKELETON: 30,\n\t\t\tMUMMY: 30,\n\t\t\tGHOST: 10,\n\t\t\tBANSHEE: 5,\n\t\t\tVAMPIRE: 1\n\t\t},\n\t\ttextures: {\n\t\t\tfloor: {\n\t\t\t\tupperLeft: 8096,\n\t\t\t\ttop: 8097,\n\t\t\t\tupperRight: 8098,\n\t\t\t\tleft: 8216,\n\t\t\t\tcenter: 8217,\n\t\t\t\tright: 8218,\n\t\t\t\tlowerLeft: 8336,\n\t\t\t\tbottom: 8337,\n\t\t\t\tlowerRight: 8338,\n\t\t\t\tendLeft: 8220,\n\t\t\t\tmiddleCorridorHorizontal: 8221,\n\t\t\t\tendRight: 8222,\n\t\t\t\tendTop: 8099,\n\t\t\t\tmiddleCorridorVertical: 8219,\n\t\t\t\tendBottom: 8339,\n\t\t\t\tsingle: 8100\n\t\t\t},\n\t\t\tcorridorFloor: {\n\t\t\t\thorizontal: {\n\t\t\t\t\tleft: 8221,\n\t\t\t\t\tmiddle: 8222,\n\t\t\t\t\tright: 8223\n\t\t\t\t},\n\t\t\t\tvertical: {\n\t\t\t\t\ttop: 8100,\n\t\t\t\t\tmiddle: 8220,\n\t\t\t\t\tbottom: 8340\n\t\t\t\t}\n\t\t\t},\n\t\t\twalls: {\n\t\t\t\tupperLeft: 8477,\n\t\t\t\ttop: 8478,\n\t\t\t\tupperRight: 8479,\n\t\t\t\tleft: 8597,\n\t\t\t\tcenter: 8598,\n\t\t\t\tright: 8597,\n\t\t\t\tlowerLeft: 8717,\n\t\t\t\tbottom: 8478,\n\t\t\t\tlowerRight: 8719,\n\t\t\t\tendBottom: 8598,\n\t\t\t\tendTop: 8599,\n\t\t\t\tisland: 8480,\n\t\t\t\tleftT: 8602,\n\t\t\t\tmiddleT: 8601,\n\t\t\t\trightT: 8600,\n\t\t\t\ttopT: 8481,\n\t\t\t\tbottomT: 8721\n\t\t\t},\n\t\t\tdoors: {\n\t\t\t\tvertical: 569,\n\t\t\t\thorizontal: 568\n\t\t\t}\n\t\t}\n\t},\n\tMINE: {\n\t\ttype: dungeonTypes.MINE,\n\t\ttint: null,\n\t\tmobDistribution: {\n\t\t\tKOBOLD: 2,\n\t\t\tMINOTAUR: 1,\n\t\t\tGOBLIN: 5,\n\t\t\tORC: 5,\n\t\t\tEMPOWERED_ORC: 5,\n\t\t\tBONE_MAN: 10,\n\t\t\tGOLEM: 1\n\t\t},\n\t\ttextures: {\n\t\t\tfloor: {\n\t\t\t\tupperLeft: 9176,\n\t\t\t\ttop: 9177,\n\t\t\t\tupperRight: 9178,\n\t\t\t\tleft: 9296,\n\t\t\t\tcenter: 9297,\n\t\t\t\tright: 9298,\n\t\t\t\tlowerLeft: 9416,\n\t\t\t\tbottom: 9417,\n\t\t\t\tlowerRight: 9418,\n\t\t\t\tendLeft: 9300,\n\t\t\t\tmiddleCorridorHorizontal: 9301,\n\t\t\t\tendRight: 9302,\n\t\t\t\tendTop: 9179,\n\t\t\t\tmiddleCorridorVertical: 9299,\n\t\t\t\tendBottom: 9419,\n\t\t\t\tsingle: 9180\n\t\t\t},\n\t\t\tcorridorFloor: {\n\t\t\t\thorizontal: {\n\t\t\t\t\tleft: 9301,\n\t\t\t\t\tmiddle: 9302,\n\t\t\t\t\tright: 9303\n\t\t\t\t},\n\t\t\t\tvertical: {\n\t\t\t\t\ttop: 9180,\n\t\t\t\t\tmiddle: 9300,\n\t\t\t\t\tbottom: 9420\n\t\t\t\t}\n\t\t\t},\n\t\t\twalls: {\n\t\t\t\tupperLeft: 7771,\n\t\t\t\ttop: 7772,\n\t\t\t\tupperRight: 7773,\n\t\t\t\tleft: 7891,\n\t\t\t\tcenter: 7892,\n\t\t\t\tright: 7891,\n\t\t\t\tlowerLeft: 8011,\n\t\t\t\tbottom: 7772,\n\t\t\t\tlowerRight: 8013,\n\t\t\t\tendBottom: 7892,\n\t\t\t\tendTop: 7893,\n\t\t\t\tisland: 7774,\n\t\t\t\tleftT: 7896,\n\t\t\t\tmiddleT: 7895,\n\t\t\t\trightT: 7894,\n\t\t\t\ttopT: 7775,\n\t\t\t\tbottomT: 8015\n\t\t\t},\n\t\t\tdoors: {\n\t\t\t\tvertical: 569,\n\t\t\t\thorizontal: 568\n\t\t\t}\n\t\t}\n\t},\n\tICE: {\n\t\ttype: dungeonTypes.ICE,\n\t\ttint: null,\n\t\tmobDistribution: {\n\t\t\tCYCLOPS: 1,\n\t\t\tTROLL: 3,\n\t\t\tMINOTAUR: 1,\n\t\t\tICE_ELEMENTAL: 3,\n\t\t\tSKELETON: 20,\n\t\t\tIMP: 10,\n\t\t\tSIREN: 1\n\t\t},\n\t\ttextures: {\n\t\t\tfloor: {\n\t\t\t\tupperLeft: 7376,\n\t\t\t\ttop: 7377,\n\t\t\t\tupperRight: 7378,\n\t\t\t\tleft: 7496,\n\t\t\t\tcenter: 7497,\n\t\t\t\tright: 7498,\n\t\t\t\tlowerLeft: 7616,\n\t\t\t\tbottom: 7617,\n\t\t\t\tlowerRight: 7618,\n\t\t\t\tendLeft: 7500,\n\t\t\t\tmiddleCorridorHorizontal: 7501,\n\t\t\t\tendRight: 7502,\n\t\t\t\tendTop: 7379,\n\t\t\t\tmiddleCorridorVertical: 7499,\n\t\t\t\tendBottom: 7619,\n\t\t\t\tsingle: 7380\n\t\t\t},\n\t\t\tcorridorFloor: {\n\t\t\t\thorizontal: {\n\t\t\t\t\tleft: 7501,\n\t\t\t\t\tmiddle: 7502,\n\t\t\t\t\tright: 7503\n\t\t\t\t},\n\t\t\t\tvertical: {\n\t\t\t\t\ttop: 7380,\n\t\t\t\t\tmiddle: 7500,\n\t\t\t\t\tbottom: 7620\n\t\t\t\t}\n\t\t\t},\n\t\t\twalls: {\n\t\t\t\tupperLeft: 7757,\n\t\t\t\ttop: 7758,\n\t\t\t\tupperRight: 7759,\n\t\t\t\tleft: 7877,\n\t\t\t\tcenter: 7878,\n\t\t\t\tright: 7877,\n\t\t\t\tlowerLeft: 7997,\n\t\t\t\tbottom: 7758,\n\t\t\t\tlowerRight: 7999,\n\t\t\t\tendBottom: 7878,\n\t\t\t\tendTop: 7879,\n\t\t\t\tisland: 7760,\n\t\t\t\tleftT: 7882,\n\t\t\t\tmiddleT: 7881,\n\t\t\t\trightT: 7880,\n\t\t\t\ttopT: 7761,\n\t\t\t\tbottomT: 8001\n\t\t\t},\n\t\t\tdoors: {\n\t\t\t\tvertical: 569,\n\t\t\t\thorizontal: 568\n\t\t\t}\n\t\t}\n\t},\n\tHELL: {\n\t\ttype: dungeonTypes.HELL,\n\t\ttint: '0xba1b21',\n\t\tmobDistribution: {\n\t\t\tORC: 2,\n\t\t\tEMPOWERED_ORC: 1,\n\t\t\tKOBOLD: 1,\n\t\t\tGOBLIN: 7,\n\t\t\tBAT: 10,\n\t\t\tRAT: 10\n\t\t},\n\t\ttextures: {\n\t\t\tfloor: {\n\t\t\t\tupperLeft: 7736,\n\t\t\t\ttop: 7737,\n\t\t\t\tupperRight: 7738,\n\t\t\t\tleft: 7856,\n\t\t\t\tcenter: 7857,\n\t\t\t\tright: 7858,\n\t\t\t\tlowerLeft: 7976,\n\t\t\t\tbottom: 7977,\n\t\t\t\tlowerRight: 7978,\n\t\t\t\tendLeft: 7860,\n\t\t\t\tmiddleCorridorHorizontal: 7861,\n\t\t\t\tendRight: 7862,\n\t\t\t\tendTop: 7739,\n\t\t\t\tmiddleCorridorVertical: 7859,\n\t\t\t\tendBottom: 7979,\n\t\t\t\tsingle: 7740\n\t\t\t},\n\t\t\tcorridorFloor: {\n\t\t\t\thorizontal: {\n\t\t\t\t\tleft: 7861,\n\t\t\t\t\tmiddle: 7862,\n\t\t\t\t\tright: 7863\n\t\t\t\t},\n\t\t\t\tvertical: {\n\t\t\t\t\ttop: 7740,\n\t\t\t\t\tmiddle: 7860,\n\t\t\t\t\tbottom: 7980\n\t\t\t\t}\n\t\t\t},\n\t\t\twalls: {\n\t\t\t\tupperLeft: 8117,\n\t\t\t\ttop: 8118,\n\t\t\t\tupperRight: 8119,\n\t\t\t\tleft: 8237,\n\t\t\t\tcenter: 8238,\n\t\t\t\tright: 8237,\n\t\t\t\tlowerLeft: 8357,\n\t\t\t\tbottom: 8118,\n\t\t\t\tlowerRight: 8359,\n\t\t\t\tendBottom: 8238,\n\t\t\t\tendTop: 8239,\n\t\t\t\tisland: 8120,\n\t\t\t\tleftT: 8242,\n\t\t\t\tmiddleT: 8241,\n\t\t\t\trightT: 8240,\n\t\t\t\ttopT: 8121,\n\t\t\t\tbottomT: 8361\n\t\t\t},\n\t\t\tdoors: {\n\t\t\t\tvertical: 569,\n\t\t\t\thorizontal: 568\n\t\t\t}\n\t\t}\n\t}\n}\n\nconst ladders = {\n\tup: 477,\n\tdown: 479\n}\n\nconst chestTexture = 57\n\nconst flatten = arr => arr.reduce((acc, val) => acc.concat(Array.isArray(val) ? flatten(val) : val), [])\nlet computeBitmaskFloors = (x, y, freeCells) => {\n\tlet sum = 0\n\tlet above = `${x},${y - 1}`\n\tlet below = `${x},${y + 1}`\n\tlet left = `${x - 1},${y}`\n\tlet right = `${x + 1},${y}`\n\n\tlet ur = `${x + 1},${y - 1}`\n\tlet ll = `${x - 1},${y + 1}`\n\n\tlet ul = `${x - 1},${y - 1}`\n\tlet lr = `${x + 1},${y + 1}`\n\n\tlet debug = () => {\n\t\tconsole.log(ul in freeCells, above in freeCells)\n\t}\n\n\tlet free = coord => {\n\t\treturn coord in freeCells\n\t}\n\n\tif (free(above)) sum += 1\n\tif (free(right)) sum += 2\n\tif (free(below)) sum += 4\n\tif (free(left)) sum += 8\n\tif (sum == 0) {\n\t\tif (free(ul)) {\n\t\t\treturn 16\n\t\t} else if (free(ur)) {\n\t\t\treturn 17\n\t\t} else if (free(ll)) {\n\t\t\treturn 18\n\t\t} else if (free(lr)) {\n\t\t\treturn 19\n\t\t}\n\t}\n\treturn sum\n}\nlet computeBitmaskWalls = (x, y, freeCells) => {\n\tlet sum = 0\n\tlet above = `${x},${y - 1}`\n\tlet below = `${x},${y + 1}`\n\tlet left = `${x - 1},${y}`\n\tlet right = `${x + 1},${y}`\n\n\tlet ur = `${x + 1},${y - 1}`\n\tlet ll = `${x - 1},${y + 1}`\n\n\tlet ul = `${x - 1},${y - 1}`\n\tlet lr = `${x + 1},${y + 1}`\n\n\tlet debug = () => {\n\t\tconsole.log(ul in freeCells, above in freeCells)\n\t}\n\n\tlet free = coord => {\n\t\treturn coord in freeCells\n\t}\n\n\tif (free(above)) sum += 1\n\tif (free(right)) sum += 2\n\tif (free(below)) sum += 4\n\tif (free(left)) sum += 8\n\tif (free(above) && !free(below) && !free(right) && !free(left) && (free(ll) || free(lr))) {\n\t\treturn 20\n\t}\n\tif (sum == 0) {\n\t\tif (free(ul)) return 16\n\t\telse if (free(ur)) return 17\n\t\telse if (free(ll)) return 18\n\t\telse if (free(lr)) return 19\n\t}\n\treturn sum\n}\n\n// function that will yield a random free space in the room\nconst randomTile = validTiles => {\n\tlet index = getRandomInt(0, validTiles.length) // index of a tile\n\tlet tile = validTiles.splice(index, 1)\n\tif (tile.length === 1) {\n\t\treturn tile[0].split(',').map(e => Number(e))\n\t} else {\n\t\treturn null\n\t}\n}\nconst sortCorridors = (a, b) => {\n\tif (a._startX === a._endX && b._startX !== b._endX) {\n\t\treturn -1\n\t} else if (b._startX === b._endX && a._startX !== a._endX) {\n\t\treturn 1\n\t} else {\n\t\treturn 0\n\t}\n}\nconst getFloorTexture = (floor, sum) => {\n\tconst mapping = {\n\t\t0: floor.single, // empty space (black spot)\n\t\t1: floor.endBottom,\n\t\t2: floor.endLeft,\n\t\t3: floor.lowerLeft,\n\t\t4: floor.endTop,\n\t\t5: floor.middleCorridorVertical,\n\t\t6: floor.upperLeft,\n\t\t7: floor.left, // this case is a hard one. Need a new tile that properly ends a wall in one tile\n\t\t8: floor.endRight,\n\t\t9: floor.lowerRight,\n\t\t10: floor.middleCorridorHorizontal, // vertical\n\t\t11: floor.bottom,\n\t\t12: floor.upperRight,\n\t\t13: floor.right,\n\t\t14: floor.top,\n\t\t15: floor.center,\n\t\t16: floor.single,\n\t\t17: floor.single,\n\t\t18: floor.single,\n\t\t19: floor.lowerLeft\n\t}\n\treturn mapping[sum]\n}\nconst getWallTexture = (walls, sum) => {\n\tconst wallSums = {\n\t\t0: 7026, // empty space (black spot)\n\t\t1: walls.bottom,\n\t\t2: walls.left,\n\t\t3: walls.upperRight,\n\t\t4: walls.top,\n\t\t5: walls.top,\n\t\t6: walls.lowerRight,\n\t\t7: walls.bottom, // this case is a hard one. Need a new tile that properly ends a wall in one tile\n\t\t8: walls.right,\n\t\t9: walls.upperLeft,\n\t\t10: walls.left, // vertical\n\t\t11: walls.endTop,\n\t\t12: walls.lowerLeft,\n\t\t13: walls.bottom,\n\t\t14: walls.endBottom,\n\t\t15: walls.center,\n\t\t16: walls.lowerRight,\n\t\t17: walls.lowerLeft,\n\t\t18: walls.upperRight,\n\t\t19: walls.upperLeft,\n\t\t20: walls.middleT\n\t}\n\treturn wallSums[sum]\n}\n\nexport function dungeonFromTheme(width, height, theme, mapGenerator, options, hasDoors = true) {\n\tlet { dungeonName, lastDungeon, fromPortal, toPortal, level } = options\n\tlet gameMap = new GameMap(width, height, dungeonName)\n\tconst { tint, type, textures, mobDistribution } = theme\n\tconst { floor, corridorFloor, walls, doors } = textures\n\t// Generate ROT map and store empty tiles in hashmap\n\tlet createdLadders = 0\n\tlet freeCells = {}\n\tlet mapGeneratorCallback = (x, y, blocked) => {\n\t\tif (!blocked) freeCells[x + ',' + y] = true\n\t}\n\tlet rotMap = mapGenerator.create(mapGeneratorCallback)\n\n\tfor (let room of rotMap.getRooms()) {\n\t\troom.getDoors((dx, dy) => {\n\t\t\tfreeCells[dx + ',' + dy] = true\n\t\t})\n\t}\n\n\t// Place walls and floors\n\tfor (let y = 0; y < height; y++) {\n\t\tfor (let x = 0; x < width; x++) {\n\t\t\tlet tile = gameMap.getTile(x, y)\n\t\t\tif (!(`${x},${y}` in freeCells)) {\n\t\t\t\t// only want to place a wall somewhere if it's not a free cell\n\t\t\t\tlet sym = getWallTexture(walls, computeBitmaskWalls(x, y, freeCells))\n\t\t\t\ttile.updateTileInfo(sym, tint)\n\t\t\t} else {\n\t\t\t\tlet sym = getFloorTexture(floor, computeBitmaskFloors(x, y, freeCells))\n\t\t\t\ttile.updateTileInfo(sym, tint)\n\t\t\t}\n\t\t}\n\t}\n\n\t/* For every room in the dungeon, we're going to add\n     * textures from the tileset for the walls and the floors */\n\tfor (let room of rotMap.getRooms()) {\n\t\tlet left = room.getLeft() - 1\n\t\tlet right = room.getRight() + 1\n\t\tlet top = room.getTop() - 1\n\t\tlet bottom = room.getBottom() + 1\n\t\tlet wleft = room.getLeft()\n\t\tlet wright = room.getRight()\n\t\tlet wtop = room.getTop()\n\t\tlet wbottom = room.getBottom()\n\t\tlet center = {\n\t\t\ty: ~~((wtop + wbottom) / 2),\n\t\t\tx: ~~((wright + wleft) / 2)\n\t\t}\n\n\t\t/* Set up the doors of the room */\n\t\tif (getRandomInt(1, 2) === 1 && hasDoors) {\n\t\t\troom.getDoors((dx, dy) => {\n\t\t\t\tlet floor_ids =\n\t\t\t\t\tObject.values(corridorFloor.vertical) +\n\t\t\t\t\tObject.values(floor) +\n\t\t\t\t\tObject.values(corridorFloor.horizontal) +\n\t\t\t\t\tObject.values(floor) // doors?\n\n\t\t\t\tlet above = gameMap.getTile(dx, dy - 1).obstacles[0].id\n\t\t\t\tlet below = gameMap.getTile(dx, dy + 1).obstacles[0].id\n\t\t\t\tlet door\n\t\t\t\tif (floor_ids.includes(above) && floor_ids.includes(below)) {\n\t\t\t\t\t// horizontal door frame\n\t\t\t\t\tdoor = new Door(dx, dy, doors.horizontal)\n\t\t\t\t} else {\n\t\t\t\t\t// vertical door frame\n\t\t\t\t\tdoor = new Door(dx, dy, doors.vertical)\n\t\t\t\t}\n\t\t\t\tgameMap.getTile(dx, dy).actors.push(door)\n\t\t\t\tgameMap.actors.push(door)\n\t\t\t})\n\t\t}\n\n\t\t// Now, we can mess around with the centers of each room and place items in the dungeons\n\t\t// this places a ladder going further into the dungeon (either deeper or higher)\n\t\tif (createdLadders < 1) {\n\t\t\tif (!lastDungeon) {\n\t\t\t\tlet texture = ladders.down\n\t\t\t\tlet ladder = new Ladder(center.x, center.y, texture, 'down', toPortal)\n\t\t\t\tgameMap.getTile(center.x, center.y).actors.push(ladder)\n\t\t\t\tgameMap.actors.push(ladder)\n\t\t\t\tcreatedLadders++\n\t\t\t} else {\n\t\t\t\tlet levelTransition = new LevelTransition(center.x, center.y, 1169)\n\t\t\t\tlevelTransition.portal = toPortal\n\t\t\t\tgameMap.getTile(center.x, center.y).actors.push(levelTransition)\n\t\t\t\tgameMap.actors.push(levelTransition)\n\t\t\t\tcreatedLadders++\n\t\t\t}\n\t\t}\n\n\t\t// now I want to populate some random creatures in each room of the dungeon.\n\t\tlet validTiles = [] // all the non-wall tiles in the room that don't already a ladder\n\t\tlet possibleWalls = Object.values(walls)\n\t\tfor (let y = wtop; y < wbottom; y++) {\n\t\t\tfor (let x = wleft; x < wright; x++) {\n\t\t\t\tif (!gameMap.getTile(x, y).blocked() && gameMap.getTile(x, y).actors.length === 0) validTiles.push(x + ',' + y)\n\t\t\t}\n\t\t}\n\t\tlet roomWidth = right - left\n\t\tlet roomHeight = bottom - top\n\t\tlet maxEnemies = roomWidth > 6 && roomHeight > 6 ? 5 : 3\n\t\tlet minEnemies = roomWidth > 7 && roomHeight > 7 ? 3 : 1\n\n\t\tlet roll = getNormalRandomInt(minEnemies, maxEnemies)\n\t\tfor (let i = 0; i < roll; i++) {\n\t\t\tlet coords = randomTile(validTiles)\n\t\t\tif (coords === null) break\n\t\t\tlet [x, y] = coords\n\t\t\tlet chosenActor = ROT.RNG.getWeightedValue(mobDistribution)\n\t\t\tlet actor = createActor(chosenActor, x, y)\n\t\t\tgameMap.getTile(x, y).actors.push(actor)\n\t\t\tgameMap.actors.push(actor)\n\t\t}\n\t\t// if there atleast 4 enemies in the room, drop a chest in the room too!\n\t\tif (roll >= 4) {\n\t\t\tlet coords = randomTile(validTiles)\n\t\t\tif (coords !== null) {\n\t\t\t\tlet [x, y] = coords\n\t\t\t\tlet chest = new Chest(x, y, chestTexture)\n\t\t\t\tlet items = getItemsFromDropTable({\n\t\t\t\t\tminItems: 1,\n\t\t\t\t\tmaxItems: 3,\n\t\t\t\t\tdropTable: {\n\t\t\t\t\t\tSTRENGTH_POTION: 1,\n\t\t\t\t\t\tHEALTH_POTION: 1,\n\t\t\t\t\t\tSTEEL_ARROW: 1,\n\t\t\t\t\t\tMANA_POTION: 1,\n\t\t\t\t\t\tSWORD: 10\n\t\t\t\t\t},\n\t\t\t\t\tx: chest.x,\n\t\t\t\t\ty: chest.y\n\t\t\t\t})\n\t\t\t\titems.forEach(item => chest.addToInventory(item))\n\t\t\t\tgameMap.getTile(x, y).actors.push(chest)\n\t\t\t\tgameMap.actors.push(chest)\n\t\t\t}\n\t\t}\n\t}\n\n\t// Randomly select starting position for player\n\tlet start = randomProperty(freeCells).split(',')\n\tlet [x, y] = start.map(s => parseInt(s))\n\tgameMap.playerLocation = [x, y]\n\t// gameMap.getTile(x, y).actors.push(new Player(x, y, Game.playerID + 1)) // set random spot to be the player\n\tlet ladder = new Ladder(x, y, ladders.up, 'up', fromPortal)\n\tgameMap.getTile(x, y).actors.push(ladder)\n\tgameMap.actors.push(ladder)\n\tgameMap.revealed = false\n\tgameMap.type = 'dungeon'\n\tgameMap.depth = level\n\treturn gameMap\n}\n\n/* Returns a randomly generated textured dungeon in GameMap form  */\nexport function randomDungeon(width, height, options) {\n\tlet { level } = options\n\tlet dc = {}\n\tif (level <= 5) {\n\t\tdc = {\n\t\t\troomWidth: [3, 20],\n\t\t\troomHeight: [4, 10],\n\t\t\tcorridorLength: [4, 4],\n\t\t\troomDugPercentage: 0.4\n\t\t}\n\t\treturn dungeonFromTheme(width, height, dungeonThemes.RUINS, new ROT.Map.Uniform(width, height, dc), options, false)\n\t} else if (level <= 10) {\n\t\tdc = {\n\t\t\troomWidth: [3, 6],\n\t\t\troomHeight: [4, 7],\n\t\t\tcorridorLength: [2, 4],\n\t\t\troomDugPercentage: 0.2\n\t\t}\n\t\treturn dungeonFromTheme(width, height, dungeonThemes.CATACOMBS, new ROT.Map.Digger(width, height, dc), options)\n\t} else if (level <= 15) {\n\t\tdc = {\n\t\t\troomWidth: [3, 10],\n\t\t\troomHeight: [4, 10],\n\t\t\tcorridorLength: [1, 10],\n\t\t\troomDugPercentage: 0.4\n\t\t}\n\t\treturn dungeonFromTheme(width, height, dungeonThemes.MINE, new ROT.Map.Uniform(width, height, dc), options, false)\n\t} else {\n\t\tdc = {\n\t\t\troomWidth: [3, 20],\n\t\t\troomHeight: [4, 10],\n\t\t\tcorridorLength: [4, 4],\n\t\t\troomDugPercentage: 0.4\n\t\t}\n\t\treturn dungeonFromTheme(width, height, dungeonThemes.ICE, new ROT.Map.Digger(width, height, dc), options)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/map/generation/RandomDungeon.js","/**\r\n * Created by Larken on 6/22/2017.\r\n */\r\nimport ROT from 'rot-js'\r\nimport { StatelessAI } from '#/entities/actors/enemies/StatelessAI.js'\r\nimport { getRandomInt, getItemsFromDropTable } from '#/utils/HelperFunctions.js'\r\nimport { Game } from '#/Game.js'\r\n\r\nexport default class WildGoat extends StatelessAI {\r\n\tconstructor(x, y, id) {\r\n\t\tlet randomHP = getRandomInt(4, 8)\r\n\t\tlet randomStr = getRandomInt(1, 2)\r\n\t\tsuper(\r\n\t\t\tx,\r\n\t\t\ty,\r\n\t\t\t{\r\n\t\t\t\tid: id,\r\n\t\t\t\tname: 'wild goat',\r\n\t\t\t\tdescription: 'A really pissed off goat!',\r\n\t\t\t\tvisible: true,\r\n\t\t\t\tblocked: true,\r\n\t\t\t\tchasing: false,\r\n\t\t\t\tcombat: {\r\n\t\t\t\t\t/* options.combat, dedicated to all things related to combat */\r\n\t\t\t\t\tdescription: [' headbutted ', ' rammed '],\r\n\t\t\t\t\t/* max stats */\r\n\t\t\t\t\tmaxhp: randomHP,\r\n\t\t\t\t\tmaxmana: 5,\r\n\t\t\t\t\t/* current stats */\r\n\t\t\t\t\thp: randomHP,\r\n\t\t\t\t\tmana: 5,\r\n\t\t\t\t\tstr: randomStr,\r\n\t\t\t\t\tdef: 1,\r\n\t\t\t\t\t/* misc */\r\n\t\t\t\t\thostile: true,\r\n\t\t\t\t\trange: 9,\r\n\t\t\t\t\tinvulnerable: false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t/* AI parameters */\r\n\t\t\t\tmorale: 0.4,\r\n\t\t\t\tminPlayerDist: 0,\r\n\t\t\t\tmaxPlayerDist: 0,\r\n\t\t\t\tranged: false,\r\n\t\t\t\tmelee: true,\r\n\t\t\t\tmagic: false,\r\n\t\t\t\twanders: true\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/entities/actors/enemies/WildGoat.js","/**\r\n * Created by larken on 7/4/17.\r\n */\r\nimport ROT from 'rot-js'\r\nimport SimplexNoise from 'simplex-noise'\r\nimport RNG from 'prng-parkmiller-js'\r\nimport { Game } from '#/Game.js'\r\nimport { GameMap } from '#/map/GameMap.js'\r\nimport Player from '#/entities/actors/Player.js'\r\nimport NPC from '#/entities/actors/NPC.js'\r\n// Enemies\r\nimport Goblin from '#/entities/actors/enemies/Goblin.js'\r\nimport Kobold from '#/entities/actors/enemies/Kobold.js'\r\nimport Orc from '#/entities/actors/enemies/Orc.js'\r\nimport Rat from '#/entities/actors/enemies/Rat.js'\r\nimport Bat from '#/entities/actors/enemies/Bat.js'\r\nimport WildGoat from '#/entities/actors/enemies/WildGoat.js'\r\nimport Skeleton from '#/entities/actors/enemies/Skeleton.js'\r\nimport Zombie from '#/entities/actors/enemies/Zombie.js'\r\n// Items\r\n// Weapons\r\nimport { createSword, Sword } from '#/entities/items/weapons/Sword.js'\r\nimport { Bow, createBow } from '#/entities/items/weapons/ranged/Bow.js'\r\nimport { SteelArrow } from '#/entities/items/weapons/ranged/ammo/Arrow.js'\r\n// Potions\r\nimport HealthPotion from '#/entities/items/potions/HealthPotion.js'\r\nimport StrengthPotion from '#/entities/items/potions/StrengthPotion.js'\r\nimport ManaPotion from '#/entities/items/potions/ManaPotion.js'\r\n// Misc\r\nimport Chest from '#/entities/misc/Chest.js'\r\nimport Door from '#/entities/misc/Door.js'\r\nimport LockedDoor from '#/entities/misc/LockedDoor.js'\r\nimport Key from '#/entities/items/misc/Key.js'\r\nimport Ladder from '#/entities/misc/Ladder.js'\r\nimport { getRandomInt, getNormalRandomInt, randomProperty, between } from '#/utils/HelperFunctions.js'\r\n\r\nconst textures = {\r\n\tOLD_BEACH: {\r\n\t\ttype: 'OLD_BEACH',\r\n\t\ttextures: {\r\n\t\t\tupperLeft: 8816,\r\n\t\t\ttop: 8817,\r\n\t\t\tupperRight: 8818,\r\n\r\n\t\t\tleft: 8936,\r\n\t\t\tcenter: 8937,\r\n\t\t\tright: 8938,\r\n\r\n\t\t\tlowerLeft: 9056,\r\n\t\t\tbottom: 9057,\r\n\t\t\tlowerRight: 9058,\r\n\r\n\t\t\tendLeft: 8940,\r\n\t\t\tmiddleCorridorHorizontal: 8941,\r\n\t\t\tendRight: 8942,\r\n\r\n\t\t\tendTop: 8819,\r\n\t\t\tmiddleCorridorVertical: 8939,\r\n\t\t\tendBottom: 9059,\r\n\r\n\t\t\tsingle: 8937\r\n\t\t}\r\n\t},\r\n\tBEACH: {\r\n\t\ttype: 'BEACH',\r\n\t\ttextures: {\r\n\t\t\tupperLeft: 8816 + 14,\r\n\t\t\ttop: 8817 + 14,\r\n\t\t\tupperRight: 8818 + 14,\r\n\r\n\t\t\tleft: 8936 + 14,\r\n\t\t\tcenter: 8937 + 14,\r\n\t\t\tright: 8938 + 14,\r\n\r\n\t\t\tlowerLeft: 9056 + 14,\r\n\t\t\tbottom: 9057 + 14,\r\n\t\t\tlowerRight: 9058 + 14,\r\n\r\n\t\t\tendLeft: 8940 + 14,\r\n\t\t\tmiddleCorridorHorizontal: 8941 + 14,\r\n\t\t\tendRight: 8942 + 14,\r\n\r\n\t\t\tendTop: 8819 + 14,\r\n\t\t\tmiddleCorridorVertical: 8939 + 14,\r\n\t\t\tendBottom: 9059 + 14,\r\n\r\n\t\t\tsingle: 8937 + 14\r\n\t\t}\r\n\t},\r\n\tOCEAN_WATER: {\r\n\t\ttype: 'OCEAN_WATER',\r\n\t\ttextures: {\r\n\t\t\tupperLeft: 9017,\r\n\t\t\ttop: 9017,\r\n\t\t\tupperRight: 9017,\r\n\r\n\t\t\tleft: 9017,\r\n\t\t\tcenter: 9017,\r\n\t\t\tright: 9017,\r\n\r\n\t\t\tlowerLeft: 9017,\r\n\t\t\tbottom: 9017,\r\n\t\t\tlowerRight: 9017,\r\n\r\n\t\t\tendLeft: 9017,\r\n\t\t\tmiddleCorridorHorizontal: 9017,\r\n\t\t\tendRight: 9017,\r\n\r\n\t\t\tendTop: 9017,\r\n\t\t\tmiddleCorridorVertical: 9017,\r\n\t\t\tendBottom: 9017,\r\n\r\n\t\t\tsingle: 9017\r\n\t\t}\r\n\t},\r\n\tCOASTAL_WATER: {\r\n\t\ttype: 'COASTAL_WATER',\r\n\t\ttextures: {\r\n\t\t\tupperLeft: 8176,\r\n\t\t\ttop: 8177,\r\n\t\t\tupperRight: 8178,\r\n\r\n\t\t\tleft: 8296,\r\n\t\t\tcenter: 8297,\r\n\t\t\tright: 8298,\r\n\r\n\t\t\tlowerLeft: 8296,\r\n\t\t\tbottom: 8297,\r\n\t\t\tlowerRight: 8298,\r\n\r\n\t\t\tendLeft: 8296,\r\n\t\t\tmiddleCorridorHorizontal: 8177,\r\n\t\t\tendRight: 8178,\r\n\r\n\t\t\taltUpperRight: 8181,\r\n\t\t\tendTop: 8177,\r\n\t\t\tmiddleCorridorVertical: 8298,\r\n\t\t\tendBottom: 8296,\r\n\r\n\t\t\tsingle: 8178\r\n\t\t}\r\n\t},\r\n\tFOREST: {\r\n\t\ttype: 'FOREST',\r\n\t\ttextures: {\r\n\t\t\thasCorridors: true,\r\n\t\t\tupperLeft: 7743,\r\n\t\t\ttop: 7744,\r\n\t\t\tupperRight: 7745,\r\n\r\n\t\t\tleft: 7863,\r\n\t\t\tcenter: 7864,\r\n\t\t\tright: 7865,\r\n\r\n\t\t\tlowerLeft: 7983,\r\n\t\t\tbottom: 7984,\r\n\t\t\tlowerRight: 7985,\r\n\r\n\t\t\tendLeft: 7867,\r\n\t\t\tmiddleCorridorHorizontal: 7868,\r\n\t\t\tendRight: 7869,\r\n\r\n\t\t\tendTop: 7746,\r\n\t\t\tmiddleCorridorVertical: 7866,\r\n\t\t\tendBottom: 7986,\r\n\r\n\t\t\tsingle: 7748\r\n\t\t}\r\n\t},\r\n\tMOUNTAIN: {\r\n\t\ttype: 'MOUNTAIN',\r\n\t\ttextures: {\r\n\t\t\tupperLeft: 9197,\r\n\t\t\ttop: 9198,\r\n\t\t\tupperRight: 9199,\r\n\r\n\t\t\tleft: 9317,\r\n\t\t\t// center: 9318,\r\n\t\t\tright: 9317,\r\n\r\n\t\t\tlowerLeft: 9437,\r\n\t\t\tbottom: 9198,\r\n\t\t\tlowerRight: 9439,\r\n\r\n\t\t\tendLeft: 9198,\r\n\t\t\tmiddleCorridorHorizontal: 9198,\r\n\t\t\tendRight: 9198,\r\n\r\n\t\t\tendTop: 9198,\r\n\t\t\tmiddleCorridorVertical: 9200,\r\n\t\t\tendBottom: 9198,\r\n\r\n\t\t\tmiddleT: 9201,\r\n\t\t\tmiddleIntersection: 9321\r\n\t\t\t// single: 7748\r\n\t\t}\r\n\t},\r\n\tSNOW: {\r\n\t\ttype: 'SNOW',\r\n\t\ttextures: {}\r\n\t}\r\n}\r\n\r\nconst actorTextures = {\r\n\tORC: [5292, 5293, 5294, 5295, 5296, 5297, 5299],\r\n\tEMPOWERED_ORC: [5298],\r\n\tGOBLIN: [7440, 7441, 7442, 7443, 7444, 7445, 7446],\r\n\tRAT: [2362, 2363, 2365, 2366],\r\n\tBAT: [3704, 3706],\r\n\tKOBOLD: [5532, 5533, 5534, 5535, 5536, 5537, 5538, 5539],\r\n\tWILD_GOAT: [2600, 2601, 2602, 2603, 2604, 2605]\r\n}\r\n\r\n// textures for grass/flowers/trees\r\nconst wildGrass1 = 1242,\r\n\twildGrass2 = 1243,\r\n\twildGrass3 = 1362,\r\n\twildGrass4 = 1363,\r\n\tshrub1 = 1722,\r\n\tshrub2 = 1723,\r\n\tshrub3 = 1726,\r\n\tmushroom1 = 1724,\r\n\tmushroom2 = 1725,\r\n\ttree = 7355,\r\n\tflower1 = 1482,\r\n\tflower2 = 1483,\r\n\tflower3 = 1484,\r\n\tflower4 = 1485\r\n\r\nconst flatten = arr => arr.reduce((acc, val) => acc.concat(Array.isArray(val) ? flatten(val) : val), [])\r\n\r\n// function that will yield a random free space in the room\r\nconst randomTile = validTiles => {\r\n\tlet index = getRandomInt(0, validTiles.length) // index of a tile\r\n\tlet tile = validTiles.splice(index, 1)\r\n\tif (tile.length === 1) {\r\n\t\treturn tile[0].split(',').map(e => Number(e))\r\n\t} else {\r\n\t\treturn null\r\n\t}\r\n}\r\n\r\nexport function randomSimplexMap(width, height, zoom) {\r\n\t// we want to zoom in a lot so that the land is larger, so the width & height will be half\r\n\tlet w = ~~(width / zoom)\r\n\tlet h = ~~(height / zoom)\r\n\tlet gameMap = new GameMap(w, h)\r\n\tconsole.log(w, h)\r\n\t// base textures\r\n\t/* GOOD SEEDS\r\n        - 908234\r\n    */\r\n\tlet seed1 = 908234\r\n\tlet seed2 = 908234\r\n\tlet rng1 = RNG.create(seed1)\r\n\tlet rng2 = RNG.create(seed2)\r\n\tlet gen1 = new SimplexNoise(rng1.nextDouble.bind(rng1))\r\n\tlet gen2 = new SimplexNoise(rng2.nextDouble.bind(rng2))\r\n\tlet frequency = 1.5\r\n\r\n\tconst mobDistribution = {\r\n\t\t// ORC: 1,\r\n\t\t// EMPOWERED_ORC: 1,\r\n\t\t// KOBOLD: 1,\r\n\t\tGOBLIN: 1,\r\n\t\t// BAT: 1,\r\n\t\tRAT: 3,\r\n\t\tWILD_GOAT: 3\r\n\t}\r\n\r\n\tconst createActor = (actorString, x, y, id) => {\r\n\t\tswitch (actorString) {\r\n\t\t\tcase 'ORC':\r\n\t\t\t\treturn new Orc(x, y, id)\r\n\t\t\tcase 'EMPOWERED_ORC':\r\n\t\t\t\treturn new Orc(x, y, id, true)\r\n\t\t\tcase 'KOBOLD':\r\n\t\t\t\treturn new Kobold(x, y, id)\r\n\t\t\tcase 'GOBLIN':\r\n\t\t\t\treturn new Goblin(x, y, id)\r\n\t\t\tcase 'BAT':\r\n\t\t\t\treturn new Bat(x, y, id)\r\n\t\t\tcase 'RAT':\r\n\t\t\t\treturn new Rat(x, y, id)\r\n\t\t\tcase 'WILD_GOAT':\r\n\t\t\t\treturn new WildGoat(x, y, id)\r\n\t\t\tdefault:\r\n\t\t\t\tthrow 'Unidentified actor given to create actor'\r\n\t\t}\r\n\t}\r\n\r\n\tconst noise1 = (nx, ny) => {\r\n\t\treturn gen1.noise2D(nx, ny) / 2 + 0.5\r\n\t}\r\n\r\n\tconst noise2 = (nx, ny) => {\r\n\t\treturn gen2.noise2D(nx, ny) / 2 + 0.5\r\n\t}\r\n\r\n\tconst getElevation = (x, y) => {\r\n\t\tlet nx = x / width - 0.5,\r\n\t\t\tny = y / height - 0.5\r\n\t\tlet e =\r\n\t\t\t1.0 * noise1(frequency * 1 * nx, frequency * 1 * ny) +\r\n\t\t\t0.5 * noise1(frequency * 2 * nx, frequency * 2 * ny) +\r\n\t\t\t0.25 * noise1(frequency * 4 * nx, frequency * 4 * ny) +\r\n\t\t\t0.13 * noise1(frequency * 8 * nx, frequency * 8 * ny) +\r\n\t\t\t0.06 * noise1(frequency * 16 * nx, frequency * 16 * ny) +\r\n\t\t\t0.03 * noise1(frequency * 32 * nx, frequency * 32 * ny)\r\n\t\te /= 1.0 + 0.5 + 0.25 + 0.13 + 0.06 + 0.03\r\n\t\te = Math.pow(e, 5.0)\r\n\t\treturn e * 100\r\n\t}\r\n\r\n\tconst getMoisture = (x, y) => {\r\n\t\tlet nx = x / width - 0.5,\r\n\t\t\tny = y / height - 0.5\r\n\t\tlet m =\r\n\t\t\t1.0 * noise2(1 * nx, 1 * ny) +\r\n\t\t\t0.75 * noise2(2 * nx, 2 * ny) +\r\n\t\t\t0.33 * noise2(4 * nx, 4 * ny) +\r\n\t\t\t0.33 * noise2(8 * nx, 8 * ny) +\r\n\t\t\t0.33 * noise2(16 * nx, 16 * ny) +\r\n\t\t\t0.5 * noise2(32 * nx, 32 * ny)\r\n\t\tm /= 1.0 + 0.75 + 0.33 + 0.33 + 0.33 + 0.5\r\n\t\treturn m\r\n\t}\r\n\r\n\tconst biome = e => {\r\n\t\tif (e < 1.5) {\r\n\t\t\treturn textures.COASTAL_WATER\r\n\t\t} else {\r\n\t\t\treturn textures.FOREST\r\n\t\t}\r\n\t}\r\n\r\n\tlet getTexture = (textures, sum) => {\r\n\t\tconst { hasCorridors } = textures\r\n\t\tlet sumToTexture = {\r\n\t\t\t0: textures.single,\r\n\t\t\t1: textures.endBottom,\r\n\t\t\t2: hasCorridors ? textures.endLeft : textures.upperLeft,\r\n\t\t\t3: textures.lowerLeft,\r\n\t\t\t4: hasCorridors ? textures.endTop : textures.upperLeft,\r\n\t\t\t5: textures.middleCorridorVertical,\r\n\t\t\t6: textures.upperLeft,\r\n\t\t\t7: textures.left,\r\n\t\t\t8: hasCorridors ? textures.endRight : textures.upperRight,\r\n\t\t\t9: textures.lowerRight,\r\n\t\t\t10: textures.middleCorridorHorizontal,\r\n\t\t\t11: textures.bottom,\r\n\t\t\t12: textures.upperRight,\r\n\t\t\t13: textures.right,\r\n\t\t\t14: textures.top,\r\n\t\t\t15: textures.center,\r\n\t\t\t16: textures.lowerRight,\r\n\t\t\t17: textures.lowerLeft,\r\n\t\t\t18: textures.altUpperRight,\r\n\t\t\t19: textures.upperLeft,\r\n\t\t\t20: textures.middleT,\r\n\t\t\t21: textures.middleIntersection\r\n\t\t}\r\n\r\n\t\tif (sum in sumToTexture) {\r\n\t\t\treturn sumToTexture[sum]\r\n\t\t} else {\r\n\t\t\tconsole.warn(`Couldn't find a texture for sum: ${sum} with tile options: ${tileOptions}`)\r\n\t\t\treturn 0\r\n\t\t}\r\n\t}\r\n\r\n\tlet computeBitmask = (x, y) => {\r\n\t\tlet elevation = getElevation(x, y)\r\n\t\tlet texture = biome(elevation)\r\n\t\tlet sum = 0\r\n\t\tlet above = `${x},${y - 1}`\r\n\t\tlet below = `${x},${y + 1}`\r\n\t\tlet left = `${x - 1},${y}`\r\n\t\tlet right = `${x + 1},${y}`\r\n\r\n\t\tlet ur = `${x + 1},${y - 1}`\r\n\t\tlet ll = `${x - 1},${y + 1}`\r\n\r\n\t\tlet ul = `${x - 1},${y - 1}`\r\n\t\tlet lr = `${x + 1},${y + 1}`\r\n\r\n\t\tlet free = coord => {\r\n\t\t\tlet [x, y] = coord.split(',')\r\n\t\t\tlet e = getElevation(x, y)\r\n\t\t\tlet textureType = biome(e).type\r\n\t\t\treturn textureType === texture.type || (textureType === 'OCEAN_WATER' && texture.type === 'COASTAL_WATER')\r\n\t\t}\r\n\r\n\t\tif (free(above)) sum += 1\r\n\t\tif (free(right)) sum += 2\r\n\t\tif (free(below)) sum += 4\r\n\t\tif (free(left)) sum += 8\r\n\r\n\t\tif (sum === 15 && !free(ul) && texture.type === 'COASTAL_WATER') {\r\n\t\t\tsum = 18\r\n\t\t}\r\n\r\n\t\treturn { texture: getTexture(texture.textures, sum), type: texture.type, elevation }\r\n\t}\r\n\r\n\tlet possible_player_location = null\r\n\r\n\tconst floraFaunaProbability = {\r\n\t\t[wildGrass1]: 25,\r\n\t\t[wildGrass2]: 25,\r\n\t\t[wildGrass3]: 25,\r\n\t\t[wildGrass4]: 25,\r\n\t\t[shrub1]: 1,\r\n\t\t[shrub3]: 1,\r\n\t\t[flower1]: 1,\r\n\t\t[flower2]: 1,\r\n\t\t[flower3]: 1,\r\n\t\t[flower4]: 1,\r\n\t\t[mushroom1]: 1\r\n\t}\r\n\r\n\tfor (let y = 0; y < h; y++) {\r\n\t\tfor (let x = 0; x < w; x++) {\r\n\t\t\tlet t = computeBitmask(x, y)\r\n\t\t\tlet tile = gameMap.getTile(x, y)\r\n\t\t\tif (t.type === textures.OCEAN_WATER.type || t.type === textures.COASTAL_WATER.type) {\r\n\t\t\t\t// since it's an animated tile, it needs a static texture underneath it\r\n\t\t\t\ttile.updateTileInfo(7146)\r\n\t\t\t\ttile.updateTileInfo(t.texture)\r\n\t\t\t} else if (t.type === textures.FOREST.type) {\r\n\t\t\t\ttile.updateTileInfo(t.texture)\r\n\t\t\t\tif (between(5, t.elevation, 6) || between(10, t.elevation, 100)) {\r\n\t\t\t\t\ttile.updateTileInfo(tree)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (getRandomInt(0, 4) > 0) {\r\n\t\t\t\t\t\tlet obstacle = ROT.RNG.getWeightedValue(floraFaunaProbability)\r\n\t\t\t\t\t\ttile.updateTileInfo(obstacle)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// chance of placing an enemy in the open tiles...\r\n\t\t\t\tif (!tile.blocked()) {\r\n\t\t\t\t\tif (getRandomInt(0, 500) === 1) {\r\n\t\t\t\t\t\t// 1% chance\r\n\t\t\t\t\t\tlet chosenActor = ROT.RNG.getWeightedValue(mobDistribution)\r\n\t\t\t\t\t\tlet possibleActorTextures = actorTextures[chosenActor]\r\n\t\t\t\t\t\tlet randomTexture = possibleActorTextures[getRandomInt(0, possibleActorTextures.length - 1)]\r\n\t\t\t\t\t\tlet actor = createActor(chosenActor, x, y, randomTexture)\r\n\t\t\t\t\t\ttile.actors.push(actor)\r\n\t\t\t\t\t\tgameMap.actors.push(actor)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgameMap.playerLocation = [~~(w / 2), ~~(h / 2)]\r\n\r\n\treturn gameMap\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/map/generation/RandomSimplex.js","import { randomCave } from './RandomCave.js'\r\nimport { randomDungeon } from './RandomDungeon.js'\r\nimport { randomSimplexMap } from './RandomSimplex.js'\r\n\r\nexport default {\r\n\trandomCave,\r\n\trandomDungeon,\r\n\trandomSimplexMap\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/map/generation/index.js","import ROT from 'rot-js'\nimport * as PIXI from 'pixi.js'\nPIXI.utils.skipHello()\n\nimport { getTilesetCoords, createMapFromJSON } from '#/map/GameMap.js'\nimport GameDisplay from '#/GameDisplay.js'\nimport { Actor } from '#/entities/actors/Actor.js'\nimport { Entity } from '#/entities/Entity.js'\nimport { getItemsFromDropTable, addPrefix } from '#/utils/HelperFunctions.js'\nimport PlayerController from '#/utils/PlayerController.js'\n\nimport Item from '#/entities/items/Item.js'\nimport Player from '#/entities/actors/Player.js'\nimport MapGen from '#/map/generation/index.js'\nimport Door from '#/entities/misc/Door.js'\nimport Ladder from '#/entities/misc/Ladder.js'\nimport LevelTransition from '#/entities/misc/LevelTransition.js'\nimport Chest from '#/entities/misc/Chest.js'\n\nconst { randomSimplexMap, randomDungeon, randomCave } = MapGen\n\nconst targetingBorders = {\n\tid: 7418,\n\tvisible: true\n}\nconst untargetableBorders = {\n\tid: 7419,\n\tvisible: true\n}\n\nexport let Game = {\n\tapp: null,\n\toverview: null,\n\tdev: false,\n\tdisplay: null,\n\tHUD: null,\n\tconsole: null,\n\tplayer: null,\n\tplayerLocation: null,\n\tplayerID: 4696,\n\tloadedIDS: [],\n\tscheduler: null,\n\tturn: 0,\n\tengine: null,\n\tloaded: false,\n\tlevels: {},\n\tcurrentLevel: { name: 'Mulberry Town', depth: 0 },\n\tmap: null,\n\tmessageHistory: [],\n\ttempMessages: [],\n\tminimap: null,\n\tselectedTile: null,\n\tpathToTarget: {},\n\ttargetReticle: null,\n\tenemyCycle: null,\n\tenemyCycleIndex: 0,\n\tuserSettings: { hpBars: false, animationsEnabled: true },\n\n\tinit(playerSpriteID) {\n\t\tthis.playerID = playerSpriteID\n\t\tthis.player = new Player(0, 0, playerSpriteID)\n\t\tthis.displayOptions = {\n\t\t\twidth: 32,\n\t\t\theight: 20,\n\t\t\tforceSquareRatio: true,\n\t\t\tlayout: 'tile',\n\t\t\t// bg: \"transparent\",\n\t\t\ttileWidth: 32,\n\t\t\ttileHeight: 32\n\t\t}\n\t\tlet onceLoaded = () => {\n\t\t\tlet { resources } = PIXI.loader\n\t\t\tthis.levels['Mulberry Town'] = createMapFromJSON(resources['mulberryTown'].data, 'Mulberry Town')\n\t\t\tthis.levels['Mulberry Forest'] = createMapFromJSON(resources['mulberryForest'].data, 'Mulberry Forest')\n\t\t\tthis.levels['Mulberry Graveyard'] = createMapFromJSON(resources['mulberryGraveyard'].data, 'Mulberry Graveyard')\n\t\t\tthis.levels['Lich Lair'] = createMapFromJSON(resources['lichLair'].data, 'Lich Lair')\n\t\t\tthis.map = this.levels[this.currentLevel.name]\n\t\t\tthis.width = this.map.width < this.displayOptions.width ? this.map.width : this.displayOptions.width\n\t\t\tthis.height = this.map.height < this.displayOptions.height ? this.map.height : this.displayOptions.height\n\t\t\tthis.map.actors.push(this.player) // add to the list of all actors\n\t\t\tlet [px, py] = this.map.playerLocation\n\t\t\tthis.player.placeAt(px, py)\n\t\t\tthis.scheduleAllActors()\n\t\t\tthis.initializeMinimap()\n\t\t\tdocument.getElementById('game_container').appendChild(this.display.getContainer())\n\t\t\tdocument.getElementById('minimap_container').appendChild(this.minimap.getContainer())\n\t\t\tthis.engine.start() // Start the engine\n\t\t\tthis.renderMap()\n\t\t}\n\t\tthis.display = new GameDisplay()\n\t\tthis.display.loadAssets(onceLoaded)\n\t},\n\n\trenderMap() {\n\t\tthis.display.renderMap(this.map)\n\t\tthis.targetReticle = new PIXI.Sprite(this.display.tilesetMapping[7418])\n\t\tthis.targetReticle.visible = false\n\t\tthis.display.background.addChild(this.targetReticle)\n\t},\n\n\tscheduleAllActors() {\n\t\t// Set up the ROT engine and scheduler\n\t\tthis.scheduler = new ROT.Scheduler.Simple()\n\t\t// this.scheduler.add(new PlayerController(), true) // Add the player to the scheduler\n\t\tthis.scheduler.add(this.player, true) // Add the player to the scheduler\n\t\tthis.scheduler.add(this.display, true)\n\t\tfor (let i = 0; i < this.map.actors.length; i++) {\n\t\t\t// Some 'actor' objects do not take turns, such as ladders / items\n\t\t\tif (this.map.actors[i] !== this.player && this.map.actors[i] instanceof Actor) {\n\t\t\t\tthis.scheduler.add(this.map.actors[i], true)\n\t\t\t}\n\t\t}\n\t\tthis.engine = new ROT.Engine(this.scheduler) // Create new engine with the newly created scheduler\n\t},\n\n\tinitializeMinimap() {\n\t\t/* Create a ROT.JS display for the minimap! */\n\t\tthis.minimap = new ROT.Display()\n\t\tthis.minimap.setOptions({\n\t\t\twidth: this.map.width,\n\t\t\theight: this.map.height,\n\t\t\tfontSize: 2,\n\t\t\tspacing: 2,\n\t\t\tforceSquareRatio: true\n\t\t})\n\t\tthis.drawMiniMap()\n\t},\n\n\tclearTempLog() {\n\t\tthis.tempMessages.splice(0, this.tempMessages.length)\n\t},\n\n\tinbounds(x, y) {\n\t\treturn !(x < 0 || x >= this.map.width || y < 0 || y >= this.map.height)\n\t},\n\n\tinViewport(x, y) {\n\t\tlet cx = Game.player.x - ~~(Game.width / 2)\n\t\tlet cy = Game.player.y - ~~(Game.height / 2)\n\t\treturn cx <= x && x <= cx + Game.width && cy <= y && y <= cy + Game.height\n\t},\n\n\tcreateDungeonFloors(origin, dungeonName, numberOfFloors) {\n\t\tthis.levels[dungeonName + 1] = randomDungeon(40, 40, {\n\t\t\tdungeonName,\n\t\t\tlastDungeon: false,\n\t\t\tfromPortal: origin,\n\t\t\ttoPortal: dungeonName + 2,\n\t\t\tlevel: 1\n\t\t})\n\t\tfor (let depth = 2; depth < numberOfFloors; depth++) {\n\t\t\tlet options = {\n\t\t\t\tdungeonName,\n\t\t\t\tlastDungeon: false,\n\t\t\t\tfromPortal: dungeonName + (depth - 1),\n\t\t\t\ttoPortal: dungeonName + (depth + 1),\n\t\t\t\tlevel: depth\n\t\t\t}\n\t\t\tthis.levels[dungeonName + depth] = randomDungeon(40, 40, options)\n\t\t}\n\t\tthis.levels[dungeonName + numberOfFloors] = randomDungeon(40, 40, {\n\t\t\tdungeonName,\n\t\t\tlastDungeon: true,\n\t\t\tfromPortal: dungeonName + (numberOfFloors - 1),\n\t\t\ttoPortal: origin,\n\t\t\tlevel: numberOfFloors\n\t\t})\n\t},\n\n\tchangeLevels(mapID, dungeon = false) {\n\t\tlet nextMap = this.levels[mapID]\n\t\tif (dungeon === true && !(mapID + 1 in this.levels)) {\n\t\t\tthis.createDungeonFloors(this.currentLevel.name, mapID, 20)\n\t\t\tnextMap = this.levels[mapID + 1]\n\t\t} else if (dungeon === true) {\n\t\t\tnextMap = this.levels[mapID + 1]\n\t\t}\n\t\t// Maps can be either a series of dungeons, or a single 'unconnected' map\n\t\t// save the player's location on this map\n\t\tthis.map.playerLocation = [Game.player.x, Game.player.y]\n\t\t// Save the old map\n\t\tif (this.map.type === 'dungeon') {\n\t\t\tthis.levels[this.currentLevel.name + this.currentLevel.depth] = this.map // add the old map to 'levels'\n\t\t} else {\n\t\t\tthis.levels[this.currentLevel.name] = this.map // add the old map to 'levels'\n\t\t}\n\t\t// Unshift player from ladder position (so that when resurfacing, no player is present)\n\t\tthis.getTile(this.player.x, this.player.y).removeActor(this.player)\n\t\tthis.map.actors = this.map.actors.filter(a => a !== this.player)\n\t\tfor (let a of this.map.actors) {\n\t\t\tthis.display.clearSprite(a)\n\t\t}\n\t\tthis.map = nextMap\n\t\tthis.currentLevel.name = nextMap.name\n\t\tthis.currentLevel.depth = nextMap.depth !== undefined ? nextMap.depth : 0\n\t\tthis.playerLocation = this.map.playerLocation\n\t\tif (!nextMap.visited && nextMap.type === 'dungeon') {\n\t\t\tnextMap.visited = true\n\t\t\tthis.player.cb.dungeonsExplored++\n\t\t}\n\t\t// before drawing the viewport, we need to clear the screen of whatever was here last\n\t\tthis.display.clear()\n\t\tthis.width = this.map.width < this.displayOptions.width ? this.map.width : this.displayOptions.width\n\t\tthis.height = this.map.height < this.displayOptions.height ? this.map.height : this.displayOptions.height\n\t\tthis.player.placeAt(this.playerLocation[0], this.playerLocation[1])\n\t\tthis.map.actors.push(this.player)\n\t\tthis.scheduleAllActors()\n\t\t// Clear the last visible tiles that were available to be seen\n\t\tObject.assign(this.map.seen_tiles, this.map.visible_tiles)\n\t\tthis.map.visible_tiles = {}\n\n\t\t// FOV calculations\n\t\tlet fov = new ROT.FOV.PreciseShadowcasting((x, y) => {\n\t\t\treturn this.inbounds(x, y) && this.getTile(x, y).visible()\n\t\t})\n\n\t\tfov.compute(this.player.x, this.player.y, this.player.cb.range, (x, y, r, visibility) => {\n\t\t\tthis.map.visible_tiles[x + ',' + y] = true\n\t\t})\n\t\tthis.minimap.setOptions({\n\t\t\twidth: this.map.width,\n\t\t\theight: this.map.height,\n\t\t\tfontSize: 2,\n\t\t\tspacing: 2,\n\t\t\tforceSquareRatio: true\n\t\t})\n\t\tthis.minimap.clear()\n\t\tthis.drawMiniMap()\n\t\tthis.renderMap()\n\t},\n\n\tdrawMiniMap() {\n\t\tlet otherActors = this.map.actors.filter(a => {\n\t\t\treturn a instanceof Ladder || a instanceof Door\n\t\t})\n\t\tif (this.map.revealed) {\n\t\t\tfor (let y = 0; y < this.map.height; y++) {\n\t\t\t\tfor (let x = 0; x < this.map.width; x++) {\n\t\t\t\t\tlet tile = this.getTile(x, y)\n\t\t\t\t\tif (tile.x + ',' + tile.y in this.map.visible_tiles) {\n\t\t\t\t\t\tthis.minimap.draw(x, y, ' ', tile.bg(), this.brightenColor(tile.bg()))\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.minimap.draw(x, y, ' ', tile.bg(), tile.bg())\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (let a of otherActors) {\n\t\t\t\tthis.minimap.draw(a.x, a.y, ' ', a.fg, a.bg)\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let y = 0; y < this.map.height; y++) {\n\t\t\t\tfor (let x = 0; x < this.map.width; x++) {\n\t\t\t\t\tlet tile = this.getTile(x, y)\n\t\t\t\t\tif (tile.x + ',' + tile.y in this.map.visible_tiles) {\n\t\t\t\t\t\tthis.minimap.draw(x, y, ' ', tile.bg(), this.brightenColor(tile.bg()))\n\t\t\t\t\t} else if (tile.x + ',' + tile.y in this.map.seen_tiles) {\n\t\t\t\t\t\tthis.minimap.draw(x, y, ' ', tile.bg(), tile.bg())\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (let a of otherActors) {\n\t\t\t\tif (a.x + ',' + a.y in this.map.seen_tiles) {\n\t\t\t\t\tthis.minimap.draw(a.x, a.y, ' ', a.fg, a.bg)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// Draw the actor in the mini-map\n\t\tthis.minimap.draw(this.player.x, this.player.y, ' ', 'yellow', 'yellow')\n\t},\n\n\tbrightenColor(color) {\n\t\t// console.log(color);\n\t\tlet hsl_color = ROT.Color.rgb2hsl(ROT.Color.fromString(color))\n\t\thsl_color[2] *= 1.25\n\t\treturn ROT.Color.toRGB(ROT.Color.hsl2rgb(hsl_color))\n\t},\n\n\tgetNearbyEnemies() {\n\t\tlet camera = {\n\t\t\t// camera x,y resides in the upper left corner\n\t\t\tx: this.player.x - ~~(Game.width / 2),\n\t\t\ty: this.player.y - ~~(Game.height / 2),\n\t\t\twidth: Math.ceil(Game.width),\n\t\t\theight: Game.height\n\t\t}\n\t\tlet startingPos = [camera.x, camera.y]\n\t\tif (camera.x < 0) {\n\t\t\t// far left\n\t\t\tstartingPos[0] = 0\n\t\t}\n\t\tif (camera.x + camera.width > Game.map.width) {\n\t\t\t// far right\n\t\t\tstartingPos[0] = Game.map.width - camera.width\n\t\t}\n\t\tif (camera.y <= 0) {\n\t\t\t// at the top of the map\n\t\t\tstartingPos[1] = 0\n\t\t}\n\t\tif (camera.y + camera.height > Game.map.height) {\n\t\t\t// at the bottom of the map\n\t\t\tstartingPos[1] = Game.map.height - camera.height\n\t\t}\n\t\tthis.camera = {\n\t\t\tx: startingPos[0],\n\t\t\ty: startingPos[1]\n\t\t}\n\t\tlet endingPos = [startingPos[0] + camera.width, startingPos[1] + camera.height]\n\t\tlet dx = 0\n\t\tlet dy = 0\n\t\tlet actors = []\n\t\tfor (let x = startingPos[0]; x < endingPos[0]; x++) {\n\t\t\tfor (let y = startingPos[1]; y < endingPos[1]; y++) {\n\t\t\t\tlet tile = this.getTile(x, y)\n\t\t\t\t// if (tile.x + ',' + tile.y in this.map.visible_tiles) {\n\t\t\t\tactors = actors.concat(tile.actors)\n\t\t\t\t// }\n\n\t\t\t\t// if (this.map.revealed) {\n\t\t\t\t//     actors = actors.concat(tile.actors);\n\t\t\t\t// } else {\n\t\t\t\t//     if (tile.x + \",\" + tile.y in this.map.visible_tiles)\n\t\t\t\t//         actors = actors.concat(tile.actors);\n\t\t\t\t// }\n\t\t\t}\n\t\t\tdx++\n\t\t\tdy = 0\n\t\t}\n\t\tlet enemies = actors.filter(actor => {\n\t\t\treturn actor.cb !== undefined && actor.cb.hostile\n\t\t})\n\n\t\t// we sort the enemies closest to farthest away\n\t\treturn enemies.sort((a1, a2) => {\n\t\t\tif (a1.distanceTo(this.player) < a2.distanceTo(this.player)) {\n\t\t\t\treturn -1\n\t\t\t} else if (a2.distanceTo(this.player) < a1.distanceTo(this.player)) {\n\t\t\t\treturn 1\n\t\t\t} else {\n\t\t\t\treturn 0\n\t\t\t}\n\t\t})\n\t},\n\n\tgetClosestEnemyToPlayer() {\n\t\treturn this.getNearbyEnemies()[0]\n\t},\n\n\tclearSelectedTile() {\n\t\tthis.selectedTile = null\n\t\tthis.pathToTarget = {}\n\t\tthis.clearTempLog() // clear the temporary log which describes the tile we're on\n\t\tthis.targetReticle.visible = false\n\t},\n\n\tchangeSelectedTile(tile) {\n\t\tthis.selectedTile = tile\n\t\tlet { x, y } = tile\n\t\tlet blockedTile = this.selectedTile.blocked() || this.map.visible_tiles[x + ',' + y] === undefined\n\t\t// highlighting the path from the player to the target reticle using bresenham line algorithm\n\t\t/* https://rosettacode.org/wiki/Bitmap/Bresenham%27s_line_algorithm#JavaScript */\n\t\tthis.pathToTarget = {}\n\t\tif (!blockedTile) {\n\t\t\tlet x0 = this.player.x,\n\t\t\t\tx1 = this.selectedTile.x,\n\t\t\t\ty0 = this.player.y,\n\t\t\t\ty1 = this.selectedTile.y,\n\t\t\t\tdx = Math.abs(x1 - x0),\n\t\t\t\tsx = x0 < x1 ? 1 : -1,\n\t\t\t\tdy = Math.abs(y1 - y0),\n\t\t\t\tsy = y0 < y1 ? 1 : -1,\n\t\t\t\terr = (dx > dy ? dx : -dy) / 2\n\t\t\twhile (!(x0 === x1 && y0 === y1)) {\n\t\t\t\tthis.pathToTarget[x0 + ',' + y0] = true\n\t\t\t\tlet e2 = err\n\t\t\t\tif (e2 > -dx) {\n\t\t\t\t\terr -= dy\n\t\t\t\t\tx0 += sx\n\t\t\t\t}\n\t\t\t\tif (e2 < dy) {\n\t\t\t\t\terr += dx\n\t\t\t\t\ty0 += sy\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.pathToTarget[x0 + ',' + y0] = true\n\t\t\tthis.pathToTarget[this.player.x + ',' + this.player.y] = false\n\t\t}\n\t\tthis.targetReticle.visible = true\n\t\tthis.targetReticle.position.set(tile.x * this.display.tileSize, tile.y * this.display.tileSize)\n\t\tthis.describeSelectedTile()\n\n\t\treturn !blockedTile\n\t},\n\n\tselectNearestEnemyTile() {\n\t\tthis.clearSelectedTile()\n\t\tlet enemy = this.getClosestEnemyToPlayer()\n\t\tif (enemy !== undefined) {\n\t\t\tlet { x, y } = enemy\n\t\t\treturn this.changeSelectedTile(this.getTile(x, y))\n\t\t} else {\n\t\t\treturn false\n\t\t}\n\t},\n\n\tcycleThroughSelectableEnemies() {\n\t\tif (this.enemyCycle === null) {\n\t\t\tthis.enemyCycle = this.getNearbyEnemies()\n\t\t\tthis.enemyCycleIndex = 0\n\t\t}\n\t\t// if there's more than one enemy, we can cycle to the next closest enemy\n\t\tif (this.enemyCycle.length > 1) {\n\t\t\tthis.clearSelectedTile()\n\t\t\tthis.enemyCycleIndex += 1\n\t\t\tif (this.enemyCycleIndex === this.enemyCycle.length) {\n\t\t\t\tthis.enemyCycleIndex = 0\n\t\t\t}\n\n\t\t\tlet newTarget = this.enemyCycle[this.enemyCycleIndex]\n\t\t\treturn this.changeSelectedTile(this.getTile(newTarget.x, newTarget.y))\n\t\t}\n\t},\n\n\tdescribeSelectedTile() {\n\t\t/* Returns an array of strings describing what exists on the currently selected tile.\n        this can be obstacles, items, traps, or enemies */\n\t\tlet { actors, obstacles } = this.selectedTile\n\t\tlet names = actors\n\t\t\t.filter(a => {\n\t\t\t\treturn a instanceof Entity && a !== this.player\n\t\t\t})\n\t\t\t.map(a => {\n\t\t\t\treturn a instanceof Item ? a.type.toLowerCase() : a.name.toLowerCase()\n\t\t\t})\n\n\t\tlet obstacleDescriptions = obstacles.map(o => o.description).filter(o => o !== undefined)\n\t\tif (obstacleDescriptions.length > 0) names.push(obstacleDescriptions.slice(-1)[0])\n\t\tlet prettyNames = []\n\t\tprettyNames = names.slice(1, -1).reduce((buf, str) => {\n\t\t\treturn buf + ', ' + addPrefix(str)\n\t\t}, addPrefix(names.slice(0, 1)[0]))\n\n\t\tif (names.length > 1) {\n\t\t\tprettyNames = prettyNames + [` and ${addPrefix(names.slice(-1)[0])}`]\n\t\t} else if (names.length == 0) {\n\t\t\tprettyNames = 'nothing'\n\t\t}\n\n\t\tif ((Game.player.targeting || Game.player.casting) && this.selectedTile !== null) {\n\t\t\tlet inView = Game.map.data[this.selectedTile.y][this.selectedTile.x].actors.some(obs => {\n\t\t\t\treturn obs.id === untargetableBorders.id\n\t\t\t})\n\t\t\t\t? ' This tile is out of range or blocked.'\n\t\t\t\t: ''\n\t\t\tthis.log(`[You see ${prettyNames} here.${inView}]`, 'player_move', true)\n\t\t} else {\n\t\t\tthis.log(`[You see ${prettyNames} here.]`, 'player_move', true)\n\t\t}\n\t},\n\n\tgetTile(x, y) {\n\t\treturn this.map.data[y][x]\n\t},\n\n\tprintPlayerTile() {\n\t\tconsole.log(Game.map.data[this.player.y][this.player.x])\n\t},\n\n\teventToTile() {\n\t\tlet { x, y } = this.display.app.renderer.plugins.interaction.mouse.global\n\t\tlet camera = {\n\t\t\t// camera x,y resides in the upper left corner\n\t\t\tx: Game.player.x - ~~(Game.width / 2),\n\t\t\ty: Game.player.y - ~~(Game.height / 2) - 1\n\t\t}\n\t\tlet dx = camera.x + ~~(x / this.display.tileSize)\n\t\tlet dy = camera.y + ~~(y / this.display.tileSize)\n\t\tif (this.inbounds(dx, dy)) return this.getTile(dx, dy)\n\t\telse return null\n\t},\n\n\tlog(message, type, tmp = false) {\n\t\tlet message_color = {\n\t\t\tdefend: 'lightblue',\n\t\t\tmagic: '#6757c6',\n\t\t\tattack: 'red',\n\t\t\tdeath: 'crimson',\n\t\t\tinformation: 'yellow',\n\t\t\tplayer_move: '#878787',\n\t\t\tlevel_up: 'green',\n\t\t\talert: 'orange'\n\t\t}\n\t\tlet color = type in message_color ? message_color[type] : type\n\t\tif (tmp) this.tempMessages.splice(0, 1, [message, color])\n\t\telse this.messageHistory.push([message, color])\n\t},\n\t/* Testing Functions */\n\tgetNearestLadder() {\n\t\tlet ladders = this.map.actors.filter(a => a instanceof Ladder)\n\t\tif (ladders.length > 0) return ladders[0]\n\t\telse return null\n\t},\n\n\tgetNearestLevelTransition() {\n\t\tlet levelTransitions = this.map.actors.filter(a => a instanceof LevelTransition)\n\t\tif (levelTransitions.length > 0) return levelTransitions[0]\n\t\telse return null\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/Game.js","import ROT from 'rot-js'\n\nimport { createMapFromJSON } from '#/map/GameMap.js'\nimport Player from '#/entities/actors/Player.js'\nimport { Actor } from '#/entities/actors/Actor.js'\nimport NPC from '#/entities/actors/NPC.js'\n\nimport { Game } from '#/Game.js'\nimport Item from '#/entities/items/Item.js'\nimport * as PIXI from 'pixi.js'\n\nexport default class GameDisplay {\n\tconstructor() {\n\t\tlet smallerScreen = window.innerHeight <= 800 || window.innerWidth <= 1400\n\t\tthis.width = smallerScreen ? 800 : 1024\n\t\tthis.height = smallerScreen ? 500 : 640\n\t\tthis.scale = 1.0\n\t\tthis.app = new PIXI.Application({\n\t\t\t// forceCanvas: true,\n\t\t\twidth: this.width,\n\t\t\theight: this.height\n\t\t})\n\t\t// this will be the texture we generate by creating a container, rendering it and generating it from\n\t\t// the renderer\n\t\t/*\n\t\t\tthis.staticBackground = renderer.generateTexture(theContainer)\n\t\t*/\n\t\tthis.staticBackground = null\n\t\tthis.animatedBackground = null\n\t\tthis.FOVBackground = null\n\t\tthis.HUDBackground = null\n\t\tthis.movingSprites = []\n\t\tthis.viewPort = null\n\t\tthis.tileSize = 32\n\t\tthis.tileset = null\n\t\tthis.objectTemplates = null\n\t\tthis.tilesetMapping = {}\n\t\tthis.spriteBox = [] // Game.width * Game.height sprites to overlay screen for FOV\n\t}\n\n\tresize(scaleRatio = null) {\n\t\tlet smallerScreen = window.innerHeight <= 800 || window.innerWidth <= 1400\n\t\tlet newWidth = smallerScreen ? 800 : 1024\n\t\tlet newHeight = smallerScreen ? 500 : 640\n\t\tlet scale = smallerScreen ? 0.72 : 1.0\n\t\tif (scaleRatio !== null) scale = scaleRatio\n\t\tif (this.width !== newWidth || this.height !== newHeight || this.scale !== scale) {\n\t\t\tthis.app.renderer.resize(newWidth, newHeight)\n\t\t\tthis.app.stage.scale.x = this.app.stage.scale.y = scale\n\t\t\tthis.scale = scale\n\t\t\tthis.width = newWidth\n\t\t\tthis.height = newHeight\n\t\t}\n\t}\n\n\tloadAssets(cb) {\n\t\tlet { renderer, stage, view } = this.app\n\t\tlet { resources } = PIXI.loader\n\t\t/* Images & Texture Atlas */\n\t\tconst spritesheet = {\n\t\t\turl: 'static/images/compiled_tileset_32x32.png',\n\t\t\tname: 'spritesheet'\n\t\t}\n\t\tconst textureAtlas = {\n\t\t\turl: 'static/compiled_dawnlike.json',\n\t\t\tname: 'textureAtlas'\n\t\t}\n\t\t/* Maps */\n\t\tconst mulberryTown = {\n\t\t\turl: 'static/maps/mulberryTown.json',\n\t\t\tname: 'mulberryTown'\n\t\t}\n\n\t\tconst mulberryForest = {\n\t\t\turl: 'static/maps/mulberryForest.json',\n\t\t\tname: 'mulberryForest'\n\t\t}\n\n\t\tconst mulberryGraveyard = {\n\t\t\turl: 'static/maps/mulberryGraveyard.json',\n\t\t\tname: 'mulberryGraveyard'\n\t\t}\n\n\t\tconst lichLair = {\n\t\t\turl: 'static/maps/lichLair.json',\n\t\t\tname: 'lichLair'\n\t\t}\n\n\t\tPIXI.loader\n\t\t\t.add(spritesheet)\n\t\t\t.add(textureAtlas)\n\t\t\t.add(mulberryTown)\n\t\t\t.add(mulberryForest)\n\t\t\t.add(mulberryGraveyard)\n\t\t\t.add(lichLair)\n\t\t\t.on('progress', (l, r) => this.handleAssetLoad(l, r))\n\t\t\t.load(() => {\n\t\t\t\tthis.tileset = PIXI.loader.resources['textureAtlas'].data\n\t\t\t\t// I want to load every 32x32 frame from the tileset image\n\t\t\t\tfor (let id = 0; id < this.tileset.tilecount; id++) {\n\t\t\t\t\tlet coords = this.getTilesetCoords(id)\n\t\t\t\t\tlet frame = new PIXI.Rectangle(coords[0], coords[1], this.tileSize, this.tileSize)\n\t\t\t\t\tlet texture = new PIXI.Texture(PIXI.loader.resources['spritesheet'].texture, frame)\n\t\t\t\t\tthis.tilesetMapping[id] = texture\n\t\t\t\t}\n\t\t\t\tthis.clear()\n\t\t\t\tlet renderLoop = delta => {\n\t\t\t\t\t// maintain a track of all the sprites that should have updated movement on this tick\n\t\t\t\t\t// if they are at their location, filter them from the record\n\t\t\t\t\tfor (let obj of this.movingSprites)\n\t\t\t\t\t\tif (obj.sprite.x === obj.target.x && obj.sprite.y === obj.target.y)\n\t\t\t\t\t\t\tthis.movingSprites = this.movingSprites.filter(o => o.sprite !== obj.sprite)\n\n\t\t\t\t\t// update the location of every sprite\n\t\t\t\t\tfor (let obj of this.movingSprites) {\n\t\t\t\t\t\tlet { sprite, target } = obj\n\t\t\t\t\t\tlet x = 0\n\t\t\t\t\t\tlet y = 0\n\t\t\t\t\t\tlet distX = Math.abs(sprite.x - target.x)\n\t\t\t\t\t\tlet distY = Math.abs(sprite.y - target.y)\n\t\t\t\t\t\tlet shouldSlowDown = (distX <= 12 && distX !== 0) || (distY <= 12 && distY !== 0)\n\t\t\t\t\t\tlet movementSpeed = shouldSlowDown ? 2.0 : 4.0\n\t\t\t\t\t\tif (target.x > sprite.x) x = movementSpeed\n\t\t\t\t\t\tif (target.x < sprite.x) x = -movementSpeed\n\t\t\t\t\t\tif (target.y > sprite.y) y = movementSpeed\n\t\t\t\t\t\tif (target.y < sprite.y) y = -movementSpeed\n\t\t\t\t\t\tif (Math.abs(x) > distX) x = distX\n\t\t\t\t\t\tif (Math.abs(y) > distY) y = distY\n\t\t\t\t\t\tsprite.position.set(sprite.x + x, sprite.y + y)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.app.ticker.add(delta => renderLoop(delta))\n\t\t\t\tcb()\n\t\t\t})\n\t}\n\n\tgetTilesetCoords(id) {\n\t\tlet tileWidth = this.tileset.tilewidth\n\t\tlet tileHeight = this.tileset.tileheight\n\t\tlet cols = this.tileset.columns\n\t\tlet rowNumber = Math.floor(id / cols) * tileHeight\n\t\tlet colNumber = (id % cols) * tileHeight\n\t\treturn [colNumber, rowNumber]\n\t}\n\t/*\n\t\t\tI want to iterate through every tile in the map that is an obstacle (animated or not).\n\t\t\tFor each obstacle:\n\t\t\t\tif it is animated, create a new PIXI.extras.AnimatedSprite for it with the proper frames and animation speed\n\t\t\t\tif it is not animated, create a normal PIXI.Sprite\n\t\t\t\tOnce the obstacle sprite is created, add it to a container\n\t\t*/\n\trenderMap(map) {\n\t\tlet { renderer, stage } = this.app\n\t\tstage.removeChildren()\n\t\tlet staticBackground = new PIXI.Container()\n\t\tthis.animatedBackground = new PIXI.Container()\n\t\tfor (let y = 0; y < map.height; y++) {\n\t\t\tfor (let x = 0; x < map.width; x++) {\n\t\t\t\tlet tile = map.getTile(x, y)\n\t\t\t\tfor (let o of tile.obstacles) {\n\t\t\t\t\tif (o.animated === true && o.animated_id !== undefined && this.getTexture(o.animated_id) !== undefined) {\n\t\t\t\t\t\tlet frames = [this.getTexture(o.id), this.getTexture(o.animated_id)]\n\t\t\t\t\t\tlet sprite = new PIXI.extras.AnimatedSprite(frames)\n\t\t\t\t\t\tif (o.tint !== null) sprite.tint = o.tint\n\t\t\t\t\t\tsprite.position.set(x * this.tileSize, y * this.tileSize)\n\t\t\t\t\t\tsprite.animationSpeed = 0.025\n\t\t\t\t\t\t// pick a random interval for the animation to play at!\n\t\t\t\t\t\tlet interval = ~~(Math.random() * 150)\n\t\t\t\t\t\t// let interval = x * 5\n\t\t\t\t\t\tsetTimeout(() => sprite.play(), interval)\n\t\t\t\t\t\t// sprite.play()\n\t\t\t\t\t\tthis.animatedBackground.addChild(sprite)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet sprite = new PIXI.Sprite(this.getTexture(o.id))\n\t\t\t\t\t\tif (o.tint !== null) sprite.tint = o.tint\n\t\t\t\t\t\tsprite.position.set(x * this.tileSize, y * this.tileSize)\n\t\t\t\t\t\tstaticBackground.addChild(sprite)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.staticBackground = new PIXI.Sprite(renderer.generateTexture(staticBackground))\n\t\tthis.staticBackground.position.set(0, 0)\n\t\tthis.animatedBackground.position.set(0, 0)\n\t\tthis.background = new PIXI.Container()\n\t\tthis.background.addChild(this.staticBackground)\n\t\tthis.background.addChild(this.animatedBackground)\n\t\tstage.addChild(this.background)\n\t\tlet camera = {\n\t\t\t// camera x,y resides in the upper left corner\n\t\t\tx: Game.player.x - ~~(Game.width / 2),\n\t\t\ty: Game.player.y - ~~(Game.height / 2),\n\t\t\twidth: Math.ceil(Game.width),\n\t\t\theight: Game.height\n\t\t}\n\t\tlet startingPos = [camera.x, camera.y]\n\t\tif (camera.x < 0) {\n\t\t\t// far left\n\t\t\tstartingPos[0] = 0\n\t\t}\n\t\tif (camera.x + camera.width > Game.map.width) {\n\t\t\t// far right\n\t\t\tstartingPos[0] = Game.map.width - camera.width\n\t\t}\n\t\tif (camera.y <= 0) {\n\t\t\t// at the top of the map\n\t\t\tstartingPos[1] = 0\n\t\t}\n\t\tif (camera.y + camera.height > Game.map.height) {\n\t\t\t// at the bottom of the map\n\t\t\tstartingPos[1] = Game.map.height - camera.height\n\t\t}\n\t\tlet endingPos = [startingPos[0] + camera.width, startingPos[1] + camera.height]\n\t\tthis.background.position.set(-startingPos[0] * this.tileSize, -startingPos[1] * this.tileSize)\n\t\t// draw the actors last because they should be on the top-most layer\n\t\tfor (let a of map.actors) {\n\t\t\tif (!(a instanceof Item) || !a.inInventory) {\n\t\t\t\tthis.assignSprite(a)\n\t\t\t}\n\t\t}\n\n\t\t// if the map isn't completely revealed, we need to generate some FOV shadowing hiding the\n\t\t// unvisited parts of the map\n\t\tif (!map.revealed) {\n\t\t\tthis.FOVBackground = new PIXI.Container()\n\t\t\tthis.spriteBox = [] // Game.width * Game.height sprites to overlay screen for FOV\n\t\t\tfor (let i = 0; i < Game.map.height; i++) {\n\t\t\t\tthis.spriteBox.push([])\n\t\t\t\tfor (let j = 0; j < Game.map.width; j++) {\n\t\t\t\t\tlet sprite = new PIXI.Sprite(this.getTexture(7026))\n\t\t\t\t\tsprite.position.set(j * this.tileSize, i * this.tileSize)\n\t\t\t\t\tthis.spriteBox[i].push(sprite)\n\t\t\t\t\tthis.FOVBackground.addChild(sprite)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (let y = 0; y < map.height; y++) {\n\t\t\t\tfor (let x = 0; x < map.width; x++) {\n\t\t\t\t\tif (!map.visible_tiles[x + ',' + y]) {\n\t\t\t\t\t\tif (x + ',' + y in map.seen_tiles) {\n\t\t\t\t\t\t\tthis.spriteBox[y][x].alpha = 0.5\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.spriteBox[y][x].alpha = 1\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.spriteBox[y][x].visible = false\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.background.addChild(this.FOVBackground)\n\t\t}\n\t\tGame.drawMiniMap()\n\t}\n\n\tupdateMap() {\n\t\tlet camera = {\n\t\t\t// camera x,y resides in the upper left corner\n\t\t\tx: Game.player.x - ~~(Game.width / 2),\n\t\t\ty: Game.player.y - ~~(Game.height / 2),\n\t\t\twidth: Math.ceil(Game.width),\n\t\t\theight: Game.height\n\t\t}\n\t\tlet startingPos = [camera.x, camera.y]\n\t\tif (camera.x < 0) {\n\t\t\tstartingPos[0] = 0\n\t\t}\n\t\tif (camera.x + camera.width > Game.map.width) {\n\t\t\tstartingPos[0] = Game.map.width - camera.width\n\t\t}\n\t\tif (camera.y <= 0) {\n\t\t\tstartingPos[1] = 0\n\t\t}\n\t\tif (camera.y + camera.height > Game.map.height) {\n\t\t\tstartingPos[1] = Game.map.height - camera.height\n\t\t}\n\t\tlet endingPos = [startingPos[0] + camera.width, startingPos[1] + camera.height]\n\t\tif (!Game.map.revealed) {\n\t\t\tObject.assign(Game.map.seen_tiles, Game.map.visible_tiles)\n\t\t\tGame.map.visible_tiles = {}\n\n\t\t\t// FOV calculations\n\t\t\tlet fov = new ROT.FOV.PreciseShadowcasting((x, y) => {\n\t\t\t\treturn Game.inbounds(x, y) && Game.getTile(x, y).visible()\n\t\t\t})\n\n\t\t\tfov.compute(Game.player.x, Game.player.y, Game.player.cb.range, (x, y, r, visibility) => {\n\t\t\t\tGame.map.visible_tiles[x + ',' + y] = true\n\t\t\t})\n\t\t\tfor (let y = 0; y < Game.map.height; y++) {\n\t\t\t\tfor (let x = 0; x < Game.map.width; x++) {\n\t\t\t\t\tif (Game.map.visible_tiles[x + ',' + y]) {\n\t\t\t\t\t\tthis.spriteBox[y][x].visible = false\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// tile is not directly visible\n\t\t\t\t\t\tthis.spriteBox[y][x].visible = true\n\t\t\t\t\t\tif (Game.map.seen_tiles[x + ',' + y]) {\n\t\t\t\t\t\t\t// we can do some special transparency to make tiles closest to visible tiles brighter, giving some illusion of\n\t\t\t\t\t\t\t// less & less vision as you go farther back\n\t\t\t\t\t\t\tlet visible = (...s) => s.some(c => Game.map.visible_tiles[c])\n\t\t\t\t\t\t\tlet lighter1 = visible(\n\t\t\t\t\t\t\t\t`${x - 1},${y}`,\n\t\t\t\t\t\t\t\t`${x + 1},${y}`,\n\t\t\t\t\t\t\t\t`${x},${y - 1}`,\n\t\t\t\t\t\t\t\t`${x},${y + 1}`,\n\t\t\t\t\t\t\t\t`${x - 1},${y - 1}`,\n\t\t\t\t\t\t\t\t`${x + 1},${y + 1}`,\n\t\t\t\t\t\t\t\t`${x - 1},${y + 1}`,\n\t\t\t\t\t\t\t\t`${x + 1},${y - 1}`\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t// let lighter2 = visible(\n\t\t\t\t\t\t\t//     `${x - 2},${y}`,\n\t\t\t\t\t\t\t//     `${x + 2},${y}`,\n\t\t\t\t\t\t\t//     `${x},${y - 2}`,\n\t\t\t\t\t\t\t//     `${x},${y + 2}`,\n\t\t\t\t\t\t\t//     `${x - 2},${y - 2}`,\n\t\t\t\t\t\t\t//     `${x + 2},${y + 2}`,\n\t\t\t\t\t\t\t//     `${x - 2},${y + 2}`,\n\t\t\t\t\t\t\t//     `${x + 2},${y - 2}`\n\t\t\t\t\t\t\t// )\n\t\t\t\t\t\t\tthis.spriteBox[y][x].alpha = lighter1 ? 0.5 : 0.7\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.spriteBox[y][x].alpha = 1\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!Game.userSettings.hpBars) {\n\t\t\tfor (let actor of Game.map.actors) {\n\t\t\t\tif (actor.spriteHPBar !== undefined) {\n\t\t\t\t\tthis.background.removeChild(actor.spriteHPBar)\n\t\t\t\t\tactor.spriteHPBar = undefined\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let x = camera.x; x < camera.x + camera.width - 1; x++) {\n\t\t\t\tfor (let y = camera.y; y < camera.y + camera.height - 1; y++) {\n\t\t\t\t\tif (Game.inbounds(x, y)) {\n\t\t\t\t\t\tif (Game.map.revealed || Game.map.visible_tiles[x + ',' + y]) {\n\t\t\t\t\t\t\tlet tile = Game.getTile(x, y)\n\t\t\t\t\t\t\tlet actors = tile.actors.filter(a => {\n\t\t\t\t\t\t\t\treturn a instanceof Actor && !(a instanceof Player) && !(a instanceof NPC)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tif (actors.length >= 1) {\n\t\t\t\t\t\t\t\tfor (let a of actors) {\n\t\t\t\t\t\t\t\t\tif (a.spriteHPBar !== undefined) {\n\t\t\t\t\t\t\t\t\t\tthis.background.removeChild(a.spriteHPBar)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (a.cb.hp < a.cb.maxhp) {\n\t\t\t\t\t\t\t\t\t\t// create new PIXI Sprite to be the health bar\n\t\t\t\t\t\t\t\t\t\tlet g = new PIXI.Graphics()\n\t\t\t\t\t\t\t\t\t\tlet gx = a.x * this.tileSize\n\t\t\t\t\t\t\t\t\t\tlet gy = (a.y - 0.5) * this.tileSize\n\t\t\t\t\t\t\t\t\t\t// background\n\t\t\t\t\t\t\t\t\t\tg.beginFill(0xa22a2a)\n\t\t\t\t\t\t\t\t\t\tg.drawRect(gx + 1, gy, this.tileSize - 2, 7)\n\t\t\t\t\t\t\t\t\t\t// foreground\n\t\t\t\t\t\t\t\t\t\tg.beginFill(0xff5252)\n\t\t\t\t\t\t\t\t\t\tlet width = a.cb.hp / a.cb.maxhp * (this.tileSize - 4)\n\t\t\t\t\t\t\t\t\t\tg.drawRect(gx + 2, gy + 1, width, 5)\n\t\t\t\t\t\t\t\t\t\tg.endFill()\n\t\t\t\t\t\t\t\t\t\tlet sprite = new PIXI.Sprite(this.app.renderer.generateTexture(g))\n\t\t\t\t\t\t\t\t\t\tsprite.position.set(gx, gy)\n\t\t\t\t\t\t\t\t\t\ta.setSpriteHPBar(sprite)\n\t\t\t\t\t\t\t\t\t\tthis.background.addChild(sprite)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.moveSprite(this.background, -startingPos[0], -startingPos[1])\n\t\tGame.drawMiniMap()\n\t}\n\n\tgetTexture(id) {\n\t\treturn this.tilesetMapping[id]\n\t}\n\n\tmoveSprite(sprite, x, y, animate = true) {\n\t\t// used to smoothly pan the map from its curent location to a new one\n\t\t// by adding it to the list of sprites who should smoothly progress towards some location\n\t\tlet nx = x * this.tileSize\n\t\tlet ny = y * this.tileSize\n\t\tif (animate) {\n\t\t\tlet existingMovementObject = this.movingSprites.filter(o => {\n\t\t\t\treturn o.sprite === sprite\n\t\t\t})\n\t\t\tif (existingMovementObject.length > 0) {\n\t\t\t\t// sprite.position.set(nx, ny)\n\t\t\t\tthis.movingSprites = this.movingSprites.filter(o => {\n\t\t\t\t\treturn o.sprite !== sprite\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tthis.movingSprites.push({ sprite, target: { x: nx, y: ny } })\n\t\t} else {\n\t\t\tsprite.position.set(nx, ny)\n\t\t}\n\t}\n\n\tassignSprite(actor, belowPlayer = false, index = 1) {\n\t\tlet { x, y, id } = actor\n\t\tlet props = this.tileset.tileproperties[actor.id]\n\t\t// if (actor.sprite === null || actor.sprite === undefined) {\n\t\tif (\n\t\t\tprops !== undefined &&\n\t\t\tprops.animated === true &&\n\t\t\tprops.animated_id !== undefined &&\n\t\t\tthis.getTexture(props.animated_id) !== undefined\n\t\t) {\n\t\t\tlet frames = [this.getTexture(actor.id), this.getTexture(props.animated_id)]\n\t\t\tlet sprite = new PIXI.extras.AnimatedSprite(frames)\n\t\t\tactor.setSprite(sprite)\n\t\t\tsprite.animationSpeed = 0.065\n\t\t\tlet randomInterval = ~~(Math.random() * 1000)\n\t\t\tsetTimeout(() => sprite.play(), randomInterval)\n\t\t\tif (belowPlayer) this.background.addChildAt(sprite, index)\n\t\t\telse this.background.addChild(sprite)\n\t\t\tsprite.position.set(actor.x * this.tileSize, actor.y * this.tileSize)\n\t\t} else {\n\t\t\tlet sprite = new PIXI.Sprite(this.getTexture(actor.id))\n\t\t\tactor.setSprite(sprite)\n\t\t\tif (belowPlayer) this.background.addChildAt(sprite, 1)\n\t\t\telse this.background.addChild(sprite)\n\t\t\tsprite.position.set(actor.x * this.tileSize, actor.y * this.tileSize)\n\t\t}\n\t}\n\n\tclearSprite(actor) {\n\t\tthis.background.removeChild(actor.sprite)\n\t\tactor.sprite = null\n\t}\n\n\tremoveChild(sprite) {\n\t\tthis.background.removeChild(sprite)\n\t}\n\n\tgetContainer() {\n\t\treturn this.app.view\n\t}\n\n\thandleAssetLoad(loader, resource) {\n\t\tlet { stage, renderer } = this.app\n\t\tthis.clear()\n\t\t// let graphics = new PIXI.Graphics()\n\t\tlet cx = renderer.width / 2\n\t\tlet cy = renderer.height / 2\n\t\t// let barLength = renderer.width / 2\n\t\tlet text = new PIXI.Text(`Loading ${resource.name}... ${Math.floor(loader.progress)}%`, {\n\t\t\tfill: 0xffffff,\n\t\t\tfontSize: 16,\n\t\t\tfontFamily: ['Source Code Pro', 'Menlo', 'Consolas'],\n\t\t\tx: cx,\n\t\t\ty: cy\n\t\t})\n\t\t// // clear the previous progress bar\n\t\t// // draw the progress bar outline\n\t\t// graphics.lineStyle(50, 0x6f6f6f)\n\t\t// graphics.drawRoundedRect(cx - barLength / 2, cy, barLength, 4)\n\t\t// // draw the progress bar interior\n\t\t// let maxInteriorBarLength = barLength - 10\n\t\t// let currentBarLength = maxInteriorBarLength * (loader.progress / 100)\n\t\t// graphics.lineStyle(30, 0x04ab34)\n\t\t// graphics.drawRoundedRect(cx - maxInteriorBarLength / 2, cy, currentBarLength, 4)\n\t\t// stage.addChild(graphics)\n\t\tstage.addChild(text)\n\t}\n\n\tclear() {\n\t\tthis.app.stage.removeChildren()\n\t}\n\n\tact() {\n\t\tGame.engine.lock()\n\t\tthis.updateMap()\n\t\tGame.engine.unlock()\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/game/GameDisplay.js","<style>\r\n.ability {\r\n\tcursor: pointer;\r\n\tborder: 2px solid #4f4f4f;\r\n\tborder-radius: 4px;\r\n}\r\n\r\n.sprite {\r\n\tcursor: pointer;\r\n\tpadding: 3px;\r\n}\r\n\r\n.sprite:hover {\r\n\tcursor: pointer;\r\n\tbackground-color: #565656;\r\n\tpadding: 3px;\r\n\tborder-radius: 2px;\r\n}\r\n\r\n.spriteIsSelected {\r\n\tcursor: pointer;\r\n\tbackground-color: rgb(103, 141, 255);\r\n\tborder-radius: 2px;\r\n}\r\n</style>\r\n\r\n<template>\r\n\r\n<v-app dark>\r\n    <v-container fluid grid-list-xl>\r\n        <v-layout row>\r\n            <v-flex xs12>\r\n                <h2>Welcome to Rotten Soup</h2>\r\n            </v-flex>\r\n        </v-layout>\r\n        <v-layout row>\r\n            <v-flex>\r\n                <h3>Select your hero by clicking on the character you want to play</h3>\r\n            </v-flex>\r\n        </v-layout>\r\n        <v-layout row wrap>\r\n            <v-flex style=\"padding: 10px\" xs4 v-for=\"(sprite, index) in playerSprites\" :key=\"index\">\r\n                <!-- Card representing player class -->\r\n                <v-card style=\"padding: 25px\">\r\n                    <!-- Class name and short description  -->\r\n                    <v-layout row>\r\n                        <div>\r\n                            <h3>{{sprite.name}}</h3>\r\n                            <p>{{sprite.description}}</p>\r\n                        </div>\r\n                    </v-layout>\r\n                    <!--  Class abilities and stats-->\r\n                    <!-- <v-layout row>\r\n                        <div>\r\n                            <p>\r\n                                Abilities\r\n                            </p>\r\n                            <v-flex xs4 v-for=\"(ability, index) in sprite.abilities\" key=\"index\">\r\n                                <v-layout row>\r\n                                    <v-tooltip bottom align-center>\r\n                                        <p class=\"text-xs-center ma-0\" style=\"max-width: 200px\">\r\n                                            {{ability.description}}\r\n                                        </p>\r\n                                        <img\r\n                                            class=\"ability\"\r\n                                            v-bind:src=\"getSpellSplashArt(ability.school.toLowerCase(), ability.art)\"\r\n                                            slot=\"activator\"\r\n                                        />\r\n                                    </v-tooltip>\r\n                                </v-layout>\r\n                            </v-flex>\r\n                        </div>\r\n                    </v-layout> -->\r\n                    <!-- Possible sprites player can choose to play  -->\r\n                    <v-layout row>\r\n                        <h5>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tCharacters\r\n\t\t\t\t\t\t\t\t\t\t\t\t</h5>\r\n                    </v-layout>\r\n                    <v-layout row>\r\n                        <v-flex class=\"mr-2 ml-2\" xs1 v-for=\"id in sprite.sprites\" :key=\"id\">\r\n                          <img v-on:click=\"selectSprite(id)\" v-bind:class=\"{spriteIsSelected : (selectedSprite === id), sprite : (selectedSprite !== id)}\" :src=\"getPlayerSpriteImage(id)\" />\r\n                        </v-flex>\r\n                    </v-layout>\r\n                </v-card>\r\n            </v-flex>\r\n        </v-layout>\r\n    </v-container>\r\n</v-app>\r\n\r\n</template>\r\n\r\n<script>\r\n// import { Game } from '@/assets/js/game/Game.js'\r\n\r\nexport default {\r\n\tname: 'start-menu',\r\n\t// props: ['Game'],\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tselectedSprite: null,\r\n\t\t\tplayerSprites: [\r\n\t\t\t\t{\r\n\t\t\t\t\tname: 'Monk',\r\n\t\t\t\t\tdescription: 'A master of martial arts with special healing abilities',\r\n\t\t\t\t\tabilities: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname: 'Magic Dart',\r\n\t\t\t\t\t\t\tdescription: 'A magical dart of energy that deals between 1-8 damage to a target',\r\n\t\t\t\t\t\t\tschool: 'conjuration',\r\n\t\t\t\t\t\t\tart: 'magic_dart'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tstats: {\r\n\t\t\t\t\t\thp: 50,\r\n\t\t\t\t\t\tstrength: 1,\r\n\t\t\t\t\t\tdexterity: 1,\r\n\t\t\t\t\t\twisdom: 1\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsprites: [4812, 4453, 3859, 4219]\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tname: 'Ninja',\r\n\t\t\t\t\tdescription: 'A sneaky ninja of a secret order with the ability to stealth',\r\n\t\t\t\t\tabilities: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname: 'Magic Dart',\r\n\t\t\t\t\t\t\tdescription: 'A magical dart of energy that deals between 1-8 damage to a target',\r\n\t\t\t\t\t\t\tschool: 'conjuration',\r\n\t\t\t\t\t\t\tart: 'magic_dart'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tstats: {\r\n\t\t\t\t\t\thp: 50,\r\n\t\t\t\t\t\tstrength: 1,\r\n\t\t\t\t\t\tdexterity: 1,\r\n\t\t\t\t\t\twisdom: 1\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsprites: [4334, 4814]\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tname: 'Knight',\r\n\t\t\t\t\tdescription: 'A proud knight, sworn to uphold chivalric values',\r\n\t\t\t\t\tabilities: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname: 'Magic Dart',\r\n\t\t\t\t\t\t\tdescription: 'A magical dart of energy that deals between 1-8 damage to a target',\r\n\t\t\t\t\t\t\tschool: 'conjuration',\r\n\t\t\t\t\t\t\tart: 'magic_dart'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tstats: {\r\n\t\t\t\t\t\thp: 50,\r\n\t\t\t\t\t\tstrength: 1,\r\n\t\t\t\t\t\tdexterity: 1,\r\n\t\t\t\t\t\twisdom: 1\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsprites: [4213, 4693]\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tname: 'Barbarian',\r\n\t\t\t\t\tdescription: 'A wild and vicious savage with extreme strength and rage',\r\n\t\t\t\t\tabilities: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname: 'Magic Dart',\r\n\t\t\t\t\t\t\tdescription: 'A magical dart of energy that deals between 1-8 damage to a target',\r\n\t\t\t\t\t\t\tschool: 'conjuration',\r\n\t\t\t\t\t\t\tart: 'magic_dart'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tstats: {\r\n\t\t\t\t\t\thp: 50,\r\n\t\t\t\t\t\tstrength: 1,\r\n\t\t\t\t\t\tdexterity: 1,\r\n\t\t\t\t\t\twisdom: 1\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsprites: [4337, 4336]\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tname: 'Wizard',\r\n\t\t\t\t\tdescription: 'A scholar of the arcane and all things magical',\r\n\t\t\t\t\tabilities: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname: 'Magic Dart',\r\n\t\t\t\t\t\t\tdescription: 'A magical dart of energy that deals between 1-8 damage to a target',\r\n\t\t\t\t\t\t\tschool: 'conjuration',\r\n\t\t\t\t\t\t\tart: 'magic_dart'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tstats: {\r\n\t\t\t\t\t\thp: 50,\r\n\t\t\t\t\t\tstrength: 1,\r\n\t\t\t\t\t\tdexterity: 1,\r\n\t\t\t\t\t\twisdom: 1\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsprites: [3858, 4218, 4813]\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tname: 'Centaur',\r\n\t\t\t\t\tdescription: 'Half-man, half-beast with high speed and agility',\r\n\t\t\t\t\tabilities: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname: 'Magic Dart',\r\n\t\t\t\t\t\t\tdescription: 'A magical dart of energy that deals between 1-8 damage to a target',\r\n\t\t\t\t\t\t\tschool: 'conjuration',\r\n\t\t\t\t\t\t\tart: 'magic_dart'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tstats: {\r\n\t\t\t\t\t\thp: 50,\r\n\t\t\t\t\t\tstrength: 1,\r\n\t\t\t\t\t\tdexterity: 1,\r\n\t\t\t\t\t\twisdom: 1\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsprites: [8521, 8522, 8523]\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t},\r\n\tcreated() {},\r\n\tmethods: {\r\n\t\tgetPlayerSpriteImage(id) {\r\n\t\t\treturn `../static/images/player_sprites/${id}.png`\r\n\t\t},\r\n\t\tselectSprite(id) {\r\n\t\t\tthis.$emit('spriteSelected', id)\r\n\t\t\t// this.selectedSprite = id\r\n\t\t\t// this.loadGame()\r\n\t\t},\r\n\t\tgetSpellSplashArt(school, name) {\r\n\t\t\treturn `../static/images/spells/${school}/${name}.png`\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/StartMenu.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{attrs:{\"dark\":\"\"}},[_c('v-container',{attrs:{\"fluid\":\"\",\"grid-list-xl\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('h2',[_vm._v(\"Welcome to Rotten Soup\")])])],1),_vm._v(\" \"),_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',[_c('h3',[_vm._v(\"Select your hero by clicking on the character you want to play\")])])],1),_vm._v(\" \"),_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},_vm._l((_vm.playerSprites),function(sprite,index){return _c('v-flex',{key:index,staticStyle:{\"padding\":\"10px\"},attrs:{\"xs4\":\"\"}},[_c('v-card',{staticStyle:{\"padding\":\"25px\"}},[_c('v-layout',{attrs:{\"row\":\"\"}},[_c('div',[_c('h3',[_vm._v(_vm._s(sprite.name))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(sprite.description))])])]),_vm._v(\" \"),_c('v-layout',{attrs:{\"row\":\"\"}},[_c('h5',[_vm._v(\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tCharacters\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\")])]),_vm._v(\" \"),_c('v-layout',{attrs:{\"row\":\"\"}},_vm._l((sprite.sprites),function(id){return _c('v-flex',{key:id,staticClass:\"mr-2 ml-2\",attrs:{\"xs1\":\"\"}},[_c('img',{class:{spriteIsSelected : (_vm.selectedSprite === id), sprite : (_vm.selectedSprite !== id)},attrs:{\"src\":_vm.getPlayerSpriteImage(id)},on:{\"click\":function($event){_vm.selectSprite(id)}}})])}))],1)],1)}))],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-a6cee348\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/StartMenu.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a6cee348\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./StartMenu.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./StartMenu.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./StartMenu.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a6cee348\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./StartMenu.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/StartMenu.vue\n// module id = null\n// module chunks = ","<template>\r\n    <v-layout id=\"console_container\">\r\n      <v-flex column align-start>\r\n        <v-list id=\"console\" class=\"pt-3\">\r\n          <li class=\"ml-2\" v-for=\"(message, index) in getMessages()\" v-bind:key=\"index\">\r\n            <p><b v-bind:style=\"{color : message[1]}\">{{message[0]}}</b></p>\r\n          </li>\r\n          <!-- Temporary log item for displaying info that isn't stored (examine text, or \"this is blocked\")  -->\r\n          <li class=\"ml-2\" v-for=\"(message, index) in getTempMessages()\">\r\n            <p><b v-bind:style=\"{color : message[1]}\">{{message[0]}}</b> </p>\r\n          </li>\r\n        </v-list>\r\n      </v-flex>\r\n      <v-flex id=\"scroll_controls\" column class=\"text-xs-center\" style=\"max-width: 27px\">\r\n        <v-layout>\r\n          <v-flex xs12 class=\"text-xs-center\">\r\n            <v-icon class=\"scroll_controls\" v-on:click=\"up()\" small>fa-angle-up</v-icon>\r\n          </v-flex>\r\n        </v-layout>\r\n        <v-layout style=\"height: 70px;\" />\r\n        <v-layout>\r\n          <v-flex xs12 class=\"text-xs-center\">\r\n            <v-icon class=\"scroll_controls\" v-on:click=\"down()\" small>fa-angle-down</v-icon>\r\n          </v-flex>\r\n        </v-layout>\r\n        <v-layout>\r\n          <v-flex xs12 class=\"text-xs-center\">\r\n              <v-icon class=\"scroll_controls\" v-on:click=\"resetOffset()\" small>fa-angle-double-down</v-icon>\r\n          </v-flex>\r\n        </v-layout>\r\n        <!-- <v-layout>\r\n          <v-flex xs12 class=\"text-xs-center\">\r\n            <v-icon class=\"scroll_controls\" v-on:click=\"\" small>fa-sticky-note</v-icon>\r\n          </v-flex>\r\n        </v-layout> -->\r\n      </v-flex>\r\n    </v-layout>\r\n</template>\r\n\r\n<script>\r\nimport { Game } from '#/Game.js'\r\n\r\n/* import your actions here */\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tmessages: Game.messageHistory,\r\n\t\t\ttempMessages: Game.tempMessages,\r\n\t\t\toffset: 0\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tgetTempMessages() {\r\n\t\t\treturn this.tempMessages\r\n\t\t},\r\n\t\tgetMessages() {\r\n\t\t\treturn this.messages.slice(-10 + -this.offset + this.getTempMessages().length)\r\n\t\t},\r\n\t\tresetOffset() {\r\n\t\t\tthis.offset = 0\r\n\t\t},\r\n\t\tdown() {\r\n\t\t\tif (this.offset > 0) this.offset--\r\n\t\t},\r\n\t\tup() {\r\n\t\t\tif (this.offset < this.messages.length - 10) this.offset++\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n#console_container {\r\n\tborder-top: 4px solid #4f4f4f;\r\n\tbackground-color: #1e1f1f;\r\n}\r\n\r\n#console {\r\n\tfont-size: 14px;\r\n\tfont-style: normal;\r\n\tfont-weight: normal;\r\n\theight: 170px;\r\n\tline-height: 0;\r\n\toverflow: hidden;\r\n\tposition: relative;\r\n\tbackground-color: inherit;\r\n}\r\n\r\n.scroll_controls {\r\n\tpadding: 3px;\r\n\tcursor: pointer;\r\n}\r\n\r\n.scroll_controls:hover {\r\n\tcursor: pointer;\r\n\tborder-radius: 4px;\r\n\tbackground-color: #4a5d69;\r\n}\r\n\r\nul {\r\n\tpadding: 0;\r\n\tlist-style-type: none;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/MessageLog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layout',{attrs:{\"id\":\"console_container\"}},[_c('v-flex',{attrs:{\"column\":\"\",\"align-start\":\"\"}},[_c('v-list',{staticClass:\"pt-3\",attrs:{\"id\":\"console\"}},[_vm._l((_vm.getMessages()),function(message,index){return _c('li',{key:index,staticClass:\"ml-2\"},[_c('p',[_c('b',{style:({color : message[1]})},[_vm._v(_vm._s(message[0]))])])])}),_vm._v(\" \"),_vm._l((_vm.getTempMessages()),function(message,index){return _c('li',{staticClass:\"ml-2\"},[_c('p',[_c('b',{style:({color : message[1]})},[_vm._v(_vm._s(message[0]))])])])})],2)],1),_vm._v(\" \"),_c('v-flex',{staticClass:\"text-xs-center\",staticStyle:{\"max-width\":\"27px\"},attrs:{\"id\":\"scroll_controls\",\"column\":\"\"}},[_c('v-layout',[_c('v-flex',{staticClass:\"text-xs-center\",attrs:{\"xs12\":\"\"}},[_c('v-icon',{staticClass:\"scroll_controls\",attrs:{\"small\":\"\"},on:{\"click\":function($event){_vm.up()}}},[_vm._v(\"fa-angle-up\")])],1)],1),_vm._v(\" \"),_c('v-layout',{staticStyle:{\"height\":\"70px\"}}),_vm._v(\" \"),_c('v-layout',[_c('v-flex',{staticClass:\"text-xs-center\",attrs:{\"xs12\":\"\"}},[_c('v-icon',{staticClass:\"scroll_controls\",attrs:{\"small\":\"\"},on:{\"click\":function($event){_vm.down()}}},[_vm._v(\"fa-angle-down\")])],1)],1),_vm._v(\" \"),_c('v-layout',[_c('v-flex',{staticClass:\"text-xs-center\",attrs:{\"xs12\":\"\"}},[_c('v-icon',{staticClass:\"scroll_controls\",attrs:{\"small\":\"\"},on:{\"click\":function($event){_vm.resetOffset()}}},[_vm._v(\"fa-angle-double-down\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4ba4b0fa\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MessageLog.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4ba4b0fa\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./MessageLog.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MessageLog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MessageLog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4ba4b0fa\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./MessageLog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/MessageLog.vue\n// module id = null\n// module chunks = ","<template>\r\n    <v-flex column style=\"max-width: 1120px;\">\r\n        <v-layout row style=\"padding: 0px;\">\r\n            <!--<item-transfer-modal></item-transfer-modal>-->\r\n            <div style=\"margin:0; padding:0;\" id=\"game_container\">\r\n            </div>\r\n        </v-layout>\r\n        <message-log></message-log>\r\n    </v-flex>\r\n</template>\r\n\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\nimport messageLog from './MessageLog.vue'\r\n/* import other components here */\r\nexport default {\r\n\tcomponents: {\r\n\t\t'message-log': messageLog\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\t// gameContainer: Game.dispay.getContainer()\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n<style>\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/GameDisplay.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-flex',{staticStyle:{\"max-width\":\"1120px\"},attrs:{\"column\":\"\"}},[_c('v-layout',{staticStyle:{\"padding\":\"0px\"},attrs:{\"row\":\"\"}},[_c('div',{staticStyle:{\"margin\":\"0\",\"padding\":\"0\"},attrs:{\"id\":\"game_container\"}})]),_vm._v(\" \"),_c('message-log')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0fd20502\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/GameDisplay.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0fd20502\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./GameDisplay.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./GameDisplay.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./GameDisplay.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0fd20502\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./GameDisplay.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/GameDisplay.vue\n// module id = null\n// module chunks = ","<style scoped>\r\n.inventory_row {\r\n\t/*margin-left: 10px;*/\r\n}\r\n\r\n.inventory_cell {\r\n\tmargin: 2px;\r\n\tborder: 2px solid #4f4f4f;\r\n\tbackground-color: #294646;\r\n\tborder-radius: 4px;\r\n\tmin-width: 40px;\r\n\tmin-height: 40px;\r\n\tmax-width: 40px !important;\r\n\tmax-height: 40px !important;\r\n}\r\n\r\n.inventory_cell:hover {\r\n\tbackground-color: #698394;\r\n\tcursor: pointer;\r\n}\r\n\r\n.selectedItem {\r\n\tbackground-color: green;\r\n\tmargin: 2px;\r\n\tborder: 2px solid #3d3d3d;\r\n\tborder-radius: 4px;\r\n\tmin-width: 40px;\r\n\tmin-height: 40px;\r\n\tmax-width: 40px !important;\r\n\tmax-height: 40px !important;\r\n}\r\n\r\n.selectedItem:hover {\r\n\tbackground-color: #009e00;\r\n\tcursor: pointer;\r\n}\r\n</style>\r\n\r\n<template>\r\n\r\n<v-container fluid class=\"pa-0\">\r\n  <v-layout row>\r\n    <v-flex xs4><b>Items</b></v-flex>\r\n  </v-layout>\r\n    <draggable element=\"v-layout\" v-model=\"inventory\" row wrap class=\"layout inventory_row row\">\r\n        <v-flex xs1 col v-for=\"(cell, i) in getInventory()\" v-bind:key=\"i\" v-bind:class=\"{selectedItem : colorSlot(cell), inventory_cell : ! colorSlot(cell)}\" align-center>\r\n            <v-tooltip open-delay=\"200\" bottom v-if=\"cell.item !== null\" align-center>\r\n                <p class=\"text-xs-center ma-0\">\r\n                    {{cell.item.getAction()}} {{cell.item.type}}\r\n                    <br />\r\n                    <span v-if=\"'name' in cell.item\">{{\"Name: \" + cell.item.name}}<br /></span> {{cell.item.hoverInfo()}}\r\n                </p>\r\n                <v-layout ripple v-on:click=\"useItem(cell, $event)\" v-if=\"cell.item !== null\" slot=\"activator\" @contextmenu=\"show(cell, $event)\" row>\r\n                    <v-menu offset-x :nudge-width=\"200\" :close-on-click=\"true\" v-model=\"cell.menu\" absolute :position-x=\"x\" :position-y=\"y\">\r\n                        <v-card>\r\n                            <v-list>\r\n                                <v-list-tile avatar>\r\n                                    <v-list-tile-avatar>\r\n                                        <img v-bind:src=\"getInventorySprite(cell.item.id)\">\r\n                                    </v-list-tile-avatar>\r\n                                    <v-list-tile-content>\r\n                                        <v-list-tile-title>{{cell.item.type}}</v-list-tile-title>\r\n                                        <v-list-tile-sub-title>{{cell.item.hoverInfo()}}</v-list-tile-sub-title>\r\n                                    </v-list-tile-content>\r\n                                </v-list-tile>\r\n                            </v-list>\r\n                            <v-divider></v-divider>\r\n                            <v-card-actions>\r\n                                <v-btn flat color=\"blue\" @click=\"useItem(cell, $event)\">{{cell.item.getAction()}}</v-btn>\r\n                                <v-btn flat color=\"red\" @click=\"dropItem(cell, $event)\">Drop</v-btn>\r\n                            </v-card-actions>\r\n                        </v-card>\r\n                    </v-menu>\r\n                    <v-badge overlay bottom color=\"grey\" overlap>\r\n                        <span v-if=\"cell.item.quantity !== undefined\" slot=\"badge\" dark>\r\n                                    <b>{{cell.item.quantity}}</b>\r\n                                </span>\r\n                        <img v-bind:src=\"getInventorySprite(cell.item.id)\" />\r\n                    </v-badge>\r\n                </v-layout>\r\n            </v-tooltip>\r\n        </v-flex>\r\n    </draggable>\r\n</v-container>\r\n\r\n</template>\r\n\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\nimport draggable from 'vuedraggable'\r\n\r\n/* import other components here */\r\nexport default {\r\n\tcomponents: {\r\n\t\tdraggable\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tinventory: [],\r\n\t\t\tlength: Game.player.inventory,\r\n\t\t\trows: [1, 2, 3, 4],\r\n\t\t\tx: 0,\r\n\t\t\ty: 0\r\n\t\t}\r\n\t},\r\n\tcreated() {},\r\n\tmethods: {\r\n\t\tgetInventorySprite(id) {\r\n\t\t\treturn `../static/images/inventory_sprites/${id}.png`\r\n\t\t},\r\n\t\tcolorSlot(cell) {\r\n\t\t\tif (cell.item !== null && 'cb' in cell.item) {\r\n\t\t\t\treturn cell.item.cb.equipped\r\n\t\t\t} else {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetInventoryRow(n) {\r\n\t\t\t// let inventory = Game.player.inventory\r\n\t\t\tlet offset = n * (Game.player.inventory.length / this.rows.length)\r\n\t\t\treturn Game.player.inventory.slice(offset, offset + Game.player.inventory.length / this.rows.length)\r\n\t\t},\r\n\t\tuseItem(cell, evt) {\r\n\t\t\t// drop cell.item\r\n\t\t\tif (evt.shiftKey) {\r\n\t\t\t\tcell.item.drop()\r\n\t\t\t} else {\r\n\t\t\t\t// use cell.item\r\n\t\t\t\tcell.item.use()\r\n\t\t\t}\r\n\t\t},\r\n\t\tdropItem(cell, evt) {\r\n\t\t\t// drop cell.item\r\n\t\t\tcell.item.drop()\r\n\t\t},\r\n\t\tgetInventory() {\r\n\t\t\treturn Game.player.inventory\r\n\t\t},\r\n\t\tshow(cell, e) {\r\n\t\t\te.preventDefault()\r\n\t\t\tGame.player.inventory.forEach(slot => {\r\n\t\t\t\tslot.menu = false\r\n\t\t\t})\r\n\t\t\tthis.x = e.clientX\r\n\t\t\tthis.y = e.clientY\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tcell.menu = true\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Inventory.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"pa-0\",attrs:{\"fluid\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs4\":\"\"}},[_c('b',[_vm._v(\"Items\")])])],1),_vm._v(\" \"),_c('draggable',{staticClass:\"layout inventory_row row\",attrs:{\"element\":\"v-layout\",\"row\":\"\",\"wrap\":\"\"},model:{value:(_vm.inventory),callback:function ($$v) {_vm.inventory=$$v},expression:\"inventory\"}},_vm._l((_vm.getInventory()),function(cell,i){return _c('v-flex',{key:i,class:{selectedItem : _vm.colorSlot(cell), inventory_cell : ! _vm.colorSlot(cell)},attrs:{\"xs1\":\"\",\"col\":\"\",\"align-center\":\"\"}},[(cell.item !== null)?_c('v-tooltip',{attrs:{\"open-delay\":\"200\",\"bottom\":\"\",\"align-center\":\"\"}},[_c('p',{staticClass:\"text-xs-center ma-0\"},[_vm._v(\"\\r\\n                    \"+_vm._s(cell.item.getAction())+\" \"+_vm._s(cell.item.type)+\"\\r\\n                    \"),_c('br'),_vm._v(\" \"),('name' in cell.item)?_c('span',[_vm._v(_vm._s(\"Name: \" + cell.item.name)),_c('br')]):_vm._e(),_vm._v(\" \"+_vm._s(cell.item.hoverInfo())+\"\\r\\n                \")]),_vm._v(\" \"),(cell.item !== null)?_c('v-layout',{attrs:{\"slot\":\"activator\",\"ripple\":\"\",\"row\":\"\"},on:{\"click\":function($event){_vm.useItem(cell, $event)},\"contextmenu\":function($event){_vm.show(cell, $event)}},slot:\"activator\"},[_c('v-menu',{attrs:{\"offset-x\":\"\",\"nudge-width\":200,\"close-on-click\":true,\"absolute\":\"\",\"position-x\":_vm.x,\"position-y\":_vm.y},model:{value:(cell.menu),callback:function ($$v) {_vm.$set(cell, \"menu\", $$v)},expression:\"cell.menu\"}},[_c('v-card',[_c('v-list',[_c('v-list-tile',{attrs:{\"avatar\":\"\"}},[_c('v-list-tile-avatar',[_c('img',{attrs:{\"src\":_vm.getInventorySprite(cell.item.id)}})]),_vm._v(\" \"),_c('v-list-tile-content',[_c('v-list-tile-title',[_vm._v(_vm._s(cell.item.type))]),_vm._v(\" \"),_c('v-list-tile-sub-title',[_vm._v(_vm._s(cell.item.hoverInfo()))])],1)],1)],1),_vm._v(\" \"),_c('v-divider'),_vm._v(\" \"),_c('v-card-actions',[_c('v-btn',{attrs:{\"flat\":\"\",\"color\":\"blue\"},on:{\"click\":function($event){_vm.useItem(cell, $event)}}},[_vm._v(_vm._s(cell.item.getAction()))]),_vm._v(\" \"),_c('v-btn',{attrs:{\"flat\":\"\",\"color\":\"red\"},on:{\"click\":function($event){_vm.dropItem(cell, $event)}}},[_vm._v(\"Drop\")])],1)],1)],1),_vm._v(\" \"),_c('v-badge',{attrs:{\"overlay\":\"\",\"bottom\":\"\",\"color\":\"grey\",\"overlap\":\"\"}},[(cell.item.quantity !== undefined)?_c('span',{attrs:{\"slot\":\"badge\",\"dark\":\"\"},slot:\"badge\"},[_c('b',[_vm._v(_vm._s(cell.item.quantity))])]):_vm._e(),_vm._v(\" \"),_c('img',{attrs:{\"src\":_vm.getInventorySprite(cell.item.id)}})])],1):_vm._e()],1):_vm._e()],1)}))],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-46096a4a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Inventory.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-46096a4a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Inventory.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Inventory.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Inventory.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-46096a4a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Inventory.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-46096a4a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Inventory.vue\n// module id = null\n// module chunks = ","<template>\r\n    <v-container class=\"modal elevation-24\" v-if=\"inventoryModalOpened\">\r\n        <v-layout row>\r\n            <!-- Non-player inventory items -->\r\n            <v-flex xs5 col>\r\n                <h3>Bob the NPC</h3>\r\n                <inventory></inventory>\r\n            </v-flex>\r\n            <!-- Middle functionality (?) -->\r\n            <v-flex xs2 col></v-flex>\r\n            <!-- Player Inventory -->\r\n            <v-flex xs5 col>\r\n                <h3>Your Items</h3>\r\n\r\n                <inventory></inventory>\r\n            </v-flex>\r\n        </v-layout>\r\n    </v-container>\r\n</template>\r\n\r\n<script>\r\n    /* import other components here */\r\n    import inventory from './Inventory.vue'\r\n    export default {\r\n        components: {\r\n            'inventory': inventory\r\n        },\r\n        data() {\r\n            return {\r\n                inventoryModalOpened: false,\r\n            };\r\n        },\r\n        methods: {},\r\n    }\r\n\r\n</script>\r\n<style>\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/ItemTransferModal.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.inventoryModalOpened)?_c('v-container',{staticClass:\"modal elevation-24\"},[_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs5\":\"\",\"col\":\"\"}},[_c('h3',[_vm._v(\"Bob the NPC\")]),_vm._v(\" \"),_c('inventory')],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs2\":\"\",\"col\":\"\"}}),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs5\":\"\",\"col\":\"\"}},[_c('h3',[_vm._v(\"Your Items\")]),_vm._v(\" \"),_c('inventory')],1)],1)],1):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0770a95c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ItemTransferModal.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0770a95c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ItemTransferModal.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ItemTransferModal.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ItemTransferModal.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0770a95c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ItemTransferModal.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ItemTransferModal.vue\n// module id = null\n// module chunks = ","<template>\r\n    <v-container fluid style=\"min-height: 50px;\">\r\n        <v-layout row wrap v-if=\"getNearbyEnemies().length > 0\">\r\n            <v-flex\r\n\r\n                    md4\r\n                    col\r\n                    v-for=\"(enemy, index) in getNearbyEnemies()\"\r\n                    v-bind:key=\"index\"\r\n            >\r\n                <v-tooltip bottom>\r\n                    <span align-center>\r\n                        HP : {{enemy.cb.hp}} / {{enemy.cb.maxhp}}<br />\r\n                        \"{{enemy.description}}\"<br />\r\n                    </span>\r\n                    <div class=\"enemy_col\" fluid slot=\"activator\">\r\n                            <v-layout class=\"text-xs-center\" align-center row style=\"font-size: 10px; margin: 0px auto -10px 0px;\" >\r\n                                <v-flex xs12>{{enemy.name.capitalize()}}</v-flex>\r\n                            </v-layout>\r\n                            <v-layout row style=\"margin: 0px;\">\r\n                                <v-flex xs12>\r\n                                    <v-progress-linear :value=\"(enemy.cb.hp / enemy.cb.maxhp) * 100\"\r\n                                                       height=\"4\"\r\n                                                       color=\"error\"\r\n                                    ></v-progress-linear>\r\n                                </v-flex>\r\n                            </v-layout>\r\n                    </div >\r\n                </v-tooltip>\r\n            </v-flex>\r\n        </v-layout>\r\n        <v-layout v-else row>\r\n            <v-container fluid>\r\n                No enemies in view\r\n            </v-container>\r\n        </v-layout>\r\n    </v-container>\r\n\r\n</template>\r\n\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\n\r\n/* import other components here */\r\nexport default {\r\n    data() {\r\n        return {\r\n            enemies: Game.player.nearbyEnemies\r\n        }\r\n    },\r\n    methods: {\r\n        getNearbyEnemies() {\r\n            return Game.player.nearbyEnemies\r\n        }\r\n    },\r\n    created() {}\r\n}\r\n</script>\r\n<style>\r\n.enemy_col {\r\n    cursor: pointer;\r\n    border: 2px solid #4f4f4f;\r\n    background-color: #142929;\r\n    border-radius: 4px;\r\n    /* margin: 2px; */\r\n    max-height: 35px;\r\n}\r\n\r\n.enemy_col:hover {\r\n    cursor: pointer;\r\n    border: 2px solid #4f4f4f;\r\n    background-color: #557081;\r\n    border-radius: 4px;\r\n    /* margin: 2px; */\r\n    max-height: 32px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/EnemyOverview.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticStyle:{\"min-height\":\"50px\"},attrs:{\"fluid\":\"\"}},[(_vm.getNearbyEnemies().length > 0)?_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},_vm._l((_vm.getNearbyEnemies()),function(enemy,index){return _c('v-flex',{key:index,attrs:{\"md4\":\"\",\"col\":\"\"}},[_c('v-tooltip',{attrs:{\"bottom\":\"\"}},[_c('span',{attrs:{\"align-center\":\"\"}},[_vm._v(\"\\n                    HP : \"+_vm._s(enemy.cb.hp)+\" / \"+_vm._s(enemy.cb.maxhp)),_c('br'),_vm._v(\"\\n                    \\\"\"+_vm._s(enemy.description)+\"\\\"\"),_c('br')]),_vm._v(\" \"),_c('div',{staticClass:\"enemy_col\",attrs:{\"slot\":\"activator\",\"fluid\":\"\"},slot:\"activator\"},[_c('v-layout',{staticClass:\"text-xs-center\",staticStyle:{\"font-size\":\"10px\",\"margin\":\"0px auto -10px 0px\"},attrs:{\"align-center\":\"\",\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_vm._v(_vm._s(enemy.name.capitalize()))])],1),_vm._v(\" \"),_c('v-layout',{staticStyle:{\"margin\":\"0px\"},attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-progress-linear',{attrs:{\"value\":(enemy.cb.hp / enemy.cb.maxhp) * 100,\"height\":\"4\",\"color\":\"error\"}})],1)],1)],1)])],1)})):_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-container',{attrs:{\"fluid\":\"\"}},[_vm._v(\"\\n            No enemies in view\\n        \")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-696021bb\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/EnemyOverview.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-696021bb\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./EnemyOverview.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./EnemyOverview.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./EnemyOverview.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-696021bb\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./EnemyOverview.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/EnemyOverview.vue\n// module id = null\n// module chunks = ","<template>\r\n        <v-layout row class=\"text-xs-center\">\r\n            <v-flex xs10 fluid id=\"minimap_container\"></v-flex>\r\n        </v-layout>\r\n</template>\r\n\r\n<script>\r\n/* import other components here */\r\nexport default {\r\n\tdata() {\r\n\t\treturn {}\r\n\t},\r\n\tmethods: {}\r\n}\r\n</script>\r\n<style>\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Minimap.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layout',{staticClass:\"text-xs-center\",attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs10\":\"\",\"fluid\":\"\",\"id\":\"minimap_container\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4821da06\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Minimap.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4821da06\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Minimap.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Minimap.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Minimap.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4821da06\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Minimap.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Minimap.vue\n// module id = null\n// module chunks = ","<template>\r\n    <v-container fluid class=\"pa-0\">\r\n        <!-- Level -->\r\n        <v-flex class=\"stat-row\">\r\n            <v-layout row align-center>\r\n                <v-flex md1 style=\"min-width: 70px;\" col><b>Level</b></v-flex>\r\n                <v-flex md2 col style=\"padding-left: 7px;\">{{getLevel()}}</v-flex>\r\n                <v-flex md5 col>{{Math.ceil(getRemainingXP())}}XP until level {{getLevel()+1}}</v-flex>\r\n                <!-- <v-flex md2 col>\r\n                    <v-progress-circular\r\n                        style=\"xpCircleFont\"\r\n                        color=\"success\"\r\n                        background-color=\"grey lighten-1\"\r\n                        fill=\"success\"\r\n                        size=\"10\"\r\n                        height\r\n                        :value=\"Math.floor(getPercentToLevel() * 100)\"\r\n                    >\r\n                  </v-progress-circular>\r\n                </v-flex> -->\r\n            </v-layout>\r\n        </v-flex>\r\n        <!-- Strength -->\r\n        <v-flex class=\"stat-row\">\r\n            <v-layout row align-center>\r\n                <v-flex md1 style=\"min-width: 70px;\" col><b>Strength</b></v-flex>\r\n                <v-flex md3 col style=\"padding-left: 7px;\">{{getStrength()}}</v-flex>\r\n            </v-layout>\r\n        </v-flex>\r\n        <!-- Damage -->\r\n        <v-flex class=\"stat-row\">\r\n          <v-layout  row align-center>\r\n            <v-flex md1 style=\"min-width: 70px;\" col><b>Damage</b></v-flex>\r\n            <v-flex md2 col style=\"padding-left: 7px;\">{{getDamageRange()}}</v-flex>\r\n            <v-flex v-if=\"getCurrentWeapon() !== null && getCurrentWeaponEnchantments() !== null\" md6 col>\r\n              <b>Weapon Enchantments:</b> {{getCurrentWeaponEnchantments()}}\r\n            </v-flex>\r\n        </v-layout>\r\n      </v-flex>\r\n      <!-- Currently Weapon -->\r\n      <v-flex class=\"stat-row\">\r\n        <v-layout  row align-center>\r\n          <v-flex md4 col><b>Current Weapon</b></v-flex>\r\n          <v-flex md5 col>\r\n            {{getCurrentWeapon() !== null ? getCurrentWeapon().name : 'Fists'}}\r\n          </v-flex>\r\n        </v-layout>\r\n      </v-flex>\r\n      <!-- Currently Selected Spell -->\r\n      <v-flex class=\"stat-row\">\r\n        <v-layout  row align-center>\r\n          <v-flex md4 col><b>Current Spell</b></v-flex>\r\n          <v-flex md3 col>{{getCurrentSpell() !== null ? getCurrentSpell().name : 'None'}}</v-flex>\r\n      </v-layout>\r\n    </v-flex>\r\n        <!-- Defence -->\r\n        <!-- <v-flex class=\"stat-row\">\r\n            <v-layout   row align-center>\r\n                <v-flex md1 style=\"min-width: 70px;\" col><b>Defence</b></v-flex>\r\n                <v-flex md3 col style=\"padding-left: 5px;\">{{getDefence()}}</v-flex>\r\n            </v-layout>\r\n        </v-flex> -->\r\n    </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\nimport { xp_levels } from '#/entities/Entity.js'\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {}\r\n\t},\r\n\tmethods: {\r\n\t\tgetHP() {\r\n\t\t\treturn Game.player.cb.hp\r\n\t\t},\r\n\t\tgetMaxHP() {\r\n\t\t\treturn Game.player.cb.maxhp\r\n\t\t},\r\n\t\tgetMana() {\r\n\t\t\treturn Game.player.cb.mana\r\n\t\t},\r\n\t\tgetMaxMana() {\r\n\t\t\treturn Game.player.cb.maxmana\r\n\t\t},\r\n\t\tgetStrength() {\r\n\t\t\treturn Game.player.cb.str\r\n\t\t},\r\n\t\tgetDefence() {\r\n\t\t\treturn Game.player.cb.def\r\n\t\t},\r\n\t\tgetDamageRange() {\r\n\t\t\tif (Game.player.getMinDmg() === Game.player.getMaxDmg()) return Game.player.getMinDmg()\r\n\r\n\t\t\treturn Game.player.getMinDmg() + ' - ' + Game.player.getMaxDmg()\r\n\t\t},\r\n\t\tgetLevel() {\r\n\t\t\treturn Game.player.cb.level\r\n\t\t},\r\n\t\tgetRemainingXP() {\r\n\t\t\treturn Game.player.remainingXP()\r\n\t\t},\r\n\t\tgetPercentToLevel() {\r\n\t\t\tlet costOfLevel = xp_levels[this.getLevel()] - xp_levels[this.getLevel() - 1]\r\n\t\t\tlet expTowards = Game.player.cb.xp - xp_levels[this.getLevel() - 1]\r\n\t\t\treturn expTowards / costOfLevel\r\n\t\t},\r\n\t\tgetCurrentWeapon() {\r\n\t\t\treturn Game.player.cb.equipment.weapon\r\n\t\t},\r\n\t\tgetCurrentWeaponEnchantments() {\r\n\t\t\tif (this.getCurrentWeapon() !== null) {\r\n\t\t\t\tlet enchantments = this.getCurrentWeapon().cb.enchantments\r\n\t\t\t\tif (enchantments.length === 0) return null\r\n\t\t\t\telse if (enchantments.length === 1) return enchantments[0].name\r\n\t\t\t\telse\r\n\t\t\t\t\treturn enchantments.reduce((str, enchantment) => {\r\n\t\t\t\t\t\treturn str + ', ' + enchantment.name\r\n\t\t\t\t\t}, '')\r\n\t\t\t} else {\r\n\t\t\t\treturn null\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetCurrentSpell() {\r\n\t\t\treturn Game.player.cb.currentSpell\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/HUD/Stats.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"pa-0\",attrs:{\"fluid\":\"\"}},[_c('v-flex',{staticClass:\"stat-row\"},[_c('v-layout',{attrs:{\"row\":\"\",\"align-center\":\"\"}},[_c('v-flex',{staticStyle:{\"min-width\":\"70px\"},attrs:{\"md1\":\"\",\"col\":\"\"}},[_c('b',[_vm._v(\"Level\")])]),_vm._v(\" \"),_c('v-flex',{staticStyle:{\"padding-left\":\"7px\"},attrs:{\"md2\":\"\",\"col\":\"\"}},[_vm._v(_vm._s(_vm.getLevel()))]),_vm._v(\" \"),_c('v-flex',{attrs:{\"md5\":\"\",\"col\":\"\"}},[_vm._v(_vm._s(Math.ceil(_vm.getRemainingXP()))+\"XP until level \"+_vm._s(_vm.getLevel()+1))])],1)],1),_vm._v(\" \"),_c('v-flex',{staticClass:\"stat-row\"},[_c('v-layout',{attrs:{\"row\":\"\",\"align-center\":\"\"}},[_c('v-flex',{staticStyle:{\"min-width\":\"70px\"},attrs:{\"md1\":\"\",\"col\":\"\"}},[_c('b',[_vm._v(\"Strength\")])]),_vm._v(\" \"),_c('v-flex',{staticStyle:{\"padding-left\":\"7px\"},attrs:{\"md3\":\"\",\"col\":\"\"}},[_vm._v(_vm._s(_vm.getStrength()))])],1)],1),_vm._v(\" \"),_c('v-flex',{staticClass:\"stat-row\"},[_c('v-layout',{attrs:{\"row\":\"\",\"align-center\":\"\"}},[_c('v-flex',{staticStyle:{\"min-width\":\"70px\"},attrs:{\"md1\":\"\",\"col\":\"\"}},[_c('b',[_vm._v(\"Damage\")])]),_vm._v(\" \"),_c('v-flex',{staticStyle:{\"padding-left\":\"7px\"},attrs:{\"md2\":\"\",\"col\":\"\"}},[_vm._v(_vm._s(_vm.getDamageRange()))]),_vm._v(\" \"),(_vm.getCurrentWeapon() !== null && _vm.getCurrentWeaponEnchantments() !== null)?_c('v-flex',{attrs:{\"md6\":\"\",\"col\":\"\"}},[_c('b',[_vm._v(\"Weapon Enchantments:\")]),_vm._v(\" \"+_vm._s(_vm.getCurrentWeaponEnchantments())+\"\\n        \")]):_vm._e()],1)],1),_vm._v(\" \"),_c('v-flex',{staticClass:\"stat-row\"},[_c('v-layout',{attrs:{\"row\":\"\",\"align-center\":\"\"}},[_c('v-flex',{attrs:{\"md4\":\"\",\"col\":\"\"}},[_c('b',[_vm._v(\"Current Weapon\")])]),_vm._v(\" \"),_c('v-flex',{attrs:{\"md5\":\"\",\"col\":\"\"}},[_vm._v(\"\\n        \"+_vm._s(_vm.getCurrentWeapon() !== null ? _vm.getCurrentWeapon().name : 'Fists')+\"\\n      \")])],1)],1),_vm._v(\" \"),_c('v-flex',{staticClass:\"stat-row\"},[_c('v-layout',{attrs:{\"row\":\"\",\"align-center\":\"\"}},[_c('v-flex',{attrs:{\"md4\":\"\",\"col\":\"\"}},[_c('b',[_vm._v(\"Current Spell\")])]),_vm._v(\" \"),_c('v-flex',{attrs:{\"md3\":\"\",\"col\":\"\"}},[_vm._v(_vm._s(_vm.getCurrentSpell() !== null ? _vm.getCurrentSpell().name : 'None'))])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1eae77e7\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/HUD/Stats.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Stats.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Stats.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1eae77e7\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Stats.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/HUD/Stats.vue\n// module id = null\n// module chunks = ","<template>\r\n    <v-container fluid class=\"pa-0\">\r\n        <v-layout row>\r\n            <v-flex xs4><b>Spells</b></v-flex>\r\n        </v-layout>\r\n        <v-layout row id=\"spell_bar\">\r\n            <div\r\n                xs1\r\n                v-for=\"(spell, i) in getSpells()\"\r\n                v-on:click=\"selectSpell(spell)\"\r\n                v-bind:class=\"{selectedSpell : highlightSpell(spell), spell : ! highlightSpell(spell)}\"\r\n                v-bind:key=\"i\"\r\n            >\r\n                <v-tooltip bottom align-center>\r\n                    <p class=\"text-xs-center ma-0\" style=\"max-width: 200px\">\r\n                        Cast {{spell.name}} <br/>\r\n                        Costs <b style=\"color: blue;\">{{spell.manaCost}} Mana</b><br/>\r\n                        {{spell.hoverInfo}}\r\n                    </p>\r\n                    <img\r\n                        v-bind:src=\"getSpellSplashArt(spell.type.toLowerCase(), spell.splashArt)\"\r\n                        slot=\"activator\"\r\n                        width=\"26\" height=\"26\"\r\n                    />\r\n                </v-tooltip>\r\n            </div>\r\n            <div class=\"spell\" xs1 v-for=\"(cell, i) in fillerSpellSlots()\">\r\n                <img width=\"26\" height=\"26\" style=\"opacity: 0.7\" src=\"static/images/equipment_placeholders/bookmarklet.png\" />\r\n            </div>\r\n        </v-layout>\r\n    </v-container>\r\n</template>\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tspells: Game.player.cb.spells\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\thighlightSpell(spell) {\r\n\t\t\treturn Game.player.cb.currentSpell === spell\r\n\t\t},\r\n\t\tgetSpellSplashArt(school, name) {\r\n\t\t\treturn `../static/images/spells/${school}/${name}.png`\r\n\t\t},\r\n\t\tgetSpells() {\r\n\t\t\treturn this.spells\r\n\t\t},\r\n\t\tfillerSpellSlots() {\r\n\t\t\tif (this.spells.length < 11) return 11 - this.spells.length\r\n\r\n\t\t\treturn 0\r\n\t\t},\r\n\t\tselectSpell(spell) {\r\n\t\t\tGame.player.selectSpell(spell)\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n<style>\r\n.spell {\r\n\tmargin: 2px;\r\n\tmax-width: 30px;\r\n\theight: 30px;\r\n\tcursor: pointer;\r\n\tborder: 2px solid #4f4f4f;\r\n\tborder-radius: 4px;\r\n\tbackground-color: #294646;\r\n}\r\n\r\n.spell:hover {\r\n\tbackground-color: #698394;\r\n\tcursor: pointer;\r\n}\r\n\r\n#spell_bar {\r\n\t/* margin: 2px; */\r\n}\r\n\r\n.selectedSpell {\r\n\tmargin: 2px;\r\n\tmax-width: 30px;\r\n\theight: 30px;\r\n\tcursor: pointer;\r\n\tborder: 2px solid #142ee9;\r\n\tborder-radius: 4px;\r\n\tbackground-color: #294646;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/HUD/Spellbook.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"pa-0\",attrs:{\"fluid\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs4\":\"\"}},[_c('b',[_vm._v(\"Spells\")])])],1),_vm._v(\" \"),_c('v-layout',{attrs:{\"row\":\"\",\"id\":\"spell_bar\"}},[_vm._l((_vm.getSpells()),function(spell,i){return _c('div',{key:i,class:{selectedSpell : _vm.highlightSpell(spell), spell : ! _vm.highlightSpell(spell)},attrs:{\"xs1\":\"\"},on:{\"click\":function($event){_vm.selectSpell(spell)}}},[_c('v-tooltip',{attrs:{\"bottom\":\"\",\"align-center\":\"\"}},[_c('p',{staticClass:\"text-xs-center ma-0\",staticStyle:{\"max-width\":\"200px\"}},[_vm._v(\"\\n                    Cast \"+_vm._s(spell.name)+\" \"),_c('br'),_vm._v(\"\\n                    Costs \"),_c('b',{staticStyle:{\"color\":\"blue\"}},[_vm._v(_vm._s(spell.manaCost)+\" Mana\")]),_c('br'),_vm._v(\"\\n                    \"+_vm._s(spell.hoverInfo)+\"\\n                \")]),_vm._v(\" \"),_c('img',{attrs:{\"slot\":\"activator\",\"src\":_vm.getSpellSplashArt(spell.type.toLowerCase(), spell.splashArt),\"width\":\"26\",\"height\":\"26\"},slot:\"activator\"})])],1)}),_vm._v(\" \"),_vm._l((_vm.fillerSpellSlots()),function(cell,i){return _c('div',{staticClass:\"spell\",attrs:{\"xs1\":\"\"}},[_c('img',{staticStyle:{\"opacity\":\"0.7\"},attrs:{\"width\":\"26\",\"height\":\"26\",\"src\":\"static/images/equipment_placeholders/bookmarklet.png\"}})])})],2)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2d73fbe6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/HUD/Spellbook.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2d73fbe6\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Spellbook.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Spellbook.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Spellbook.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2d73fbe6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Spellbook.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/HUD/Spellbook.vue\n// module id = null\n// module chunks = ","<template lang=\"html\">\r\n  <div class=\"item_slot pa-0 ma-0 text-xs-center\">\r\n      <v-tooltip open-delay=\"200\" bottom v-if=\"item !== null\" align-center>\r\n          <p class=\"text-xs-center ma-0\">\r\n              {{item.getAction()}} {{item.type}}\r\n              <br />\r\n              <span v-if=\"'name' in item\">{{\"Name: \" + item.name}}<br /></span> {{item.hoverInfo()}}\r\n          </p>\r\n          <v-layout ripple v-on:click=\"useItem(item, $event)\" v-if=\"item !== null\" slot=\"activator\"  row>\r\n              <v-badge overlay bottom color=\"grey\" overlap>\r\n                  <span v-if=\"item.quantity !== undefined\" slot=\"badge\" dark>\r\n                              <b>{{item.quantity}}</b>\r\n                          </span>\r\n                  <img v-bind:src=\"getInventorySprite(item.id)\" />\r\n              </v-badge>\r\n          </v-layout>\r\n      </v-tooltip>\r\n      <img v-else-if=\"altSprite !== null\" v-bind:src=\"altSprite\" width=\"35\" height=\"35\" style=\"opacity: 0.5\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tprops: ['item', 'altSprite'],\r\n\tmethods: {\r\n\t\tgetInventorySprite(id) {\r\n\t\t\treturn `../static/images/inventory_sprites/${id}.png`\r\n\t\t},\r\n\t\tcolorSlot(item) {\r\n\t\t\treturn true\r\n\t\t},\r\n\t\tuseItem(item, evt) {\r\n\t\t\t// drop item\r\n\t\t\tif (evt.shiftKey) {\r\n\t\t\t\titem.drop()\r\n\t\t\t} else {\r\n\t\t\t\t// use item\r\n\t\t\t\titem.use()\r\n\t\t\t}\r\n\t\t},\r\n\t\tdropItem(item, evt) {\r\n\t\t\t// drop item\r\n\t\t\titem.drop()\r\n\t\t},\r\n\t\tgetInventory() {\r\n\t\t\treturn Game.player.inventory\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n<style>\r\n.inventory_row {\r\n\t/*margin-left: 10px;*/\r\n}\r\n\r\n.item_slot {\r\n\tborder: 2px solid #4f4f4f;\r\n\tbackground-color: #294646;\r\n\tborder-radius: 4px;\r\n\twidth: 40px;\r\n\theight: 40px;\r\n}\r\n/* #172525 */\r\n.item_slot:hover {\r\n\tbackground-color: #698394;\r\n\tcursor: pointer;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/HUD/ItemSlot.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"item_slot pa-0 ma-0 text-xs-center\"},[(_vm.item !== null)?_c('v-tooltip',{attrs:{\"open-delay\":\"200\",\"bottom\":\"\",\"align-center\":\"\"}},[_c('p',{staticClass:\"text-xs-center ma-0\"},[_vm._v(\"\\n            \"+_vm._s(_vm.item.getAction())+\" \"+_vm._s(_vm.item.type)+\"\\n            \"),_c('br'),_vm._v(\" \"),('name' in _vm.item)?_c('span',[_vm._v(_vm._s(\"Name: \" + _vm.item.name)),_c('br')]):_vm._e(),_vm._v(\" \"+_vm._s(_vm.item.hoverInfo())+\"\\n        \")]),_vm._v(\" \"),(_vm.item !== null)?_c('v-layout',{attrs:{\"slot\":\"activator\",\"ripple\":\"\",\"row\":\"\"},on:{\"click\":function($event){_vm.useItem(_vm.item, $event)}},slot:\"activator\"},[_c('v-badge',{attrs:{\"overlay\":\"\",\"bottom\":\"\",\"color\":\"grey\",\"overlap\":\"\"}},[(_vm.item.quantity !== undefined)?_c('span',{attrs:{\"slot\":\"badge\",\"dark\":\"\"},slot:\"badge\"},[_c('b',[_vm._v(_vm._s(_vm.item.quantity))])]):_vm._e(),_vm._v(\" \"),_c('img',{attrs:{\"src\":_vm.getInventorySprite(_vm.item.id)}})])],1):_vm._e()],1):(_vm.altSprite !== null)?_c('img',{staticStyle:{\"opacity\":\"0.5\"},attrs:{\"src\":_vm.altSprite,\"width\":\"35\",\"height\":\"35\"}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3742d678\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/HUD/ItemSlot.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3742d678\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ItemSlot.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ItemSlot.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ItemSlot.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3742d678\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ItemSlot.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/HUD/ItemSlot.vue\n// module id = null\n// module chunks = ","<template>\r\n  <v-container fluid class=\"pa-0\">\r\n    <v-layout>\r\n      <v-flex md1 style=\"min-width: 75px;\"> <b>Equipment</b></v-flex>\r\n    </v-layout>\r\n    <!-- Equipment View  -->\r\n    <v-container fluid class=\"pa-0 text-xs-left\">\r\n      <!-- Helmet, Arrows  -->\r\n      <v-layout style=\"margin-top: 4px;\">\r\n        <v-flex class=\"filler\" xs1 v-for=\"i in 4\" :key=\"i\"/>\r\n        <v-flex xs1 class=\"filler\"><item-slot :item=\"equipment.head\"  altSprite=\"../static/images/equipment_placeholders/head.png\" index=\"head\"  /></v-flex>\r\n        <v-flex xs1 class=\"filler\"><item-slot :item=\"equipment.ammo\" altSprite=\"../static/images/equipment_placeholders/quiver.png\" index=\"ammo\" /></v-flex>\r\n      </v-layout>\r\n      <!-- Main, Torso, Off-hand  -->\r\n      <v-layout style=\"margin-top: 4px;\">\r\n        <v-flex class=\"filler\" xs1 v-for=\"i in 3\" :key=\"i\"/>\r\n        <v-flex xs1 class=\"filler\"><item-slot :item=\"equipment.weapon\" altSprite=\"../static/images/equipment_placeholders/stiletto.png\" index=\"weapon\" /></v-flex>\r\n        <v-flex xs1 class=\"filler\"><item-slot :item=\"equipment.torso\" altSprite=\"../static/images/equipment_placeholders/chest-armor.png\" index=\"torso\" /></v-flex>\r\n      </v-layout>\r\n      <!-- Legs  -->\r\n      <v-layout style=\"margin-top: 4px;\">\r\n        <v-flex class=\"filler\" xs1 v-for=\"i in 3\" :key=\"i\"/>\r\n        <v-flex xs1 class=\"filler\"><item-slot :item=\"equipment.ring\" altSprite=\"../static/images/equipment_placeholders/ring.png\" index=\"weapon\" /></v-flex>\r\n        <v-flex xs1 class=\"filler\"><item-slot :item=\"equipment.legs\" altSprite=\"../static/images/equipment_placeholders/leg-armor.png\" index=\"legs\" /></v-flex>\r\n      </v-layout>\r\n    </v-container>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\nimport itemSlot from './ItemSlot.vue'\r\n\r\nexport default {\r\n\tcomponents: {\r\n\t\t'item-slot': itemSlot\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tequipment: Game.player.cb.equipment // head, torso, legs, weapon, ammo\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n<style>\r\n.filler {\r\n\tmargin: 0px 4px 0px 4px;\r\n\twidth: 40px;\r\n\theight: 40px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/HUD/Equipment.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"pa-0\",attrs:{\"fluid\":\"\"}},[_c('v-layout',[_c('v-flex',{staticStyle:{\"min-width\":\"75px\"},attrs:{\"md1\":\"\"}},[_c('b',[_vm._v(\"Equipment\")])])],1),_vm._v(\" \"),_c('v-container',{staticClass:\"pa-0 text-xs-left\",attrs:{\"fluid\":\"\"}},[_c('v-layout',{staticStyle:{\"margin-top\":\"4px\"}},[_vm._l((4),function(i){return _c('v-flex',{key:i,staticClass:\"filler\",attrs:{\"xs1\":\"\"}})}),_vm._v(\" \"),_c('v-flex',{staticClass:\"filler\",attrs:{\"xs1\":\"\"}},[_c('item-slot',{attrs:{\"item\":_vm.equipment.head,\"altSprite\":\"../static/images/equipment_placeholders/head.png\",\"index\":\"head\"}})],1),_vm._v(\" \"),_c('v-flex',{staticClass:\"filler\",attrs:{\"xs1\":\"\"}},[_c('item-slot',{attrs:{\"item\":_vm.equipment.ammo,\"altSprite\":\"../static/images/equipment_placeholders/quiver.png\",\"index\":\"ammo\"}})],1)],2),_vm._v(\" \"),_c('v-layout',{staticStyle:{\"margin-top\":\"4px\"}},[_vm._l((3),function(i){return _c('v-flex',{key:i,staticClass:\"filler\",attrs:{\"xs1\":\"\"}})}),_vm._v(\" \"),_c('v-flex',{staticClass:\"filler\",attrs:{\"xs1\":\"\"}},[_c('item-slot',{attrs:{\"item\":_vm.equipment.weapon,\"altSprite\":\"../static/images/equipment_placeholders/stiletto.png\",\"index\":\"weapon\"}})],1),_vm._v(\" \"),_c('v-flex',{staticClass:\"filler\",attrs:{\"xs1\":\"\"}},[_c('item-slot',{attrs:{\"item\":_vm.equipment.torso,\"altSprite\":\"../static/images/equipment_placeholders/chest-armor.png\",\"index\":\"torso\"}})],1)],2),_vm._v(\" \"),_c('v-layout',{staticStyle:{\"margin-top\":\"4px\"}},[_vm._l((3),function(i){return _c('v-flex',{key:i,staticClass:\"filler\",attrs:{\"xs1\":\"\"}})}),_vm._v(\" \"),_c('v-flex',{staticClass:\"filler\",attrs:{\"xs1\":\"\"}},[_c('item-slot',{attrs:{\"item\":_vm.equipment.ring,\"altSprite\":\"../static/images/equipment_placeholders/ring.png\",\"index\":\"weapon\"}})],1),_vm._v(\" \"),_c('v-flex',{staticClass:\"filler\",attrs:{\"xs1\":\"\"}},[_c('item-slot',{attrs:{\"item\":_vm.equipment.legs,\"altSprite\":\"../static/images/equipment_placeholders/leg-armor.png\",\"index\":\"legs\"}})],1)],2)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6b828a2f\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/HUD/Equipment.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6b828a2f\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Equipment.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Equipment.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Equipment.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6b828a2f\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Equipment.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/HUD/Equipment.vue\n// module id = null\n// module chunks = ","<template>\r\n    <div id=\"help\">\r\n        <v-tooltip right align-center>\r\n            <span>Controls</span>\r\n            <v-btn flat icon color=\"yellow darken-4\" slot=\"activator\" @click.stop=\"helpDialog=true\">\r\n              <v-icon>fa-question-circle</v-icon>\r\n            </v-btn>\r\n        </v-tooltip>\r\n        <v-dialog v-model=\"helpDialog\" max-width=\"600px\" >\r\n            <v-card>\r\n                <v-card-text class=\"text-xs-center\">\r\n                    <h2 class=\"pa-1\">Controls</h2>\r\n                </v-card-text>\r\n                <v-card-text>\r\n                    <v-expansion-panel>\r\n                        <v-expansion-panel-content>\r\n                            <div slot=\"header\">All Keybinds</div>\r\n                            <v-card flat>\r\n                                <v-card-text class=\"pb-0 pt-0\">\r\n                                    <v-container>\r\n                                        <v-layout row class=\"pb-2\">\r\n                                            <v-flex xs6><b>Keys</b></v-flex>\r\n                                            <v-flex xs6><b>Description</b></v-flex>\r\n                                        </v-layout>\r\n                                        <v-layout row wrap v-for=\"(cheat, index) in cheatSheet\" :key=\"index\">\r\n                                            <v-flex xs6>\r\n                                                <code>{{cheat.code}}</code>\r\n                                            </v-flex>\r\n                                            <v-flex xs6>\r\n                                                <p>{{cheat.description}}</p>\r\n                                            </v-flex>\r\n                                        </v-layout>\r\n                                        </v-container>\r\n                                    </v-container>\r\n                                </v-card-text>\r\n                            </v-card>\r\n                        </v-expansion-panel-content>\r\n                        <v-expansion-panel-content>\r\n                            <div slot=\"header\">Magic and Ranged Combat</div>\r\n                            <v-card flat>\r\n                                <v-card-text class=\"pt-0\">\r\n                                    <v-container fluid>\r\n                                        <p><b>Magic</b></p>\r\n                                        <p>To cast a spell, first select a spell from your spellbook by <code>clicking</code> on it. Then, you can press <code>z</code> to cast the selected spell. If your spell is targeted, you will enter targeting mode.\r\n\r\n                                        <p><b>Ranged</b></p>\r\n\r\n                                        <p>If you have a ranged weapon and proper ammunition equipped, press <code>f</code> to enter targeting mode to fire your ranged weapon.\r\n                                        </p>\r\n\r\n                                        <p><b>Targeting</b></p>\r\n                                        In targeting mode, you can select a tile to cast a spell or shoot a projectile so long as it's within range. By default, targeting will select the nearest enemy. You can change the selected tile with the standard <code>movement</code> keys. You can also cycle through enemies in view with <code>tab</code>, <code>=</code>, and <code>/</code>. You cannot select a tile that is blocked or out of your line of sight. Pressing <code>escape</code> will cancel your spell or ranged attack. You can also press <code>f</code> or <code>z</code> for ranged or magic respectively.\r\n                                        </v-container>\r\n                                </v-card-text>\r\n                            </v-card>\r\n                        </v-expansion-panel-content>\r\n                        <v-expansion-panel-content>\r\n                            <div slot=\"header\">Movement and Examining</div>\r\n                            <v-card flat>\r\n                                <v-card-text class=\"pb-0 pt-0\">\r\n                                    <v-container>\r\n                                        <p>You can move with arrow keys, the numpad, or vi keys. You can move in all 8 directions. </p>\r\n                                        <v-container class=\"text-xs-center\">\r\n                                          <pre>y  k  u      7  8  9  </pre>\r\n                                          <pre> \\ | /        \\ | /   </pre>\r\n                                          <pre> h-+-l        4-5-6   </pre>\r\n                                          <pre> / | \\        / | \\   </pre>\r\n                                          <pre>b  j  n      1  2  3  </pre>\r\n                                          <pre>vi-keys     numberpad </pre>\r\n                                        </v-container>\r\n                                        <p>\r\n                                            When in targeting mode, you can use these keys to switch to different tiles. Press <code>x</code> to examine your surroundings. Press <code>x</code> or <code>escape</code> to leave the examine mode.\r\n                                        </p>\r\n                                    </v-container>\r\n                                </v-card-text>\r\n                            </v-card>\r\n                        </v-expansion-panel-content>\r\n                        <v-expansion-panel-content>\r\n                            <div slot=\"header\">Melee Combat</div>\r\n                            <v-card flat>\r\n                                <v-card-text class=\"pt-0\">\r\n                                    <v-container fluid>\r\n                                        <p>To fight an enemy with your fists or melee weapon, simply <code>move</code> into a tile where they are standing.</p>\r\n                                    </v-container>\r\n                                </v-card-text>\r\n                            </v-card>\r\n                        </v-expansion-panel-content>\r\n\r\n\r\n                        <v-expansion-panel-content>\r\n                        <v-card flat>\r\n                            <div slot=\"header\">Ladders, Resting, and Picking up Items</div>\r\n                            <v-card-text class=\"pt-0\">\r\n                                <v-container fluid>\r\n                                    <p>To pick up items off the ground, press <code>,</code> or <code>g</code>.</p>\r\n                                    <p>To rest for a turn and restore a little health, press <code>.</code> or <code>5</code> on the numpad.</p>\r\n                                    <p>To climb ladders, press <code><</code> to go up and press <code>></code> to go down.</p>\r\n                                </v-container>\r\n                            </v-card-text>\r\n                        </v-card>\r\n                    </v-expansion-panel-content>\r\n\r\n                        <v-expansion-panel-content>\r\n                            <div slot=\"header\">Inventory Management</div>\r\n                            <v-card flat>\r\n                                <v-card-text class=\"pt-0\">\r\n                                    <v-container fluid>\r\n                                        <p>\r\n                                            To equip a weapon or drink a potion, <code>click</code> the item in your inventory. To drop an item, <code>shift+click</code> the item in your inventory. Alternatively, you can either equip or drop items by right-clicking an item to bring up its context menu and selecting one of the actions from there.\r\n                                        </p>\r\n                                        <p>\r\n                                            You can rearrange inventory items by dragging and dropping items where you want them to be.\r\n                                        </p>\r\n                                        <p>\r\n                                            To view details about items, simply <code>hover</code> over the item in your inventory and view the tooltip.\r\n                                        </p>\r\n                                    </v-container>\r\n                                </v-card-text>\r\n                            </v-card>\r\n                        </v-expansion-panel-content>\r\n                </v-expansion-panel>\r\n            </v-card-text>\r\n              <v-card-actions>\r\n                  <v-spacer></v-spacer>\r\n                  <v-btn color=\"yellow darken-4\" flat @click.stop=\"helpDialog=false\">Close</v-btn>\r\n              </v-card-actions>\r\n            </v-card>\r\n        </v-dialog>\r\n    </div>\r\n\r\n</template>\r\n<script>\r\nexport default {\r\n\tname: 'help-dialog',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\thelpDialog: false,\r\n\t\t\tcheatSheet: [\r\n\t\t\t\t{ code: '. | 5', description: 'Rest for a turn' },\r\n\t\t\t\t{ code: ', | g', description: 'Pick up an item' },\r\n\t\t\t\t{ code: '<', description: 'Climb up a ladder' },\r\n\t\t\t\t{ code: '>', description: 'Climb down a ladder' },\r\n\t\t\t\t{ code: 'f', description: 'Fire a ranged weapon' },\r\n\t\t\t\t{ code: 'z', description: 'Cast a spell' },\r\n\t\t\t\t{ code: 'x', description: 'Examine the area' }\r\n\t\t\t]\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\twindow.addEventListener('keydown', evt => {\r\n\t\t\tif ((evt.getModifierState('Shift') && evt.keyCode === 191) || (evt.keyCode === 27 && this.helpDialog)) {\r\n\t\t\t\tthis.helpDialog = !this.helpDialog\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n</script>\r\n<style>\r\ncode {\r\n\tbackground-color: #2f3136;\r\n\tcolor: white;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/HelpDialog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"help\"}},[_c('v-tooltip',{attrs:{\"right\":\"\",\"align-center\":\"\"}},[_c('span',[_vm._v(\"Controls\")]),_vm._v(\" \"),_c('v-btn',{attrs:{\"slot\":\"activator\",\"flat\":\"\",\"icon\":\"\",\"color\":\"yellow darken-4\"},on:{\"click\":function($event){$event.stopPropagation();_vm.helpDialog=true}},slot:\"activator\"},[_c('v-icon',[_vm._v(\"fa-question-circle\")])],1)],1),_vm._v(\" \"),_c('v-dialog',{attrs:{\"max-width\":\"600px\"},model:{value:(_vm.helpDialog),callback:function ($$v) {_vm.helpDialog=$$v},expression:\"helpDialog\"}},[_c('v-card',[_c('v-card-text',{staticClass:\"text-xs-center\"},[_c('h2',{staticClass:\"pa-1\"},[_vm._v(\"Controls\")])]),_vm._v(\" \"),_c('v-card-text',[_c('v-expansion-panel',[_c('v-expansion-panel-content',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"All Keybinds\")]),_vm._v(\" \"),_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-text',{staticClass:\"pb-0 pt-0\"},[_c('v-container',[_c('v-layout',{staticClass:\"pb-2\",attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs6\":\"\"}},[_c('b',[_vm._v(\"Keys\")])]),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs6\":\"\"}},[_c('b',[_vm._v(\"Description\")])])],1),_vm._v(\" \"),_vm._l((_vm.cheatSheet),function(cheat,index){return _c('v-layout',{key:index,attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs6\":\"\"}},[_c('code',[_vm._v(_vm._s(cheat.code))])]),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs6\":\"\"}},[_c('p',[_vm._v(_vm._s(cheat.description))])])],1)})],2)],1)],1)],1),_vm._v(\" \"),_c('v-expansion-panel-content',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"Magic and Ranged Combat\")]),_vm._v(\" \"),_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-text',{staticClass:\"pt-0\"},[_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('p',[_c('b',[_vm._v(\"Magic\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"To cast a spell, first select a spell from your spellbook by \"),_c('code',[_vm._v(\"clicking\")]),_vm._v(\" on it. Then, you can press \"),_c('code',[_vm._v(\"z\")]),_vm._v(\" to cast the selected spell. If your spell is targeted, you will enter targeting mode.\\n\\n                                    \")]),_c('p',[_c('b',[_vm._v(\"Ranged\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"If you have a ranged weapon and proper ammunition equipped, press \"),_c('code',[_vm._v(\"f\")]),_vm._v(\" to enter targeting mode to fire your ranged weapon.\\n                                    \")]),_vm._v(\" \"),_c('p',[_c('b',[_vm._v(\"Targeting\")])]),_vm._v(\"\\n                                    In targeting mode, you can select a tile to cast a spell or shoot a projectile so long as it's within range. By default, targeting will select the nearest enemy. You can change the selected tile with the standard \"),_c('code',[_vm._v(\"movement\")]),_vm._v(\" keys. You can also cycle through enemies in view with \"),_c('code',[_vm._v(\"tab\")]),_vm._v(\", \"),_c('code',[_vm._v(\"=\")]),_vm._v(\", and \"),_c('code',[_vm._v(\"/\")]),_vm._v(\". You cannot select a tile that is blocked or out of your line of sight. Pressing \"),_c('code',[_vm._v(\"escape\")]),_vm._v(\" will cancel your spell or ranged attack. You can also press \"),_c('code',[_vm._v(\"f\")]),_vm._v(\" or \"),_c('code',[_vm._v(\"z\")]),_vm._v(\" for ranged or magic respectively.\\n                                    \")])],1)],1)],1),_vm._v(\" \"),_c('v-expansion-panel-content',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"Movement and Examining\")]),_vm._v(\" \"),_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-text',{staticClass:\"pb-0 pt-0\"},[_c('v-container',[_c('p',[_vm._v(\"You can move with arrow keys, the numpad, or vi keys. You can move in all 8 directions. \")]),_vm._v(\" \"),_c('v-container',{staticClass:\"text-xs-center\"},[_c('pre',[_vm._v(\"y  k  u      7  8  9  \")]),_vm._v(\" \"),_c('pre',[_vm._v(\" \\\\ | /        \\\\ | /   \")]),_vm._v(\" \"),_c('pre',[_vm._v(\" h-+-l        4-5-6   \")]),_vm._v(\" \"),_c('pre',[_vm._v(\" / | \\\\        / | \\\\   \")]),_vm._v(\" \"),_c('pre',[_vm._v(\"b  j  n      1  2  3  \")]),_vm._v(\" \"),_c('pre',[_vm._v(\"vi-keys     numberpad \")])]),_vm._v(\" \"),_c('p',[_vm._v(\"\\n                                        When in targeting mode, you can use these keys to switch to different tiles. Press \"),_c('code',[_vm._v(\"x\")]),_vm._v(\" to examine your surroundings. Press \"),_c('code',[_vm._v(\"x\")]),_vm._v(\" or \"),_c('code',[_vm._v(\"escape\")]),_vm._v(\" to leave the examine mode.\\n                                    \")])],1)],1)],1)],1),_vm._v(\" \"),_c('v-expansion-panel-content',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"Melee Combat\")]),_vm._v(\" \"),_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-text',{staticClass:\"pt-0\"},[_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('p',[_vm._v(\"To fight an enemy with your fists or melee weapon, simply \"),_c('code',[_vm._v(\"move\")]),_vm._v(\" into a tile where they are standing.\")])])],1)],1)],1),_vm._v(\" \"),_c('v-expansion-panel-content',[_c('v-card',{attrs:{\"flat\":\"\"}},[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"Ladders, Resting, and Picking up Items\")]),_vm._v(\" \"),_c('v-card-text',{staticClass:\"pt-0\"},[_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('p',[_vm._v(\"To pick up items off the ground, press \"),_c('code',[_vm._v(\",\")]),_vm._v(\" or \"),_c('code',[_vm._v(\"g\")]),_vm._v(\".\")]),_vm._v(\" \"),_c('p',[_vm._v(\"To rest for a turn and restore a little health, press \"),_c('code',[_vm._v(\".\")]),_vm._v(\" or \"),_c('code',[_vm._v(\"5\")]),_vm._v(\" on the numpad.\")]),_vm._v(\" \"),_c('p',[_vm._v(\"To climb ladders, press \"),_c('code',[_vm._v(\"<\")]),_vm._v(\" to go up and press \"),_c('code',[_vm._v(\">\")]),_vm._v(\" to go down.\")])])],1)],1)],1),_vm._v(\" \"),_c('v-expansion-panel-content',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"Inventory Management\")]),_vm._v(\" \"),_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-text',{staticClass:\"pt-0\"},[_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('p',[_vm._v(\"\\n                                        To equip a weapon or drink a potion, \"),_c('code',[_vm._v(\"click\")]),_vm._v(\" the item in your inventory. To drop an item, \"),_c('code',[_vm._v(\"shift+click\")]),_vm._v(\" the item in your inventory. Alternatively, you can either equip or drop items by right-clicking an item to bring up its context menu and selecting one of the actions from there.\\n                                    \")]),_vm._v(\" \"),_c('p',[_vm._v(\"\\n                                        You can rearrange inventory items by dragging and dropping items where you want them to be.\\n                                    \")]),_vm._v(\" \"),_c('p',[_vm._v(\"\\n                                        To view details about items, simply \"),_c('code',[_vm._v(\"hover\")]),_vm._v(\" over the item in your inventory and view the tooltip.\\n                                    \")])])],1)],1)],1)],1)],1),_vm._v(\" \"),_c('v-card-actions',[_c('v-spacer'),_vm._v(\" \"),_c('v-btn',{attrs:{\"color\":\"yellow darken-4\",\"flat\":\"\"},on:{\"click\":function($event){$event.stopPropagation();_vm.helpDialog=false}}},[_vm._v(\"Close\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-58c60f7a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/HelpDialog.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-58c60f7a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./HelpDialog.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./HelpDialog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./HelpDialog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-58c60f7a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./HelpDialog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/HelpDialog.vue\n// module id = null\n// module chunks = ","<template>\r\n    <div>\r\n        <v-tooltip right align-center>\r\n            <span>Settings</span>\r\n            <v-btn flat icon color=\"yellow darken-4\" slot=\"activator\" @click.stop=\"toolDialog=true\">\r\n                <v-icon>fa-cog</v-icon>\r\n            </v-btn>\r\n        </v-tooltip>\r\n        <v-dialog v-model=\"toolDialog\" max-width=\"400px\" >\r\n            <v-card>\r\n                <v-card-text class=\"text-xs-center\">\r\n                    <h2>Settings</h2>\r\n                </v-card-text>\r\n                <v-card-text>\r\n                    <v-layout row>\r\n                        <v-flex>Enable Mouse Controls*</v-flex>\r\n                        <span>\r\n                          <v-switch color=\"yellow darken-4\" v-model=\"mouseEnabled\"></v-switch>\r\n                        </span>\r\n                    </v-layout>\r\n\r\n                    <v-layout row>\r\n                        <v-flex>Show HP Bars*</v-flex>\r\n                        <span>\r\n                          <v-switch color=\"yellow darken-4\" @click.stop=\"toggleHPBars\" v-model=\"userSettings.hpBars\"></v-switch>\r\n                        </span>\r\n                    </v-layout>\r\n\r\n                    <v-layout row>\r\n                        <v-flex>Enable attacking animations*</v-flex>\r\n                        <span>\r\n                          <v-switch color=\"yellow darken-4\" @click.stop=\"toggleAnimations\" v-model=\"userSettings.animationsEnabled\"></v-switch>\r\n                        </span>\r\n                    </v-layout>\r\n\r\n                </v-card-text>\r\n                <v-card-actions>\r\n                    <small>* may cause performance issues</small>\r\n                    <v-spacer></v-spacer>\r\n                    <v-btn color=\"yellow darken-4\" flat @click.stop=\"toolDialog=false\">Close</v-btn>\r\n                </v-card-actions>\r\n            </v-card>\r\n        </v-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\n\r\nexport default {\r\n\tname: 'help-dialog',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tuserSettings: Game.userSettings,\r\n\t\t\ttoolDialog: false,\r\n\t\t\tmouseEnabled: false,\r\n\t\t\tshowHPBars: Game.userSettings.hpBars,\r\n\t\t\tturnOffAnimation: false\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tmouseEnabled(newState, oldState) {\r\n\t\t\tGame.player.mouseEnabled = newState\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\ttoggleHPBars() {\r\n\t\t\tGame.userSettings.hpBars = !Game.userSettings.hpBars\r\n\t\t},\r\n\t\ttoggleAnimations() {\r\n\t\t\tGame.userSettings.animationsEnabled = !Game.userSettings.animationsEnabled\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/ToolDialog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-tooltip',{attrs:{\"right\":\"\",\"align-center\":\"\"}},[_c('span',[_vm._v(\"Settings\")]),_vm._v(\" \"),_c('v-btn',{attrs:{\"slot\":\"activator\",\"flat\":\"\",\"icon\":\"\",\"color\":\"yellow darken-4\"},on:{\"click\":function($event){$event.stopPropagation();_vm.toolDialog=true}},slot:\"activator\"},[_c('v-icon',[_vm._v(\"fa-cog\")])],1)],1),_vm._v(\" \"),_c('v-dialog',{attrs:{\"max-width\":\"400px\"},model:{value:(_vm.toolDialog),callback:function ($$v) {_vm.toolDialog=$$v},expression:\"toolDialog\"}},[_c('v-card',[_c('v-card-text',{staticClass:\"text-xs-center\"},[_c('h2',[_vm._v(\"Settings\")])]),_vm._v(\" \"),_c('v-card-text',[_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',[_vm._v(\"Enable Mouse Controls*\")]),_vm._v(\" \"),_c('span',[_c('v-switch',{attrs:{\"color\":\"yellow darken-4\"},model:{value:(_vm.mouseEnabled),callback:function ($$v) {_vm.mouseEnabled=$$v},expression:\"mouseEnabled\"}})],1)],1),_vm._v(\" \"),_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',[_vm._v(\"Show HP Bars*\")]),_vm._v(\" \"),_c('span',[_c('v-switch',{attrs:{\"color\":\"yellow darken-4\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.toggleHPBars($event)}},model:{value:(_vm.userSettings.hpBars),callback:function ($$v) {_vm.$set(_vm.userSettings, \"hpBars\", $$v)},expression:\"userSettings.hpBars\"}})],1)],1),_vm._v(\" \"),_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',[_vm._v(\"Enable attacking animations*\")]),_vm._v(\" \"),_c('span',[_c('v-switch',{attrs:{\"color\":\"yellow darken-4\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.toggleAnimations($event)}},model:{value:(_vm.userSettings.animationsEnabled),callback:function ($$v) {_vm.$set(_vm.userSettings, \"animationsEnabled\", $$v)},expression:\"userSettings.animationsEnabled\"}})],1)],1)],1),_vm._v(\" \"),_c('v-card-actions',[_c('small',[_vm._v(\"* may cause performance issues\")]),_vm._v(\" \"),_c('v-spacer'),_vm._v(\" \"),_c('v-btn',{attrs:{\"color\":\"yellow darken-4\",\"flat\":\"\"},on:{\"click\":function($event){$event.stopPropagation();_vm.toolDialog=false}}},[_vm._v(\"Close\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-75c26cd8\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ToolDialog.vue\n// module id = null\n// module chunks = ","<style>\r\n#hud_container .hud_tabs_card {\r\n\tbackground-color: #2a2a2a;\r\n}\r\n\r\n.hud_tab {\r\n\tbackground-color: #294646;\r\n}\r\n\r\n.hud_container {\r\n\tcolor: white;\r\n\tfont-size: 13px;\r\n\tmax-width: 440px;\r\n\tborder-left: 4px solid #4f4f4f;\r\n\tbackground-color: #1e1f1f;\r\n\tpadding: 0px;\r\n\t/* margin-left: 20px; */\r\n}\r\n\r\n#hpBar {\r\n\tborder: solid 2px hsl(0, 59%, 40%);\r\n\tborder-radius: 2px;\r\n}\r\n\r\n#manaBar {\r\n\tborder: solid 2px rgb(20, 99, 177);\r\n\tborder-radius: 2px;\r\n}\r\n\r\n.statsBar {\r\n\t/*border : solid 2px goldenrod;*/\r\n\t/*border-radius: 2px;*/\r\n}\r\n\r\n.xpCircleFont {\r\n\tfont-size: 5px;\r\n}\r\n\r\n/* .v-tab-card {\r\n\tmin-height: 103px;\r\n} */\r\n</style>\r\n\r\n<template>\r\n\t<v-flex class=\"hud_container elevation-0\" column>\r\n\t    <v-container fluid class=\"pa-2\">\r\n\t      <!-- Health Bar -->\r\n\t      <v-layout align-center style=\"margin-bottom: -20px; margin-top: -10px\">\r\n          <v-flex style=\"min-width: 75px;\" md1 ><b>Health </b></v-flex>\r\n          <v-flex md8>\r\n              <v-progress-linear id=\"hpBar\" color=\"error\" :value=\"(getHP() / getMaxHP()) * 100\" height=\"15\"></v-progress-linear>\r\n          </v-flex>\r\n          <v-flex md3 class=\"text-xs-center\" style=\"padding-left: 5px;\">{{getHP()}} / {{getMaxHP()}}</v-flex>\r\n\t\t  \t\t<v-flex>\r\n\t\t  \t\t\t<help-dialog></help-dialog>\r\n\t\t  \t\t</v-flex>\r\n\t      </v-layout>\r\n\r\n\t      <!-- Magic Bar -->\r\n\t      <v-layout align-center>\r\n\t        <v-flex md1 style=\"min-width: 75px;\" ><b>Magic</b></v-flex>\r\n\t        <v-flex md8 >\r\n\t            <v-progress-linear id=\"manaBar\" :value=\"(getMana() / getMaxMana()) * 100\" height=\"15\" info></v-progress-linear>\r\n\t        </v-flex>\r\n\t        <v-flex md3 class=\"text-xs-center\" style=\"padding-left: 5px;\">{{getMana()}} / {{getMaxMana()}}</v-flex>\r\n\t        <v-flex>\r\n\t\t\t\t\t\t<tool-dialog></tool-dialog>\r\n\t\t\t\t\t</v-flex>\r\n\t      </v-layout>\r\n\r\n\t\t\t\t<v-layout >\r\n\t\t\t\t\t<stats></stats>\r\n\t\t\t\t</v-layout>\r\n\r\n\t      <!-- Current World -->\r\n\t      <v-layout align-center class=\"mt-2\">\r\n          <v-flex xs6><b>Location:</b> {{getCurrentLevel().capitalize()}}</v-flex>\r\n          <v-flex xs4 class=\"pl-3\" v-if=\"getCurrentLevelDepth() > 0\" ><b>Level:</b> {{getCurrentLevelDepth()}}</v-flex>\r\n\t      </v-layout>\r\n\r\n\r\n\t      <!-- Mini-map -->\r\n\t      <v-layout class=\"text-xs-center\" >\r\n          <v-flex xs10 fluid id=\"minimap_container\"></v-flex>\r\n\t      </v-layout>\r\n\r\n\t\t\t\t<!--  Placeholder Row for stuff -->\r\n\t\t\t\t<v-layout class=\"pt-1\" style=\"min-height: 145px;\" v-if=\"showEquipment\">\r\n\t\t\t\t\t<equipment></equipment>\r\n\t\t\t\t</v-layout>\r\n\r\n\t\t\t\t<!-- Spells  -->\r\n\t\t\t\t<v-layout >\r\n\t\t\t\t\t<spellbook></spellbook>\r\n\t\t\t\t</v-layout>\r\n\r\n\t      <!-- Inventory -->\r\n\t\t\t\t<v-layout class=\"mt-1\">\r\n\t\t\t\t\t<inventory></inventory>\r\n\t\t\t\t</v-layout>\r\n\t    </v-container>\r\n\t</v-flex>\r\n</template>\r\n\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\nimport inventory from './Inventory.vue'\r\nimport enemyOverview from './EnemyOverview.vue'\r\nimport minimap from './Minimap.vue'\r\nimport stats from './HUD/Stats.vue'\r\nimport spellBook from './HUD/Spellbook.vue'\r\nimport equipment from './HUD/Equipment.vue'\r\n\r\nimport helpDialog from '@/components/HelpDialog.vue'\r\nimport toolDialog from '@/components/ToolDialog.vue'\r\n\r\nexport default {\r\n\tprops: ['showEquipment'],\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tactiveTab: null,\r\n\t\t\tcurrentLevel: Game.currentLevel,\r\n\t\t\tcb: Game.player.cb,\r\n\t\t\tequipment: Game.player.cb.equipment // head, torso, legs, weapon, ammo\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tgetHP() {\r\n\t\t\treturn Game.player.cb.hp\r\n\t\t},\r\n\t\tgetMaxHP() {\r\n\t\t\treturn Game.player.cb.maxhp\r\n\t\t},\r\n\t\tgetMana() {\r\n\t\t\treturn Game.player.cb.mana\r\n\t\t},\r\n\t\tgetMaxMana() {\r\n\t\t\treturn Game.player.cb.maxmana\r\n\t\t},\r\n\t\tgetCurrentLevel() {\r\n\t\t\tlet levelName = Game.currentLevel.name\r\n\t\t\treturn levelName\r\n\t\t},\r\n\t\tgetCurrentLevelDepth() {\r\n\t\t\treturn Game.currentLevel.depth\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t\tinventory: inventory,\r\n\t\t'enemy-overview': enemyOverview,\r\n\t\t'mini-map': minimap,\r\n\t\tstats: stats,\r\n\t\tspellbook: spellBook,\r\n\t\t'help-dialog': helpDialog,\r\n\t\t'tool-dialog': toolDialog,\r\n\t\tequipment: equipment\r\n\t},\r\n\tcreated() {}\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/HUD.vue","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ToolDialog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ToolDialog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-75c26cd8\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ToolDialog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ToolDialog.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-flex',{staticClass:\"hud_container elevation-0\",attrs:{\"column\":\"\"}},[_c('v-container',{staticClass:\"pa-2\",attrs:{\"fluid\":\"\"}},[_c('v-layout',{staticStyle:{\"margin-bottom\":\"-20px\",\"margin-top\":\"-10px\"},attrs:{\"align-center\":\"\"}},[_c('v-flex',{staticStyle:{\"min-width\":\"75px\"},attrs:{\"md1\":\"\"}},[_c('b',[_vm._v(\"Health \")])]),_vm._v(\" \"),_c('v-flex',{attrs:{\"md8\":\"\"}},[_c('v-progress-linear',{attrs:{\"id\":\"hpBar\",\"color\":\"error\",\"value\":(_vm.getHP() / _vm.getMaxHP()) * 100,\"height\":\"15\"}})],1),_vm._v(\" \"),_c('v-flex',{staticClass:\"text-xs-center\",staticStyle:{\"padding-left\":\"5px\"},attrs:{\"md3\":\"\"}},[_vm._v(_vm._s(_vm.getHP())+\" / \"+_vm._s(_vm.getMaxHP()))]),_vm._v(\" \"),_c('v-flex',[_c('help-dialog')],1)],1),_vm._v(\" \"),_c('v-layout',{attrs:{\"align-center\":\"\"}},[_c('v-flex',{staticStyle:{\"min-width\":\"75px\"},attrs:{\"md1\":\"\"}},[_c('b',[_vm._v(\"Magic\")])]),_vm._v(\" \"),_c('v-flex',{attrs:{\"md8\":\"\"}},[_c('v-progress-linear',{attrs:{\"id\":\"manaBar\",\"value\":(_vm.getMana() / _vm.getMaxMana()) * 100,\"height\":\"15\",\"info\":\"\"}})],1),_vm._v(\" \"),_c('v-flex',{staticClass:\"text-xs-center\",staticStyle:{\"padding-left\":\"5px\"},attrs:{\"md3\":\"\"}},[_vm._v(_vm._s(_vm.getMana())+\" / \"+_vm._s(_vm.getMaxMana()))]),_vm._v(\" \"),_c('v-flex',[_c('tool-dialog')],1)],1),_vm._v(\" \"),_c('v-layout',[_c('stats')],1),_vm._v(\" \"),_c('v-layout',{staticClass:\"mt-2\",attrs:{\"align-center\":\"\"}},[_c('v-flex',{attrs:{\"xs6\":\"\"}},[_c('b',[_vm._v(\"Location:\")]),_vm._v(\" \"+_vm._s(_vm.getCurrentLevel().capitalize()))]),_vm._v(\" \"),(_vm.getCurrentLevelDepth() > 0)?_c('v-flex',{staticClass:\"pl-3\",attrs:{\"xs4\":\"\"}},[_c('b',[_vm._v(\"Level:\")]),_vm._v(\" \"+_vm._s(_vm.getCurrentLevelDepth()))]):_vm._e()],1),_vm._v(\" \"),_c('v-layout',{staticClass:\"text-xs-center\"},[_c('v-flex',{attrs:{\"xs10\":\"\",\"fluid\":\"\",\"id\":\"minimap_container\"}})],1),_vm._v(\" \"),(_vm.showEquipment)?_c('v-layout',{staticClass:\"pt-1\",staticStyle:{\"min-height\":\"145px\"}},[_c('equipment')],1):_vm._e(),_vm._v(\" \"),_c('v-layout',[_c('spellbook')],1),_vm._v(\" \"),_c('v-layout',{staticClass:\"mt-1\"},[_c('inventory')],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6fd256be\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/HUD.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6fd256be\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./HUD.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./HUD.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./HUD.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6fd256be\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./HUD.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/HUD.vue\n// module id = null\n// module chunks = ","<template>\r\n  <v-dialog v-if=\"playerIsDead()\" v-model=\"deathDialog\"  persistent max-width=\"600px\">\r\n    <v-card>\r\n      <v-card-text class=\"text-xs-center\">\r\n        <h1 class=\"red--text lighten-1\">\r\n            You have died!\r\n        </h1>\r\n      </v-card-text>\r\n      <v-card-text>\r\n        <v-layout>\r\n\r\n          <v-flex id=\"death_text\">\r\n              You played for {{cb.turnsTaken}} turns.\r\n              <p />\r\n\r\n              You were level {{cb.level}}.\r\n              Your strength was level {{cb.str}}.\r\n              <p />\r\n\r\n              You knew {{formatNoOrMultiple(\"spell\", cb.spells.length, \"spells\")}}.\r\n              You casted {{formatNoOrMultiple(\"spell\", cb.spellsCast, \"spells\")}}.\r\n              <p />\r\n\r\n              You dealt {{cb.damageDealt}} damage. You received {{cb.damageTaken}} damage.\r\n              <p />\r\n\r\n              You recovered {{formatNoOrMultiple(\"heath point\", cb.healthRestored, \"health points\")}}.\r\n              You consumed {{formatNoOrMultiple(\"potion\", cb.potionsConsumed, \"potions\")}}.\r\n              <p />\r\n\r\n              You defeated {{formatNoOrMultiple(\"enemy\", cb.enemiesKilled, \"enemies\")}}.\r\n              <p />\r\n\r\n              You explored {{formatNoOrMultiple(\"dungeon floor\", cb.dungeonsExplored, \"dungeon floors\")}}.\r\n              You looted {{formatNoOrMultiple(\"treasure chest\", cb.chestsOpened, \"treasure chests\")}}.\r\n              <p />\r\n\r\n          </v-flex>\r\n        </v-layout>\r\n      </v-card-text>\r\n      <v-card-actions>\r\n        <img src=\"static/images/death_icons/tombstone.png\" width=\"100px\" height=\"100px\" />\r\n        <v-spacer />\r\n        <v-btn color=\"green darken-3\" raised @click.stop=\"startNewGame()\">Play Again</v-btn>\r\n        <v-spacer />\r\n        <img src=\"static/images/death_icons/hasty-grave.png\" width=\"120px\" height=\"100px\" />\r\n      </v-card-actions>\r\n    </v-card>\r\n  </v-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\n/* import other components here */\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tcb: Game.player.cb,\r\n\t\t\tdead: Game.player.cb.dead,\r\n\t\t\tdeathDialog: true\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tstartNewGame() {\r\n\t\t\tlocation.reload()\r\n\t\t},\r\n\t\tformatNoOrMultiple(s, n, pluralString) {\r\n\t\t\treturn `${n === 0 ? 'no' : n} ${n === 1 ? s : pluralString}`\r\n\t\t},\r\n\t\tplayerIsDead() {\r\n\t\t\treturn Game.player.isDead()\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n<style>\r\n#death_text {\r\n\t/* background-image: url('/static/images/tombstone.png');\r\n\tbackground-size: 200px 150px;\r\n\tbackground-repeat: no-repeat;\r\n\tbackground-position: center; */\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/DeathModal.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.playerIsDead())?_c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"600px\"},model:{value:(_vm.deathDialog),callback:function ($$v) {_vm.deathDialog=$$v},expression:\"deathDialog\"}},[_c('v-card',[_c('v-card-text',{staticClass:\"text-xs-center\"},[_c('h1',{staticClass:\"red--text lighten-1\"},[_vm._v(\"\\n          You have died!\\n      \")])]),_vm._v(\" \"),_c('v-card-text',[_c('v-layout',[_c('v-flex',{attrs:{\"id\":\"death_text\"}},[_vm._v(\"\\n            You played for \"+_vm._s(_vm.cb.turnsTaken)+\" turns.\\n            \"),_c('p'),_vm._v(\"\\n\\n            You were level \"+_vm._s(_vm.cb.level)+\".\\n            Your strength was level \"+_vm._s(_vm.cb.str)+\".\\n            \"),_c('p'),_vm._v(\"\\n\\n            You knew \"+_vm._s(_vm.formatNoOrMultiple(\"spell\", _vm.cb.spells.length, \"spells\"))+\".\\n            You casted \"+_vm._s(_vm.formatNoOrMultiple(\"spell\", _vm.cb.spellsCast, \"spells\"))+\".\\n            \"),_c('p'),_vm._v(\"\\n\\n            You dealt \"+_vm._s(_vm.cb.damageDealt)+\" damage. You received \"+_vm._s(_vm.cb.damageTaken)+\" damage.\\n            \"),_c('p'),_vm._v(\"\\n\\n            You recovered \"+_vm._s(_vm.formatNoOrMultiple(\"heath point\", _vm.cb.healthRestored, \"health points\"))+\".\\n            You consumed \"+_vm._s(_vm.formatNoOrMultiple(\"potion\", _vm.cb.potionsConsumed, \"potions\"))+\".\\n            \"),_c('p'),_vm._v(\"\\n\\n            You defeated \"+_vm._s(_vm.formatNoOrMultiple(\"enemy\", _vm.cb.enemiesKilled, \"enemies\"))+\".\\n            \"),_c('p'),_vm._v(\"\\n\\n            You explored \"+_vm._s(_vm.formatNoOrMultiple(\"dungeon floor\", _vm.cb.dungeonsExplored, \"dungeon floors\"))+\".\\n            You looted \"+_vm._s(_vm.formatNoOrMultiple(\"treasure chest\", _vm.cb.chestsOpened, \"treasure chests\"))+\".\\n            \"),_c('p')])],1)],1),_vm._v(\" \"),_c('v-card-actions',[_c('img',{attrs:{\"src\":\"static/images/death_icons/tombstone.png\",\"width\":\"100px\",\"height\":\"100px\"}}),_vm._v(\" \"),_c('v-spacer'),_vm._v(\" \"),_c('v-btn',{attrs:{\"color\":\"green darken-3\",\"raised\":\"\"},on:{\"click\":function($event){$event.stopPropagation();_vm.startNewGame()}}},[_vm._v(\"Play Again\")]),_vm._v(\" \"),_c('v-spacer'),_vm._v(\" \"),_c('img',{attrs:{\"src\":\"static/images/death_icons/hasty-grave.png\",\"width\":\"120px\",\"height\":\"100px\"}})],1)],1)],1):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-83aab74c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/DeathModal.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-83aab74c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./DeathModal.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./DeathModal.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./DeathModal.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-83aab74c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./DeathModal.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/DeathModal.vue\n// module id = null\n// module chunks = ","<template>\r\n  <v-app dark class=\"black\">\r\n    <v-content>\r\n      <v-container v-show=\"playerSelected\"  class=\"mt-3\" id=\"main_container\" :style=\"{'max-width': uiWidth+6, 'max-height': uiHeight+6}\">\r\n          <!--  Notifications -->\r\n          <v-layout row v-if=\"unstableBuildMessage\">\r\n            <v-flex xs12>\r\n              <v-alert color=\"yellow darken-4\" type=\"warning\" dismissible v-model=\"unstableBuildMessage\">\r\n                This build is unstable. A lot of working is going on under the hood. Expect lots of broken, weird things!\r\n              </v-alert>\r\n            </v-flex>\r\n          </v-layout>\r\n          <!-- Game Display and HUD-->\r\n          <v-layout  row id=\"ui\" :style=\"{'max-width': uiWidth, 'max-height': uiHeight}\">\r\n            <v-flex column :style=\"{'max-width': gameDisplayWidth}\">\r\n              <v-layout id=\"game_container_row\" :style=\"{'max-height': gameDisplayHeight}\">\r\n                <div id=\"game_container\" />\r\n              </v-layout>\r\n              <message-log v-if=\"playerSelected\"></message-log>\r\n            </v-flex>\r\n            <hud v-if=\"playerSelected\" :showEquipment=\"showFooter\"></hud>\r\n          </v-layout>\r\n          <death-modal v-if=\"playerSelected\"></death-modal>\r\n      </v-container>\r\n      <start-menu v-show=\"!playerSelected\" v-on:spriteSelected=\"loadGame\"></start-menu>\r\n    </v-content>\r\n    <v-footer app v-if=\"showFooter\">\r\n      <small class=\"pl-2\">RottenSoup</small>\r\n      <v-btn target=\"_blank\" href=\"https://github.com/Larkenx/Rotten-Soup\" icon ripple>\r\n        <v-icon>fa-github</v-icon>\r\n      </v-btn>\r\n    </v-footer>\r\n  </v-app>\r\n</template>\r\n\r\n<script>\r\nimport { Game } from '@/assets/js/game/Game.js'\r\n// components\r\nimport startMenu from './components/StartMenu.vue'\r\nimport gameDisplay from './components/GameDisplay.vue'\r\nimport itemTransferModal from './components/ItemTransferModal.vue'\r\nimport hud from './components/HUD.vue'\r\nimport deathModal from './components/DeathModal.vue'\r\nimport helpDialog from './components/HelpDialog.vue'\r\nimport messageLog from './components/MessageLog.vue'\r\n// DEBUG: Imports to export to window\r\nwindow.Game = Game\r\nlet { innerWidth, innerHeight } = window\r\nlet uiWidth = '1470px'\r\nlet uiHeight = '823px'\r\nlet showFooter = true\r\nlet gameDisplayWidth = '1024px'\r\nlet gameDisplayHeight = '640px'\r\nif (innerWidth <= 1400 || innerHeight <= 800) {\r\n\tuiWidth = '1240px'\r\n\tuiHeight = '750px'\r\n\tshowFooter = false\r\n\tgameDisplayWidth = '800px'\r\n\tgameDisplayHeight = '500px'\r\n}\r\n\r\nexport default {\r\n\tname: 'app',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tmouseControls: false,\r\n\t\t\tloading: true,\r\n\t\t\tplayerSelected: false,\r\n\t\t\tunstableBuildMessage: false,\r\n\t\t\tuiWidth,\r\n\t\t\tuiHeight,\r\n\t\t\tgameDisplayWidth,\r\n\t\t\tgameDisplayHeight,\r\n\t\t\tshowFooter\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\twindow.addEventListener('resize', this.recomputeSize)\r\n\t},\r\n\tbeforeDestroy() {\r\n\t\twindow.removeEventListener('resize', this.recomputeSize)\r\n\t},\r\n\tcomponents: {\r\n\t\t'start-menu': startMenu,\r\n\t\t'game-display': gameDisplay,\r\n\t\thud: hud,\r\n\t\t'item-transfer-modal': itemTransferModal,\r\n\t\t'death-modal': deathModal,\r\n\t\t'help-dialog': helpDialog,\r\n\t\t'message-log': messageLog\r\n\t},\r\n\tcreated() {\r\n\t\t// this.loadGame(4219)\r\n\t},\r\n\tmethods: {\r\n\t\tloadGame(id) {\r\n\t\t\tthis.playerSelected = true\r\n\t\t\tGame.init(id)\r\n\t\t\tGame.log('Welcome to Rotten Soup!', 'information')\r\n\t\t\tGame.log('Press ? to view the controls.', 'player_move')\r\n\t\t},\r\n\t\trecomputeSize(evt) {\r\n\t\t\tconsole.log('resizing!')\r\n\t\t\tthis.uiWidth = '1470px'\r\n\t\t\tthis.uiHeight = '823px'\r\n\t\t\tthis.showFooter = true\r\n\t\t\tthis.gameDisplayWidth = '1024px'\r\n\t\t\tthis.gameDisplayHeight = '640px'\r\n\t\t\tif (window.innerWidth <= 1400 || window.innerHeight <= 800) {\r\n\t\t\t\tthis.uiWidth = '1240px'\r\n\t\t\t\tthis.uiHeight = '750px'\r\n\t\t\t\tthis.showFooter = false\r\n\t\t\t\tthis.gameDisplayWidth = '800px'\r\n\t\t\t\tthis.gameDisplayHeight = '500px'\r\n\t\t\t}\r\n\t\t\tGame.display.resize()\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n@import url('https://fonts.googleapis.com/css?family=Droid+Sans+Mono|PT+Mono');\r\n.black {\r\n\tbackground-color: black;\r\n}\r\n\r\nhtml {\r\n\toverflow: hidden;\r\n}\r\n\r\n* {\r\n\tfont-family: 'Droid Sans Mono', monospace;\r\n\t-webkit-touch-callout: none;\r\n\t/* iOS Safari */\r\n\t-webkit-user-select: none;\r\n\t/* Safari */\r\n\t-khtml-user-select: none;\r\n\t/* Konqueror HTML */\r\n\t-moz-user-select: none;\r\n\t/* Firefox */\r\n\t-ms-user-select: none;\r\n\t/* Internet Explorer/Edge */\r\n\tuser-select: none;\r\n}\r\n\r\n#main_container {\r\n\tmax-width: 1470px;\r\n\tpadding: 0px;\r\n}\r\n\r\n#ui {\r\n\tborder: 3px solid #4f4f4f;\r\n\tbackground-color: #1e1f1f;\r\n\tborder-radius: 4px;\r\n}\r\n\r\n#game_container_row {\r\n\theight: 640px;\r\n\tmax-height: 640px;\r\n}\r\n\r\n.test {\r\n\tbackground-color: #824d03;\r\n}\r\n\r\n/* Overriding Vuetify's tool tip so that it is centered :) */\r\n\r\n[data-tooltip] {\r\n\tposition: relative;\r\n\ttext-align: center;\r\n}\r\n\r\n.modal {\r\n\tborder: 2px solid #3d3d3d;\r\n\tborder-radius: 4px;\r\n\tbackground-color: black;\r\n\tcolor: white;\r\n\twidth: 400px;\r\n\tpadding: 10px;\r\n\t/*height: 600px;*/\r\n\tposition: absolute;\r\n\tleft: 20%;\r\n\ttop: 25%;\r\n\t/*margin-left: -150px;*/\r\n\tz-index: 2;\r\n\t/*margin-top: -150px;*/\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{staticClass:\"black\",attrs:{\"dark\":\"\"}},[_c('v-content',[_c('v-container',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.playerSelected),expression:\"playerSelected\"}],staticClass:\"mt-3\",style:({'max-width': _vm.uiWidth+6, 'max-height': _vm.uiHeight+6}),attrs:{\"id\":\"main_container\"}},[(_vm.unstableBuildMessage)?_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-alert',{attrs:{\"color\":\"yellow darken-4\",\"type\":\"warning\",\"dismissible\":\"\"},model:{value:(_vm.unstableBuildMessage),callback:function ($$v) {_vm.unstableBuildMessage=$$v},expression:\"unstableBuildMessage\"}},[_vm._v(\"\\n              This build is unstable. A lot of working is going on under the hood. Expect lots of broken, weird things!\\n            \")])],1)],1):_vm._e(),_vm._v(\" \"),_c('v-layout',{style:({'max-width': _vm.uiWidth, 'max-height': _vm.uiHeight}),attrs:{\"row\":\"\",\"id\":\"ui\"}},[_c('v-flex',{style:({'max-width': _vm.gameDisplayWidth}),attrs:{\"column\":\"\"}},[_c('v-layout',{style:({'max-height': _vm.gameDisplayHeight}),attrs:{\"id\":\"game_container_row\"}},[_c('div',{attrs:{\"id\":\"game_container\"}})]),_vm._v(\" \"),(_vm.playerSelected)?_c('message-log'):_vm._e()],1),_vm._v(\" \"),(_vm.playerSelected)?_c('hud',{attrs:{\"showEquipment\":_vm.showFooter}}):_vm._e()],1),_vm._v(\" \"),(_vm.playerSelected)?_c('death-modal'):_vm._e()],1),_vm._v(\" \"),_c('start-menu',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.playerSelected),expression:\"!playerSelected\"}],on:{\"spriteSelected\":_vm.loadGame}})],1),_vm._v(\" \"),(_vm.showFooter)?_c('v-footer',{attrs:{\"app\":\"\"}},[_c('small',{staticClass:\"pl-2\"},[_vm._v(\"RottenSoup\")]),_vm._v(\" \"),_c('v-btn',{attrs:{\"target\":\"_blank\",\"href\":\"https://github.com/Larkenx/Rotten-Soup\",\"icon\":\"\",\"ripple\":\"\"}},[_c('v-icon',[_vm._v(\"fa-github\")])],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-083ae5e2\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-083ae5e2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-083ae5e2\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\r\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\r\n\r\nimport Vue from 'vue'\r\nimport App from './App'\r\nimport Vuetify from 'vuetify'\r\nimport 'vuetify/dist/vuetify.min.css'\r\n\r\nVue.use(Vuetify)\r\n\r\nVue.config.productionTip = false\r\n\r\n/* eslint-disable no-new */\r\nnew Vue({\r\n\tel: '#app',\r\n\tcomponents: { App },\r\n\ttemplate: '<App/>'\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}