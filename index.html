<!DOCTYPE html>
<html>
<head>
    <title>Rotten Soup</title>
    <!-- Vue -->
    <script src="assets/js/vue.js"></script>
    <!-- Vuetify -->
    <link href="assets/css/vuetify.min.css" rel="stylesheet" type="text/css">
    <script src="assets/js/vuetify.min.js"></script>
    <!-- Local app files -->
    <script src="assets/js/rot.min.js"></script>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/game/actors.js"></script>
    <script src="assets/js/game/utils.js"></script>
    <script src="assets/maps/expanded_start.js"></script>
    <script src="assets/js/game/game.js"></script>

</head>
<body>
<div id="app" style="width: 100%; height: 100%;">
    <v-container style="padding-top: 0px; padding-bottom: 0px;">
        <!-- Game Display and HUD -->
        <v-layout row wrap style="padding: 0; margin:0;">
            <!-- Game Display-->
            <v-flex xs8 column style="padding: 0px;">
                <div style="margin:0; padding:0;" class="bordered" id="game_container"></div>
            </v-flex>
            <!-- HUD-->
            <v-flex class="bordered hud" xs4 column style="padding: 0px 0px 0px 10px; margin:0px 0px 0px -5px;" align-center>
                <!-- Mini-map -->
                <v-layout row>
                    <div id="minimap_container"></div>
                </v-layout>
                <!-- Health Bar -->
                <v-layout row align-center>
                    <v-flex xs2 col>
                        <b>Health </b>
                    </v-flex>
                    <v-flex xs7 col>
                        <v-progress-linear :value="(getHP() / getMaxHP()) * 100" height="10" error></v-progress-linear>
                    </v-flex>
                    <v-flex xs3 col>
                        {{getHP()}} / {{getMaxHP()}}
                    </v-flex>
                </v-layout>
                <!-- Magic Bar -->
                <v-layout row align-center>
                    <v-flex xs2 col>
                        <b>Mana</b>
                    </v-flex>
                    <v-flex xs7 col>
                        <v-progress-linear :value="(getMana() / getMaxMana()) * 100" height="10"
                                           info></v-progress-linear>
                    </v-flex>
                    <v-flex xs3 col>
                        {{getMana()}} / {{getMaxMana()}}
                    </v-flex>
                </v-layout>
            </v-flex>
        </v-layout>
        <!-- Game Console / Messages -->
        <v-layout row style="padding: 0px; margin:-5px 5px 0px 0px;">
            <v-list id="fix_scroll" class="bordered hud console" style="overflow:scroll; padding: 8px; position: relative;">
                <v-list-item v-for="(message, index) in getMessages()" v-bind:key="index">
                    <p><b v-bind:style="{color : message[1]}">{{message[0]}}</b></p>
                </v-list-item>
            </v-list>
        </v-layout>
    </v-container>

</div>

<script>
    new Vue({
        el: '#app',
        data: {
            game: Game,
            messages: Game.message_history
        },
        methods: {
            getHP () {
                return Game.player.cb.hp;
            },
            getMaxHP() {
                return Game.player.cb.maxhp;
            },
            getMana() {
                return Game.player.cb.mana;
            },
            getMaxMana() {
                return Game.player.cb.maxmana;
            },
            getStamina() {
                return Game.player.cb.stamina;
            },
            getMaxStamina() {
                return Game.player.cb.maxstamina;
            },
            getMessages() {
                return Game.message_history;
            }

        },
        created () {
            Game.init();
        },
        mounted () {
            $('#game_container').html(Game.display.getContainer());
            $('#minimap_container').html(Game.minimap.getContainer());

        },
    })
</script>
</body>
</html>
<style>
    body {
        line-height: 0;
        background-color: black;
    }

    .console {
        width: 100%;
        height: 150px;
    }

    .hud {
        background-color: black;
        color: white;
    }

    .bordered {
        padding: 0px;
        margin: 0px;
        border-style: solid;
        border-width: 5px;
        border-color: darkgrey;
    }
    something {
        color: #b8b8b8;
    }

    canvas {
        padding: 0;
        margin: 0;
    }
</style>
